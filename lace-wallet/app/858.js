!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="93ffa573-8237-44a8-bc24-3f7d88cfcb79",e._sentryDebugIdIdentifier="sentry-dbid-93ffa573-8237-44a8-bc24-3f7d88cfcb79")}catch(a){}}();var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};e.SENTRY_RELEASE={id:"1.30.0-9d9ec3a"};"use strict";(self["webpackChunk_lace_browser_extension_wallet"]=self["webpackChunk_lace_browser_extension_wallet"]||[]).push([[858],{"../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/views/nami-mode/index.scss":(e,t,a)=>{a.d(t,{default:()=>i});var s=a("../../node_modules/css-loader/dist/runtime/sourceMaps.js");var o=a.n(s);var n=a("../../node_modules/css-loader/dist/runtime/api.js");var l=a.n(n);var r=l()(o());r.push([e.id,"#nami-mode{width:100vw;height:100%;font-family:sans-serif}html{overflow:hidden}html[data-theme=dark] body:has(#nami-mode) *::selection{background:#375479;background-color:#375479;color:#f8fbfb}body:has(#nami-mode){font-family:sans-serif !important}body:has(#nami-mode) *::selection{background:#b5d7ff;background-color:#b5d7ff;color:#19202b}","",{version:3,sources:["webpack://./src/views/nami-mode/index.scss"],names:[],mappings:"AAAA,WACE,WAAA,CACA,WAAA,CACA,sBAAA,CAGF,KACE,eAAA,CAKE,wDACE,kBAAA,CACA,wBAAA,CACA,aAAA,CAKN,qBACE,iCAAA,CAEA,kCACE,kBAAA,CACA,wBAAA,CACA,aAAA",sourcesContent:["#nami-mode {\n  width: 100vw;\n  height: 100%;\n  font-family: sans-serif;\n}\n\nhtml {\n  overflow: hidden;\n}\n\nhtml[data-theme='dark'] {\n  body:has(#nami-mode) {\n    *::selection {\n      background: #375479;\n      background-color: #375479;\n      color: #f8fbfb;\n    }\n  }\n}\n\nbody:has(#nami-mode) {\n  font-family: sans-serif !important;\n\n  *::selection {\n    background: #b5d7ff;\n    background-color: #b5d7ff;\n    color: #19202b;\n  }\n}\n"],sourceRoot:""}]);const i=r},"./src/assets/branding/lace-logo-dark-mode.svg":(e,t,a)=>{a.d(t,{default:()=>s});const s=a.p+"5047b70730f76890df6f5ce9a3079353.svg"},"./src/assets/branding/lace-logo.svg":(e,t,a)=>{a.d(t,{default:()=>s});const s=a.p+"edf5a07747f933efc900fbbcd8a864a6.svg"},"./src/components/Announcement/Announcement.module.scss":(e,t,a)=>{a.d(t,{default:()=>w});var s=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var o=a.n(s);var n=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var l=a.n(n);var r=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var i=a.n(r);var c=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var d=a.n(c);var u=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var m=a.n(u);var v=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var k=a.n(v);var g=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/components/Announcement/Announcement.module.scss");var E={};E.styleTagTransform=k();E.setAttributes=d();E.insert=i().bind(null,"head");E.domAPI=l();E.insertStyleElement=m();var p=o()(g["default"],E);const w=g["default"]&&g["default"].locals?g["default"].locals:void 0},"./src/components/Announcement/ReleaseNotes.tsx":(e,t,a)=>{a.d(t,{fetchNotes:()=>fetchNotes});const convertVersionFormat=e=>e.replace(/\./g,"_");const fetchNotes=async e=>{const t=await a("./src/release-notes eager recursive ^\\.\\/.*\\.tsx$")(`./${convertVersionFormat(e)}.tsx`);return t.default}},"./src/components/ExpandButton/ExpandButton.tsx":(e,t,a)=>{a.d(t,{ExpandButton:()=>ExpandButton});var s=a("../../node_modules/react/index.js");var o;function _extends(){_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))e[s]=a[s]}return e};return _extends.apply(this,arguments)}var SvgExpandcomponent=function SvgExpandcomponent(e){return s.createElement("svg",_extends({width:"1em",height:"1em",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=s.createElement("path",{d:"M3.5 8a1 1 0 0 0 2 0h-2Zm1-4V3a1 1 0 0 0-1 1h1Zm4 1a1 1 0 0 0 0-2v2Zm11 3a1 1 0 1 0 2 0h-2Zm1-4h1a1 1 0 0 0-1-1v1Zm-4-1a1 1 0 1 0 0 2V3Zm-11 13a1 1 0 1 0-2 0h2Zm-1 4h-1a1 1 0 0 0 1 1v-1Zm4 1a1 1 0 1 0 0-2v2Zm1.707-5.293a1 1 0 0 0-1.414-1.414l1.414 1.414Zm4.586-7.414a1 1 0 0 0 1.414 1.414l-1.414-1.414Zm-6 1.414a1 1 0 0 0 1.414-1.414L8.793 9.707ZM20.5 20v1a1 1 0 0 0 1-1h-1Zm-4.293-5.707a1 1 0 0 0-1.414 1.414l1.414-1.414ZM21.5 16a1 1 0 1 0-2 0h2Zm-5 3a1 1 0 1 0 0 2v-2ZM5.5 8V4h-2v4h2Zm-1-3h4V3h-4v2Zm17 3V4h-2v4h2Zm-1-5h-4v2h4V3Zm-17 13v4h2v-4h-2Zm1 5h4v-2h-4v2Zm.707-.293 5-5-1.414-1.414-5 5 1.414 1.414Zm11-11 5-5-1.414-1.414-5 5 1.414 1.414Zm-6-1.414-5-5-1.414 1.414 5 5 1.414-1.414Zm11 11-5-5-1.414 1.414 5 5 1.414-1.414ZM19.5 16v4h2v-4h-2Zm1 3h-4v2h4v-2Z",fill:"currentColor"})))};const n=SvgExpandcomponent;var l=a("../../node_modules/classnames/index.js");var r=a.n(l);var i=a("../../node_modules/antd/es/tooltip/index.js");var c=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var d=a.n(c);var u=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var m=a.n(u);var v=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var k=a.n(v);var g=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var E=a.n(g);var p=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var w=a.n(p);var f=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var S=a.n(f);var b=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/components/ExpandButton/ExpandButton.module.scss");var y={};y.styleTagTransform=S();y.setAttributes=E();y.insert=k().bind(null,"head");y.domAPI=m();y.insertStyleElement=w();var P=d()(b["default"],y);const _=b["default"]&&b["default"].locals?b["default"].locals:void 0;const RenderTooltipIfMultiWallet=({children:e,label:t})=>{if(true){return s.createElement(i["default"],{title:t},e)}return s.createElement(s.Fragment,null,e)};const ExpandButton=({label:e,onClick:t})=>s.createElement(RenderTooltipIfMultiWallet,{label:e},s.createElement("span",{onClick:t,className:r()(_.button,{[_.multiWallet]:true}),"data-testid":"expand-button"},s.createElement(n,{className:_.icon}),false))},"./src/components/NetworkPill/NetworkPill.tsx":(e,t,a)=>{a.d(t,{NetworkPill:()=>NetworkPill});var s=a("../../node_modules/react/index.js");var o=a("../../node_modules/classnames/index.js");var n=a.n(o);var l=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var r=a.n(l);var i=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var c=a.n(i);var d=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var u=a.n(d);var m=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var v=a.n(m);var k=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var g=a.n(k);var E=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var p=a.n(E);var w=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/components/NetworkPill/NetworkPill.module.scss");var f={};f.styleTagTransform=p();f.setAttributes=v();f.insert=u().bind(null,"head");f.domAPI=c();f.insertStyleElement=g();var S=r()(w["default"],f);const b=w["default"]&&w["default"].locals?w["default"].locals:void 0;var y=a("./src/stores/index.ts");var P=a("./src/hooks/index.ts");var _=a("../../node_modules/antd/es/tooltip/index.js");var C=a("../../node_modules/react-i18next/dist/es/index.js");var h=a("./src/multichain/index.ts");var A=a("./src/utils/get-network-name.ts");const NetworkPill=({isExpandable:e,isPopup:t=false})=>{const{environmentName:a}=(0,y.useWalletStore)();const{t:o}=(0,C.useTranslation)();const{isOnline:l,isBackendFailing:r}=(0,P.useNetwork)();const{blockchain:i}=(0,h.useCurrentBlockchain)();return(0,s.useMemo)(()=>{if(l&&!r&&i===h.Blockchain.Bitcoin&&(0,A.isBitcoinNetworkSwitchingDisabled)()){return s.createElement("div",{className:n()(b.networkPill,{[b.expandablePill]:e,[b.multiWallet]:t}),"data-testid":"network-pill"},s.createElement("span",{className:n()({[b.networkPillText]:e})},"Testnet4"))}if(l&&!r&&"Mainnet"!==a){return s.createElement("div",{className:n()(b.networkPill,{[b.expandablePill]:e,[b.multiWallet]:t}),"data-testid":"network-pill"},s.createElement("span",{className:n()({[b.networkPillText]:e})},(0,A.getNetworkName)(i,a)))}if(!l){return s.createElement(_["default"],{title:o("general.networks.error"),placement:"rightBottom"},s.createElement("div",{className:n()(b.offlinePill,{[b.expandablePill]:e,[b.multiWallet]:t}),"data-testid":"network-pill"},s.createElement("div",{className:b.offlinePillText},s.createElement("div",{className:b.dot},"•"),s.createElement("div",{"data-testid":"network-offline-indicator"},o("general.networks.offline")))))}if(r){return s.createElement(_["default"],{title:o("general.networks.connectionUnavailable.error"),placement:"rightBottom"},s.createElement("div",{className:n()(b.offlinePill,{[b.expandablePill]:e,[b.multiWallet]:t}),"data-testid":"backend-pill"},s.createElement("div",{className:b.offlinePillText},s.createElement("div",{className:b.dot},"•"),s.createElement("div",{"data-testid":"network-poor-indicator"},o("general.networks.connectionUnavailable.title")))))}return s.createElement(s.Fragment,null)},[l,r,a,o,e,i])}},"./src/components/PrivacyPolicyUpdate/PrivacyPolicyUpdate.module.scss":(e,t,a)=>{a.d(t,{default:()=>w});var s=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var o=a.n(s);var n=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var l=a.n(n);var r=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var i=a.n(r);var c=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var d=a.n(c);var u=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var m=a.n(u);var v=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var k=a.n(v);var g=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/components/PrivacyPolicyUpdate/PrivacyPolicyUpdate.module.scss");var E={};E.styleTagTransform=k();E.setAttributes=d();E.insert=i().bind(null,"head");E.domAPI=l();E.insertStyleElement=m();var p=o()(g["default"],E);const w=g["default"]&&g["default"].locals?g["default"].locals:void 0},"./src/features/dapp/context/context.ts":(e,t,a)=>{a.d(t,{DappContext:()=>o,useDappContext:()=>useDappContext});var s=a("../../node_modules/react/index.js");const o=(0,s.createContext)(null);const useDappContext=()=>{const e=(0,s.useContext)(o);if(null===e)throw new Error("DappContext is not defined.");return e}},"./src/features/unlock-wallet/index.ts":(e,t,a)=>{a.d(t,{UnlockWalletContainer:()=>UnlockWalletContainer});var s=a("../../node_modules/react/index.js");var o=a("./src/components/Layout/index.ts");var n=a("./src/assets/branding/lace-logo-mark.svg");var l=a("../../packages/common/dist/index.esm.js");var r=a("../../packages/core/dist/index.esm.js");var i=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var c=a.n(i);var d=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var u=a.n(d);var m=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var v=a.n(m);var k=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var g=a.n(k);var E=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var p=a.n(E);var w=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var f=a.n(w);var S=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/features/unlock-wallet/components/UnlockWallet.module.scss");var b={};b.styleTagTransform=f();b.setAttributes=g();b.insert=v().bind(null,"head");b.domAPI=u();b.insertStyleElement=p();var y=c()(S["default"],b);const P=S["default"]&&S["default"].locals?S["default"].locals:void 0;var _=a("../../node_modules/react-i18next/dist/es/index.js");var C=a("../../node_modules/antd/es/typography/index.js");var h=a("../../node_modules/antd/es/modal/index.js");var A=a("./src/utils/constants.ts");var R=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/features/unlock-wallet/components/ForgotPassword.module.scss");var T={};T.styleTagTransform=f();T.setAttributes=g();T.insert=v().bind(null,"head");T.domAPI=u();T.insertStyleElement=p();var x=c()(R["default"],T);const I=R["default"]&&R["default"].locals?R["default"].locals:void 0;var W=a("./src/providers/index.ts");var O=a("./src/providers/AnalyticsProvider/analyticsTracker/index.ts");const{Title:N,Text:j}=C["default"];const ForgotPassword=({onForgotPasswordClick:e})=>{const t=(0,W.useAnalyticsContext)();const[a,o]=(0,s.useState)(false);const{t:n}=(0,_.useTranslation)();const handleCancelClick=()=>{o(false);t.sendEventToPostHog(O.PostHogAction.UnlockWalletForgotPasswordCancelClick)};const handleForgotPasswordClick=()=>{o(true);t.sendEventToPostHog(O.PostHogAction.UnlockWalletWelcomeBackForgotPasswordClick)};return s.createElement(s.Fragment,null,s.createElement("div",{className:I.linkButton,onClick:handleForgotPasswordClick,"data-testid":"forgot-password-link"},n("unlock.forgotPassword")),s.createElement(h["default"],{centered:true,closable:false,footer:null,open:a,width:A.HW_POPUPS_WIDTH,className:I.modal},s.createElement(N,{level:3,className:I.title,"data-testid":"forgot-password-title"},n("forgotPassword.title")),s.createElement(j,{className:I.description,"data-testid":"forgot-password-description"}," ",n("forgotPassword.description")),s.createElement("div",{className:I.buttons},s.createElement(l.Button,{className:I.button,onClick:e,block:true,"data-testid":"forgot-password-confirm-button"},n("forgotPassword.confirm")),s.createElement(l.Button,{className:I.button,onClick:handleCancelClick,color:"secondary","data-testid":"forgot-password-cancel-button"},n("forgotPassword.cancel")))))};const UnlockWallet=({onUnlock:e,onForgotPasswordClick:t,passwordInput:a,unlockButtonDisabled:i,showForgotPassword:c=true})=>{const{t:d}=(0,_.useTranslation)();return s.createElement(o.ContentLayout,null,s.createElement("form",{onSubmit:e,className:P.lockWalletContent},s.createElement("div",{className:P.content,"data-testid":"unlock-screen"},s.createElement("img",{src:n["default"],alt:"LACE",className:P.image,"data-testid":"unlock-screen-img"}),s.createElement("h1",{className:P.title,"data-testid":"unlock-screen-title"},d("unlock.sectionTitle")),s.createElement(r.Password,{errorMessage:d("general.errors.invalidPassword"),error:a.invalidPass,onChange:a.handleChange,onPressEnter:t=>{t.preventDefault();e()},label:d("unlock.input.placeholder")})),s.createElement("div",{className:P.blockButton},s.createElement(l.Button,{color:"gradient",onClick:e,disabled:i,"data-testid":"unlock-button"},d("unlock.button"))),c&&s.createElement(ForgotPassword,{onForgotPasswordClick:t})))};var L=a("./src/hooks/useWalletManager.ts");var D=a("./src/stores/index.ts");var B=a("./src/providers/BackgroundServiceAPI/index.ts");var M=a("./src/utils/local-storage.ts");var H=a("./src/lib/scripts/types/index.ts");var F=a("./src/utils/get-chain-name.ts");const UnlockWalletContainer=({validateMnemonic:e})=>{const t=(0,W.useAnalyticsContext)();const{unlockWallet:a,lockWallet:o,deleteWallet:n}=(0,L.useWalletManager)();const{setDeletingWallet:i,resetWalletLock:c,setAddressesDiscoveryCompleted:d,currentChain:u}=(0,D.useWalletStore)();const m=(0,B.useBackgroundServiceAPIContext)();const[v,k]=(0,s.useState)(false);const{password:g,setPassword:E,clearSecrets:p}=(0,r.useSecrets)();const[w,f]=(0,s.useState)(true);const S=(0,s.useCallback)(e=>{if(!w)f(true);E(e)},[w,E]);(0,s.useEffect)(()=>{if(e)o()},[o,e]);const onUnlock=async()=>{k(true);try{const e=await a();f(e);t.sendEventToPostHog(O.PostHogAction.UnlockWalletWelcomeBackUnlockClick);if(e){d(true);c()}}catch{f(false)}finally{p()}k(false)};const onForgotPasswordClick=async()=>{await t.sendEventToPostHog(O.PostHogAction.UnlockWalletForgotPasswordProceedClick);(0,M.saveValueInLocalStorage)({key:"isForgotPasswordFlow",value:true});(0,M.saveValueInLocalStorage)({key:"appSettings",value:{chainName:(0,F.getChainName)(u)}});i(true);await n(true);await m.handleOpenBrowser({section:H.BrowserViewSections.FORGOT_PASSWORD});i(false)};(0,l.useKeyboardShortcut)(["Enter"],onUnlock);return s.createElement(UnlockWallet,{isLoading:v,onUnlock:onUnlock,passwordInput:{handleChange:S,invalidPass:!w},unlockButtonDisabled:!g.value,onForgotPasswordClick:onForgotPasswordClick})};var V=a("./src/features/unlock-wallet/components/MnemonicValidation.tsx")},"./src/lib/storage/hooks/index.ts":(e,t,a)=>{a.d(t,{useDbState:()=>useDbState});var s=a("../../node_modules/react/index.js");var o=a("../../node_modules/dexie-react-hooks/dist/dexie-react-hooks.js");var n=a("./src/providers/DatabaseProvider/index.ts");var l=a("./src/hooks/useActionExecution.ts");var r=a("./src/lib/storage/config/index.ts");var i=a("./src/lib/storage/helpers/index.ts");const useDbState=(e,t,a)=>{const[c]=(0,n.useDatabaseContext)();const[d,u]=(0,s.useState)(r.LIST_DEFAULT_LIMIT);const[m]=(0,l.useActionExecution)({shouldDisplayToastOnSuccess:true,getErrorMessage:i.getErrorMessage});const v=(0,o.useLiveQuery)(()=>{const e=c.getConnection(t).limit(d);return a&&(null==a?void 0:a.listQuery)?a.listQuery(e):e.toArray()},[d,a],e);const k=(0,o.useLiveQuery)(()=>{return a&&(null==a?void 0:a.countQuery)?null==a?void 0:a.countQuery(c.getConnection(t)):c.getConnection(t).count()},[a]);const saveRecord=(e,s)=>m(()=>a&&a.saveRecordQuery?a.saveRecordQuery(c.getConnection(t))(e):c.getConnection(t).add(e),s);const updateRecord=(e,a,s)=>m(()=>c.getConnection(t).update(e,a),s);const deleteRecord=(e,a)=>m(()=>c.getConnection(t).delete(e),a);const g=(0,s.useCallback)(()=>m(()=>c.getConnection(t).clear()),[c,m,t]);const E=(0,s.useCallback)(()=>{u(e=>e+r.LIST_DEFAULT_LIMIT)},[u]);return{list:v,count:k,utils:{saveRecord,updateRecord,deleteRecord,extendLimit:E,clearTable:g}}}},"./src/lib/storage/models/index.ts":(e,t,a)=>{a.d(t,{addressBookQueries:()=>addressBookQueries,addressBookSchema:()=>o,dappSchema:()=>n.dappSchema,nftFoldersQueries:()=>nftFoldersQueries,nftFoldersSchema:()=>l});var s=a("./src/lib/storage/helpers/index.ts");const o={table:"addressBook",indexedFields:{1:["++id","name","address"],2:["++id","name","address","network","handleResolution"]}};const addressBookQueries=e=>({listQuery:t=>t.filter(({network:t})=>t===e).sortBy("name",s.sortTabletByName),countQuery:t=>t.filter(({network:t})=>t===e).count(),saveRecordQuery:t=>a=>t.add({...a,network:e})});var n=a("./src/lib/storage/models/dapp.ts");const l={table:"nftFolders",indexedFields:{3:["++id","&name","assets","network"]}};const nftFoldersQueries=e=>({listQuery:t=>t.filter(({network:t})=>t===e).sortBy("name",s.sortTabletByName),saveRecordQuery:t=>a=>t.add({...a,network:e})})},"./src/providers/AnalyticsProvider/analyticsTracker/events/multi-wallet.ts":(e,t,a)=>{const makeMultiWalletCreateEvent=e=>`multiwallet | new wallet revamp | ${e}`;const makeMultiWalletRestoreEvent=e=>`multiwallet | restore wallet revamp | ${e}`;const makeMultiWalletHardwareEvent=e=>`multiwallet | hardware wallet revamp | ${e}`;const makePaperWalletOnboardingCreateEvent=e=>`onboarding | new wallet revamp paper wallet | ${e}`;const makePaperWalletOnboardingRestoreEvent=e=>`onboarding | restore wallet revamp paper wallet | ${e}`;const s={create:{CHOOSE_RECOVERY_MODE_MNEMONIC_CLICK:makePaperWalletOnboardingCreateEvent("choose mode | recovery phrase | click"),CHOOSE_RECOVERY_MODE_PAPER_CLICK:makePaperWalletOnboardingCreateEvent("choose mode | paper wallet | click"),CHOOSE_RECOVERY_MODE_NEXT_CLICK:makePaperWalletOnboardingCreateEvent("choose mode | next | click"),PGP_PUBLIC_KEY_PAGE_VIEW:makePaperWalletOnboardingCreateEvent("step: pgp key | pageview"),PGP_PUBLIC_KEY_NEXT_CLICK:makePaperWalletOnboardingCreateEvent("step: pgp key | next | click"),WALLET_SETUP_GENERATE_PAPER_WALLET_CLICK:makePaperWalletOnboardingCreateEvent("step: wallet info | Generate paper wallet | click"),PAPER_WALLET_DOWNLOAD_PAGEVIEW:makePaperWalletOnboardingCreateEvent("step: download pdf | pageview"),DOWNLOAD_PAPER_WALLET_CLICK:makePaperWalletOnboardingCreateEvent("download pdf | download pdf | click"),PRINT_PAPER_WALLET_CLICK:makePaperWalletOnboardingCreateEvent("print pdf | print pdf | click"),PAPER_WALLET_COMPLETE_CLICK:makePaperWalletOnboardingCreateEvent("open wallet | open wallet | click"),SETUP_OPTION_CLICK:makeMultiWalletCreateEvent("create | click"),SAVE_RECOVERY_PHRASE_NEXT_CLICK:makeMultiWalletCreateEvent("save your recovery phrase | next | click"),ENTER_RECOVERY_PHRASE_NEXT_CLICK:makeMultiWalletCreateEvent("enter your recovery phrase | next | click"),ENTER_WALLET:makeMultiWalletCreateEvent("let's set up your new wallet | enter wallet | click"),RECOVERY_PHRASE_INTRO_WATCH_VIDEO_CLICK:makeMultiWalletCreateEvent("save your recovery phrase | watch video | click"),RECOVERY_PHRASE_INTRO_VIDEO_GOTIT_CLICK:makeMultiWalletCreateEvent("keeping your wallet secure | got it | click"),RECOVERY_PHRASE_COPY_TO_CLIPBOARD_CLICK:makeMultiWalletCreateEvent("save your recovery phrase | copy to clipboard | click"),RECOVERY_PHRASE_PASTE_FROM_CLIPBOARD_CLICK:makeMultiWalletCreateEvent("enter your recovery phrase | paste from clipboard | click"),RECOVERY_PHRASE_COPY_READ_MORE_CLICK:makeMultiWalletCreateEvent("save your recovery phrase | best practices faq | click"),RECOVERY_PHRASE_PASTE_READ_MORE_CLICK:makeMultiWalletCreateEvent("enter your recovery phrase | best practices faq | click"),WALLET_ADDED:makeMultiWalletCreateEvent("added")},restore:{WALLET_SETUP_PAGEVIEW:makePaperWalletOnboardingCreateEvent("step: wallet info | pageview"),CHOOSE_RECOVERY_MODE_MNEMONIC_CLICK:makePaperWalletOnboardingRestoreEvent("choose mode | recovery phrase | click"),CHOOSE_RECOVERY_MODE_PAPER_CLICK:makePaperWalletOnboardingRestoreEvent("choose mode | paper wallet | click"),CHOOSE_RECOVERY_MODE_NEXT_CLICK:makePaperWalletOnboardingRestoreEvent("choose mode | next | click"),SCAN_QR_CODE_PAGEVIEW:makePaperWalletOnboardingRestoreEvent("step: scan qr code | pageview"),SCAN_QR_CODE_CAMERA_OK:makePaperWalletOnboardingRestoreEvent("step: scan qr code | camera ok"),SCAN_QR_CODE_CAMERA_ERROR:makePaperWalletOnboardingRestoreEvent("step: scan qr code | camera error"),SCAN_QR_CODE_READ_SUCCESS:makePaperWalletOnboardingRestoreEvent("step: scan qr code | read success"),SCAN_QR_CODE_READ_ERROR:makePaperWalletOnboardingRestoreEvent("step: scan qr code | read error"),WALLET_OVERVIEW_NEXT_CLICK:makePaperWalletOnboardingRestoreEvent("step: wallet overview | next | click"),ENTER_PGP_PRIVATE_KEY_PAGE_VIEW:makePaperWalletOnboardingRestoreEvent("step: pgp private key | pageview"),ENTER_PGP_PRIVATE_KEY_NEXT_CLICK:makePaperWalletOnboardingRestoreEvent("step: pgp private key | next | click"),SETUP_OPTION_CLICK:makeMultiWalletRestoreEvent("restore | click"),ENTER_WALLET:makeMultiWalletRestoreEvent("let's set up your new wallet | enter wallet | click"),ENTER_RECOVERY_PHRASE_NEXT_CLICK:makeMultiWalletRestoreEvent(" enter your recovery phrase  | next | click"),RECOVERY_PHRASE_PASTE_FROM_CLIPBOARD_CLICK:makeMultiWalletRestoreEvent("enter your recovery phrase | paste from clipboard | click"),RECOVERY_PHRASE_PASTE_READ_MORE_CLICK:makeMultiWalletRestoreEvent("enter your recovery phrase | best practices faq | click"),WALLET_ADDED:makeMultiWalletRestoreEvent("added"),HD_WALLET:makeMultiWalletRestoreEvent("hd wallet")},hardware:{SETUP_OPTION_CLICK:makeMultiWalletHardwareEvent("connect | click"),CONNECT_HW_VIEW:makeMultiWalletHardwareEvent("connect your device | view"),HW_POPUP_CONNECT_CLICK:makeMultiWalletHardwareEvent("native browser pop-up with HWs | connect | click"),CONNECT_HW_TRY_AGAIN_CLICK:makeMultiWalletHardwareEvent("connect your device | try again | click"),SETUP_HW_ACCOUNT_NO_CLICK:makeMultiWalletHardwareEvent("let's set up your wallet | Account No | click"),ENTER_WALLET:makeMultiWalletHardwareEvent("let's set up your wallet | enter wallet | click"),WALLET_ADDED:makeMultiWalletHardwareEvent("added"),HD_WALLET:makeMultiWalletHardwareEvent("hd wallet")}};const o=null},"./src/providers/DatabaseProvider/index.ts":(e,t,a)=>{a.d(t,{DatabaseProvider:()=>s.DatabaseProvider,useDatabaseContext:()=>s.useDatabaseContext});var s=a("./src/providers/DatabaseProvider/context.tsx")},"./src/providers/currency/index.ts":(e,t,a)=>{a.d(t,{CurrencyStoreProvider:()=>s.CurrencyStoreProvider,useCurrencyStore:()=>s.useCurrencyStore});var s=a("./src/providers/currency/context.tsx")},"./src/stores/slices/stake-pool-search-slice.ts":(e,t,a)=>{a.d(t,{stakePoolSearchSlice:()=>stakePoolSearchSlice});var s=a("../../node_modules/lodash/isEqual.js");var o=a.n(s);var n=a("../../packages/cardano/dist/index.esm.js");var l=a("./src/stores/types.ts");const r=100;const getQueryStakePoolsFilters=({searchString:e,skip:t=0,limit:a=r,sort:s})=>{let o={};try{const l=n.Wallet.Cardano.PoolId(e);o={identifier:{values:[{id:l}]}}}catch{o={text:e}}return{filters:{...o,pledgeMet:true,status:[n.Wallet.Cardano.StakePoolStatus.Active,n.Wallet.Cardano.StakePoolStatus.Activating,n.Wallet.Cardano.StakePoolStatus.Retiring]},pagination:{startAt:t,limit:a-t+1},...s&&{sort:s}}};const fetchStakePools=({set:e,get:t})=>{return async({searchString:a,skip:s=0,limit:n=r,sort:i})=>{const{totalResultCount:c,pageResults:d,searchFilters:u}=t().stakePoolSearchResults||{};e({stakePoolSearchResultsStatus:l.StateStatus.LOADING});const m=getQueryStakePoolsFilters({searchString:a,skip:s,limit:n,sort:i});const{totalResultCount:v,pageResults:k}=await t().blockchainProvider.stakePoolProvider.queryStakePools(m);const g=o()(u,i)&&c===v;const E=g?[...d]:Array.from({length:v});if(k.length>0)E.splice(s,null==k?void 0:k.length,...k);e({stakePoolSearchResults:{totalResultCount:v,pageResults:E,skip:s,limit:n,searchQuery:a,searchFilters:i},stakePoolSearchResultsStatus:l.StateStatus.LOADED})}};const stakePoolSearchSlice=({set:e,get:t})=>({stakePoolSearchResults:{pageResults:[],totalResultCount:null},stakePoolSearchResultsStatus:l.StateStatus.IDLE,selectedStakePool:void 0,fetchStakePools:fetchStakePools({set:e,get:t}),resetStakePools:()=>e(()=>({stakePoolSearchResults:{pageResults:[],totalResultCount:null},stakePoolSearchResultsStatus:l.StateStatus.IDLE})),setSelectedStakePool:t=>e(()=>({selectedStakePool:t}))})},"./src/types/ui.ts":(e,t,a)=>{a.d(t,{NetworkConnectionStates:()=>s});var s;(function(e){e["CONNNECTED"]="connected";e["OFFLINE"]="offline"})(s||(s={}))},"./src/utils/get-wallet-from-storage.ts":(e,t,a)=>{a.d(t,{getWalletFromStorage:()=>getWalletFromStorage});var s=a("./src/utils/local-storage.ts");const getWalletFromStorage=()=>{const e=(0,s.getValueFromLocalStorage)("wallet");return e||void 0}},"./src/views/browser-view/components/WarningModal/index.ts":(e,t,a)=>{a.d(t,{WarningModal:()=>s.WarningModal});var s=a("./src/views/browser-view/components/WarningModal/WarningModal.tsx")},"./src/views/browser-view/features/activity/components/ActivityLayout.tsx":(e,t,a)=>{var s=a("../../node_modules/react/index.js");var o=a("../../node_modules/lodash/debounce.js");var n=a.n(o);var l=a("../../node_modules/lodash/isNil.js");var r=a.n(l);var i=a("../../packages/core/dist/index.esm.js");var c=a("./src/hooks/index.ts");var d=a("./src/stores/index.ts");var u=a("../../packages/common/dist/index.esm.js");var m=a("./src/views/browser-view/features/activity/components/ActivityDetail.tsx");var v=a("../../node_modules/react-i18next/dist/es/index.js");var k=a("./src/views/browser-view/components/index.ts");var g=a("./src/components/Layout/SectionTitle.tsx");var E=a("./src/assets/icons/book.svg");var p=a("./src/assets/icons/light.svg");var w=a("./src/assets/icons/video.svg");var f=a("./src/utils/constants.ts");var S=a("./src/providers/index.ts");var b=a("./src/providers/AnalyticsProvider/analyticsTracker/index.ts");var y=a("./src/hooks/useWalletActivities.ts");const P=300;const ActivityLayout=()=>{const{t:e}=useTranslation();const{priceResult:t}=useFetchCoinPrice();const{inMemoryWallet:a,walletInfo:s,activityDetail:o,resetActivityState:n,blockchainProvider:l}=useWalletStore();const r=useAnalyticsContext();const i=useCallback(()=>{r.sendEventToPostHog(PostHogAction.ActivityActivityActivityRowClick)},[r]);const{walletActivities:c,mightHaveMore:d,loadedTxLength:u,loadMore:m,retry:v,error:k}=useWalletActivitiesPaginated({sendAnalytics:i});const g=useObservable(a.balance.utxo.total$);const E={glossary:e("educationalBanners.title.glossary"),faq:e("educationalBanners.title.faq"),video:e("educationalBanners.title.video")};const p=[{title:E.glossary,subtitle:e("browserView.activity.learnAbout.whatAreActivityDetails"),src:Book,link:"https://www.lace.io/glossary?term=activity"},{title:E.glossary,subtitle:e("browserView.activity.learnAbout.whatIsAnUnconfirmedTransaction"),src:Book,link:"https://www.lace.io/glossary?term=unconfirmed-transaction"},{title:E.faq,subtitle:e("browserView.activity.learnAbout.doesLaceHaveFees"),src:LightBulb,link:"https://www.lace.io/faq?question=does-lace-have-fees"},{title:E.video,subtitle:e("browserView.activity.learnAbout.transactionBundles"),src:Video,link:"https://www.lace.io/learn?video=lace-introduces-transaction-bundles"}];useEffect(()=>{n()},[n,l]);const w=isNil(g);const f=useMemo(()=>debounce(m,P),[m]);return React.createElement(Layout,null,React.createElement(SectionLayout,{sidePanelContent:React.createElement(EducationalList,{items:p,title:e("browserView.sidePanel.learnAbout")})},React.createElement(SectionTitle,{title:e("browserView.activity.title")}),React.createElement(Drawer,{open:!!o,onClose:n,navigation:React.createElement(DrawerNavigation,{title:e("transactions.detail.title"),onCloseIconClick:()=>{r.sendEventToPostHog(PostHogAction.ActivityActivityDetailXClick);n()}})},o&&t&&React.createElement(ActivityDetail,{price:t})),React.createElement(Skeleton,{loading:w||void 0===c},(null==c?void 0:c.length)>0&&React.createElement(GroupedAssetActivityList,{hasMore:d,loadMore:f,lists:c,scrollableTarget:LACE_APP_ID,dataLength:u,loadingError:k,retryLoading:v}),(null==c?void 0:c.length)===0&&React.createElement(FundWalletBanner,{title:e("browserView.activity.fundWalletBanner.title"),subtitle:e("browserView.activity.fundWalletBanner.subtitle"),prompt:e("browserView.fundWalletBanner.prompt"),walletAddress:s.addresses[0].address.toString(),shouldHaveVerticalContent:true}))))}},"./src/views/browser-view/features/staking/components/StakingContainer.tsx":(e,t,a)=>{var s=a("./src/views/browser-view/components/index.ts");var o=a("../../node_modules/react/index.js");var n=a("../../node_modules/lodash/isNumber.js");var l=a("../../node_modules/react-i18next/dist/es/index.js");var r=a("../../packages/cardano/dist/index.esm.js");var i=a("./src/stores/selectors/staking-selectors.ts");var c=a("./src/stores/index.ts");var d=a("./src/hooks/index.ts");var u=a("./src/assets/icons/light.svg");var m=a("../../packages/staking/dist/index.js");var v=a("../../node_modules/@input-output-hk/lace-ui-toolkit/dist/index.js");var k=a("./src/providers/index.ts");function _extends(){_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))e[s]=a[s]}return e};return _extends.apply(this,arguments)}const StakingSkeleton_StakingSkeleton=({children:e,multiDelegationEnabled:t})=>{var a,s,o;const{t:n}=useTranslation();const{networkInfo:l,fetchNetworkInfo:r}=useWalletStore(stakingInfoSelector);const{priceResult:i}=useFetchCoinPrice();const{balance:c}=useBalances(null==i?void 0:null===(a=i.cardano)||void 0===a?void 0:a.price);const{theme:d}=useTheme();useEffect(()=>{r()},[r]);const u=(null==c?void 0:null===(s=c.total)||void 0===s?void 0:s.coinBalance)&&Number(null==c?void 0:null===(o=c.total)||void 0===o?void 0:o.coinBalance);const m={title:n("cardano.networkInfo.title"),currentEpoch:n("cardano.networkInfo.currentEpoch"),epochEnd:n("cardano.networkInfo.epochEnd"),totalPools:n("cardano.networkInfo.totalPools"),percentageStaked:n("cardano.networkInfo.percentageStaked"),averageApy:n("cardano.networkInfo.averageRos"),averageMargin:n("cardano.networkInfo.averageMargin")};const v={glossary:n("educationalBanners.title.glossary"),faq:n("educationalBanners.title.faq"),video:n("educationalBanners.title.video")};const k=[{title:v.faq,subtitle:n("educationalBanners.subtitle.stakingAndDelegation"),src:LightBulb,link:"https://www.lace.io/faq?question=what-are-staking-and-delegation"},{title:v.faq,subtitle:n("educationalBanners.subtitle.howManyPools"),src:LightBulb,link:"https://www.lace.io/faq?question=how-many-stake-pools-can-i-delegate-stake-to-using-the-multi-staking-or-multi-delegation-feature"},{title:v.faq,subtitle:n("educationalBanners.subtitle.ledgerSupport"),src:LightBulb,link:"https://www.lace.io/faq?question=do-ledger-hardware-wallets-support-multi-staking"},{title:v.faq,subtitle:n("educationalBanners.subtitle.stakeDistribution"),src:LightBulb,link:"https://www.lace.io/faq?question=does-stake-distribution-remain-the-same"}];const g=React.createElement(Flex,{flexDirection:"column",alignItems:"stretch",gap:"$32",mb:"$112"},t&&React.createElement(BrowsePoolsPreferencesCard,{theme:d.name}),React.createElement(Skeleton,{loading:!l},React.createElement(NetworkInfo,_extends({},l,{translations:m}))),React.createElement(EducationalList,{items:k,title:n("browserView.sidePanel.aboutStaking")}));return React.createElement(SectionLayout,{sidePanelContent:g},React.createElement(Skeleton,{loading:!isNumber(u)},e))};var g=a("./src/hooks/useMultiDelegationEnabled.ts");var E=a("./src/views/browser-view/features/activity/index.ts");var p=a("../../packages/common/dist/index.esm.js");const MultiDelegationStaking_MultiDelegationStaking=()=>{const{theme:e}=useTheme();const{priceResult:t}=useFetchCoinPrice();const{blockchainProvider:a,activityDetail:s,resetActivityState:o}=useWalletStore(e=>({blockchainProvider:e.blockchainProvider,activityDetail:e.activityDetail,resetActivityState:e.resetActivityState}));const{t:n}=useTranslation();useEffect(()=>{o()},[o,a]);return React.createElement(React.Fragment,null,React.createElement(Staking,{theme:e.name}),React.createElement(Drawer,{open:!!s,onClose:o,navigation:React.createElement(DrawerNavigation,{title:n("transactions.detail.title"),onCloseIconClick:()=>{o()}})},s&&t&&React.createElement(ActivityDetail,{price:t})))};var w=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var f=a.n(w);var S=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var b=a.n(S);var y=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var P=a.n(y);var _=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var C=a.n(_);var h=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var A=a.n(h);var R=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var T=a.n(R);var x=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/views/browser-view/features/staking/components/Staking.modules.scss");var I={};I.styleTagTransform=T();I.setAttributes=C();I.insert=P().bind(null,"head");I.domAPI=b();I.insertStyleElement=A();var W=f()(x["default"],I);const O=x["default"]&&x["default"].locals?x["default"].locals:void 0;var N=a("./src/views/browser-view/features/staking/components/StakeFundsBanner/index.ts");var j=a("./src/features/delegation/stores/index.ts");var L=a("./src/api/transformers.ts");var D=a("./src/views/browser-view/features/staking/components/StakePoolDetails/index.tsx");var B=a("./src/views/browser-view/features/staking/types/index.ts");var M=a("../../node_modules/lodash/debounce.js");var H=a("../../node_modules/antd/es/typography/index.js");var F=a("./src/views/browser-view/features/staking/store/index.ts");var V=a("./src/assets/icons/empty.svg");var K=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/views/browser-view/features/staking/components/StakePoolsTable/StakePoolsTableEmpty.module.scss");var U={};U.styleTagTransform=T();U.setAttributes=C();U.insert=P().bind(null,"head");U.domAPI=b();U.insertStyleElement=A();var q=f()(K["default"],U);const Y=K["default"]&&K["default"].locals?K["default"].locals:void 0;const StakePoolsTableEmpty_StakePoolsTableEmpty=({title:e})=>{const{t:t}=useTranslation();return React.createElement("div",{"data-testid":"stake-pool-table-empty",className:styles.container},React.createElement(Image,{"data-testid":"stake-pool-table-empty-image",preview:false,src:Empty}),React.createElement("div",{"data-testid":"stake-pool-table-empty-message",className:styles.text},e||t("browserView.staking.stakePoolsTable.emptyMessage")))};var Q=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/views/browser-view/features/staking/components/StakePoolsTable/StakePoolsTable.modules.scss");var Z={};Z.styleTagTransform=T();Z.setAttributes=C();Z.insert=P().bind(null,"head");Z.domAPI=b();Z.insertStyleElement=A();var G=f()(Q["default"],Z);const $=Q["default"]&&Q["default"].locals?Q["default"].locals:void 0;var X=a("./src/providers/AnalyticsProvider/analyticsTracker/index.ts");const{Text:z}=H["default"];const J=300;const ee={bottom:100,top:0};const et=44;const StakePoolsTable_StakePoolsTable=({scrollableTargetId:e})=>{const t=useRef(null);const{t:a}=useTranslation();const[s,o]=useState("");const[n,l]=useState(DEFAULT_SORT_OPTIONS);const{setSelectedStakePool:r}=useDelegationStore();const{setIsDrawerVisible:i}=useStakePoolDetails();const c=useAnalyticsContext();const d=useRef(null);const[u,m]=useState(0);const{stakePoolSearchResults:{pageResults:v,totalResultCount:k},isSearching:g,resetStakePools:E,fetchStakePools:p}=useWalletStore(stakePoolResultsSelector);const{blockchainProvider:w}=useWalletStore();const f=useVisibleItemsCount({containerRef:d,rowHeight:et});useEffect(()=>{if(void 0!==f){const e=Math.ceil(ee.bottom/et);m(e+Math.max(f,0))}},[f]);const S=useMemo(()=>debounce(p,J),[p]);const b=useCallback(({startIndex:e,endIndex:t})=>{if(e!==t)S({limit:t,searchString:s,skip:e,sort:n})},[S,s,n]);useEffect(()=>{if(void 0!==u)b({endIndex:u,startIndex:0})},[u,b]);const y={ticker:a("cardano.stakePoolTableBrowser.tableHeader.ticker.title"),ros:a("cardano.stakePoolTableBrowser.tableHeader.ros.title"),cost:a("cardano.stakePoolTableBrowser.tableHeader.cost.title"),saturation:a("cardano.stakePoolTableBrowser.tableHeader.saturation.title"),margin:a("cardano.stakePoolTableBrowser.tableHeader.margin.title"),blocks:a("cardano.stakePoolTableBrowser.tableHeader.blocks.title"),pledge:a("cardano.stakePoolTableBrowser.tableHeader.pledge.title"),liveStake:a("cardano.stakePoolTableBrowser.tableHeader.liveStake.title")};const P={ticker:a("cardano.stakePoolTableBrowser.tableHeader.ticker.tooltip"),ros:a("cardano.stakePoolTableBrowser.tableHeader.ros.tooltip"),cost:a("cardano.stakePoolTableBrowser.tableHeader.cost.tooltip"),saturation:a("cardano.stakePoolTableBrowser.tableHeader.saturation.tooltip"),margin:a("cardano.stakePoolTableBrowser.tableHeader.margin.tooltip"),blocks:a("cardano.stakePoolTableBrowser.tableHeader.blocks.tooltip"),pledge:a("cardano.stakePoolTableBrowser.tableHeader.pledge.tooltip"),liveStake:a("cardano.stakePoolTableBrowser.tableHeader.liveStake.tooltip")};useEffect(()=>{if(!(null==t?void 0:t.current))return;i(false);E()},[w,s,n,S,i,E]);const onSearch=e=>{o(e)};const _=useMemo(()=>{return null==v?void 0:v.map(e=>e?mapStakePoolToDisplayData({stakePool:e}):void 0)},[v]);const C=useCallback(e=>{c.sendEventToPostHog(PostHogAction.StakingStakePoolClick);r(e);i(true)},[c,i,r]);const onSortChange=e=>{const t=(null==n?void 0:n.order)==="asc"?"desc":"asc";const a=e!==(null==n?void 0:n.field)?getDefaultSortOrderByField(e):t;l({field:e,order:a})};const h=stakePoolTableConfig.columns.map(e=>{const t=a(`cardano.stakePoolTableBrowser.tableHeader.${e}.tooltip`);return{label:y[e],...P[e]&&{tooltipText:t},value:e}});const isActiveSortItem=e=>{return e===(null==n?void 0:n.field)};const A=useCallback((e,t)=>{if(!t){return React.createElement(StakePoolsListRowSkeleton,{index:e,columns:stakePoolTableConfig.columns})}const{stakePool:a}=t;return React.createElement(Table.Row,{onClick:()=>C(a),columns:stakePoolTableConfig.columns,cellRenderers:stakePoolTableConfig.renderer,dataTestId:"stake-pool",data:t})},[C]);return React.createElement("div",{ref:t,"data-testid":"stake-pool-table",className:styles.table},React.createElement("div",{className:styles.header},React.createElement("div",{className:styles.title},React.createElement("span",null,a("browserView.staking.stakePoolsTable.title")),React.createElement(z,{"data-testid":"section-title-counter",className:styles.sideText},"(",k||0,")")),React.createElement(Search,{className:styles.search,withSearchIcon:true,inputPlaceholder:a("browserView.staking.stakePoolsTable.searchPlaceholder"),onChange:onSearch,"data-testid":"search-input",loading:g})),React.createElement(Box,{mt:"$16",className:styles.tableWrapper,testId:"stake-pool-list-container"},React.createElement(Table.Header,{dataTestId:"stake-pool",headers:h,isActiveSortItem:isActiveSortItem,onSortChange:onSortChange,order:null==n?void 0:n.order}),!g&&0===k&&React.createElement(StakePoolsTableEmpty,null),React.createElement(Table.Body,{tableReference:d,scrollableTargetId:e,loadMoreData:b,totalCount:_.length,items:_,itemContent:A,increaseViewportBy:ee})))};var ea=a("./src/views/browser-view/features/staking/components/StakingInfo/index.ts");var es=a("./src/components/Layout/SectionTitle.tsx");var eo=a("./src/utils/constants.ts");var en=a("./src/stores/slices/index.ts");const utils_fetchPoolsInfo=async({searchString:e="",stakePoolProvider:t})=>{const a=getQueryStakePoolsFilters({searchString:e});const{pageResults:s}=await t.queryStakePools(a);return s};var el=a("./src/views/browser-view/features/staking/hooks.ts");var er=a("./src/routes/index.ts");function Staking_extends(){Staking_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))e[s]=a[s]}return e};return Staking_extends.apply(this,arguments)}const ei=new Set([B.Sections.CONFIRMATION,B.Sections.SIGN,B.Sections.FAIL_TX]);const ec=new Set([B.Sections.CONFIRMATION,B.Sections.SIGN]);const Staking_Staking=()=>{var e,t,a,s,o;const{t:n}=useTranslation();const{setStakeConfirmationVisible:l,setIsDrawerVisible:r,setSection:i}=useStakePoolDetails();const{networkInfo:c,fetchNetworkInfo:d}=useWalletStore(stakingInfoSelector);const{setSelectedStakePool:u}=useDelegationStore();const{isInMemoryWallet:m,blockchainProvider:v,walletInfo:k,inMemoryWallet:g,walletUI:{cardanoCoin:E}}=useWalletStore();const{fetchStakePools:p}=useWalletStore(stakePoolResultsSelector);const{priceResult:w}=useFetchCoinPrice();const{balance:f}=useBalances(null==w?void 0:null===(e=w.cardano)||void 0===e?void 0:e.price);const S=useObservable(g.delegation.rewardAccounts$);const b=useObservable(null==g?void 0:g.protocolParameters$);const y=useDelegationDetails();const{totalRewards:P,lastReward:_}=useStakingRewards();const C=useExternalLinkOpener();const{coinBalance:h}=walletBalanceTransformer(null==b?void 0:b.stakeKeyDeposit.toString());useEffect(()=>{d()},[d,v]);const A=(null==f?void 0:null===(t=f.total)||void 0===t?void 0:t.coinBalance)&&Number(null==f?void 0:null===(a=f.total)||void 0===a?void 0:a.coinBalance);const R=S&&S[0].credentialStatus===Wallet.Cardano.StakeCredentialStatus.Registered;const T=S&&y;const x=A<Number(h)&&!R||0===A&&R;const I=!T&&isNumber(A)&&!x;const{areAllRegisteredStakeKeysWithoutVotingDelegation:W,poolIdToRewardAccountsMap:O}=useRewardAccountsData();const N=!x&&W;const j=useCallback(()=>{i()},[i]);const L=useCallback(()=>{if(T){l(true);return}j();r(true)},[T,l,j,r]);const onStakePoolSelect=()=>{u(y);r(true)};useEffect(()=>{const fetchSelectedStakePool=async()=>{if(m||!c)return;const e=localStorage.getItem("TEMP_POOLID");if(!e)return;const t=String(e);const a=await fetchPoolsInfo({searchString:t,stakePoolProvider:v.stakePoolProvider});const s=a.find(t=>{var a;return(null==t?void 0:null===(a=t.id)||void 0===a?void 0:a.toString())===e});if(!s)return;u(s);r(true);p({searchString:""})};fetchSelectedStakePool()},[v.stakePoolProvider,p,m,c,r,u]);return React.createElement(React.Fragment,null,N&&React.createElement(Box,{mb:"$56"},React.createElement(RegisterAsDRepBanner,{openExternalLink:C,votingCenterUrl:walletRoutePaths.voting})),React.createElement("div",null,React.createElement(SectionTitle,{title:n("browserView.staking.title")}),x&&React.createElement(FundWalletBanner,{title:n("browserView.assets.welcome"),subtitle:n("browserView.staking.fundWalletBanner.subtitle"),prompt:n("browserView.fundWalletBanner.prompt"),walletAddress:k.addresses[0].address.toString()}),I&&React.createElement(StakeFundsBanner,{balance:A}),T&&React.createElement("div",{className:styles.flexRow},React.createElement(StakingInfo,Staking_extends({},{...Wallet.util.stakePoolTransformer({stakePool:y,cardanoCoin:E}),rewardAccount:null===(s=O.get(y.id))||void 0===s?void 0:s[0],coinBalance:A,fiat:null==w?void 0:null===(o=w.cardano)||void 0===o?void 0:o.price,totalRewards:Wallet.util.lovelacesToAdaString(P.toString()),lastReward:Wallet.util.lovelacesToAdaString(_.toString()),cardanoCoin:E},{onStakePoolSelect:onStakePoolSelect}))),React.createElement(StakePoolsTable,{scrollableTargetId:LACE_APP_ID}),React.createElement(StakePoolDetails,{showCloseIcon:true,showBackIcon:e=>ec.has(e),showExitConfirmation:e=>ei.has(e),canDelegate:!x,onStake:L})))};var ed=a("./src/lib/wallet-api-ui.ts");var eu=a("./src/utils/format-number.ts");var em=a("./src/views/browser-view/features/staking/index.ts");var ev=a("./src/hooks/useWalletActivities.ts");var ek=a("./src/views/browser-view/features/send-transaction/index.ts");var eg=a("../../packages/core/dist/index.esm.js");var eE=a("./src/lib/scripts/background/util.ts");function StakingContainer_extends(){StakingContainer_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)if(Object.prototype.hasOwnProperty.call(a,s))e[s]=a[s]}return e};return StakingContainer_extends.apply(this,arguments)}const StakingContainer=()=>{var e,t,a,s,o;const n=useMultiDelegationEnabled();const l=useAnalyticsContext();const[r,{updateLocalStorage:i}]=useLocalStorage(STAKING_BROWSER_PREFERENCES_LS_KEY,DEFAULT_STAKING_BROWSER_PREFERENCES);const[c,{updateLocalStorage:d}]=useLocalStorage(MULTIDELEGATION_FIRST_VISIT_LS_KEY,true);const[u,{updateLocalStorage:m}]=useLocalStorage(MULTIDELEGATION_DAPP_COMPATIBILITY_LS_KEY,true);const v=useCallback(()=>{const e={sendEvent:()=>{}};e.sendEvent({action:"AnalyticsEventActions.CLICK_EVENT",category:"AnalyticsEventCategories.STAKING",name:"AnalyticsEventNames.Staking.STAKING_MULTI_DELEGATION_BROWSER"})},[]);const k=useExternalLinkOpener();const{priceResult:g}=useFetchCoinPrice();const{balance:E}=useBalances(null==g?void 0:null===(e=g.cardano)||void 0===e?void 0:e.price);const{delegationTxBuilder:p,setDelegationTxBuilder:w,delegationTxFee:f,setDelegationTxFee:S}=useDelegationStore();const{fiatCurrency:b}=useCurrencyStore();const{walletActivities:y,walletActivitiesStatus:P}=useWalletActivities({sendAnalytics:v});const _=useSecrets();const C=useSubmitingState();const{getCustomSubmitApiForNetwork:h}=useCustomSubmitApi();const{walletInfo:A,walletType:R,inMemoryWallet:T,walletUI:{cardanoCoin:x},stakePoolSearchResults:I,stakePoolSearchResultsStatus:W,fetchStakePools:O,resetStakePools:N,fetchNetworkInfo:j,networkInfo:L,blockchainProvider:D,currentChain:B,environmentName:M,isSharedWallet:H}=useWalletStore(e=>({walletType:e.walletType,inMemoryWallet:e.inMemoryWallet,walletUI:{cardanoCoin:e.walletUI.cardanoCoin},stakePoolSearchResults:e.stakePoolSearchResults,stakePoolSearchResultsStatus:e.stakePoolSearchResultsStatus,fetchStakePools:e.fetchStakePools,resetStakePools:e.resetStakePools,networkInfo:e.networkInfo,fetchNetworkInfo:e.fetchNetworkInfo,blockchainProvider:e.blockchainProvider,walletInfo:e.walletInfo,currentChain:e.currentChain,environmentName:e.environmentName,isSharedWallet:e.isSharedWallet}));const F=null===(a=null===(t=A.addresses)||void 0===t?void 0:t[0].address)||void 0===a?void 0:a.toString();const V=A.name;const{walletRepository:K}=useWalletManager();const U=useObservable(K.wallets$);const q=useCurrentWallet();const Y=null===(s=getParentWalletForCIP1854Account({wallets:U,activeWallet:q}))||void 0===s?void 0:s.account;const Q=null==Y?void 0:Y.extendedAccountPublicKey;const Z=null==q?void 0:null===(o=q.metadata)||void 0===o?void 0:o.coSigners;const G=useSignPolicy(q,"staking");return React.createElement(Layout,null,React.createElement(OutsideHandlesProvider,StakingContainer_extends({},{analytics:l,stakingBrowserPreferencesPersistence:r,setStakingBrowserPreferencesPersistence:i,balancesBalance:E,delegationStoreSetDelegationTxBuilder:w,delegationStoreDelegationTxBuilder:p,delegationStoreSetDelegationTxFee:S,delegationStoreDelegationTxFee:f,fetchCoinPricePriceResult:g,openExternalLink:k,walletManagerExecuteWithPassword:withSignTxConfirmation,password:_,submittingState:C,walletStoreWalletType:R,walletStoreInMemoryWallet:T,walletStoreWalletUICardanoCoin:x,currencyStoreFiatCurrency:b,walletStoreStakePoolSearchResults:I,walletStoreStakePoolSearchResultsStatus:W,walletStoreFetchStakePools:O,walletStoreResetStakePools:N,walletStoreFetchNetworkInfo:j,walletStoreNetworkInfo:L,walletStoreBlockchainProvider:D,walletStoreWalletActivities:y,walletStoreWalletActivitiesStatus:P,compactNumber:compactNumberWithUnit,multidelegationFirstVisit:c,triggerMultidelegationFirstVisit:()=>d(false),multidelegationDAppCompatibility:u,triggerMultidelegationDAppCompatibility:()=>m(false),walletAddress:F,walletName:V,currentChain:B,isMultidelegationSupportedByDevice,isCustomSubmitApiEnabled:h(M).status,isSharedWallet:H,signPolicy:G,sharedWalletKey:Q,coSigners:Z,useRewardAccountsData,votingCenterUrl:walletRoutePaths.voting,parseError}),React.createElement(StakingSkeleton,{multiDelegationEnabled:n},n?React.createElement(MultiDelegationStaking,null):React.createElement(Staking,null))))}},"./src/views/nami-mode/hooks.ts":(e,t,a)=>{a.d(t,{useAnalytics:()=>useAnalytics});var s=a("../../node_modules/react/index.js");var o=a("./src/providers/index.ts");const useAnalytics=()=>{const e=(0,o.useAnalyticsContext)();const t=(0,s.useCallback)((t,a)=>e.sendEventToPostHog(t,a),[e]);return{isAnalyticsOptIn:true,sendEventToPostHog:t}}},"./src/views/nami-mode/index.scss":(e,t,a)=>{var s=a("../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");var o=a.n(s);var n=a("../../node_modules/style-loader/dist/runtime/styleDomAPI.js");var l=a.n(n);var r=a("../../node_modules/style-loader/dist/runtime/insertBySelector.js");var i=a.n(r);var c=a("../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");var d=a.n(c);var u=a("../../node_modules/style-loader/dist/runtime/insertStyleElement.js");var m=a.n(u);var v=a("../../node_modules/style-loader/dist/runtime/styleTagTransform.js");var k=a.n(v);var g=a("../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!./src/views/nami-mode/index.scss");var E={};E.styleTagTransform=k();E.setAttributes=d();E.insert=i().bind(null,"head");E.domAPI=l();E.insertStyleElement=m();var p=o()(g["default"],E);var w=g["default"]&&g["default"].locals?g["default"].locals:void 0}}]);
//# sourceMappingURL=858.js.map