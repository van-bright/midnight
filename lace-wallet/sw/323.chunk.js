(self["webpackChunk_lace_browser_extension_wallet"]=self["webpackChunk_lace_browser_extension_wallet"]||[]).push([[323],{"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/AssetInfoProvider/BlockfrostAssetProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostAssetProvider:()=>BlockfrostAssetProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var n=r("../../node_modules/lodash/omit.js");class BlockfrostAssetProvider extends a.BlockfrostProvider{mapNftMetadata(e){var t,r,i,a;const n=this.metadatumToString((null===(t=e.onchain_metadata)||void 0===t?void 0:t.image)||(null===(r=e.metadata)||void 0===r?void 0:r.logo));const d=(null===(i=e.onchain_metadata)||void 0===i?void 0:i.name)||(null===(a=e.metadata)||void 0===a?void 0:a.name);if(!n||!d)return null;try{var c,l,u,f;return{description:this.metadatumToString((null===(c=e.onchain_metadata)||void 0===c?void 0:c.description)||(null===(l=e.metadata)||void 0===l?void 0:l.description)),files:Array.isArray(null===(u=e.onchain_metadata)||void 0===u?void 0:u.files)?e.onchain_metadata.files.map(e=>{const t=e.mediaType;const r=e.name;const i=this.metadatumToString(e.src);if(!i||!t)return null;try{return{mediaType:s.MediaType(t),name:r,otherProperties:this.mapFileMetadataOtherProperties(e),src:s.Uri(i)}}catch(a){this.logger.warn("Failed to parse onchain_metadata file",e,a);return null}}).filter(o.isNotNil):void 0,image:s.Uri(n),mediaType:(null===(f=e.onchain_metadata)||void 0===f?void 0:f.mediaType)?s.ImageMediaType(e.onchain_metadata.mediaType):void 0,name:d,otherProperties:this.mapNftMetadataOtherProperties(e.onchain_metadata),version:this.mapNftMetadataVersion(e.onchain_metadata)}}catch(h){this.logger.warn("Failed to parse nft metadata",e,h);return null}}metadatumToString(e){let t;if(Array.isArray(e)){const r=e.map(e=>this.asString(e)).filter(o.isNotNil);t=r.join("")}else{t=this.asString(e)}return t}objToMetadatum(e){if("string"==typeof e)return e;if("number"==typeof e)return BigInt(e);if("object"==typeof e){if(null===e)return"";if(Array.isArray(e)){return e.map(e=>this.objToMetadatum(e))}return new Map(Object.entries(e).map(([e,t])=>[e,this.objToMetadatum(t)]))}return""}mapNftMetadataVersion(e){return"string"==typeof(null==e?void 0:e.version)?e.version:"1.0"}mapFileMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","mediaType","src"])}mapNftMetadataOtherProperties(e){return this.mapOtherProperties(e,["name","image","description","mediaType","files","version"])}mapOtherProperties(e,t){if(!e){return}const r=Object.entries(n(e,t));if(0===r.length)return;return new Map(r.map(([e,t])=>[e,this.objToMetadatum(t)]))}mapTokenMetadata(e,t){var r,s,i,a,o,n,d,c,l,u,f,h;return{assetId:e,decimals:("number"==typeof(null===(r=t.onchain_metadata)||void 0===r?void 0:r.decimals)?t.onchain_metadata.decimals:null===(s=t.metadata)||void 0===s?void 0:s.decimals)||void 0,desc:this.metadatumToString((null===(i=t.onchain_metadata)||void 0===i?void 0:i.description)||(null===(a=t.metadata)||void 0===a?void 0:a.description)),icon:this.metadatumToString((null===(o=t.onchain_metadata)||void 0===o?void 0:o.image)||(null===(n=t.metadata)||void 0===n?void 0:n.logo)),name:(null===(d=t.onchain_metadata)||void 0===d?void 0:d.name)||(null===(c=t.metadata)||void 0===c?void 0:c.name),ticker:(null===(l=t.onchain_metadata)||void 0===l?void 0:l.ticker)||(null===(u=t.metadata)||void 0===u?void 0:u.ticker)||void 0,url:(null===(f=t.onchain_metadata)||void 0===f?void 0:f.url)||(null===(h=t.metadata)||void 0===h?void 0:h.url)||void 0,version:"1.0"}}async getAsset({assetId:e,extraData:t}){try{const r=await this.request(`assets/${e.toString()}`);const s=i.AssetId.getAssetName(e);const a=i.PolicyId(r.policy_id);const o=BigInt(r.quantity);return{assetId:e,fingerprint:i.AssetFingerprint(r.fingerprint),name:s,nftMetadata:(null==t?void 0:t.nftMetadata)?this.mapNftMetadata(r):null,policyId:a,quantity:o,supply:o,tokenMetadata:(null==t?void 0:t.tokenMetadata)?this.mapTokenMetadata(e,r):null}}catch(n){this.logger.error("getAsset failed",e,t);throw this.toProviderError(n)}}getAssets({assetIds:e,extraData:t}){return Promise.all(e.map(e=>this.getAsset({assetId:e,extraData:t})))}constructor(e,t){super(e,t);this.asString=e=>"string"==typeof e?e:void 0}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/ChainHistoryProvider/BlockfrostChainHistoryProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostChainHistoryProvider:()=>BlockfrostChainHistoryProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var _=r("../../node_modules/lodash/omit.js");var w=r("../../node_modules/lodash/uniq.js");var y=r("../../node_modules/buffer/index.js")["Buffer"];const g=2147483647;const compareTx=(e,t)=>e.block_height-t.block_height||e.tx_index-t.tx_index;class BlockfrostChainHistoryProvider extends s.BlockfrostProvider{async fetchRedeemers({hash:e,redeemer_count:t}){if(!t)return;return this.request(`txs/${e}/redeemers`).then(e=>e.map(({purpose:e,script_hash:t,unit_mem:r,unit_steps:s,tx_index:i})=>({data:y.from(t),executionUnits:{memory:Number.parseInt(r),steps:Number.parseInt(s)},index:i,purpose:(()=>{switch(e){case"cert":return o.RedeemerPurpose.certificate;case"reward":return o.RedeemerPurpose.withdrawal;case"mint":return o.RedeemerPurpose.mint;case"spend":return o.RedeemerPurpose.spend;default:return e}})()})))}async fetchWithdrawals({withdrawal_count:e,hash:t}){if(!e)return;return this.request(`txs/${t}/withdrawals`).then(e=>e.map(({address:e,amount:t})=>({quantity:BigInt(t),stakeAddress:n.RewardAccount(e)})))}gatherMintsFromUtxos({asset_mint_or_burn_count:e},{inputs:t,outputs:r}){if(!e)return;const s=r.flatMap(e=>e.amount);const i=t.flatMap(e=>e.amount);const a=s.filter(e=>!i.some(t=>e.unit===t.unit));return new Map(a.map(e=>[d.AssetId(e.unit),BigInt(e.quantity)]))}async fetchPoolRetireCerts(e){return this.request(`txs/${e}/pool_retires`).then(e=>e.map(({pool_id:e,retiring_epoch:t,cert_index:r})=>({__typename:c.CertificateType.PoolRetirement,cert_index:r,epoch:l.EpochNo(t),poolId:u.PoolId(e)})))}async fetchPoolUpdateCerts(e){return this.request(`txs/${e}/pool_updates`).then(e=>e.map(({pool_id:e,cert_index:t,fixed_cost:r,margin_cost:s,pledge:i,reward_account:a,vrf_key:o})=>({__typename:c.CertificateType.PoolRegistration,cert_index:t,poolId:u.PoolId(e),poolParameters:{cost:BigInt(r),id:e,margin:f.FractionUtils.toFraction(s),owners:[],pledge:BigInt(i),relays:[],rewardAccount:a,vrf:o}})))}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){return this.fetchCBOR(e).then(t=>{const r=h.Transaction.fromCbor(h.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null})}async fetchMirCerts(e){return this.request(`txs/${e}/mirs`).then(e=>e.map(({address:e,amount:t,cert_index:r,pot:s})=>({__typename:c.CertificateType.MIR,cert_index:r,kind:c.MirCertificateKind.ToStakeCreds,pot:"reserve"===s?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,quantity:BigInt(t),rewardAccount:n.RewardAccount(e)})))}async fetchStakeCerts(e){return this.request(`txs/${e}/stakes`).then(e=>e.map(({address:e,cert_index:t,registration:r})=>({__typename:r?c.CertificateType.StakeRegistration:c.CertificateType.StakeDeregistration,cert_index:t,stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:m.CredentialType.KeyHash}})))}async fetchDelegationCerts(e){return this.request(`txs/${e}/delegations`).then(e=>e.map(({address:e,pool_id:t,cert_index:r})=>({__typename:c.CertificateType.StakeDelegation,cert_index:r,poolId:u.PoolId(t),stakeCredential:{hash:n.RewardAccount.toHash(n.RewardAccount(e)),type:m.CredentialType.KeyHash}})))}async fetchCertificates({pool_retire_count:e,pool_update_count:t,mir_cert_count:r,stake_cert_count:s,delegation_count:i,hash:a}){if(e+t+r+s+i===0)return;return Promise.all([e?this.fetchPoolRetireCerts(a):[],t?this.fetchPoolUpdateCerts(a):[],r?this.fetchMirCerts(a):[],s?this.fetchStakeCerts(a):[],i?this.fetchDelegationCerts(a):[]]).then(e=>e.flat().sort((e,t)=>t.cert_index-e.cert_index).map(e=>e))}async fetchJsonMetadataAsAuxiliaryData(e){const t=void 0;return this.request(`txs/${e}/metadata`).then(e=>{const r=(0,i.blockfrostMetadataToTxMetadata)(e);return r&&r.size>0?{blob:r}:t}).catch(e=>{if((0,i.isBlockfrostNotFoundError)(e)){return t}throw e})}async fetchEpochNo(e){const t=await this.networkInfoProvider.eraSummaries().then(p.createSlotEpochCalc);return t(e)}async fetchEpochParameters(e){return await this.request(`epochs/${e}/parameters`)}async processCertificates(e,t){if(!t)return;const r=await this.fetchEpochNo(l.Slot(e.slot));const{pool_deposit:s,key_deposit:i}=await this.fetchEpochParameters(r);return t.map(t=>{const r=_(t,"cert_index");switch(r.__typename){case c.CertificateType.PoolRegistration:{r.poolParameters.owners=[];r.poolParameters.relays=[];const a=void 0===e.deposit||""===e.deposit||"0"===e.deposit?0n:BigInt(s);delete r.poolParameters.metadataJson;return{...r,deposit:a}}case c.CertificateType.StakeRegistration:{const o=BigInt(i);return{...r,__typename:c.CertificateType.Registration,deposit:o}}case c.CertificateType.StakeDeregistration:{const n=BigInt(i);return{...r,__typename:c.CertificateType.Unregistration,deposit:n}}default:return r}})}async transactionDetailsUsingAPIs(e){const t=o.TransactionId(e.hash);const[r,s,i,a]=await Promise.all([this.fetchCertificates(e),this.fetchWithdrawals(e),this.fetchUtxos(t),this.fetchJsonMetadataAsAuxiliaryData(t)]);const{inputs:n,outputs:d,collaterals:c}=this.transactionUtxos(i);const l=this.gatherMintsFromUtxos(e,i);const u=l?new Map([...l].sort()):l;const f=e.valid_contract?o.InputSource.inputs:o.InputSource.collaterals;const h=this.mapTxBody({certificates:await this.processCertificates(e,r),collateralReturn:void 0,collaterals:c,fee:BigInt(e.fees),inputs:n,mint:u,outputs:d,proposalProcedures:void 0,validityInterval:{invalidBefore:this.parseValidityInterval(e.invalid_before),invalidHereafter:this.parseValidityInterval(e.invalid_hereafter)},votingProcedures:void 0,withdrawals:s},f);return{auxiliaryData:a,blockHeader:this.mapBlockHeader(e),body:h,id:t,index:e.index,inputSource:f,txSize:e.size,witness:this.witnessFromRedeemers(await this.fetchRedeemers(e))}}witnessFromRedeemers(e){const t=y.from("not implemented");if(e){for(const r of e)r.data=t}return{redeemers:e,signatures:new Map}}async transactionDetailsUsingCBOR(e){const t=o.TransactionId(e.hash);const r=await this.fetchDetailsFromCBOR(t);if(!r)return;const s=await this.request(`txs/${t}/utxos`);const{inputs:i,outputs:a,collaterals:n}=this.transactionUtxos(s,r);const d=e.valid_contract?o.InputSource.inputs:o.InputSource.collaterals;const c=this.mapTxBody({certificates:await this.processCertificates(e,r.body.certificates),collateralReturn:r.body.collateralReturn,collaterals:n,fee:r.body.fee,inputs:i,mint:r.body.mint?new Map([...r.body.mint].sort()):void 0,outputs:a,proposalProcedures:r.body.proposalProcedures,validityInterval:r.body.validityInterval?r.body.validityInterval:{invalidBefore:void 0,invalidHereafter:void 0},votingProcedures:r.body.votingProcedures,withdrawals:r.body.withdrawals},d);return{auxiliaryData:r.auxiliaryData,blockHeader:this.mapBlockHeader(e),body:c,id:t,index:e.index,inputSource:d,txSize:e.size,witness:this.witnessFromRedeemers(r.witness.redeemers)}}async fetchTransaction(e){try{const t=await this.request(`txs/${e.toString()}`);var r;return null!==(r=await this.transactionDetailsUsingCBOR(t))&&void 0!==r?r:await this.transactionDetailsUsingAPIs(t)}catch(s){throw this.toProviderError(s)}}transactionUtxos(e,t){const r=e.inputs.filter(e=>e.collateral).map(a.BlockfrostToCore.hydratedTxIn);const s=e.inputs.filter(e=>!e.collateral&&!e.reference).map(a.BlockfrostToCore.hydratedTxIn);const i=e.outputs.filter(e=>!e.collateral).map(e=>{const r=null==t?void 0:t.body.outputs.find(t=>t.address===e.address);return a.BlockfrostToCore.txOut(e,r)});return{collaterals:r,inputs:s,outputs:i}}async blocksByHashes({ids:e}){try{const t=await Promise.all(e.map(e=>this.request(`blocks/${e.toString()}`)));return t.map(e=>{if(!e.epoch||!e.epoch_slot||!e.height||!e.slot||!e.block_vrf){throw new v.ProviderError(v.ProviderFailure.Unknown,null,"Queried unsupported block")}return{confirmations:e.confirmations,date:new Date(1e3*e.time),epoch:l.EpochNo(e.epoch),epochSlot:e.epoch_slot,fees:BigInt(e.fees||"0"),header:{blockNo:l.BlockNo(e.height),hash:l.BlockId(e.hash),slot:l.Slot(e.slot)},nextBlock:e.next_block?l.BlockId(e.next_block):void 0,previousBlock:e.previous_block?l.BlockId(e.previous_block):void 0,size:l.BlockSize(e.size),slotLeader:l.SlotLeader(e.slot_leader),totalOutput:BigInt(e.output||"0"),txCount:e.tx_count,vrf:l.VrfVkBech32(e.block_vrf)}})}catch(r){throw this.toProviderError(r)}}async transactionsByHashes({ids:e}){return Promise.all(e.map(async e=>{const t=await this.cache.get(e);if(t)return t;try{const r=await this.fetchTransaction(e);void this.cache.set(e,r);return r}catch(s){throw this.toProviderError(s)}}))}async transactionsByAddresses({addresses:e,pagination:t,blockRange:r}){this.logger.debug(`transactionsByAddresses: ${JSON.stringify(r)} ${JSON.stringify(e)}`);try{var s;const a=null!==(s=null==r?void 0:r.lowerBound)&&void 0!==s?s:0;var n;const d=null!==(n=null==r?void 0:r.upperBound)&&void 0!==n?n:g;var c;const l=null!==(c=null==t?void 0:t.limit)&&void 0!==c?c:g;const u=await Promise.all(e.map(async e=>{return(0,i.fetchSequentially)({haveEnoughItems:(null==r?void 0:r.lowerBound)?e=>e.length>0&&e[e.length-1].block_height<r.lowerBound||e.length>=l:e=>e.length>=l,paginationOptions:t?{count:t.limit,order:t.order,page:(t.startAt+t.limit)/t.limit}:void 0,request:t=>{let s=`addresses/${e}/transactions?${t}`;if(null==r?void 0:r.lowerBound)s+=`&from=${r.lowerBound.toString()}`;if(null==r?void 0:r.upperBound)s+=`&to=${r.upperBound.toString()}`;return this.request(s)}})}));const f=u.flat(1);const h=w(f.filter(({block_height:e})=>e>=a&&e<=d).sort("desc"===t.order?(e,t)=>compareTx(t,e):compareTx).map(({tx_hash:e})=>o.TransactionId(e)));const m=await this.transactionsByHashes({ids:h});return{pageResults:m,totalResultCount:h.length}}catch(p){throw this.toProviderError(p)}}mapTxBody({collateralReturn:e,collaterals:t,fee:r,inputs:s,outputs:i,mint:a,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l,certificates:u},f){return{...f===o.InputSource.collaterals?{collateralReturn:i.length>0?i[0]:void 0,collaterals:s,fee:BigInt(0),inputs:[],outputs:[],totalCollateral:r}:{collateralReturn:null!=e?e:void 0,collaterals:t,fee:r,inputs:s,outputs:i},certificates:u,mint:a,proposalProcedures:n,validityInterval:d,votingProcedures:c,withdrawals:l}}mapBlockHeader({block:e,block_height:t,slot:r}){return{blockNo:l.BlockNo(t),hash:l.BlockId(e),slot:l.Slot(r)}}fetchUtxos(e){return this.request(`txs/${e}/utxos`)}constructor({cache:e,client:t,networkInfoProvider:r,logger:s}){super(t,s);this.parseValidityInterval=e=>l.Slot(Number.parseInt(e||""))||void 0;this.cache=e;this.networkInfoProvider=r}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/DRepProvider/BlockfrostDRepProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostDRepProvider:()=>BlockfrostDRepProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");class BlockfrostDRepProvider extends s.BlockfrostProvider{async getDRepInfo({id:e}){try{const t=i.DRepID.toCip129DRepID(e).toString();const r=await this.request(`governance/dreps/${t}`);const s=BigInt(r.amount);const o=r.active_epoch?a.EpochNo(r.active_epoch):void 0;const n=r.active;const d=r.has_script;return{active:n,activeEpoch:o,amount:s,hasScript:d,id:e}}catch(c){this.logger.error("getDRep failed",e);throw this.toProviderError(c)}}getDRepsInfo({ids:e}){return Promise.all(e.map(e=>this.getDRepInfo({id:e})))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/HandleProvider/KoraLabsHandleProvider.js":(e,t,r)=>{"use strict";r.d(t,{KoraLabsHandleProvider:()=>KoraLabsHandleProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/axios/lib/axios.js");const n={handles:"/handles",healthCheck:"/health"};const toHandleResolution=({apiResponse:e,policyId:t})=>{const r=s.PaymentAddress(e.resolved_addresses.ada);const a={addresses:{cardano:r},backgroundImage:e.bg_image?i.Uri(e.bg_image):void 0,cardanoAddress:r,handle:e.name,hasDatum:e.has_datum,image:e.image?i.Uri(e.image):void 0,policyId:t,profilePic:e.pfp_image?i.Uri(e.pfp_image):void 0};if("btc"in e.resolved_addresses)a.addresses.bitcoin=e.resolved_addresses.btc;return a};class KoraLabsHandleProvider{resolveHandles({handles:e}){const resolveHandle=async e=>{try{const{data:t}=await this.axiosClient.get(`${n.handles}/${e}`);return toHandleResolution({apiResponse:t,policyId:this.policyId})}catch(s){if(s instanceof a.ProviderError)throw s;if(o["default"].isAxiosError(s)){var r;if((null===(r=s.response)||void 0===r?void 0:r.status)===404)return null;if(s.request)throw new a.ProviderError(a.ProviderFailure.ConnectionFailure,s,s.code);throw new a.ProviderError(a.ProviderFailure.Unhealthy,s,`Failed to resolve handles due to: ${s.message}`)}throw new a.ProviderError(a.ProviderFailure.Unknown,s,"Failed to resolve handles")}};return Promise.all(e.map(e=>resolveHandle(e)))}async healthCheck(){try{await this.axiosClient.get(`${n.healthCheck}`);return{ok:true}}catch{return{ok:false}}}async getPolicyIds(){return[this.policyId]}constructor({serverUrl:e,adapter:t,policyId:r}){this.axiosClient=o["default"].create({adapter:t,baseURL:e});this.policyId=r}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/NetworkInfoProvider/BlockfrostNetworkInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostNetworkInfoProvider:()=>BlockfrostNetworkInfoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");class BlockfrostNetworkInfoProvider extends s.BlockfrostProvider{async stake(){try{const{stake:e}=await this.request("network");return{active:BigInt(e.active),live:BigInt(e.live)}}catch(t){throw this.toProviderError(t)}}async lovelaceSupply(){try{const{supply:e}=await this.request("network");return{circulating:BigInt(e.circulating),total:BigInt(e.total)}}catch(t){throw this.toProviderError(t)}}async ledgerTip(){try{const e=await this.request("blocks/latest");return i.BlockfrostToCore.blockToTip(e)}catch(t){throw this.toProviderError(t)}}async protocolParameters(){try{const e=await this.request("epochs/latest/parameters");return i.BlockfrostToCore.protocolParameters(e)}catch(t){throw this.toProviderError(t)}}async genesisParameters(){return this.request("genesis").then(e=>({activeSlotsCoefficient:e.active_slots_coefficient,epochLength:e.epoch_length,maxKesEvolutions:e.max_kes_evolutions,maxLovelaceSupply:BigInt(e.max_lovelace_supply),networkId:e.network_magic===a.NetworkMagics.Mainnet?a.NetworkId.Mainnet:a.NetworkId.Testnet,networkMagic:e.network_magic,securityParameter:e.security_param,slotLength:(0,o.Seconds)(e.slot_length||.2),slotsPerKesPeriod:e.slots_per_kes_period,systemStart:new Date(1e3*e.system_start),updateQuorum:e.update_quorum})).catch(e=>{throw this.toProviderError(e)})}async fetchEraSummaries(){try{return await this.request("network/eras")}catch(e){throw this.toProviderError(e)}}async parseEraSummaries(e,t){try{return e.map(e=>({parameters:{epochLength:e.parameters.epoch_length,slotLength:(0,o.Milliseconds)(1e3*e.parameters.slot_length)},start:{slot:e.start.slot,time:new Date(t.getTime()+1e3*e.start.time)}}))}catch(r){throw this.toProviderError(r)}}async eraSummaries(){try{const{systemStart:e}=await this.genesisParameters();const t=await this.fetchEraSummaries();return this.parseEraSummaries(t,e)}catch(r){throw this.toProviderError(r)}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardAccountInfoProvider/RewardAccountInfoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardAccountInfoProvider:()=>BlockfrostRewardAccountInfoProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var n=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var d=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/lodash/uniq.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v,_,w;const emptyArrayIfNotFound=e=>{if((0,n.isBlockfrostNotFoundError)(e)){return[]}throw e};class BlockfrostRewardAccountInfoProvider extends d.BlockfrostProvider{async rewardAccountInfo(e,t){const[r,[i]]=await Promise.all([await this.request(`accounts/${e}`).catch(t=>{if((0,n.isBlockfrostNotFoundError)(t)){return{active:false,active_epoch:null,controlled_amount:"0",drep_id:null,pool_id:null,reserves_sum:"0",rewards_sum:"0",stake_address:e,treasury_sum:"0",withdrawable_amount:"0",withdrawals_sum:"0"}}throw t}),this.request(`accounts/${e}/registrations?order=desc&count=1`).catch(emptyArrayIfNotFound)]);const a=await __classPrivateFieldGet(this,f,"m",p).call(this,i);const o=r.active?s.StakeCredentialStatus.Registered:(null==i?void 0:i.action)==="registered"?s.StakeCredentialStatus.Registering:void 0===a||a<=t?s.StakeCredentialStatus.Unregistered:s.StakeCredentialStatus.Unregistering;const d=BigInt(r.withdrawable_amount||"0");const[c,l,u]=await Promise.all([__classPrivateFieldGet(this,f,"m",w).call(this,e,t,a),__classPrivateFieldGet(this,f,"m",v).call(this,r),__classPrivateFieldGet(this,f,"m",_).call(this,i)]);return{address:e,credentialStatus:o,dRepDelegatee:l,delegatee:c,deposit:u,rewardBalance:d}}async delegationPortfolio(e){const t=await (0,n.fetchSequentially)({haveEnoughItems:e=>e.some(c.isNotNil),paginationOptions:{order:"desc"},request:async t=>{const r=await this.request(`accounts/${e}/delegations?${t}`).catch(emptyArrayIfNotFound);const a=[];for(const{tx_hash:o}of r){var n;const d=await this.request(`txs/${o}/metadata/cbor`).catch(emptyArrayIfNotFound);const c=null===(n=d.find(({label:e})=>"6862"===e))||void 0===n?void 0:n.metadata;if(!c){a.push(null);continue}const u=i.TransactionMetadatum.fromCbor((0,l.HexBlob)(c));try{a.push(s.cip17FromMetadatum(u.toCore()));break}catch{a.push(null)}}return a}});return t.find(c.isNotNil)||null}constructor({client:e,logger:t,stakePoolProvider:r,dRepProvider:s}){super(e,t);f.add(this);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,h,s,"f");__classPrivateFieldSet(this,m,r,"f")}}h=new WeakMap,m=new WeakMap,f=new WeakSet,p=async function _BlockfrostRewardAccountInfoProvider_getUnregisteringAtEpoch(e){if(!e||"registered"===e.action){return}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);return a.EpochNo(r.epoch)},v=async function _BlockfrostRewardAccountInfoProvider_getDrepDelegatee(e){if(!e.drep_id)return;if("drep_always_abstain"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysAbstain"}}}if("drep_always_no_confidence"===e.drep_id){return{delegateRepresentative:{__typename:"AlwaysNoConfidence"}}}const t=o.DRepID.toCip129DRepID(o.DRepID(e.drep_id));const r=await __classPrivateFieldGet(this,h,"f").getDRepInfo({id:t});return{delegateRepresentative:r}},_=async function _BlockfrostRewardAccountInfoProvider_getKeyDeposit(e){if(!e||"deregistered"===e.action){return 0n}const t=await this.request(`txs/${e.tx_hash}`);const r=await this.request(`blocks/${t.block}`);const s=await this.request(`epochs/${r.epoch}/parameters`);return BigInt(s.key_deposit)},w=async function _BlockfrostRewardAccountInfoProvider_getDelegatee(e,t,r){var s,i,a;const o=await (0,n.fetchSequentially)({haveEnoughItems:e=>{var r;return(null===(r=e[e.length-1])||void 0===r?void 0:r.active_epoch)<=t},paginationOptions:{order:"desc"},request:t=>this.request(`accounts/${e}/delegations?${t}`)});const isRegisteredAt=e=>{if(!r){return true}return r>t+e||void 0};const d=[isRegisteredAt(0)&&(null===(s=o.find(({active_epoch:e})=>e<=t))||void 0===s?void 0:s.pool_id),isRegisteredAt(1)&&(null===(i=o.find(({active_epoch:e})=>e<=t+1))||void 0===i?void 0:i.pool_id),isRegisteredAt(2)&&(null===(a=o.find(({active_epoch:e})=>e<=t+2))||void 0===a?void 0:a.pool_id)];const l=u(d.filter(c.isNotNil));if(0===l.length){return}const f=await __classPrivateFieldGet(this,m,"f").queryStakePools({filters:{identifier:{values:l.map(e=>({id:e}))}},pagination:{limit:3,startAt:0}});const stakePoolMathingPoolId=e=>f.pageResults.find(t=>t.id===d[e]);return{currentEpoch:stakePoolMathingPoolId(0),nextEpoch:stakePoolMathingPoolId(1),nextNextEpoch:stakePoolMathingPoolId(2)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/RewardsProvider/BlockfrostRewardsProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostRewardsProvider:()=>BlockfrostRewardsProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");const stringToBigInt=e=>BigInt(e);class BlockfrostRewardsProvider extends a.BlockfrostProvider{async rewardAccountBalance({rewardAccount:e}){try{const t=await this.request(`accounts/${e.toString()}`);return BigInt(t.withdrawable_amount)}catch(r){if((0,o.isBlockfrostNotFoundError)(r)){return 0n}throw this.toProviderError(r)}}async accountRewards(e,{lowerBound:t=s.EpochNo(0),upperBound:r=s.EpochNo(Number.MAX_SAFE_INTEGER)}={}){const a=100;return(0,o.fetchSequentially)({haveEnoughItems:(e,t)=>{const s=t[t.length-1];return!s||s.epoch>=r},paginationOptions:{count:a},request:t=>this.request(`accounts/${e.toString()}/rewards?${t}`),responseTranslator:e=>e.filter(({epoch:e})=>t<=e&&e<=r).map(({epoch:e,amount:t,pool_id:r})=>({epoch:s.EpochNo(e),rewards:stringToBigInt(t),...r&&{poolId:i.PoolId(r)}}))})}async rewardsHistory({rewardAccounts:e,epochs:t}){const r=await Promise.all(e.map(e=>this.accountRewards(e,t)));return new Map(r.map((t,r)=>[e[r],t]))}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/BlockfrostTxSubmitProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostTxSubmitProvider:()=>BlockfrostTxSubmitProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const tryParseBlockfrostTxSubmissionErrorMessage=e=>{try{var t,r,s;const i=JSON.parse(e);if("object"==typeof i&&Array.isArray(null==i?void 0:null===(t=i.contents)||void 0===t?void 0:null===(r=t.contents)||void 0===r?void 0:null===(s=r.contents)||void 0===s?void 0:s.error)){return i}}catch{return null}return null};const tryMapTxBlockfrostSubmissionError=e=>{try{const t=JSON.parse(e.detail);if("string"==typeof(null==t?void 0:t.message)){const r=tryParseBlockfrostTxSubmissionErrorMessage(t.message);if(!r){return null}const s=r.contents.contents.contents.error[0];if(s.includes("OutsideValidityIntervalUTxO")){return new i.TxSubmissionError(i.TxSubmissionErrorCode.OutsideOfValidityInterval,null,s)}const a=/ValueNotConservedUTxO.+Coin (\d+).+Coin (\d+)/.exec(s);if(a){const o=BigInt(a[1]);const n=BigInt(a[2]);const d={consumed:{coins:o},produced:{coins:n}};return new i.TxSubmissionError(i.TxSubmissionErrorCode.ValueNotConserved,d,s)}}}catch{return null}return null};class BlockfrostTxSubmitProvider extends s.BlockfrostProvider{async submitTx({signedTransaction:e}){try{await this.request("tx/submit",{body:o.from(e,"hex"),headers:{"Content-Type":"application/cbor"},method:"POST"})}catch(r){if(r instanceof a.ProviderError){const t=tryMapTxBlockfrostSubmissionError(r);if(t){throw new a.ProviderError(r.reason,t,r.detail)}}throw r}}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/TxSubmitProvider/TxSubmitApiProvider.js":(e,t,r)=>{"use strict";r.d(t,{TxSubmitApiProvider:()=>TxSubmitApiProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/hexString.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");const parseStringishError=e=>{if(/outsideofvalidity/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.OutsideOfValidityInterval,null,e)}if(/valuenotconserved/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.ValueNotConserved,null,e)}if(/nonadacollateral/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.NonAdaCollateral,null,e)}if(/incompletewithdrawals/i.test(e)){return new o.TxSubmissionError(o.TxSubmissionErrorCode.IncompleteWithdrawals,null,e)}return null};const mapCardanoTxSubmitError=e=>{if("string"==typeof e){return parseStringishError(e)}if("object"==typeof e&&e){return parseStringishError(JSON.stringify(e))}return null};var n=r("../../node_modules/axios/lib/axios.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;class TxSubmitApiProvider{async submitTx({signedTransaction:e}){let t;try{t=s.Transaction.fromCbor(e).getId();__classPrivateFieldGet(this,l,"f").debug(`Submitting tx ${t} ...`);await __classPrivateFieldGet(this,d,"f").call(this,{adapter:__classPrivateFieldGet(this,f,"f"),data:(0,a.hexStringToBuffer)(e),headers:{"Content-Type":"application/cbor"},method:"post",url:__classPrivateFieldGet(this,u,"f")});__classPrivateFieldSet(this,c,true,"f");__classPrivateFieldGet(this,l,"f").debug(`Tx ${t} submitted`)}catch(h){__classPrivateFieldSet(this,c,false,"f");__classPrivateFieldGet(this,l,"f").error(`Tx ${t} submission error`);__classPrivateFieldGet(this,l,"f").error(h);if(n["default"].isAxiosError(h)&&h.response){const{data:r,status:o}=h.response;if("number"==typeof o&&o>=400&&o<500)__classPrivateFieldSet(this,c,true,"f");throw new i.ProviderError(i.ProviderFailure.BadRequest,mapCardanoTxSubmitError(r),"string"==typeof r?r:JSON.stringify(r))}throw new i.ProviderError(i.ProviderFailure.Unknown,h,"submitting tx")}}healthCheck(){return Promise.resolve({ok:__classPrivateFieldGet(this,c,"f")})}constructor({baseUrl:e,path:t="/api/submit/tx"},{logger:r,adapter:s}){d.set(this,void 0);c.set(this,true);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,n["default"].create({baseURL:e.origin}),"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/UtxoProvider/BlockfrostUtxoProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostUtxoProvider:()=>BlockfrostUtxoProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js");var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js");var a=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");class BlockfrostUtxoProvider extends s.BlockfrostProvider{async fetchUtxos(e,t){const r=`addresses/${e.toString()}/utxos?${t}`;const s=await this.request(r);const a=s.map(t=>this.fetchDetailsFromCBOR(t.tx_hash).then(r=>{const s=r?r.body.outputs.find(e=>e.address===t.address):void 0;return i.BlockfrostToCore.addressUtxoContent(e.toString(),t,s)}));return Promise.all(a)}async fetchCBOR(e){return this.request(`txs/${e}/cbor`).then(e=>{if(e.cbor)return e.cbor;throw new Error("CBOR is null")}).catch(e=>{throw new Error("CBOR fetch failed")})}async fetchDetailsFromCBOR(e){const t=await this.cache.get(e);if(t)return t;const r=await this.fetchCBOR(e).then(t=>{const r=o.Transaction.fromCbor(o.TxCBOR(t)).toCore();this.logger.debug("Fetched details from CBOR for tx",e);return r}).catch(t=>{this.logger.warn("Failed to fetch details from CBOR for tx",e,t);return null});if(!r){return null}void this.cache.set(e,r);return r}async utxoByAddresses({addresses:e}){try{const t=await Promise.all(e.map(async e=>(0,a.fetchSequentially)({request:async t=>await this.fetchUtxos(e,t)})));return t.flat(1)}catch(r){throw this.toProviderError(r)}}constructor({cache:e,client:t,logger:r}){super(t,r);this.cache=e}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/WebSocket.js":(e,t,r)=>{"use strict";r.d(t,{CardanoWsClient:()=>CardanoWsClient});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var m=r("../../node_modules/isomorphic-ws/browser.js");const p="not-connected";const deserializeDatum=e=>{for(const t of e.body.outputs)if(t.datum)t.datum=s.PlutusData.fromCbor(t.datum).toCore()};const deserializeMetadata=e=>{if(e.auxiliaryData)e.auxiliaryData={blob:new Map(e.auxiliaryData.map(e=>{const t=BigInt(e[0]);return[t,i.GeneralTransactionMetadata.fromCbor(e[1]).toCore().get(t)]}))}};const isEventError=e=>"object"==typeof e&&!!e&&e.error instanceof Error;const isTxRelevant=({body:{collaterals:e,collateralReturn:t,inputs:r,outputs:s},inputSource:i},o)=>i===a.InputSource.inputs?r.some(e=>o.includes(e.address))||s.some(e=>o.includes(e.address)):e.some(e=>o.includes(e.address))||t&&o.includes(t.address);const removeRolledBackTxs=(e,t)=>{let r;for(r in e)if(e[r].blockHeader.blockNo>t)delete e[r]};class WsProvider{emitHealth(e,{notRecoverable:t,overwrite:r}={}){if(this.notRecoverable)return;if(!e){this.reason=void 0;return this.healthSubject$.next({ok:true})}if(t)this.notRecoverable=true;let s;if("string"==typeof e){if(r||!this.reason)this.reason=e;s={notRecoverable:this.notRecoverable,ok:false,reason:this.reason}}else s=e;this.healthSubject$.next(s)}healthCheck(){return(0,c.firstValueFrom)(this.health$)}constructor(){this.health$=this.healthSubject$=new l.ReplaySubject(1);this.healthSubject$.next({ok:false,reason:"starting"})}}class CardanoWsClient extends WsProvider{createNetworkInfoProviderMethod(e){return async()=>{this.logger.debug(`CardanoWsClient.${e} called`);const t=await (0,c.firstValueFrom)((0,u.merge)(this.health$.pipe((0,f.filter)(({ok:e,reason:t})=>!e&&"starting"!==t)),this.networkInfo[`${e}$`]));if("ok"in t&&"reason"in t&&false===t.ok){this.logger.error(`CardanoWsClient.${e} error`,t.reason);throw new o.ProviderError(o.ProviderFailure.ConnectionFailure,void 0,t.reason)}this.logger.debug(`CardanoWsClient.${e} response:`,(0,d.toSerializableObject)(t));return t}}connect(){if("stop"!==this.status)this.status="connecting";const e=this.ws=new m["default"](this.url);e.onmessage=e=>{try{if("string"!=typeof e.data)throw new Error("Unexpected data from WebSocket ");const t=(0,d.fromSerializableObject)(JSON.parse(e.data));const{clientId:r,networkInfo:s,responseTo:i,syncing:a,transactions:o,utxos:c}=t;if(r){this.logger.info(`Connected with clientId ${this.clientId=r}`);if(a)this.emitHealth("Server is still syncing",{overwrite:true});else this.emitHealth()}if(o)for(const l of o){deserializeDatum(l);deserializeMetadata(l);this.transactions[l.id]=l;delete this.utxos[l.id];this.logger.debug("CardanoWsClient got tx",l.id,l.blockHeader)}if(c){for(const u of c)if(!this.transactions[u.id]){deserializeDatum(u);this.utxos[u.id]=u}}if(s){const{eraSummaries:f,genesisParameters:h,ledgerTip:m,lovelaceSupply:p,protocolParameters:v,stake:_}=s;if(f)this.networkInfoSubjects.eraSummaries$.next(f);if(h)this.networkInfoSubjects.genesisParameters$.next(h);if(p)this.networkInfoSubjects.lovelaceSupply$.next(p);if(v)this.networkInfoSubjects.protocolParameters$.next(v);if(_)this.networkInfoSubjects.stake$.next(_);if(m){this.logger.debug("CardanoWsClient got tip",m);removeRolledBackTxs(this.transactions,m.blockNo);removeRolledBackTxs(this.utxos,m.blockNo);this.networkInfoSubjects.ledgerTip$.next(m)}if(f&&m&&p&&v&&!r){const w=(0,n.createSlotEpochInfoCalc)(f)(m.slot);this.epochSubject$.next({epochInfo:w,eraSummaries:f,ledgerTip:m,lovelaceSupply:p,protocolParameters:v})}}if(i){const y=this.handlers.get(i);this.logger.debug("CardanoWsClient response",i);if(y){const{error:g}=t;this.handlers.delete(i);g?y(g):y(void 0,t)}}}catch(b){this.logger.error(b,"While parsing message",e.data,this.clientId)}};e.onclose=()=>{this.logger.debug("WebSocket client connection closed",this.clientId);if(this.heartbeatTimeout){clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=void 0}this.clientId=p;if("stop"===this.status)this.closeResolver();else{this.status="idle";const e=setTimeout(()=>this.connect(),1e3);if("function"==typeof e.unref)e.unref()}this.emitHealth("closed")};e.onerror=t=>{const r=t instanceof Error?t:isEventError(t)?t.error:new Error(`Unknown error: ${JSON.stringify(t)}`);this.logger.error(r,"Async error from WebSocket client",this.clientId);e.close();this.emitHealth(r.message,{overwrite:true});for(const s of this.handlers.values())s(r);this.handlers.clear();this.addresses={};this.transactions={}};e.onopen=()=>{if("stop"!==this.status)this.status="connected";this.heartbeat()}}heartbeat(){if(this.heartbeatTimeout)clearInterval(this.heartbeatTimeout);this.heartbeatTimeout=setTimeout(()=>{try{this.request({})}catch(e){this.logger.error(e,"Error while refreshing heartbeat",this.clientId)}},this.heartbeatInterval);if("function"==typeof this.heartbeatTimeout.unref)this.heartbeatTimeout.unref()}close(){this.status="stop";this.ws.close();return this.closePromise}request(e,t){if("connected"!==this.status)return false;if(Object.keys(e).length>0)e={...e,requestId:++this.requestId};this.logger.debug("CardanoWsClient request",e);this.ws.send(JSON.stringify(e));this.heartbeat();if(e.requestId&&t)this.handlers.set(e.requestId,t);return true}transactionsByAddresses(e){const{addresses:t,blockRange:r,pagination:s}=e;return new Promise((i,a)=>{const n=(null==r?void 0:r.lowerBound)||0;const l=(null==r?void 0:r.upperBound)||Number.POSITIVE_INFINITY;const u=[];const h={addresses:u,lower:n};this.logger.debug("CardanoWsClient.transactionsByAddresses called",e);const complete=r=>{if(r){for(const o of u)delete this.addresses[o];this.logger.error("CardanoWsClient.transactionsByAddresses error",e,r);return a(r)}const c=Object.values(this.transactions).filter(({blockHeader:{blockNo:e}})=>n<=e&&e<=l).filter(e=>isTxRelevant(e,t)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);const f=(null==s?void 0:s.startAt)||0;const h=f+((null==s?void 0:s.limit)||Number.POSITIVE_INFINITY);const m=c.filter((e,t)=>f<=t&&t<h);const p={pageResults:m,totalResultCount:c.length};this.logger.debug("CardanoWsClient.transactionsByAddresses response",e,(0,d.toSerializableObject)(p));i(p)};for(const m of t){const p=this.addresses[m];let v=false;if(p){if("syncing"===p.status)return complete(new o.ProviderError(o.ProviderFailure.Conflict,null,`${m} still loading`));if(n<p.lower)v=true}else v=true;if(v){u.push(m);this.addresses[m]={lower:n,status:"syncing"}}}(0,c.firstValueFrom)(this.health$.pipe((0,f.filter)(({reason:e})=>"starting"!==e))).then(({ok:e,reason:t})=>{if(!e)return complete(new o.ProviderError(o.ProviderFailure.ConnectionFailure,void 0,t));if(0===u.length)return complete();this.deferRequest(h,e=>{if(e)return complete(new o.ProviderError(o.ProviderFailure.ConnectionFailure,e,e.message));for(const t of u)this.addresses[t].status="synced";complete()})}).catch(complete)})}deferRequest(e,t){const{requests:r,timeout:s}=this.deferredRequests;if(s)clearTimeout(s);r.push({complete:t,txsByAddresses:e});this.deferredRequests.timeout=setTimeout(()=>{this.deferredRequests={requests:[]};this.request({txsByAddresses:r.reduce((e,{txsByAddresses:{addresses:t,lower:r}})=>({addresses:[...e.addresses,...t],lower:e.lower<r?e.lower:r}),{addresses:[],lower:Number.POSITIVE_INFINITY})},e=>r.forEach(({complete:t})=>t(e)))},3)}utxoByAddresses({addresses:e}){this.logger.debug("CardanoWsClient.utxoByAddresses called",e);for(const t of e){const r=this.addresses[t];let s;if(!r){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} not loaded`);return Promise.reject(new o.ProviderError(o.ProviderFailure.NotImplemented,null,s))}if("syncing"===r.status){this.logger.error("CardanoWsClient.utxoByAddresses error",s=`${t} still loading`);return Promise.reject(new o.ProviderError(o.ProviderFailure.Conflict,null,s))}}const i=[];const a=[...Object.values(this.utxos),...Object.values(this.transactions)].filter(t=>isTxRelevant(t,e)).sort((e,t)=>e.blockHeader.blockNo-t.blockHeader.blockNo||e.index-t.index);for(let n=0;n<a.length;++n){const c=a[n];for(let l=0;l<c.body.outputs.length;++l){const u=c.body.outputs[l];if(e.includes(u.address)){let f=true;for(let h=n+1;h<a.length&&f;++h){const m=a[h];for(let p=0;p<m.body.inputs.length&&f;++p){const v=m.body.inputs[p];if(v.txId===c.id&&v.index===l)f=false}}if(f)i.push([{address:u.address,index:l,txId:c.id},u])}}}this.logger.debug("CardanoWsClient.utxoByAddresses response",(0,d.toSerializableObject)(i));return Promise.resolve(i)}constructor(e,t){super();this.clientId=p;this.addresses={};this.deferredRequests={requests:[]};this.handlers=new Map;this.requestId=0;this.status="idle";this.transactions={};this.utxos={};this.networkInfoSubjects={};this.epoch$=this.epochSubject$=new h.Subject;this.heartbeatInterval=1e3*(t.heartbeatInterval||55);this.logger=e.logger;this.url=t.url;this.closePromise=new Promise(e=>{this.closeResolver=e});this.networkInfoSubjects={eraSummaries$:new l.ReplaySubject(1),genesisParameters$:new l.ReplaySubject(1),ledgerTip$:new l.ReplaySubject(1),lovelaceSupply$:new l.ReplaySubject(1),protocolParameters$:new l.ReplaySubject(1),stake$:new l.ReplaySubject(1)};this.networkInfo=this.networkInfoSubjects;this.chainHistoryProvider={blocksByHashes:t=>e.chainHistoryProvider.blocksByHashes(t),healthCheck:()=>this.healthCheck(),transactionsByAddresses:e=>this.transactionsByAddresses(e),transactionsByHashes:t=>e.chainHistoryProvider.transactionsByHashes(t)};this.networkInfoProvider={eraSummaries:this.createNetworkInfoProviderMethod("eraSummaries"),genesisParameters:this.createNetworkInfoProviderMethod("genesisParameters"),healthCheck:()=>this.healthCheck(),ledgerTip:this.createNetworkInfoProviderMethod("ledgerTip"),lovelaceSupply:this.createNetworkInfoProviderMethod("lovelaceSupply"),protocolParameters:this.createNetworkInfoProviderMethod("protocolParameters"),stake:this.createNetworkInfoProviderMethod("stake")};this.utxoProvider={healthCheck:()=>this.healthCheck(),utxoByAddresses:e=>this.utxoByAddresses(e)};this.connect()}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostClient:()=>BlockfrostClient,BlockfrostError:()=>BlockfrostError});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}var a=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/dom/fetch.js");const tryReadResponseText=async e=>{try{return e.text()}catch{return}};class BlockfrostError extends i{constructor(e,t,r){const s=t||(null==r?void 0:r.message);super(`Blockfrost error with status '${e}': ${s}`);this.status=e;this.body=t;this.innerError=r}}class BlockfrostClient{request(e,t){return this.rateLimiter.schedule(()=>{return(0,a.firstValueFrom)((0,c.fromFetch)(`${this.baseUrl}/${e}`,{...this.requestInit,...t,headers:(null==t?void 0:t.headers)?{...this.requestInit.headers,...t.headers}:this.requestInit.headers}).pipe((0,o.switchMap)(async e=>{if(e.ok){try{return await e.json()}catch{throw new BlockfrostError(e.status,"Failed to parse json")}}throw new BlockfrostError(e.status,await tryReadResponseText(e))}),(0,n.catchError)(e=>{if(e instanceof BlockfrostError){return(0,d.throwError)(()=>e)}return(0,d.throwError)(()=>new BlockfrostError(void 0,void 0,e))})))})}constructor({apiVersion:e,projectId:t,baseUrl:r},{rateLimiter:s}){this.rateLimiter=s;this.requestInit=t?{headers:{project_id:t}}:{};this.baseUrl=e?`${r}/api/${e}`:`${r}`}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostProvider.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostProvider:()=>BlockfrostProvider});var s=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var o=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;const toProviderFailure=e=>{switch(e){case 400:return i.ProviderFailure.BadRequest;case 403:return i.ProviderFailure.Forbidden;case 404:return i.ProviderFailure.NotFound;case 402:case 418:case 425:case 429:return i.ProviderFailure.ServerUnavailable;case 500:return i.ProviderFailure.Unhealthy;default:return i.ProviderFailure.Unknown}};class BlockfrostProvider{async request(e,t){try{this.logger.debug("request",e);const r=await __classPrivateFieldGet(this,n,"f").request(e,t);this.logger.debug("response",r);return r}catch(s){(0,o.isBlockfrostNotFoundError)(s)?this.logger.debug("Blockfrost not found",s):this.logger.error(s);throw this.toProviderError(s)}}async healthCheck(){try{const e=await __classPrivateFieldGet(this,n,"f").request("health");return{ok:e.is_healthy}}catch(t){return{ok:false,reason:this.toProviderError(t).message}}}toProviderError(e){if(e instanceof i.ProviderError){return e}if(e instanceof s.BlockfrostError){return new i.ProviderError(toProviderFailure(e.status),e,e.body)}return new i.ProviderError(i.ProviderFailure.Unknown,e)}constructor(e,t){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");this.logger=(0,a.contextLogger)(t,this.constructor.name)}}n=new WeakMap},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostToCore.js":(e,t,r)=>{"use strict";r.d(t,{BlockfrostToCore:()=>u});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const u={addressUtxoContent:(e,t,r)=>[u.hydratedTxIn(u.inputFromUtxo(e,t)),u.txOut(u.outputFromUtxo(e,t),r)],blockToTip:e=>({blockNo:s.BlockNo(e.height),hash:s.BlockId(e.hash),slot:s.Slot(e.slot)}),hydratedTxIn:e=>({address:i.PaymentAddress(e.address),index:e.output_index,txId:a.TransactionId(e.tx_hash)}),inputFromUtxo:(e,t)=>({address:e,amount:t.amount,output_index:t.output_index,tx_hash:t.tx_hash}),inputs:e=>e.map(e=>u.hydratedTxIn(e)),outputFromUtxo:(e,t)=>({...t,address:e,collateral:false}),outputs:e=>e.map(e=>u.txOut(e)),protocolParameters:e=>({coinsPerUtxoByte:Number(e.coins_per_utxo_word),collateralPercentage:e.collateral_percent,committeeTermLimit:s.EpochNo(0),costModels:new Map([[o.PlutusLanguageVersion.V1,Object.values(e.cost_models.PlutusV1)],[o.PlutusLanguageVersion.V2,Object.values(e.cost_models.PlutusV2)]]),dRepDeposit:e.drep_deposit?Number(e.drep_deposit):void 0,dRepInactivityPeriod:s.EpochNo(0),dRepVotingThresholds:null,desiredNumberOfPools:e.n_opt,governanceActionDeposit:e.gov_action_deposit?Number(e.gov_action_deposit):void 0,governanceActionValidityPeriod:s.EpochNo(0),maxBlockBodySize:e.max_block_size,maxBlockHeaderSize:e.max_block_header_size,maxCollateralInputs:Number(e.max_collateral_inputs),maxExecutionUnitsPerBlock:{memory:Number.parseInt(e.max_block_ex_mem),steps:Number.parseInt(e.max_block_ex_steps)},maxExecutionUnitsPerTransaction:{memory:Number.parseInt(e.max_tx_ex_mem),steps:Number.parseInt(e.max_tx_ex_steps)},maxTxSize:Number(e.max_tx_size),maxValueSize:Number(e.max_val_size),minCommitteeSize:0,minFeeCoefficient:e.min_fee_a,minFeeConstant:e.min_fee_b,minPoolCost:Number(e.min_pool_cost),monetaryExpansion:e.rho.toString(),poolDeposit:Number(e.pool_deposit),poolInfluence:e.a0.toString(),poolRetirementEpochBound:e.e_max,poolVotingThresholds:null,prices:{memory:e.price_mem,steps:e.price_step},protocolVersion:{major:e.protocol_major_ver,minor:e.protocol_minor_ver},stakeKeyDeposit:Number(e.key_deposit),treasuryExpansion:e.tau.toString()}),txOut:(e,t)=>{const r={coins:BigInt(e.amount.find(({unit:e})=>"lovelace"===e).quantity)};const s=new Map;for(const{quantity:a,unit:o}of e.amount)if("lovelace"!==o)s.set(n.AssetId(o),BigInt(a));if(s.size>0)r.assets=s;const u={address:i.PaymentAddress(e.address),value:r};if(e.inline_datum)u.datum=d.PlutusData.fromCbor((0,l.HexBlob)(e.inline_datum)).toCore();if(e.data_hash)u.datumHash=(0,c.Hash32ByteBase16)(e.data_hash);if(null==t?void 0:t.scriptReference)u.scriptReference=t.scriptReference;return u}}},"../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/util.js":(e,t,r)=>{"use strict";r.d(t,{blockfrostMetadataToTxMetadata:()=>blockfrostMetadataToTxMetadata,fetchSequentially:()=>fetchSequentially,isBlockfrostNotFoundError:()=>isBlockfrostNotFoundError});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const i=e[s];r[s]="function"==typeof i?(...e)=>i(...e).catch(t):i;return r},{});const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(jsonToMetadatum)}return new Map(Object.keys(e).map(t=>[tryParseBigIntKey(t),jsonToMetadatum(e[t])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};var i=r("../../node_modules/@cardano-sdk/cardano-services-client/dist/esm/blockfrost/BlockfrostClient.js");const isBlockfrostNotFoundError=e=>e instanceof i.BlockfrostError&&404===e.status||e instanceof s.ProviderError&&e.reason===s.ProviderFailure.NotFound;const buildQueryString=({page:e,count:t,order:r})=>{let s="";const appendIfDefined=(e,t)=>{if(void 0!==e)s+=s?`&${t}`:t};appendIfDefined(e,`page=${e}`);appendIfDefined(t,`count=${t}`);appendIfDefined(r,`order=${r}`);return s};const fetchSequentially=async(e,t=[])=>{var r,s;const i=(null===(r=e.paginationOptions)||void 0===r?void 0:r.count)||100;const a=(null===(s=e.paginationOptions)||void 0===s?void 0:s.page)||1;try{var o,n;const d=await e.request(buildQueryString({count:i,order:null===(o=e.paginationOptions)||void 0===o?void 0:o.order,page:a}));const c=e.responseTranslator?e.responseTranslator(d):d;const l=[...t,...c];const u=null===(n=e.haveEnoughItems)||void 0===n?void 0:n.call(e,l,d);if(d.length===i&&!u){return fetchSequentially({...e,paginationOptions:{...e.paginationOptions,page:a+1}},l)}return l}catch(f){if(isBlockfrostNotFoundError(f)){return[]}throw f}};const blockfrostMetadataToTxMetadata=e=>e.reduce((e,t)=>{const{json_metadata:r,label:s}=t;if(!r||!s)return e;e.set(BigInt(s),jsonToMetadatum(r));return e},new Map)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidFileError=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends s.CustomError{}t.InvalidFileError=InvalidFileError},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromMetadatum=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=i(r("../../node_modules/lodash/difference.js"));const isString=e=>"string"==typeof e;const f=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(c.asString);if(t.some(e=>void 0===e)){return}return t.join("")}return(0,c.asString)(e)};const mapOtherProperties=(e,t)=>{const r=(0,u.default)([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,d.asMetadatumMap)(e);if(!s)throw new n.InvalidFileError;const i=(0,c.asString)(s.get("name"));const a=(0,c.asString)(s.get("mediaType"));if(!a){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const l=metadatumToString(s.get("src"));if(!l){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,o.MediaType)(a),name:i,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,o.Uri)(l)}};const getPolicyMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||(()=>{for(const[r,i]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return i})());const getAssetMetadata=(e,t)=>(0,d.asMetadatumMap)(e.get(t)||e.get(s.from(t,"hex").toString("utf8"))||(()=>{for(const[r,i]of e.entries())if(ArrayBuffer.isView(r)&&s.from(r).toString("hex")===t)return i})());const getName=(e,t,r,s,i=false)=>{const o=(0,c.asString)(e.get("name"));if(o)return o;if("1.0"===t){try{return a.AssetName.toUTF8(r.name,i)}catch(n){s.warn(n)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=(0,c.asString)(e);if(t&&f.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,s=false)=>{const i=null==t?void 0:t.get(721n);if(!i)return null;const n=(0,d.asMetadatumMap)(i);if(!n)return null;const u=getPolicyMetadata(n,e.policyId);if(!u)return null;const f=parseVersion(u.get("version"));if(!f)return null;const h=getAssetMetadata(u,e.name);if(!h)return null;const m=getName(h,f,e,r,true);const p=metadatumToString(h.get("image"));const v=a.AssetId.fromParts(e.policyId,e.name);if(s&&!m||!p){r.warn(missingFieldLogMessage(m?"image":"name",v,true));return null}const _=(0,c.asString)(h.get("mediaType"));const w=(0,d.asMetadatumArray)(h.get("files"));try{return{description:metadatumToString(h.get("description")),files:null==w?void 0:w.map(e=>mapFile(e,v,r)).filter(l.isNotNil),image:(0,o.Uri)(p),mediaType:_?(0,o.ImageMediaType)(_):void 0,name:m||"",otherProperties:mapOtherProperties(h,["name","image","mediaType","description","files"]),version:f}}catch(y){r.warn("Invalid CIP-25 metadata",h,y);return null}};t.fromMetadatum=fromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fromPlutusData=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,o.isPlutusBigInt)(e)||(0,o.isPlutusBoundedBytes)(e))return e;if((0,o.isPlutusMap)(e)){const r=mapOtherProperties((0,o.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,o.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const mapFile=(e,t)=>{if(!(0,o.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:a,name:n,...d}=(0,o.tryConvertPlutusMapToUtf8Record)(e,t);const c=tryCoerce(r,s.MediaType,t);const l=tryCoerce(a,s.Uri,t);if("string"!=typeof l||"string"!=typeof c){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:c,name:(0,i.asString)(n),otherProperties:undefinedIfEmpty(mapOtherProperties(d,t)),src:l}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,o.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>mapFile(e,t)).filter(a.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const i=(0,o.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!i)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return i}});const fromPlutusData=(e,t,r=false)=>{const n=(0,a.contextLogger)(t,"NftMetadata.fromPlutusData");const d=getConditionalValidators(r,n);if(!d.isValidDatumShape(e)){return null}const[c,l]=e.fields.items;if(!(0,o.isPlutusMap)(c)||!(0,o.isPlutusBigInt)(l)){n.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const u=(0,o.tryConvertPlutusMapToUtf8Record)(c,n);const{name:f,image:h,mediaType:m,description:p,files:v,..._}=u;if(!d.isNameValid(f)){return null}if("string"!=typeof h){n.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const w=tryCoerce(h,s.Uri,n);if(!w){return null}return{description:(0,i.asString)(p),files:mapFiles(v,n),image:w,mediaType:tryCoerce(m,s.ImageMediaType,n),name:f||"",otherProperties:undefinedIfEmpty(mapOtherProperties(_,n)),version:l.toString()}};t.fromPlutusData=fromPlutusData},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.NftMetadata=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromMetadatum.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/fromPlutusData.js");i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/errors.js"),t);t.NftMetadata={fromMetadatum:a.fromMetadatum,fromPlutusData:o.fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/types.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.MediaType=t.ImageMediaType=t.Uri=void 0;const o=a(r("../../node_modules/@biglup/is-cid/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return o.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new n.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};t.Uri=Uri;const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "image/*"')};t.ImageMediaType=ImageMediaType;const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new n.InvalidStringError('Expected media type to be "*/*"')};t.MediaType=MediaType},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asString=void 0;const asString=e=>"string"==typeof e?e:void 0;t.asString=asString},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.AssetNameLabelNum=t.AssetNameLabel=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js"));const d=8;const c="0";const AssetNameLabel=e=>e;t.AssetNameLabel=AssetNameLabel;t.AssetNameLabelNum={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new o.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>(0,n.default)(Uint8Array.from(s.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const r=e[0];const s=e[7];const i=e.slice(1,5);const a=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(r,s)||isInvalidChecksum(i,a)){return null}return(0,t.AssetNameLabel)(Number.parseInt(i,16))};t.AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const s=assetNameLabelHexToNum(t);if(null===s){return null}return{content:(0,a.AssetName)(r),label:s}};t.AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,a.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/crc8.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});let r=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)r=new Int32Array(r);const crc8=(e,t=0)=>{let s=Math.trunc(t);for(const i of e)s=255&r[(s^i)&255];return s};t["default"]=crc8},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;t.util=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/NftMetadata/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/TokenMetadata.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/types/AssetInfo.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.coalesceTokenMaps=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[i,a]of r.entries()){const o=t.get(i)||0n;t.set(i,o+a)}}if(0===t.size){return}return t};t.coalesceTokenMaps=coalesceTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.getAssetNameAsText=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/cip67.js");const getAssetNameAsText=e=>{var t;const r=i.AssetId.getAssetName(e);const o=null===(t=a.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return s.from(o||r,"hex").toString("utf8")};t.getAssetNameAsText=getAssetNameAsText},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/coalesceTokenMaps.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/getAssetNameAsText.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/isValidHandle.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isValidHandle=void 0;const r=new RegExp(/^[a-z0-9_.-]{1,15}$/);const s=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{s.lastIndex=0;return r.test(e)||s.test(e)||"0|0"===e};t.isValidHandle=isValidHandle},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/removeNegativesFromTokenMap.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.removeNegativesFromTokenMap=void 0;const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};t.removeNegativesFromTokenMap=removeNegativesFromTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/subtractTokenMaps.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.subtractTokenMaps=t.subtractMaps=void 0;const i=s(r("../../node_modules/lodash/uniq.js"));const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,a]of e.entries())if(0n!==a)r.set(s,a);return r}if(!e){const o=new Map;for(const[n,d]of t.entries())if(0n!==d)o.set(n,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=(0,i.default)(l);for(const v of p){const _=e.get(v);const w=t.get(v);const y=_-w;if(0n!==y)c.set(v,y)}return c};t.subtractMaps=subtractMaps;const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(t.subtractMaps)};t.subtractTokenMaps=subtractTokenMaps},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;Object.defineProperty(t,"__esModule",{value:true});t.isAddress=t.Address=t.CredentialType=t.AddressType=void 0;const l=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const w=1023;var y;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(y=t.AddressType||(t.AddressType={}));var g;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(g=t.CredentialType||(t.CredentialType={}));class Address{static fromBytes(e){const t=s.from(e,"hex");const r=t[0]>>4;let i;switch(r){case y.BasePaymentKeyStakeKey:case y.BasePaymentScriptStakeKey:case y.BasePaymentKeyStakeScript:case y.BasePaymentScriptStakeScript:i=u.BaseAddress.unpackParts(r,t);break;case y.PointerKey:case y.PointerScript:i=v.PointerAddress.unpackParts(r,t);break;case y.EnterpriseKey:case y.EnterpriseScript:i=h.EnterpriseAddress.unpackParts(r,t);break;case y.RewardKey:case y.RewardScript:i=_.RewardAddress.unpackParts(r,t);break;case y.Byron:i=f.ByronAddress.unpackParts(r,t);break;default:throw new m.InvalidArgumentError("data","Invalid address raw data")}return i}toBytes(){let e;switch(d(this,c,"f").type){case y.BasePaymentKeyStakeKey:case y.BasePaymentScriptStakeKey:case y.BasePaymentKeyStakeScript:case y.BasePaymentScriptStakeScript:e=u.BaseAddress.packParts(d(this,c,"f"));break;case y.PointerKey:case y.PointerScript:e=v.PointerAddress.packParts(d(this,c,"f"));break;case y.EnterpriseKey:case y.EnterpriseScript:e=h.EnterpriseAddress.packParts(d(this,c,"f"));break;case y.RewardKey:case y.RewardScript:e=_.RewardAddress.packParts(d(this,c,"f"));break;case y.Byron:e=f.ByronAddress.packParts(d(this,c,"f"));break;default:throw new Error("Invalid address")}return m.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(m.HexBlob.fromBytes(l.base58.decode(e)))}toBase58(){if(d(this,c,"f").type!==y.Byron)throw new Error("Only Byron addresses will be encoded in base58");return l.base58.encode(s.from(this.toBytes(),"hex"))}toBech32(){const e=l.bech32.toWords(s.from(this.toBytes(),"hex"));if(d(this,c,"f").type===y.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(d(this,c,"f").type,d(this,c,"f").networkId);const r=l.bech32.encode(t,e,w);return d(this,c,"f").type===y.RewardKey||(d(this,c,"f").type,y.RewardScript),r}static fromBech32(e){const{words:t}=l.bech32.decode(e,w);return Address.fromBytes(m.HexBlob.fromBytes(l.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,m.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(d(t,c,"f").type!==y.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return f.ByronAddress.fromAddress(this)}asReward(){return _.RewardAddress.fromAddress(this)}asPointer(){return v.PointerAddress.fromAddress(this)}asEnterprise(){return h.EnterpriseAddress.fromAddress(this)}asBase(){return u.BaseAddress.fromAddress(this)}getType(){return d(this,c,"f").type}getNetworkId(){if(d(this,c,"f").type===y.Byron){var e;if((null===(e=d(this,c,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return p.NetworkId.Mainnet;return p.NetworkId.Testnet}return d(this,c,"f").networkId}getProps(){return d(this,c,"f")}static getBech32Prefix(e,t){let r="";switch(e){case y.BasePaymentKeyStakeKey:case y.BasePaymentScriptStakeKey:case y.BasePaymentKeyStakeScript:case y.BasePaymentScriptStakeScript:case y.PointerKey:case y.PointerScript:case y.EnterpriseKey:case y.EnterpriseScript:r="addr";break;case y.RewardKey:case y.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){c.set(this,void 0);n(this,c,e,"f")}}t.Address=Address;c=new WeakMap;const isAddress=e=>Address.isValid(e);t.isAddress=isAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BaseAddress=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class BaseAddress{static fromCredentials(e,t,r){let s=l.AddressType.BasePaymentKeyStakeKey;if(t.type===l.CredentialType.ScriptHash)s|=1;if(r.type===l.CredentialType.ScriptHash)s|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:s})}getPaymentCredential(){return a(this,d,"f")}getStakeCredential(){return a(this,c,"f")}toAddress(){return new l.Address({delegationPart:a(this,c,"f"),networkId:a(this,n,"f"),paymentPart:a(this,d,"f"),type:a(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.BasePaymentKeyStakeKey:case l.AddressType.BasePaymentScriptStakeKey:case l.AddressType.BasePaymentKeyStakeScript:case l.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new f.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const i=(0,u.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));const a=(0,u.Hash28ByteBase16)(s.from(t.slice(29,57)).toString("hex"));const o=e===l.AddressType.BasePaymentKeyStakeScript||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;const n=e===l.AddressType.BasePaymentScriptStakeKey||e===l.AddressType.BasePaymentScriptStakeScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash;return new l.Address({delegationPart:{hash:a,type:o},networkId:r,paymentPart:{hash:i,type:n},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);i(this,n,e.networkId,"f");i(this,d,e.paymentPart,"f");i(this,c,e.delegationPart,"f");i(this,o,e.type,"f")}}t.BaseAddress=BaseAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ByronAddress=t.ByronAddressType=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var h;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(h=t.ByronAddressType||(t.ByronAddressType={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:d.AddressType.Byron})}getAttributes(){return a(this,n,"f").attrs}getRoot(){return a(this,n,"f").root}getByronAddressType(){return a(this,n,"f").type}toAddress(){return new d.Address({byronAddressContent:a(this,n,"f"),type:a(this,o,"f")})}static fromAddress(e){return e.getProps().type===d.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:i}=e.byronAddressContent;let a=0;if(r.derivationPath)++a;if(r.magic)++a;const o=new c.CborWriter;o.writeStartArray(3);o.writeByteString(s.from(t,"hex"));o.writeStartMap(a);if(r.derivationPath){const n=new c.CborWriter().writeByteString(s.from(r.derivationPath,"hex")).encode();o.writeInt(1);o.writeByteString(n)}if(r.magic){const d=new c.CborWriter().writeInt(r.magic).encode();o.writeInt(2);o.writeByteString(d)}o.writeInt(i);const l=s.from(o.encodeAsHex(),"hex");o.reset();o.writeStartArray(2);o.writeTag(c.CborTag.EncodedCborDataItem);o.writeByteString(l);o.writeInt((0,f.crc32)(l));return o.encode()}static unpackParts(e,t){let r=new c.CborReader(u.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const i=r.readByteString();if(Number(r.readInt())!==(0,f.crc32)(i))throw new u.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new c.CborReader(u.HexBlob.fromBytes(i));r.readStartArray();const a=(0,l.Hash28ByteBase16)(s.from(r.readByteString()).toString("hex"));r.readStartMap();let o;let n;while(r.peekState()!==c.CborReaderState.EndMap){const h=r.readInt();switch(h){case 1n:{const m=r.readByteString();n=u.HexBlob.fromBytes(new c.CborReader(u.HexBlob.fromBytes(m)).readByteString());break}case 2n:{const p=r.readByteString();o=Number(new c.CborReader(u.HexBlob.fromBytes(p)).readInt());break}}}r.readEndMap();const v=Number(r.readInt());return new d.Address({byronAddressContent:{attrs:{derivationPath:n,magic:o},root:a,type:v},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);i(this,n,e.byronAddressContent,"f");i(this,o,e.type,"f")}}t.ByronAddress=ByronAddress;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.DRepID=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=1023;const f=28;const h=29;const DRepID=e=>{try{return(0,l.typedBech32)(e,["drep"],47)}catch{return(0,l.typedBech32)(e,["drep","drep_script"],45)}};t.DRepID=DRepID;t.DRepID.isValid=e=>{try{(0,t.DRepID)(e);return true}catch{return false}};t.DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===d.CredentialType.ScriptHash)t="drep_script";const r=n.bech32.toWords(s.from(e.hash,"hex"));return n.bech32.encode(t,r,u)};t.DRepID.cip129FromCredential=e=>{let t="22";if(e.type===d.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const i=n.bech32.toWords(s.from(r,"hex"));return n.bech32.encode("drep",i,u)};t.DRepID.toCredential=e=>{const{words:t}=n.bech32.decode(e,u);const r=n.bech32.fromWords(t);if(r.length!==f&&r.length!==h){throw new Error("Invalid DRepID payload")}if(r.length===f){const i=e.includes("drep_script");return{hash:(0,c.Hash28ByteBase16)(s.from(r).toString("hex")),type:i?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}}const a=r[0];const o=r.slice(1);const l=(32&a)===32;const m=(3&a)===3;if(!l){throw new Error("Invalid governance credential type")}return{hash:(0,c.Hash28ByteBase16)(s.from(o).toString("hex")),type:m?d.CredentialType.ScriptHash:d.CredentialType.KeyHash}};t.DRepID.toCip105DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip105FromCredential(r)};t.DRepID.toCip129DRepID=e=>{const r=t.DRepID.toCredential(e);return t.DRepID.cip129FromCredential(r)};t.DRepID.toAddress=e=>{const r=t.DRepID.toCredential(e);return new d.Address({paymentPart:r,type:r.type===d.CredentialType.KeyHash?d.AddressType.EnterpriseKey:d.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.EnterpriseAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===c.CredentialType.ScriptHash?c.AddressType.EnterpriseScript:c.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return a(this,d,"f")}toAddress(){return new c.Address({networkId:a(this,n,"f"),paymentPart:a(this,d,"f"),type:a(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.EnterpriseKey:case c.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const i=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:i,type:e===c.AddressType.EnterpriseScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,n,e.networkId,"f");i(this,d,e.paymentPart,"f");i(this,o,e.type,"f")}}t.EnterpriseAddress=EnterpriseAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.addressNetworkId=t.inputsWithAddresses=t.isAddressWithin=t.PaymentAddress=t.isRewardAccount=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const isRewardAccount=e=>{try{(0,o.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};t.isRewardAccount=isRewardAccount;const PaymentAddress=e=>{if(i.Address.isValid(e)){if((0,t.isRewardAccount)(e)||a.DRepID.isValid(e)){throw new o.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,o.assertIsHexString)(e)}catch{throw new o.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const r=i.Address.fromBytes(o.HexBlob.fromBytes(s.from(e,"hex")));return r.getType()===i.AddressType.Byron?r.toBase58():r.toBech32()};t.PaymentAddress=PaymentAddress;const isAddressWithin=e=>({address:t})=>e.includes(t);t.isAddressWithin=isAddressWithin;const inputsWithAddresses=(e,r)=>e.body.inputs.filter((0,t.isAddressWithin)(r));t.inputsWithAddresses=inputsWithAddresses;const addressNetworkId=e=>{const t=i.Address.fromString(e);return t.getNetworkId()};t.addressNetworkId=addressNetworkId},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.PointerAddress=t.CertIndex=t.TxIndex=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const u=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new f.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return s.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const i=e[s];r<<=7n;r|=BigInt(127&i);t=(128&i)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;t.TxIndex=TxIndex;const CertIndex=e=>e;t.CertIndex=CertIndex;class PointerAddress{static fromCredentials(e,t,r){let s=l.AddressType.PointerKey;if(t.type===l.CredentialType.ScriptHash)s&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:s})}getPaymentCredential(){return a(this,d,"f")}getStakePointer(){return a(this,c,"f")}toAddress(){return new l.Address({networkId:a(this,n,"f"),paymentPart:a(this,d,"f"),pointer:a(this,c,"f"),type:a(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case l.AddressType.PointerKey:case l.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:i}=e.pointer;return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex"),s.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(i)])])}static unpackParts(e,r){if(r.length<=29)throw new f.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const i=15&r[0];const a=(0,u.Hash28ByteBase16)(s.from(r.slice(1,29)).toString("hex"));let o=29;const n=s.from(r);const{value:d,bytesRead:c}=variableLengthDecode(n.subarray(o));o+=c;const{value:h,bytesRead:m}=variableLengthDecode(n.subarray(o));o+=m;const{value:p}=variableLengthDecode(n.subarray(o));return new l.Address({networkId:i,paymentPart:{hash:a,type:e===l.AddressType.PointerScript?l.CredentialType.ScriptHash:l.CredentialType.KeyHash},pointer:{certIndex:(0,t.CertIndex)(Number(p)),slot:d,txIndex:(0,t.TxIndex)(Number(h))},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);i(this,n,e.networkId,"f");i(this,d,e.paymentPart,"f");i(this,c,e.pointer,"f");i(this,o,e.type,"f")}}t.PointerAddress=PointerAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createRewardAccount=t.RewardAccount=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const i=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,a.typedBech32)(e,["stake","stake_test"],47);t.RewardAccount=RewardAccount;t.RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;t.RewardAccount.fromCredential=(e,r)=>(0,t.RewardAccount)(o.RewardAddress.fromCredentials(r,{hash:e.hash,type:e.type}).toAddress().toBech32());t.RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,r)=>(0,t.RewardAccount)(o.RewardAddress.fromCredentials(r,{hash:(0,i.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32());t.createRewardAccount=createRewardAccount},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.RewardAddress=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class RewardAddress{static fromCredentials(e,t){let r=c.AddressType.RewardKey;if(t.type===c.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return a(this,d,"f")}toAddress(){return new c.Address({networkId:a(this,n,"f"),paymentPart:a(this,d,"f"),type:a(this,o,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case c.AddressType.RewardKey:case c.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return s.concat([s.from([e.type<<4|e.networkId]),s.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new u.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const i=(0,l.Hash28ByteBase16)(s.from(t.slice(1,29)).toString("hex"));return new c.Address({networkId:r,paymentPart:{hash:i,type:e===c.AddressType.RewardScript?c.CredentialType.ScriptHash:c.CredentialType.KeyHash},type:e})}constructor(e){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,n,e.networkId,"f");i(this,d,e.paymentPart,"f");i(this,o,e.type,"f")}}t.RewardAddress=RewardAddress;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/BaseAddress.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/ByronAddress.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/DRepID.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/EnterpriseAddress.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PaymentAddress.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/PointerAddress.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChainIds=t.NetworkMagics=t.NetworkId=void 0;var r;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(r=t.NetworkId||(t.NetworkId={}));var s;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(s=t.NetworkMagics||(t.NetworkMagics={}));t.ChainIds={Mainnet:{networkId:r.Mainnet,networkMagic:s.Mainnet},Preprod:{networkId:r.Testnet,networkMagic:s.Preprod},Preview:{networkId:r.Testnet,networkMagic:s.Preview},Sanchonet:{networkId:r.Testnet,networkMagic:s.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.util=void 0;a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/ChainId.js"),t);t.util=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js"));a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.AssetFingerprint=t.PolicyId=t.AssetId=t.AssetName=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/web-encoding/src/lib.js");const AssetName=e=>{if(e.length>0){(0,d.assertIsHexString)(e);if(e.length>64){throw new d.InvalidStringError("too long")}}return e.toLowerCase()};t.AssetName=AssetName;const l=new c.TextDecoder("utf8",{fatal:true});t.AssetName.toUTF8=(e,t=false)=>{const r=s.from(e,"hex");try{if(t){return l.decode(r.filter(e=>e>31))}return l.decode(r)}catch(i){throw new d.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,i)}};const AssetId=e=>{const t=e.split(".").join("");(0,d.assertIsHexString)(t);if(t.length>120)throw new d.InvalidStringError("too long");if(t.length<56)throw new d.InvalidStringError("too short");return t};t.AssetId=AssetId;const PolicyId=e=>n.Hash28ByteBase16(e);t.PolicyId=PolicyId;t.AssetId.getPolicyId=e=>(0,t.PolicyId)(e.slice(0,56));t.AssetId.getAssetName=e=>(0,t.AssetName)(e.slice(56));t.AssetId.fromParts=(e,r)=>(0,t.AssetId)(e+r);const AssetFingerprint=e=>(0,d.typedBech32)(e,"asset",32);t.AssetFingerprint=AssetFingerprint;t.AssetFingerprint.fromParts=(e,r)=>{const i=s.from(e,"hex");const a=s.from(r,"hex");const o=n.blake2b.hash(d.HexBlob.fromBytes(new Uint8Array([...i,...a])),20);return(0,t.AssetFingerprint)(d.HexBlob.toTypedBech32("asset",o))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeAuxiliaryDataHash=void 0;const o=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"));const computeAuxiliaryDataHash=e=>e?o.blake2b.hash(n.AuxiliaryData.fromCore(e).toCbor(),32):void 0;t.computeAuxiliaryDataHash=computeAuxiliaryDataHash},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.SlotLeader=t.GenesisDelegate=t.VrfVkBech32=t.BlockId=t.Slot=t.EpochNo=t.BlockNo=t.BlockSize=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js");const BlockSize=e=>e;t.BlockSize=BlockSize;const BlockNo=e=>e;t.BlockNo=BlockNo;const EpochNo=e=>e;t.EpochNo=EpochNo;const Slot=e=>e;t.Slot=Slot;const BlockId=e=>d.Hash32ByteBase16(e);t.BlockId=BlockId;const VrfVkBech32=e=>(0,c.typedBech32)(e,"vrf_vk",52);t.VrfVkBech32=VrfVkBech32;const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return d.Hash28ByteBase16(e)};t.GenesisDelegate=GenesisDelegate;const SlotLeader=e=>{try{return(0,l.PoolId)(e)}catch{try{return(0,t.GenesisDelegate)(e)}catch(r){throw new c.InvalidStringError("Expected either PoolId or GenesisDelegate",r)}}};t.SlotLeader=SlotLeader;t.VrfVkBech32.fromHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.VrfVkBech32)(n.bech32.encode("vrf_vk",r,1023))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.includesAnyCertificate=t.stakeKeyCertificates=t.createDelegationCert=t.createStakeDeregistrationCert=t.createStakeRegistrationCert=t.isCertType=t.VoteDelegationCredentialCertificateTypes=t.StakeCredentialCertificateTypes=t.RegAndDeregCertificateTypes=t.StakeDelegationCertificateTypes=t.StakeRegistrationCertificateTypes=t.PostConwayStakeRegistrationCertificateTypes=t.MirCertificateKind=t.MirCertificatePot=t.CertificateType=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");var a;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(a=t.CertificateType||(t.CertificateType={}));var o;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(o=t.MirCertificatePot||(t.MirCertificatePot={}));var n;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(n=t.MirCertificateKind||(t.MirCertificateKind={}));t.PostConwayStakeRegistrationCertificateTypes=[a.Registration,a.VoteRegistrationDelegation,a.StakeRegistrationDelegation,a.StakeVoteRegistrationDelegation];t.StakeRegistrationCertificateTypes=[a.StakeRegistration,...t.PostConwayStakeRegistrationCertificateTypes];t.StakeDelegationCertificateTypes=[a.StakeDelegation,a.StakeVoteDelegation,a.StakeRegistrationDelegation,a.StakeVoteRegistrationDelegation];t.RegAndDeregCertificateTypes=[...t.StakeRegistrationCertificateTypes,a.Unregistration,a.StakeDeregistration];t.StakeCredentialCertificateTypes=[...t.RegAndDeregCertificateTypes,...t.StakeDelegationCertificateTypes,a.VoteDelegation];t.VoteDelegationCredentialCertificateTypes=[a.VoteDelegation,a.VoteRegistrationDelegation,a.StakeVoteDelegation,a.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);t.isCertType=isCertType;const createStakeRegistrationCert=e=>({__typename:a.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createStakeRegistrationCert=createStakeRegistrationCert;const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:a.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}}:{__typename:a.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}};t.createStakeDeregistrationCert=createStakeDeregistrationCert;const createDelegationCert=(e,t)=>({__typename:a.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:s.CredentialType.KeyHash}});t.createDelegationCert=createDelegationCert;const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>(0,t.isCertType)(e,t.RegAndDeregCertificateTypes)?e:void 0).filter(i.isNotNil))||[]};t.stakeKeyCertificates=stakeKeyCertificates;const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false;t.includesAnyCertificate=includesAnyCertificate},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Cip1854ExtendedAccountPublicKey=void 0;const n=o(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1023;const u="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,c.assertIsBech32WithPrefix)(e,[u])}catch{throw new c.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};t.Cip1854ExtendedAccountPublicKey=Cip1854ExtendedAccountPublicKey;t.Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const r=n.bech32.toWords(s.from(e,"hex"));return(0,t.Cip1854ExtendedAccountPublicKey)(n.bech32.encode(u,r,l))};t.Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=n.bech32.decode(e,l);return(0,d.Bip32PublicKeyHex)(s.from(n.bech32.fromWords(t)).toString("hex"))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.cip17FromMetadatum=t.portfolioMetadataFromCip17=t.DelegationMetadataLabel=t.StakeCredentialStatus=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js");var i;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(i=t.StakeCredentialStatus||(t.StakeCredentialStatus={}));t.DelegationMetadataLabel=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};t.portfolioMetadataFromCip17=portfolioMetadataFromCip17;const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t};t.cip17FromMetadatum=cip17FromMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDRepAlwaysNoConfidence=t.isDRepAlwaysAbstain=t.isDRepCredential=t.isDrepInfo=t.VoterType=t.Vote=t.GovernanceActionType=void 0;var r;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(r=t.GovernanceActionType||(t.GovernanceActionType={}));var s;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(s=t.Vote||(t.Vote={}));var i;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(i=t.VoterType||(t.VoterType={}));const isDrepInfo=e=>"id"in e&&"active"in e;t.isDrepInfo=isDrepInfo;const isDRepCredential=e=>"type"in e&&"hash"in e;t.isDRepCredential=isDRepCredential;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;t.isDRepAlwaysAbstain=isDRepAlwaysAbstain;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename;t.isDRepAlwaysNoConfidence=isDRepAlwaysNoConfidence},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusMapEncoding=t.PlutusListEncoding=void 0;var r;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(r=t.PlutusListEncoding||(t.PlutusListEncoding={}));var s;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(s=t.PlutusMapEncoding||(t.PlutusMapEncoding={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPlutusScript=t.isNativeScript=t.PlutusLanguageVersion=t.NativeScriptKind=t.ScriptType=void 0;var r;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(r=t.ScriptType||(t.ScriptType={}));var s;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(s=t.NativeScriptKind||(t.NativeScriptKind={}));var i;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(i=t.PlutusLanguageVersion||(t.PlutusLanguageVersion={}));const isNativeScript=e=>e.__type===r.Native;t.isNativeScript=isNativeScript;const isPlutusScript=e=>e.__type===r.Plutus;t.isPlutusScript=isPlutusScript},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExtendedPoolStatus=void 0;var r;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(r=t.ExtendedPoolStatus||(t.ExtendedPoolStatus={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PoolMdVk=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const PoolMdVk=e=>(0,s.typedBech32)(e,"poolmd_vk",52);t.PoolMdVk=PoolMdVk},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StakePoolEpochRewards=t.StakePoolStatus=void 0;var r;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(r=t.StakePoolStatus||(t.StakePoolStatus={}));class StakePoolEpochRewards{}t.StakePoolEpochRewards=StakePoolEpochRewards},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/StakePool.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/PoolParameters.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/Relay.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/ExtendedStakePoolMetadata.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/primitives.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.VrfVkHex=t.PoolIdHex=t.PoolId=void 0;const o=a(r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js"));const n=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=1023;const PoolId=e=>(0,d.typedBech32)(e,"pool",45);t.PoolId=PoolId;t.PoolId.fromKeyHash=e=>d.HexBlob.toTypedBech32("pool",e);const PoolIdHex=e=>n.Hash28ByteBase16(e);t.PoolIdHex=PoolIdHex;const VrfVkHex=e=>(0,d.typedHex)(e,64);t.VrfVkHex=VrfVkHex;t.PoolId.toKeyHash=e=>{const{words:t}=o.bech32.decode(e,c);return n.Ed25519KeyHashHex(d.HexBlob.fromBytes(o.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.RedeemerPurpose=t.InputSource=t.TransactionId=void 0;const o=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const TransactionId=e=>o.Hash32ByteBase16(e);t.TransactionId=TransactionId;t.TransactionId.fromHexBlob=e=>o.Hash32ByteBase16.fromHexBlob(e);var n;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(n=t.InputSource||(t.InputSource={}));var d;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(d=t.RedeemerPurpose||(t.RedeemerPurpose={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.FractionUtils=void 0;const i=s(r("../../node_modules/fraction.js/fraction.js"));const toFractionJs=e=>{if("number"==typeof e){return new i.default(e)}const{numerator:t,denominator:r}=e;return new i.default(t,r)};t.FractionUtils={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Utxo.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Value.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/DelegationsAndRewards.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Genesis.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/AuxiliaryData.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/ProtocolParameters.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/PlutusData.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/UtilityTypes.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Cip1854ExtendedAccountPublicKey.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addressesShareAnyKey=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?s.Address.fromString(e):e;if(!t){throw new i.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case s.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:{const a=t.asEnterprise();return{paymentId:{credential:a.getPaymentCredential()}}}case s.AddressType.PointerKey:case s.AddressType.PointerScript:{const o=t.asPointer();return{paymentId:{credential:o.getPaymentCredential()},stakeId:{pointer:o.getStakePointer()}}}case s.AddressType.RewardKey:case s.AddressType.RewardScript:{const n=t.asReward();return{stakeId:{credential:n.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)};t.addressesShareAnyKey=addressesShareAnyKey},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeImplicitCoin=void 0;const o=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js"));const n=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=o.RewardAccount.toNetworkId(t[0]);return t.includes(o.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let s=0n;let i=0n;const a=0===r.length;const d=new Set(r.map(e=>n.PoolId.fromKeyHash((0,c.Ed25519KeyHashHex)(o.RewardAccount.toHash(e)))));for(const l of t){switch(l.__typename){case n.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(l.stakeCredential,r))s+=e.stakeKeyDeposit;break;case n.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(l.stakeCredential,r))i+=e.stakeKeyDeposit;break;case n.CertificateType.PoolRegistration:if(a||r.some(e=>l.poolParameters.owners.includes(e)))s+=e.poolDeposit;break;case n.CertificateType.PoolRetirement:if(a||d.has(l.poolId))i+=e.poolDeposit;break}}return{deposit:s,reclaimDeposit:i}};const computeConwayDeposits=(e,t,r,s)=>{let i=0n;let a=0n;for(const d of e){switch(d.__typename){case n.CertificateType.Registration:case n.CertificateType.StakeRegistrationDelegation:case n.CertificateType.VoteRegistrationDelegation:case n.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(d.stakeCredential,t))i+=d.deposit;break;case n.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(d.stakeCredential,t))a+=d.deposit;break;case n.CertificateType.RegisterDelegateRepresentative:case n.CertificateType.UnregisterDelegateRepresentative:if(!r||d.dRepCredential.type===o.CredentialType.KeyHash&&d.dRepCredential.hash===r)d.__typename===n.CertificateType.RegisterDelegateRepresentative?i+=d.deposit:a+=d.deposit;break}}if(s)for(const c of s)i+=c.deposit;return{deposit:i,reclaimDeposit:a}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],i,a)=>{if(0===r.length&&(!a||0===a.length))return{deposit:0n,reclaimDeposit:0n};const o={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(o,r,s);const d=computeConwayDeposits(r,s,i,a);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>d.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:i=[]},a,o)=>{const{deposit:n,reclaimDeposit:c}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],a,o,s);const l=!!(null==a?void 0:a.length);const u=d.BigIntMath.sum(i.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(i,a):u;return{deposit:n,input:f+c,reclaimDeposit:c,withdrawals:f}};t.computeImplicitCoin=computeImplicitCoin},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.computeMinUtxoValue=void 0;const computeMinUtxoValue=e=>29n*e;t.computeMinUtxoValue=computeMinUtxoValue},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.estimateStakePoolAPY=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:a,pledge:o}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,s.Percent)(Number(a)/Number(t-o)/(r/i)*365)};t.estimateStakePoolAPY=estimateStakePoolAPY},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeMinUtxoValue.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/computeImplicitCoin.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/estimateStakePoolAPY.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/addressesShareAnyKey.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isScriptAddress=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const isScriptAddress=e=>{if(!s.Address.isValidBech32(e)){return false}const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const i=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==i?void 0:i.type)===s.CredentialType.ScriptHash};t.isScriptAddress=isScriptAddress},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPhase2ValidationErrTx=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals;t.isPhase2ValidationErrTx=isPhase2ValidationErrTx},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryConvertPlutusMapToUtf8Record=t.isPlutusBigInt=t.isConstrPlutusData=t.isPlutusMap=t.isPlutusList=t.isAnyPlutusDataCollection=t.isPlutusBoundedBytes=void 0;const s=r("../../node_modules/web-encoding/src/lib.js");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);t.isPlutusBoundedBytes=isPlutusBoundedBytes;const isAnyPlutusDataCollection=e=>"object"==typeof e&&!(0,t.isPlutusBoundedBytes)(e);t.isAnyPlutusDataCollection=isAnyPlutusDataCollection;const isPlutusList=e=>(0,t.isAnyPlutusDataCollection)(e)&&"items"in e;t.isPlutusList=isPlutusList;const isPlutusMap=e=>(0,t.isAnyPlutusDataCollection)(e)&&"data"in e;t.isPlutusMap=isPlutusMap;const isConstrPlutusData=e=>(0,t.isAnyPlutusDataCollection)(e)&&"fields"in e;t.isConstrPlutusData=isConstrPlutusData;const isPlutusBigInt=e=>"bigint"==typeof e;t.isPlutusBigInt=isPlutusBigInt;const i=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!(0,t.isPlutusBoundedBytes)(e))return e;try{return i.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,i]of e.data.entries()){const a=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof a){t.warn("Failed to decode plutus map key",s);continue}r[a]=tryConvertPlutusDataToUtf8String(i)}return r};t.tryConvertPlutusMapToUtf8Record=tryConvertPlutusMapToUtf8Record},"../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/resolveInputValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveInputValue=void 0;const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};t.resolveInputValue=resolveInputValue},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CardanoNodeUtil=void 0;a(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js"),t);t.CardanoNodeUtil=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js"))},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StateQueryError=t.TxSubmissionError=t.ChainSyncError=t.GeneralCardanoNodeError=t.CardanoNodeError=t.TxSubmissionErrorCode=t.StateQueryErrorCode=t.ChainSyncErrorCode=t.GeneralCardanoNodeErrorCode=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(i=t.GeneralCardanoNodeErrorCode||(t.GeneralCardanoNodeErrorCode={}));var a;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(a=t.ChainSyncErrorCode||(t.ChainSyncErrorCode={}));var o;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(o=t.StateQueryErrorCode||(t.StateQueryErrorCode={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n=t.TxSubmissionErrorCode||(t.TxSubmissionErrorCode={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}t.CardanoNodeError=CardanoNodeError;class GeneralCardanoNodeError extends CardanoNodeError{}t.GeneralCardanoNodeError=GeneralCardanoNodeError;class ChainSyncError extends CardanoNodeError{}t.ChainSyncError=ChainSyncError;class TxSubmissionError extends CardanoNodeError{}t.TxSubmissionError=TxSubmissionError;class StateQueryError extends CardanoNodeError{}t.StateQueryError=StateQueryError},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNode.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/CardanoNodeErrors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDrepNotRegistered=t.isUnknownCredential=t.isDrepAlreadyRegistered=t.isCredentialAlreadyRegistered=t.isUnknownOutputReferences=t.isIncompleteWithdrawalsError=t.isValueNotConservedError=t.isOutsideOfValidityIntervalError=t.isProviderError=t.asTxSubmissionErrorCode=t.asGeneralCardanoNodeErrorCode=t.asStateQueryErrorCode=t.asChainSyncErrorCode=t.isGeneralCardanoNodeErrorCode=t.isStateQueryErrorCode=t.isTxSubmissionErrorCode=t.isChainSyncErrorCode=t.asCardanoNodeError=t.asGeneralCardanoNodeError=t.asStateQueryError=t.asChainSyncError=t.asTxSubmissionError=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/types/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,a.isProductionEnvironment)())(0,a.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,a.isProductionEnvironment)())(0,a.stripStackTrace)(t);return t}return null};t.asTxSubmissionError=asSpecificCardanoNodeError(s.TxSubmissionError);t.asChainSyncError=asSpecificCardanoNodeError(s.ChainSyncError);t.asStateQueryError=asSpecificCardanoNodeError(s.StateQueryError);t.asGeneralCardanoNodeError=asSpecificCardanoNodeError(s.GeneralCardanoNodeError);const asCardanoNodeError=e=>(0,t.asGeneralCardanoNodeError)(e)||(0,t.asTxSubmissionError)(e)||(0,t.asStateQueryError)(e)||(0,t.asChainSyncError)(e)||new s.GeneralCardanoNodeError(s.GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');t.asCardanoNodeError=asCardanoNodeError;const o=new Set(Object.values(s.StateQueryErrorCode));const n=new Set(Object.values(s.GeneralCardanoNodeErrorCode));const d=new Set(Object.values(s.TxSubmissionErrorCode));const c=new Set(Object.values(s.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&c.has(e);t.isChainSyncErrorCode=isChainSyncErrorCode;const isTxSubmissionErrorCode=e=>"number"==typeof e&&d.has(e);t.isTxSubmissionErrorCode=isTxSubmissionErrorCode;const isStateQueryErrorCode=e=>"number"==typeof e&&o.has(e);t.isStateQueryErrorCode=isStateQueryErrorCode;const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&n.has(e);t.isGeneralCardanoNodeErrorCode=isGeneralCardanoNodeErrorCode;const asChainSyncErrorCode=e=>(0,t.isChainSyncErrorCode)(e)?e:null;t.asChainSyncErrorCode=asChainSyncErrorCode;const asStateQueryErrorCode=e=>(0,t.isStateQueryErrorCode)(e)?e:null;t.asStateQueryErrorCode=asStateQueryErrorCode;const asGeneralCardanoNodeErrorCode=e=>(0,t.isGeneralCardanoNodeErrorCode)(e)?e:null;t.asGeneralCardanoNodeErrorCode=asGeneralCardanoNodeErrorCode;const asTxSubmissionErrorCode=e=>(0,t.isTxSubmissionErrorCode)(e)?e:null;t.asTxSubmissionErrorCode=asTxSubmissionErrorCode;const isProviderError=e=>e instanceof i.ProviderError;t.isProviderError=isProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.OutsideOfValidityInterval;t.isOutsideOfValidityIntervalError=isOutsideOfValidityIntervalError;const isValueNotConservedError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.ValueNotConserved;t.isValueNotConservedError=isValueNotConservedError;const isIncompleteWithdrawalsError=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.IncompleteWithdrawals;t.isIncompleteWithdrawalsError=isIncompleteWithdrawalsError;const isUnknownOutputReferences=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownOutputReferences;t.isUnknownOutputReferences=isUnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.CredentialAlreadyRegistered;t.isCredentialAlreadyRegistered=isCredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepAlreadyRegistered;t.isDrepAlreadyRegistered=isDrepAlreadyRegistered;const isUnknownCredential=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.UnknownCredential;t.isUnknownCredential=isUnknownCredential;const isDrepNotRegistered=e=>e instanceof s.TxSubmissionError&&e.code===s.TxSubmissionErrorCode.DRepNotRegistered;t.isDrepNotRegistered=isDrepNotRegistered},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/cardanoNodeErrors.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/util/stakeDistribution.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toLiveStake=void 0;const toLiveStake=e=>[...e.values()].reduce((e,{stake:t})=>e+t.pool,BigInt(0));t.toLiveStake=toLiveStake},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.handleProviderPaths=void 0;t.handleProviderPaths={getPolicyIds:"/policyIds",healthCheck:"/health",resolveHandles:"/resolve"}},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/types/StakePoolProvider.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SortFields=t.isPoolROSSortField=t.isPoolAPYSortField=t.isPoolMetricsSortField=t.isPoolDataSortField=t.PoolROSSortFields=t.PoolAPYSortFields=t.PoolMetricsSortFields=t.PoolDataSortFields=void 0;t.PoolDataSortFields=["cost","name","margin","pledge","ticker"];t.PoolMetricsSortFields=["blocks","liveStake","saturation"];t.PoolAPYSortFields=["apy"];t.PoolROSSortFields=["ros","lastRos"];const isPoolDataSortField=e=>t.PoolDataSortFields.includes(e);t.isPoolDataSortField=isPoolDataSortField;const isPoolMetricsSortField=e=>t.PoolMetricsSortFields.includes(e);t.isPoolMetricsSortField=isPoolMetricsSortField;const isPoolAPYSortField=e=>t.PoolAPYSortFields.includes(e);t.isPoolAPYSortField=isPoolAPYSortField;const isPoolROSSortField=e=>t.PoolROSSortFields.includes(e);t.isPoolROSSortField=isPoolROSSortField;t.SortFields=[...t.PoolDataSortFields,...t.PoolMetricsSortFields,...t.PoolAPYSortFields,...t.PoolROSSortFields]},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.ProviderUtil=void 0;a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/Provider.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/StakePoolProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/AssetProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/NetworkInfoProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardAccountInfoProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/RewardsProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/TxSubmitProvider/index.js"),t);t.ProviderUtil=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js"));a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/UtxoProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/ChainHistoryProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/HandleProvider/index.js"),t);a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/DRepProvider/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerFactory.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;Object.defineProperty(t,"__esModule",{value:true});t.ProviderFactory=void 0;class ProviderFactory{register(e,t){r(this,s,"f").set(e,t)}create(e,t,i){if(!r(this,s,"f").has(e))throw new Error(`Provider unsupported: ${e}`);return r(this,s,"f").get(e)(t,i)}getProviders(){return[...r(this,s,"f").keys()]}constructor(){s.set(this,new Map)}}t.ProviderFactory=ProviderFactory;s=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/providerUtil.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.jsonToMetadatum=t.withProviderErrors=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const withProviderErrors=(e,t)=>Object.keys(e).reduce((r,s)=>{const i=e[s];r[s]="function"==typeof i?(...e)=>i(...e).catch(t):i;return r},{});t.withProviderErrors=withProviderErrors;const tryParseBigIntKey=e=>{if(e.startsWith("0x"))return e.slice(2);if(0===e.length)return e;try{return BigInt(e)}catch{return e}};const jsonToMetadatum=e=>{switch(typeof e){case"number":return BigInt(e);case"string":case"bigint":return e;case"object":if(null===e)break;if(Array.isArray(e)){return e.map(t.jsonToMetadatum)}return new Map(Object.keys(e).map(r=>[tryParseBigIntKey(r),(0,t.jsonToMetadatum)(e[r])]))}throw new s.ProviderError(s.ProviderFailure.NotImplemented,null,`Unsupported metadatum type: ${typeof e}`)};t.jsonToMetadatum=jsonToMetadatum},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/types/Pagination.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o,n,d,c,l,u,f,h,m,p;Object.defineProperty(t,"__esModule",{value:true});t.AuxiliaryData=t.ALONZO_AUX_TAG=t.SHELLEY_ERA_FIELDS_COUNT=void 0;const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");t.SHELLEY_ERA_FIELDS_COUNT=2;t.ALONZO_AUX_TAG=259;class AuxiliaryData{toCbor(){if(s(this,f,"f"))return s(this,f,"f");const e=new v.CborWriter;const r=s(this,a,"m",h).call(this);if(1===r&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));else if(r===t.SHELLEY_ERA_FIELDS_COUNT&&void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0&&void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeStartArray(r);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()));e.writeStartArray(s(this,d,"f").length);for(const i of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(i.toCbor()))}else{e.writeTag(t.ALONZO_AUX_TAG);e.writeStartMap(r);if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,P.hexToBytes)(s(this,n,"f").toCbor()))}if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0){e.writeInt(1n);e.writeStartArray(s(this,d,"f").length);for(const o of s(this,d,"f"))e.writeEncodedValue((0,P.hexToBytes)(o.toCbor()))}if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0){e.writeInt(2n);e.writeStartArray(s(this,c,"f").length);for(const m of s(this,c,"f"))e.writeEncodedValue((0,P.hexToBytes)(m.toCbor()))}if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0){e.writeInt(3n);e.writeStartArray(s(this,l,"f").length);for(const p of s(this,l,"f"))e.writeEncodedValue((0,P.hexToBytes)(p.toCbor()))}if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0){e.writeInt(4n);e.writeStartArray(s(this,u,"f").length);for(const _ of s(this,u,"f"))e.writeEncodedValue((0,P.hexToBytes)(_.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const r=new v.CborReader(e);const s=new AuxiliaryData;const a=r.peekState();if(a===v.CborReaderState.StartMap)i(s,n,_.GeneralTransactionMetadata.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())),"f");else if(a===v.CborReaderState.Tag){const o=r.readTag();if(o!==t.ALONZO_AUX_TAG){throw new w.InvalidArgumentError("cbor",`Expected tag '${t.ALONZO_AUX_TAG}', but got ${o}.`)}r.readStartMap();while(r.peekState()!==v.CborReaderState.EndMap){const d=r.readInt();switch(d){case 0n:i(s,n,_.GeneralTransactionMetadata.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())),"f");break;case 1n:s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(y.NativeScript.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 2n:s.setPlutusV1Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV1Scripts().push(y.PlutusV1Script.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 3n:s.setPlutusV2Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV2Scripts().push(y.PlutusV2Script.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break;case 4n:s.setPlutusV3Scripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.plutusV3Scripts().push(y.PlutusV3Script.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray();break}}r.readEndMap()}else{r.readStartArray();i(s,n,_.GeneralTransactionMetadata.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())),"f");s.setNativeScripts(new Array);r.readStartArray();while(r.peekState()!==v.CborReaderState.EndArray){s.nativeScripts().push(y.NativeScript.fromCbor(w.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}i(s,f,e,"f");return s}toCore(){const e=s(this,a,"m",m).call(this);const t={blob:s(this,n,"f")?s(this,n,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(_.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=s(AuxiliaryData,o,"m",p).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return s(this,n,"f")}setMetadata(e){i(this,n,e,"f");i(this,f,void 0,"f")}nativeScripts(){return s(this,d,"f")}setNativeScripts(e){i(this,d,e,"f");i(this,f,void 0,"f")}plutusV1Scripts(){return s(this,c,"f")}setPlutusV1Scripts(e){i(this,c,e,"f");i(this,f,void 0,"f")}plutusV2Scripts(){return s(this,l,"f")}setPlutusV2Scripts(e){i(this,l,e,"f");i(this,f,void 0,"f")}plutusV3Scripts(){return s(this,u,"f")}setPlutusV3Scripts(e){i(this,u,e,"f");i(this,f,void 0,"f")}constructor(){a.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}t.AuxiliaryData=AuxiliaryData;o=AuxiliaryData,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,a=new WeakSet,h=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==s(this,n,"f")&&s(this,n,"f").metadata().size>0)++e;if(void 0!==s(this,d,"f")&&s(this,d,"f").length>0)++e;if(void 0!==s(this,c,"f")&&s(this,c,"f").length>0)++e;if(void 0!==s(this,l,"f")&&s(this,l,"f").length>0)++e;if(void 0!==s(this,u,"f")&&s(this,u,"f").length>0)++e;return e},m=function _AuxiliaryData_getCoreScripts(){const e=s(this,c,"f")?s(this,c,"f").map(e=>e.toCore()):[];const t=s(this,l,"f")?s(this,l,"f").map(e=>e.toCore()):[];const r=s(this,u,"f")?s(this,u,"f").map(e=>e.toCore()):[];const i=s(this,d,"f")?s(this,d,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...i]},p=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case g.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(y.NativeScript.fromCore(r));break;case g.ScriptType.Plutus:if(r.version===g.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(y.PlutusV1Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(y.PlutusV2Script.fromCore(r))}else if(r.version===g.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(y.PlutusV3Script.fromCore(r))}break;default:throw new b.SerializationError(b.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.GeneralTransactionMetadata=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class GeneralTransactionMetadata{toCbor(){if(i(this,o,"f"))return i(this,o,"f");const e=new n.CborWriter;e.writeStartMap(i(this,a,"f").size);for(const[t,r]of i(this,a,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,l.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new n.CborReader(e);r.readStartMap();while(r.peekState()!==n.CborReaderState.EndMap){const s=r.readInt();const i=c.TransactionMetadatum.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,i)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...i(this,a,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],c.TransactionMetadatum.fromCore(e[1])])))}metadata(){return i(this,a,"f")}setMetadata(e){s(this,a,e,"f");s(this,o,void 0,"f")}equals(e){if(i(this,o,"f")===i(e,o,"f"))return true;if(i(this,a,"f").size!==i(e,a,"f").size)return false;const t=[...i(this,a,"f").entries()];const r=[...i(e,a,"f").entries()];for(let s=0;s<i(this,a,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.GeneralTransactionMetadata=GeneralTransactionMetadata;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumList=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumList{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartArray();else e.writeStartArray(s(this,a,"f").length);for(const t of s(this,a,"f"))e.writeEncodedValue((0,l.hexToBytes)(t.toCbor()));if(s(this,o,"f"))e.writeEndArray();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new n.CborReader(e);const s=r.readStartArray();if(null===s)i(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndArray){t.add(c.TransactionMetadatum.fromCbor((0,l.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,a,"f").length}get(e){return s(this,a,"f")[e]}add(e){s(this,a,"f").push(e)}equals(e){if(s(this,a,"f").length!==s(e,a,"f").length)return false;for(let t=0;t<s(this,a,"f").length;++t)if(!s(this,a,"f")[t].equals(s(e,a,"f")[t]))return false;return true}constructor(){a.set(this,new Array);o.set(this,false)}}t.MetadatumList=MetadatumList;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.MetadatumMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class MetadatumMap{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartMap();else e.writeStartMap(s(this,a,"f").size);for(const[t,r]of s(this,a,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,o,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)i(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const a=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=l.TransactionMetadatum.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(a,d)}r.readEndMap();return t}getLength(){return s(this,a,"f").size}insert(e,t){s(this,a,"f").set(e,t)}get(e){if(!s(this,a,"f"))return;const t=[...s(this,a,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new c.MetadatumList;for(const t of s(this,a,"f").keys())e.add(t);return e}equals(e){if(s(this,o,"f")!==s(e,o,"f"))return false;if(s(this,a,"f").size!==s(e,a,"f").size)return false;const t=[...s(this,a,"f").entries()];const r=[...s(e,a,"f").entries()];for(let i=0;i<s(this,a,"f").size;++i){if(!t[i][0].equals(r[i][0]))return false;if(!t[i][1].equals(r[i][1]))return false}return true}constructor(){a.set(this,new Map);o.set(this,false)}}t.MetadatumMap=MetadatumMap;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatum=void 0;const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?s.from(e,"utf8").length:e.length;if(t>64)throw new _.SerializationError(_.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(i(this,f,"f"))return i(this,f,"f");let e;switch(i(this,u,"f")){case w.TransactionMetadatumKind.Map:e=i(this,o,"f").toCbor();break;case w.TransactionMetadatumKind.List:e=i(this,n,"f").toCbor();break;case w.TransactionMetadatumKind.Bytes:{const t=new h.CborWriter;check64Length(i(this,c,"f"));t.writeByteString(i(this,c,"f"));e=(0,y.bytesToHex)(t.encode());break}case w.TransactionMetadatumKind.Text:{const r=new h.CborWriter;check64Length(i(this,l,"f"));r.writeTextString(i(this,l,"f"));e=(0,y.bytesToHex)(r.encode());break}case w.TransactionMetadatumKind.Integer:{const s=new h.CborWriter;if(i(this,d,"f")>=0&&i(this,d,"f")<=g||i(this,d,"f")<0&&i(this,d,"f")>=-1n-g)s.writeInt(i(this,d,"f"));else s.writeBigInteger(i(this,d,"f"));e=(0,y.bytesToHex)(s.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new h.CborReader(e);const s=r.peekState();switch(s){case h.CborReaderState.Tag:{const i=r.peekTag();switch(i){case h.CborTag.UnsignedBigNum:{r.readTag();const _=r.readByteString();a(t,d,TransactionMetadatum.bufferToBigint(_),"f");a(t,u,w.TransactionMetadatumKind.Integer,"f");break}case h.CborTag.NegativeBigNum:{r.readTag();const y=r.readByteString();a(t,d,TransactionMetadatum.bufferToBigint(y)*-1n,"f");a(t,u,w.TransactionMetadatumKind.Integer,"f");break}}break}case h.CborReaderState.NegativeInteger:case h.CborReaderState.UnsignedInteger:a(t,d,r.readInt(),"f");a(t,u,w.TransactionMetadatumKind.Integer,"f");break;case h.CborReaderState.StartIndefiniteLengthByteString:case h.CborReaderState.ByteString:a(t,c,r.readByteString(),"f");a(t,u,w.TransactionMetadatumKind.Bytes,"f");break;case h.CborReaderState.StartIndefiniteLengthTextString:case h.CborReaderState.TextString:a(t,l,r.readTextString(),"f");a(t,u,w.TransactionMetadatumKind.Text,"f");break;case h.CborReaderState.StartArray:a(t,n,p.MetadatumList.fromCbor(m.HexBlob.fromBytes(r.readEncodedValue())),"f");a(t,u,w.TransactionMetadatumKind.List,"f");break;case h.CborReaderState.StartMap:a(t,o,v.MetadatumMap.fromCbor(m.HexBlob.fromBytes(r.readEncodedValue())),"f");a(t,u,w.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}a(t,f,e,"f");return t}toCore(){switch(i(this,u,"f")){case w.TransactionMetadatumKind.Bytes:return new Uint8Array(i(this,c,"f"));case w.TransactionMetadatumKind.Text:return i(this,l,"f");case w.TransactionMetadatumKind.Integer:return i(this,d,"f");case w.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(i(this,n,"f"));case w.TransactionMetadatumKind.Map:{const e=i(this,o,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const a=r.get(s);t.set(a.toCore(),e.get(a).toCore())}return t}default:throw new _.NotImplementedError(`TransactionMetadatum mapping for kind ${i(this,u,"f")}`)}}static fromCore(e){if(null===e)throw new _.SerializationError(_.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new _.SerializationError(_.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new p.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new v.MetadatumMap;for(const[i,a]of e.entries())s.insert(TransactionMetadatum.fromCore(i),TransactionMetadatum.fromCore(a));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;a(t,o,e,"f");a(t,u,w.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;a(t,n,e,"f");a(t,u,w.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;a(t,d,e,"f");a(t,u,w.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;a(t,c,e,"f");a(t,u,w.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;a(t,l,e,"f");a(t,u,w.TransactionMetadatumKind.Text,"f");return t}getKind(){return i(this,u,"f")}asMap(){return i(this,o,"f")}asList(){return i(this,n,"f")}asInteger(){return i(this,d,"f")}asBytes(){return i(this,c,"f")}asText(){return i(this,l,"f")}equals(e){let t=false;switch(i(this,u,"f")){case w.TransactionMetadatumKind.Bytes:if(i(this,c,"f")&&i(e,c,"f")){return i(this,c,"f").length===i(e,c,"f").length&&i(this,c,"f").every((t,r)=>t===i(e,c,"f")[r])}return false;case w.TransactionMetadatumKind.Integer:return i(this,d,"f")===i(e,d,"f");case w.TransactionMetadatumKind.Text:return i(this,l,"f")===i(e,l,"f");case w.TransactionMetadatumKind.List:if(i(this,n,"f")&&i(e,n,"f")){return i(this,n,"f").equals(i(e,n,"f"))}return false;case w.TransactionMetadatumKind.Map:if(i(this,o,"f")&&i(e,o,"f")){return i(this,o,"f").equals(i(e,o,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,w.TransactionMetadatumKind.Map);f.set(this,void 0)}}t.TransactionMetadatum=TransactionMetadatum;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransactionMetadatumKind=void 0;var r;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(r=t.TransactionMetadatumKind||(t.TransactionMetadatumKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/TransactionMetadata/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/AuxiliaryData.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborAdditionalInfo=void 0;var r;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(r=t.CborAdditionalInfo||(t.CborAdditionalInfo={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.CborInitialByte=void 0;class CborInitialByte{CborInitialByte(e,t){r(this,i,e<<5|t,"f")}static from(e){const t=new CborInitialByte;r(t,i,e,"f");return t}getInitialByte(){return s(this,i,"f")}getMajorType(){return s(this,i,"f")>>5}getAdditionalInfo(){return s(this,i,"f")&CborInitialByte.AdditionalInformationMask}constructor(){i.set(this,void 0)}}t.CborInitialByte=CborInitialByte;i=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborMajorType=void 0;var r;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(r=t.CborMajorType||(t.CborMajorType={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I;Object.defineProperty(t,"__esModule",{value:true});t.CborReader=void 0;const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js");const F=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const G="Unexpected end of buffer";class CborReader{peekState(){if(a(this,h,"f")===D.CborReaderState.Undefined)i(this,h,a(this,o,"m",C).call(this),"f");return a(this,h,"f")}getBytesRemaining(){return a(this,d,"f").length-a(this,c,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=a(this,c,"f");let t=0;do{t=a(this,o,"m",I).call(this,t)}while(t>0)return a(this,d,"f").slice(e,a(this,c,"f"))}readStartArray(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Array);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){a(this,o,"m",P).call(this,1);a(this,o,"m",_).call(this,R.CborMajorType.Array);return null}const t=a(this,o,"m",g).call(this);const{length:r,bytesRead:s}=a(CborReader,n,"m",k).call(CborReader,e,t);a(this,o,"m",P).call(this,s);a(this,o,"m",_).call(this,R.CborMajorType.Array,r);return r}readEndArray(){if(void 0===a(this,f,"f").definiteLength){a(this,o,"m",v).call(this);a(this,o,"m",w).call(this,R.CborMajorType.Array);a(this,o,"m",b).call(this);a(this,o,"m",P).call(this,1)}else{a(this,o,"m",w).call(this,R.CborMajorType.Array);a(this,o,"m",b).call(this)}}readInt(){const e=a(this,o,"m",x).call(this);a(this,o,"m",P).call(this,e.bytesRead);a(this,o,"m",b).call(this);return e.signedInt}readUInt(){const e=a(this,o,"m",j).call(this);a(this,o,"m",P).call(this,e.bytesRead);a(this,o,"m",b).call(this);return e.unsignedInt}readDouble(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Simple);let t;const r=a(this,o,"m",g).call(this);switch(e.getAdditionalInfo()){case B.CborAdditionalInfo.Additional16BitData:a(this,o,"m",S).call(this,3);t=(0,O.decodeHalf)(r.slice(1));a(this,o,"m",P).call(this,3);a(this,o,"m",b).call(this);return t;case B.CborAdditionalInfo.Additional32BitData:a(this,o,"m",S).call(this,5);t=s.from(r).readFloatBE(1);a(this,o,"m",P).call(this,5);a(this,o,"m",b).call(this);return t;case B.CborAdditionalInfo.Additional64BitData:a(this,o,"m",S).call(this,9);t=s.from(r).readDoubleBE(1);a(this,o,"m",P).call(this,9);a(this,o,"m",b).call(this);return t;default:throw new F.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Simple);if((e.getInitialByte()&M.CborInitialByte.AdditionalInformationMask)<B.CborAdditionalInfo.Additional8BitData){a(this,o,"m",P).call(this,1);a(this,o,"m",b).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===B.CborAdditionalInfo.Additional8BitData){a(this,o,"m",S).call(this,2);const t=a(this,d,"f")[a(this,c,"f")+1];a(this,o,"m",P).call(this,2);a(this,o,"m",b).call(this);return t}throw new F.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=a(this,o,"m",m).call(this,R.CborMajorType.NegativeInteger);const t=a(CborReader,n,"m",A).call(CborReader,e,a(this,o,"m",g).call(this));a(this,o,"m",P).call(this,t.bytesRead);a(this,o,"m",b).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=a(this,o,"m",m).call(this,R.CborMajorType.Map);if(t.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){a(this,o,"m",P).call(this,1);a(this,o,"m",_).call(this,R.CborMajorType.Map);e=null}else{const r=a(this,o,"m",g).call(this);const s=a(CborReader,n,"m",k).call(CborReader,t,r);if(2*s.length>r.length-s.bytesRead)throw new F.CborContentException("Definite length exceeds buffer size");a(this,o,"m",P).call(this,s.bytesRead);a(this,o,"m",_).call(this,R.CborMajorType.Map,2*s.length);e=s.length}a(this,f,"f").currentKeyOffset=a(this,c,"f");return e}readEndMap(){if(void 0===a(this,f,"f").definiteLength){a(this,o,"m",v).call(this);if(a(this,f,"f").itemsRead%2!==0)throw new F.CborContentException("Key missing value");a(this,o,"m",w).call(this,R.CborMajorType.Map);a(this,o,"m",b).call(this);a(this,o,"m",P).call(this,1)}else{a(this,o,"m",w).call(this,R.CborMajorType.Map);a(this,o,"m",b).call(this)}}readBoolean(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==B.CborAdditionalInfo.AdditionalTrue&&t!==B.CborAdditionalInfo.AdditionalFalse)throw new F.CborContentException("Not a boolean encoding");const r=t===B.CborAdditionalInfo.AdditionalTrue;a(this,o,"m",P).call(this,1);a(this,o,"m",b).call(this);return r}readNull(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==B.CborAdditionalInfo.AdditionalNull)throw new F.CborContentException("Not a null encoding");a(this,o,"m",P).call(this,1);a(this,o,"m",b).call(this)}readStartIndefiniteLengthByteString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength)throw new F.CborInvalidOperationException("Not indefinite length string");a(this,o,"m",P).call(this,1);a(this,o,"m",_).call(this,R.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){a(this,o,"m",v).call(this);a(this,o,"m",w).call(this,R.CborMajorType.ByteString);a(this,o,"m",b).call(this);a(this,o,"m",P).call(this,1)}readByteString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=a(this,o,"m",T).call(this,R.CborMajorType.ByteString);a(this,o,"m",P).call(this,r);a(this,o,"m",b).call(this);return t}const s=a(this,o,"m",g).call(this);const{length:i,bytesRead:d}=a(CborReader,n,"m",k).call(CborReader,e,s);a(this,o,"m",S).call(this,d+i);a(this,o,"m",P).call(this,d+i);a(this,o,"m",b).call(this);return s.slice(d,d+i)}readDefiniteLengthByteString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.ByteString);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){throw new F.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=a(this,o,"m",g).call(this);const{length:r,bytesRead:s}=a(CborReader,n,"m",k).call(CborReader,e,t);a(this,o,"m",S).call(this,s+r);a(this,o,"m",P).call(this,s+r);a(this,o,"m",b).call(this);return t.slice(s,s+r)}readStartIndefiniteLengthTextString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength)throw new F.CborInvalidOperationException("Not indefinite length string");a(this,o,"m",P).call(this,1);a(this,o,"m",_).call(this,R.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){a(this,o,"m",v).call(this);a(this,o,"m",w).call(this,R.CborMajorType.Utf8String);a(this,o,"m",b).call(this);a(this,o,"m",P).call(this,1)}readTextString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=a(this,o,"m",T).call(this,R.CborMajorType.Utf8String);a(this,o,"m",P).call(this,r);a(this,o,"m",b).call(this);return s.from(t).toString("utf8")}const i=a(this,o,"m",g).call(this);const{length:d,bytesRead:c}=a(CborReader,n,"m",k).call(CborReader,e,i);a(this,o,"m",S).call(this,c+d);a(this,o,"m",P).call(this,c+d);a(this,o,"m",b).call(this);return s.from(i.slice(c,c+d)).toString("utf8")}readDefiniteLengthTextString(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Utf8String);if(e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength){throw new F.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=a(this,o,"m",g).call(this);const{length:r,bytesRead:i}=a(CborReader,n,"m",k).call(CborReader,e,t);a(this,o,"m",S).call(this,i+r);a(this,o,"m",P).call(this,i+r);a(this,o,"m",b).call(this);return s.from(t.slice(i,i+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=a(this,o,"m",E).call(this);a(this,o,"m",P).call(this,t);i(this,u,true,"f");return e}peekTag(){const{tag:e}=a(this,o,"m",E).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new F.CborContentException(G)}}static mapSimpleValueDataToReaderState(e){switch(e){case B.CborAdditionalInfo.AdditionalNull:return D.CborReaderState.Null;case B.CborAdditionalInfo.AdditionalFalse:case B.CborAdditionalInfo.AdditionalTrue:return D.CborReaderState.Boolean;case B.CborAdditionalInfo.Additional16BitData:return D.CborReaderState.HalfPrecisionFloat;case B.CborAdditionalInfo.Additional32BitData:return D.CborReaderState.SinglePrecisionFloat;case B.CborAdditionalInfo.Additional64BitData:return D.CborReaderState.DoublePrecisionFloat;default:return D.CborReaderState.SimpleValue}}constructor(e){o.add(this);d.set(this,void 0);c.set(this,0);l.set(this,new Array);u.set(this,false);f.set(this,void 0);h.set(this,D.CborReaderState.Undefined);i(this,d,new Uint8Array(s.from(e,"hex")),"f");i(this,f,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}t.CborReader=CborReader;n=CborReader,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,o=new WeakSet,m=function _CborReader_peekInitialByte(e){if(void 0!==a(this,f,"f").definiteLength&&a(this,f,"f").definiteLength-a(this,f,"f").itemsRead===0)throw new F.CborInvalidOperationException("No more data items to read");if(a(this,c,"f")===a(this,d,"f").length){if(null===a(this,f,"f").type&&void 0===a(this,f,"f").definiteLength&&a(this,c,"f")>0)throw new F.CborInvalidOperationException("End of root-level. No more data items to read");throw new F.CborContentException(G)}const t=M.CborInitialByte.from(a(this,d,"f")[a(this,c,"f")]);switch(a(this,f,"f").type){case R.CborMajorType.ByteString:case R.CborMajorType.Utf8String:if(t.getInitialByte()===M.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===a(this,f,"f").type&&t.getAdditionalInfo()!==B.CborAdditionalInfo.IndefiniteLength){break}throw new F.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new F.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},p=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=M.CborInitialByte.from(e[0]);if(r.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new F.CborContentException("Indefinite length string contains invalid data item");return r},v=function _CborReader_validateNextByteIsBreakByte(){const e=a(this,o,"m",m).call(this);if(e.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte)throw new F.CborInvalidOperationException("Not at end of indefinite length data item")},_=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:a(this,f,"f").currentKeyOffset,definiteLength:a(this,f,"f").definiteLength,frameOffset:a(this,f,"f").frameOffset,itemsRead:a(this,f,"f").itemsRead,type:a(this,f,"f").type};a(this,l,"f").push(r);a(this,f,"f").type=e;a(this,f,"f").definiteLength=t;a(this,f,"f").itemsRead=0;a(this,f,"f").frameOffset=a(this,c,"f");i(this,u,false,"f");a(this,f,"f").currentKeyOffset=null},w=function _CborReader_popDataItem(e){if(null===a(this,f,"f").type||a(this,l,"f").length<=0)throw new F.CborInvalidOperationException("Is at root context");if(e!==a(this,f,"f").type)throw new F.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${a(this,f,"f").type}`);if(void 0!==a(this,f,"f").definiteLength&&a(this,f,"f").definiteLength-a(this,f,"f").itemsRead>0)throw new F.CborInvalidOperationException("Not at end of definite length data item");if(a(this,u,"f"))throw new F.CborContentException("Tag not followed by value");const t=a(this,l,"f").pop();a(this,o,"m",y).call(this,t)},y=function _CborReader_restoreStackFrame(e){a(this,f,"f").type=e.type;a(this,f,"f").frameOffset=e.frameOffset;a(this,f,"f").definiteLength=e.definiteLength;a(this,f,"f").itemsRead=e.itemsRead;a(this,f,"f").currentKeyOffset=e.currentKeyOffset;i(this,h,D.CborReaderState.Undefined,"f")},g=function _CborReader_getRemainingBytes(){return a(this,d,"f").slice(a(this,c,"f"))},b=function _CborReader_advanceDataItemCounters(){++a(this,f,"f").itemsRead;i(this,u,false,"f")},P=function _CborReader_advanceBuffer(e){if(a(this,c,"f")+e>a(this,d,"f").length)throw new F.CborContentException("Buffer offset out of bounds");i(this,c,a(this,c,"f")+e,"f");i(this,h,D.CborReaderState.Undefined,"f")},S=function _CborReader_ensureReadCapacity(e){if(a(this,d,"f").length-a(this,c,"f")<e){throw new F.CborContentException(G)}},C=function _CborReader_peekStateCore(){if(void 0!==a(this,f,"f").definiteLength&&a(this,f,"f").definiteLength-a(this,f,"f").itemsRead===0){if(null===a(this,f,"f").type)return D.CborReaderState.Finished;switch(a(this,f,"f").type){case R.CborMajorType.Array:return D.CborReaderState.EndArray;case R.CborMajorType.Map:return D.CborReaderState.EndMap;default:throw new F.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(a(this,c,"f")===a(this,d,"f").length){if(null===a(this,f,"f").type&&void 0===a(this,f,"f").definiteLength){return D.CborReaderState.Finished}throw new F.CborInvalidOperationException(G)}const e=M.CborInitialByte.from(a(this,d,"f")[a(this,c,"f")]);if(e.getInitialByte()===M.CborInitialByte.IndefiniteLengthBreakByte){if(a(this,u,"f")){throw new F.CborContentException("Tag not followed by value")}if(void 0===a(this,f,"f").definiteLength){switch(a(this,f,"f").type){case null:throw new F.CborContentException("Unexpected break byte");case R.CborMajorType.ByteString:return D.CborReaderState.EndIndefiniteLengthByteString;case R.CborMajorType.Utf8String:return D.CborReaderState.EndIndefiniteLengthTextString;case R.CborMajorType.Array:return D.CborReaderState.EndArray;case R.CborMajorType.Map:if(a(this,f,"f").itemsRead%2===0)return D.CborReaderState.EndMap;throw new F.CborContentException("Key missing value");default:throw new F.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new F.CborContentException("Unexpected break byte")}}if(null!==a(this,f,"f").type&&null!==a(this,f,"f").definiteLength){switch(a(this,f,"f").type){case R.CborMajorType.ByteString:case R.CborMajorType.Utf8String:if(e.getMajorType()!==a(this,f,"f").type){throw new F.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:return D.CborReaderState.UnsignedInteger;case R.CborMajorType.NegativeInteger:return D.CborReaderState.NegativeInteger;case R.CborMajorType.ByteString:return e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthByteString:D.CborReaderState.ByteString;case R.CborMajorType.Utf8String:return e.getAdditionalInfo()===B.CborAdditionalInfo.IndefiniteLength?D.CborReaderState.StartIndefiniteLengthTextString:D.CborReaderState.TextString;case R.CborMajorType.Array:return D.CborReaderState.StartArray;case R.CborMajorType.Map:return D.CborReaderState.StartMap;case R.CborMajorType.Tag:return D.CborReaderState.Tag;case R.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new F.CborContentException("Invalid CBOR major type.")}},k=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=a(CborReader,n,"m",A).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},j=function _CborReader_peekUnsignedInteger(){const e=a(this,o,"m",m).call(this);switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:return a(CborReader,n,"m",A).call(CborReader,e,a(this,o,"m",g).call(this));case R.CborMajorType.NegativeInteger:throw new F.CborContentException("Integer overflow");default:throw new F.CborInvalidOperationException(`Reader type mismatch, expected ${R.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},x=function _CborReader_peekSignedInteger(){const e=a(this,o,"m",m).call(this);switch(e.getMajorType()){case R.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=a(CborReader,n,"m",A).call(CborReader,e,a(this,o,"m",g).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case R.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:i}=a(CborReader,n,"m",A).call(CborReader,e,a(this,o,"m",g).call(this));return{bytesRead:i,signedInt:BigInt(-1)-s}}default:throw new F.CborInvalidOperationException(`Reader type mismatch, expected ${R.CborMajorType.UnsignedInteger} or ${R.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},T=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=a(this,o,"m",g).call(this);let r=s.from([]);let i=0;let d=1;let c=a(CborReader,n,"m",p).call(CborReader,t.slice(d),e);while(c.getInitialByte()!==M.CborInitialByte.IndefiniteLengthBreakByte){const{length:l,bytesRead:u}=a(CborReader,n,"m",k).call(CborReader,c,t.slice(d));const f=u+Number(l);r=s.concat([r,t.slice(d+(f-l),d+f)]);d+=f;c=a(CborReader,n,"m",p).call(CborReader,t.slice(d),e)}i=d+1;return{encodingLength:i,val:new Uint8Array(r)}},E=function _CborReader_peekTagCore(){const e=a(this,o,"m",m).call(this,R.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=a(CborReader,n,"m",A).call(CborReader,e,a(this,o,"m",g).call(this));return{bytesRead:r,tag:Number(t)}},A=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&M.CborInitialByte.AdditionalInformationMask)<B.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case B.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case B.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=s.from(t.slice(1));const i=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(i)}}case B.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const a=s.from(t.slice(1));const o=a.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(o)}}case B.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const n=s.from(t.slice(1,9));let d=BigInt(0);for(const c of n)d=(d<<BigInt(8))+BigInt(c);return{bytesRead:9,unsignedInt:d}}default:throw new F.CborContentException("Invalid integer encoding")}},I=function _CborReader_skipNextNode(e){let t;let r=e;while((t=a(this,o,"m",C).call(this))===D.CborReaderState.Tag)this.readTag();switch(t){case D.CborReaderState.UnsignedInteger:this.readUInt();break;case D.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case D.CborReaderState.ByteString:this.readByteString();break;case D.CborReaderState.TextString:this.readTextString();break;case D.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case D.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case D.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case D.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case D.CborReaderState.StartArray:this.readStartArray();r++;break;case D.CborReaderState.EndArray:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case D.CborReaderState.StartMap:this.readStartMap();r++;break;case D.CborReaderState.EndMap:if(0===r)throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case D.CborReaderState.HalfPrecisionFloat:case D.CborReaderState.SinglePrecisionFloat:case D.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case D.CborReaderState.Null:case D.CborReaderState.Boolean:case D.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new F.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborReaderState=void 0;var r;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(r=t.CborReaderState||(t.CborReaderState={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborSimpleValue=void 0;var r;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(r=t.CborSimpleValue||(t.CborSimpleValue={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CborTag=void 0;var r;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(r=t.CborTag||(t.CborTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.CborWriter=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js");const v=BigInt(-1);const _=BigInt("0x100000000");const w=24;const y=25;const g=26;const b=27;const P=244;const S=245;const C=246;const k=247;const j=159;const x=191;const T=249;const E=250;const A=251;const I=s.from("ffc00000","hex");const B=s.from("fff0000000000000","hex");const F=s.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=m.CborTag.UnsignedBigNum;if(e<0){e=-e+v;t=m.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const c=s.from(r,"hex");this.writeTag(t);i(this,o,"m",d).call(this,h.CborMajorType.ByteString,c.length);a(this,n,s.concat([i(this,n,"f"),c]),"f");return this}writeBoolean(e){i(this,o,"m",c).call(this,e?S:P);return this}writeByteString(e){i(this,o,"m",d).call(this,h.CborMajorType.ByteString,e.length);a(this,n,s.concat([i(this,n,"f"),e]),"f");return this}writeTextString(e){i(this,o,"m",d).call(this,h.CborMajorType.Utf8String,s.from(e,"utf8").length);a(this,n,s.concat([i(this,n,"f"),s.from(e,"utf8")]),"f");return this}writeEncodedValue(e){a(this,n,s.concat([i(this,n,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)i(this,o,"m",d).call(this,h.CborMajorType.Array,e);else i(this,o,"m",c).call(this,j);return this}writeEndArray(){i(this,o,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)i(this,o,"m",d).call(this,h.CborMajorType.Map,e);else i(this,o,"m",c).call(this,x);return this}writeEndMap(){i(this,o,"m",c).call(this,f.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)i(this,o,"m",d).call(this,h.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else i(this,o,"m",d).call(this,h.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){i(this,o,"m",c).call(this,A);this.writeEncodedValue(B);return this}if(e===Number.POSITIVE_INFINITY){i(this,o,"m",c).call(this,A);this.writeEncodedValue(F);return this}if(Number.isNaN(e)){i(this,o,"m",c).call(this,E);this.writeEncodedValue(I);return this}try{t=(0,p.encodeHalf)(e);i(this,o,"m",c).call(this,T);this.writeEncodedValue(t)}catch{const r=s.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){i(this,o,"m",c).call(this,E);this.writeEncodedValue(r.valueOf())}else{const a=s.allocUnsafe(8);a.writeFloatBE(e,0);i(this,o,"m",c).call(this,A);this.writeEncodedValue(a.valueOf())}}return this}writeNull(){i(this,o,"m",c).call(this,C);return this}writeUndefined(){i(this,o,"m",c).call(this,k);return this}writeTag(e){i(this,o,"m",d).call(this,h.CborMajorType.Tag,e);return this}encodeAsHex(){return i(this,n,"f").toString("hex")}encode(){return new Uint8Array(i(this,n,"f"))}reset(){a(this,n,s.from([]),"f")}constructor(){o.add(this);n.set(this,s.from([]))}}t.CborWriter=CborWriter;n=new WeakMap,o=new WeakSet,d=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)i(this,o,"m",c).call(this,r|Number(t));else if(t<256){i(this,o,"m",c).call(this,r|w);i(this,o,"m",c).call(this,Number(t))}else if(t<65536){i(this,o,"m",c).call(this,r|y);i(this,o,"m",l).call(this,Number(t))}else if(t<4294967296){i(this,o,"m",c).call(this,r|g);i(this,o,"m",u).call(this,Number(t))}else{i(this,o,"m",c).call(this,r|b);i(this,o,"m",u).call(this,Number(BigInt(t)/_));i(this,o,"m",u).call(this,Number(BigInt(t)%_))}},c=function _CborWriter_pushUInt8(e){const t=s.allocUnsafe(1);t.writeUInt8(e,0);a(this,n,s.concat([i(this,n,"f"),t]),"f")},l=function _CborWriter_pushUInt16(e){const t=s.allocUnsafe(2);t.writeUInt16BE(e,0);a(this,n,s.concat([i(this,n,"f"),t]),"f")},u=function _CborWriter_pushUInt32(e){const t=s.allocUnsafe(4);t.writeUInt32BE(e,0);a(this,n,s.concat([i(this,n,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.encodeHalf=t.decodeHalf=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js");const a="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let i=0;i<r;i++)s*=Math.pow(2,Math.floor((t+i)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let i;i=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-i:i};t.decodeHalf=decodeHalf;const encodeHalf=e=>{const t=s.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new i.LossOfPrecisionException(a)}let o=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)o+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new i.LossOfPrecisionException(a)}o+=d+8388608>>126-n}else{throw new i.LossOfPrecisionException(a)}const c=new Uint8Array(2);c[0]=o>>>8&255;c[1]=255&o;return c};t.encodeHalf=encodeHalf},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LossOfPrecisionException=t.CborContentException=t.CborInvalidOperationException=void 0;const s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}t.CborInvalidOperationException=CborInvalidOperationException;class CborContentException extends s.CustomError{constructor(e){super(e)}}t.CborContentException=CborContentException;class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}t.LossOfPrecisionException=LossOfPrecisionException},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborAdditionalInfo.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborInitialByte.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborMajorType.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReader.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborReaderState.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborSimpleValue.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborTag.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/CborWriter.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/errors.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.AuthCommitteeHot=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class AuthCommitteeHot{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.AuthCommitteeHot);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeStartArray(_);e.writeInt(d(this,l,"f").type);e.writeByteString(s.from(d(this,l,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.AuthCommitteeHot)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.AuthCommitteeHot}, but got ${s}`);const i=t.readStartArray();if(i!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readStartArray();if(d!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const c=Number(t.readInt());const l=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const p=new AuthCommitteeHot({hash:o,type:a},{hash:l,type:c});n(p,u,e,"f");return p}toCore(){return{__typename:p.CertificateType.AuthorizeCommitteeHot,coldCredential:d(this,c,"f"),hotCredential:d(this,l,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return d(this,c,"f")}hotCredential(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.AuthCommitteeHot=AuthCommitteeHot;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k;Object.defineProperty(t,"__esModule",{value:true});t.Certificate=void 0;const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js");const I=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js");const F=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js");const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js");const G=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js");const q=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js");class Certificate{toCbor(){if(s(this,k,"f"))return s(this,k,"f");let e;switch(s(this,a,"f")){case T.CertificateKind.StakeRegistration:e=s(this,f,"f").toCbor();break;case T.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCbor();break;case T.CertificateKind.StakeDelegation:e=s(this,l,"f").toCbor();break;case T.CertificateKind.PoolRetirement:e=s(this,c,"f").toCbor();break;case T.CertificateKind.PoolRegistration:e=s(this,d,"f").toCbor();break;case T.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCbor();break;case T.CertificateKind.GenesisKeyDelegation:e=s(this,o,"f").toCbor();break;case T.CertificateKind.Registration:e=s(this,h,"f").toCbor();break;case T.CertificateKind.Unregistration:e=s(this,m,"f").toCbor();break;case T.CertificateKind.VoteDelegation:e=s(this,p,"f").toCbor();break;case T.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCbor();break;case T.CertificateKind.StakeRegistrationDelegation:e=s(this,_,"f").toCbor();break;case T.CertificateKind.VoteRegistrationDelegation:e=s(this,w,"f").toCbor();break;case T.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,y,"f").toCbor();break;case T.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCbor();break;case T.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCbor();break;case T.CertificateKind.DrepRegistration:e=s(this,P,"f").toCbor();break;case T.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCbor();break;case T.CertificateKind.UpdateDrep:e=s(this,C,"f").toCbor();break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s(this,a,"f")}`)}return e}static fromCbor(e){let t;const r=new x.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case T.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(H.StakeRegistration.fromCbor(e));break;case T.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(N.StakeDeregistration.fromCbor(e));break;case T.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(G.StakeDelegation.fromCbor(e));break;case T.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(M.PoolRetirement.fromCbor(e));break;case T.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(F.PoolRegistration.fromCbor(e));break;case T.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(B.MoveInstantaneousReward.fromCbor(e));break;case T.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(A.GenesisKeyDelegation.fromCbor(e));break;case T.CertificateKind.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCbor(e));break;case T.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(U.Unregistration.fromCbor(e));break;case T.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert(L.VoteDelegation.fromCbor(e));break;case T.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(V.StakeVoteDelegation.fromCbor(e));break;case T.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(K.StakeRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(W.StakeVoteRegistrationDelegation.fromCbor(e));break;case T.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(j.AuthCommitteeHot.fromCbor(e));break;case T.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(O.ResignCommitteeCold.fromCbor(e));break;case T.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(R.RegisterDelegateRepresentative.fromCbor(e));break;case T.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(z.UnregisterDelegateRepresentative.fromCbor(e));break;case T.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert($.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s}`)}i(t,k,e,"f");return t}toCore(){let e;switch(s(this,a,"f")){case T.CertificateKind.StakeRegistration:e=s(this,f,"f").toCore();break;case T.CertificateKind.StakeDeregistration:e=s(this,u,"f").toCore();break;case T.CertificateKind.StakeDelegation:e=s(this,l,"f").toCore();break;case T.CertificateKind.PoolRetirement:e=s(this,c,"f").toCore();break;case T.CertificateKind.PoolRegistration:e=s(this,d,"f").toCore();break;case T.CertificateKind.MoveInstantaneousRewards:e=s(this,n,"f").toCore();break;case T.CertificateKind.GenesisKeyDelegation:e=s(this,o,"f").toCore();break;case T.CertificateKind.Registration:e=s(this,h,"f").toCore();break;case T.CertificateKind.Unregistration:e=s(this,m,"f").toCore();break;case T.CertificateKind.VoteDelegation:e=s(this,p,"f").toCore();break;case T.CertificateKind.StakeVoteDelegation:e=s(this,v,"f").toCore();break;case T.CertificateKind.StakeRegistrationDelegation:e=s(this,_,"f").toCore();break;case T.CertificateKind.VoteRegistrationDelegation:e=s(this,w,"f").toCore();break;case T.CertificateKind.StakeVoteRegistrationDelegation:e=s(this,y,"f").toCore();break;case T.CertificateKind.AuthCommitteeHot:e=s(this,g,"f").toCore();break;case T.CertificateKind.ResignCommitteeCold:e=s(this,b,"f").toCore();break;case T.CertificateKind.DrepRegistration:e=s(this,P,"f").toCore();break;case T.CertificateKind.DrepUnregistration:e=s(this,S,"f").toCore();break;case T.CertificateKind.UpdateDrep:e=s(this,C,"f").toCore();break;default:throw new I.InvalidStateError(`Unexpected kind value: ${s(this,a,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case E.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(H.StakeRegistration.fromCore(e));break;case E.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(N.StakeDeregistration.fromCore(e));break;case E.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(G.StakeDelegation.fromCore(e));break;case E.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(M.PoolRetirement.fromCore(e));break;case E.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(F.PoolRegistration.fromCore(e));break;case E.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(B.MoveInstantaneousReward.fromCore(e));break;case E.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(A.GenesisKeyDelegation.fromCore(e));break;case E.CertificateType.Registration:t=Certificate.newRegistrationCert(D.Registration.fromCore(e));break;case E.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(U.Unregistration.fromCore(e));break;case E.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert(L.VoteDelegation.fromCore(e));break;case E.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(V.StakeVoteDelegation.fromCore(e));break;case E.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(K.StakeRegistrationDelegation.fromCore(e));break;case E.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(q.VoteRegistrationDelegation.fromCore(e));break;case E.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(W.StakeVoteRegistrationDelegation.fromCore(e));break;case E.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(j.AuthCommitteeHot.fromCore(e));break;case E.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(O.ResignCommitteeCold.fromCore(e));break;case E.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(R.RegisterDelegateRepresentative.fromCore(e));break;case E.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(z.UnregisterDelegateRepresentative.fromCore(e));break;case E.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert($.UpdateDelegateRepresentative.fromCore(e));break;default:throw new I.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;i(t,f,e,"f");i(t,a,T.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;i(t,u,e,"f");i(t,a,T.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;i(t,l,e,"f");i(t,a,T.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;i(t,d,e,"f");i(t,a,T.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;i(t,c,e,"f");i(t,a,T.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;i(t,o,e,"f");i(t,a,T.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;i(t,n,e,"f");i(t,a,T.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;i(t,h,e,"f");i(t,a,T.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;i(t,m,e,"f");i(t,a,T.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;i(t,p,e,"f");i(t,a,T.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;i(t,v,e,"f");i(t,a,T.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;i(t,_,e,"f");i(t,a,T.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;i(t,w,e,"f");i(t,a,T.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;i(t,y,e,"f");i(t,a,T.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;i(t,g,e,"f");i(t,a,T.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;i(t,b,e,"f");i(t,a,T.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;i(t,P,e,"f");i(t,a,T.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;i(t,S,e,"f");i(t,a,T.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;i(t,C,e,"f");i(t,a,T.CertificateKind.UpdateDrep,"f");return t}kind(){return s(this,a,"f")}asStakeRegistration(){return s(this,f,"f")}asStakeDeregistration(){return s(this,u,"f")}asStakeDelegation(){return s(this,l,"f")}asPoolRegistration(){return s(this,d,"f")}asPoolRetirement(){return s(this,c,"f")}asGenesisKeyDelegation(){return s(this,o,"f")}asMoveInstantaneousRewardsCert(){return s(this,n,"f")}asRegistrationCert(){return s(this,h,"f")}asUnregistrationCert(){return s(this,m,"f")}asVoteDelegationCert(){return s(this,p,"f")}asStakeVoteDelegationCert(){return s(this,v,"f")}asStakeRegistrationDelegationCert(){return s(this,_,"f")}asVoteRegistrationDelegationCert(){return s(this,w,"f")}asStakeVoteRegistrationDelegationCert(){return s(this,y,"f")}asAuthCommitteeHotCert(){return s(this,g,"f")}asResignCommitteeColdCert(){return s(this,b,"f")}asRegisterDelegateRepresentativeCert(){return s(this,P,"f")}asUnregisterDelegateRepresentativeCert(){return s(this,S,"f")}asUpdateDelegateRepresentativeCert(){return s(this,C,"f")}constructor(){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0)}}t.Certificate=Certificate;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CertificateKind=void 0;var r;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(r=t.CertificateKind||(t.CertificateKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.DRep=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");class DRep{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");if(d(this,l,"f")===p.DRepKind.KeyHash||d(this,l,"f")===p.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===p.DRepKind.KeyHash||r===p.DRepKind.ScriptHash){const s=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));if(r===p.DRepKind.KeyHash){return DRep.newKeyHash(s)}return DRep.newScriptHash(s)}t.readEndArray();if(r===p.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(d(this,l,"f")===p.DRepKind.KeyHash||d(this,l,"f")===p.DRepKind.ScriptHash)return d(this,c,"f");if(d(this,l,"f")===p.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,_.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,_.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===m.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(p.DRepKind.KeyHash,{hash:e,type:m.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(p.DRepKind.ScriptHash,{hash:e,type:m.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(p.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(p.DRepKind.NoConfidence,void 0)}kind(){return d(this,l,"f")}toKeyHash(){var e;if(d(this,l,"f")!==p.DRepKind.KeyHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(d(this,l,"f")!==p.DRepKind.ScriptHash)return;return null===(e=d(this,c,"f"))||void 0===e?void 0:e.hash}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,t,"f");n(this,l,e,"f")}}t.DRep=DRep;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DRepKind=void 0;var r;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(r=t.DRepKind||(t.DRepKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRepKind.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/DRep.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.GenesisKeyDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=4;class GenesisKeyDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(w);e.writeInt(p.CertificateKind.GenesisKeyDelegation);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(r!==w)throw new _.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.GenesisKeyDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.GenesisKeyDelegation}, but got ${s}`);const i=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));const a=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));const o=h.Hash32ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=new GenesisKeyDelegation(i,a,o);n(d,f,e,"f");return d}toCore(){return{__typename:v.CertificateType.GenesisKeyDelegation,genesisDelegateHash:d(this,l,"f"),genesisHash:d(this,c,"f"),vrfKeyHash:d(this,u,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return d(this,c,"f")}setGenesisHash(e){n(this,c,e,"f");n(this,f,void 0,"f")}genesisDelegateHash(){return d(this,l,"f")}setGenesisDelegateHash(e){n(this,l,e,"f");n(this,f,void 0,"f")}vrfKeyHash(){return d(this,u,"f")}setVrfKeyHash(e){n(this,u,e,"f");n(this,f,void 0,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.GenesisKeyDelegation=GenesisKeyDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousReward=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");const v=2;class MoveInstantaneousReward{toCbor(){if(i(this,c,"f"))return i(this,c,"f");let e;switch(i(this,d,"f")){case h.MirCertificateKind.ToOtherPot:e=i(this,o,"f").toCbor();break;case h.MirCertificateKind.ToStakeCreds:e=i(this,n,"f").toCbor();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${i(this,d,"f")}`)}const t=new l.CborWriter;t.writeStartArray(v);t.writeInt(u.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(s.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);let r=t.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const s=Number(t.readInt());if(s!==u.CertificateKind.MoveInstantaneousRewards)throw new f.InvalidArgumentError("cbor",`Expected certificate kind ${u.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const i=f.HexBlob.fromBytes(t.readEncodedValue());const _=new l.CborReader(i);r=_.readStartArray();if(r!==v)throw new f.InvalidArgumentError("cbor",`Expected elements size ${v}, but got ${r}`);const w=new MoveInstantaneousReward;_.readInt();if(_.peekState()===l.CborReaderState.UnsignedInteger){a(w,o,m.MoveInstantaneousRewardToOtherPot.fromCbor(i),"f");a(w,d,h.MirCertificateKind.ToOtherPot,"f")}else if(_.peekState()===l.CborReaderState.StartArray||_.peekState()===l.CborReaderState.StartMap){a(w,n,p.MoveInstantaneousRewardToStakeCreds.fromCbor(i),"f");a(w,d,h.MirCertificateKind.ToStakeCreds,"f")}else{throw new f.InvalidArgumentError("cbor","Invalid CBOR string")}a(w,c,e,"f");return w}toCore(){let e;switch(i(this,d,"f")){case h.MirCertificateKind.ToOtherPot:e=i(this,o,"f").toCore();break;case h.MirCertificateKind.ToStakeCreds:e=i(this,n,"f").toCore();break;default:throw new f.InvalidStateError(`Unexpected kind value: ${i(this,d,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case h.MirCertificateKind.ToOtherPot:a(t,o,m.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");a(t,d,h.MirCertificateKind.ToOtherPot,"f");break;case h.MirCertificateKind.ToStakeCreds:a(t,n,p.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");a(t,d,h.MirCertificateKind.ToStakeCreds,"f");break;default:throw new f.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;a(t,o,e,"f");a(t,d,h.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;a(t,n,e,"f");a(t,d,h.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return i(this,d,"f")}asToOtherPot(){return i(this,o,"f")}asToStakeCreds(){return i(this,n,"f")}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.MoveInstantaneousReward=MoveInstantaneousReward;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToOtherPot=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(u);e.writeInt(i(this,a,"f")===c.MirCertificatePot.Reserves?0:1);e.writeInt(i(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const i=Number(t.readInt());const a=t.readInt();if(i<0||i>1)throw new l.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${i}`);const o=new MoveInstantaneousRewardToOtherPot(0===i?c.MirCertificatePot.Reserves:c.MirCertificatePot.Treasury,a);s(o,n,e,"f");return o}toCore(){return{__typename:c.CertificateType.MIR,kind:c.MirCertificateKind.ToOtherPot,pot:i(this,a,"f"),quantity:i(this,o,"f")}}static fromCore(e){if(e.kind!==c.MirCertificateKind.ToOtherPot)throw new l.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new l.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return i(this,a,"f")}setPot(e){s(this,a,e,"f");s(this,n,void 0,"f")}getAmount(){return i(this,o,"f")}setAmount(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.MoveInstantaneousRewardToOtherPot=MoveInstantaneousRewardToOtherPot;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.MoveInstantaneousRewardToStakeCreds=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeInt(d(this,c,"f")===m.MirCertificatePot.Reserves?0:1);const t=new Map([...d(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,i]of t){e.writeStartArray(v);e.writeInt(r.type);e.writeByteString(s.from(r.hash,"hex"));e.writeInt(i)}return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s<0||s>1)throw new p.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${s} elements`);t.readStartMap();const i=new Map;while(t.peekState()!==h.CborReaderState.EndMap){t.readStartArray();const a=Number(t.readInt());if(a<0||a>1)throw new p.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${a}`);const o=f.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();i.set({hash:o,type:a},d)}t.readEndMap();const c=new MoveInstantaneousRewardToStakeCreds(0===s?m.MirCertificatePot.Reserves:m.MirCertificatePot.Treasury,i);n(c,u,e,"f");return c}toCore(){if(0===d(this,l,"f").size)throw new p.InvalidStateError("The credential map is empty.");const[[e,t]]=d(this,l,"f");return{__typename:m.CertificateType.MIR,kind:m.MirCertificateKind.ToStakeCreds,pot:d(this,c,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==m.MirCertificateKind.ToStakeCreds)throw new p.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new p.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return d(this,c,"f")}setPot(e){n(this,c,e,"f");n(this,u,void 0,"f")}getStakeCreds(){return d(this,l,"f")}setStakeCreds(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.MoveInstantaneousRewardToStakeCreds=MoveInstantaneousRewardToStakeCreds;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolMetadata=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=64;const v=2;class PoolMetadata{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(v);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==v)throw new m.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=t.readTextString();const i=f.Hash32ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const a=new PoolMetadata(s,i);n(a,u,e,"f");return a}toCore(){return{hash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolMetadataHash(){return d(this,l,"f")}setPoolMetadataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>p)throw new m.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolMetadata=PoolMetadata;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,_,w;Object.defineProperty(t,"__esModule",{value:true});t.PoolParams=void 0;const y=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/Address.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const S=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/RewardAccount.js");class PoolParams{toCbor(){const e=new b.CborWriter;if(d(this,w,"f"))return d(this,w,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));e.writeInt(d(this,f,"f"));e.writeEncodedValue(s.from(d(this,h,"f").toCbor(),"hex"));e.writeByteString(s.from(d(this,m,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(s.from(d(this,p,"f").toCbor(),"hex"));e.writeStartArray(d(this,v,"f").length);for(const t of d(this,v,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));if(d(this,_,"f"))e.writeEncodedValue(s.from(d(this,_,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new b.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new S.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);n(s,w,e,"f");return s}static fromFlattenedCbor(e){const t=y.Ed25519KeyHashHex(S.HexBlob.fromBytes(e.readByteString()));const r=(0,C.VrfVkHex)(S.HexBlob.fromBytes(e.readByteString()));const s=e.readInt();const i=e.readInt();const a=x.UnitInterval.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));const o=g.Address.fromBytes(S.HexBlob.fromBytes(e.readByteString())).asReward();const n=new Array;let d;const c=P.CborSet.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()),P.Hash.fromCbor);e.readStartArray();while(e.peekState()!==b.CborReaderState.EndArray)n.push(j.Relay.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==b.CborReaderState.Null)d=k.PoolMetadata.fromCbor(S.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,s,i,a,o,c,n,d)}toCore(){const e=d(this,m,"f").toAddress();const t={cost:d(this,f,"f"),id:C.PoolId.fromKeyHash(d(this,c,"f")),margin:d(this,h,"f").toCore(),owners:d(this,p,"f").toCore().map(t=>(0,T.createRewardAccount)(t,e.getNetworkId())),pledge:d(this,u,"f"),relays:d(this,v,"f").map(e=>e.toCore()),rewardAccount:d(this,m,"f").toAddress().toBech32(),vrf:d(this,l,"f")};if(d(this,_,"f"))t.metadataJson=d(this,_,"f").toCore();return t}static fromCore(e){return new PoolParams(C.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,x.UnitInterval.fromCore(e.margin),g.Address.fromBech32(e.rewardAccount).asReward(),P.CborSet.fromCore(e.owners.map(e=>y.Ed25519KeyHashHex(g.Address.fromBech32(e).asReward().getPaymentCredential().hash)),P.Hash.fromCore),e.relays.map(e=>j.Relay.fromCore(e)),e.metadataJson?k.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return d(this,c,"f")}setOperator(e){n(this,c,e,"f");n(this,w,void 0,"f")}vrfKeyHash(){return d(this,l,"f")}setVrfKeyHash(e){n(this,l,e,"f");n(this,w,void 0,"f")}pledge(){return d(this,u,"f")}setPledge(e){n(this,u,e,"f");n(this,w,void 0,"f")}cost(){return d(this,f,"f")}setCost(e){n(this,f,e,"f");n(this,w,void 0,"f")}margin(){return d(this,h,"f")}setMargin(e){n(this,h,e,"f");n(this,w,void 0,"f")}rewardAccount(){return d(this,m,"f")}setRewardAccount(e){n(this,m,e,"f");n(this,w,void 0,"f")}poolOwners(){return d(this,p,"f")}setPoolOwners(e){n(this,p,e,"f");n(this,w,void 0,"f")}relays(){return d(this,v,"f")}setRelays(e){n(this,v,[...e],"f");n(this,w,void 0,"f")}poolMetadata(){return d(this,_,"f")}setPoolMetadata(e){n(this,_,e,"f");n(this,w,void 0,"f")}constructor(e,t,r,s,i,a,o,d,y){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f");n(this,f,s,"f");n(this,h,i,"f");n(this,m,a,"f");n(this,p,o,"f");n(this,v,d,"f");n(this,_,y,"f")}}t.PoolParams=PoolParams;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.MultiHostName=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=2;const l=2;const u=64;class MultiHostName{toCbor(){const e=new n.CborWriter;if(i(this,o,"f"))return i(this,o,"f");e.writeStartArray(c);e.writeInt(l);e.writeTextString(i(this,a,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==c)throw new d.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==l)throw new d.InvalidArgumentError("cbor",`Expected MultiHostName id ${l}, but got ${i}`);const a=t.readTextString();const u=new MultiHostName(a);s(u,o,e,"f");return u}toCore(){return{__typename:"RelayByNameMultihost",dnsName:i(this,a,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return i(this,a,"f")}setDnsName(e){if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,a,e,"f");s(this,o,void 0,"f")}constructor(e){a.set(this,void 0);o.set(this,void 0);if(e.length>u)throw new d.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,a,e,"f")}}t.MultiHostName=MultiHostName;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Relay=t.RelayKind=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var p;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(p=t.RelayKind||(t.RelayKind={}));class Relay{toCbor(){if(s(this,c,"f"))return s(this,c,"f");let e;switch(s(this,d,"f")){case p.SingleHostAddress:e=s(this,a,"f").toCbor();break;case p.SingleHostDnsName:e=s(this,o,"f").toCbor();break;case p.MultiHostDnsName:e=s(this,n,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCbor(e){let t;const r=new l.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case p.SingleHostAddress:t=Relay.newSingleHostAddr(h.SingleHostAddr.fromCbor(e));break;case p.SingleHostDnsName:t=Relay.newSingleHostName(m.SingleHostName.fromCbor(e));break;case p.MultiHostDnsName:t=Relay.newMultiHostName(f.MultiHostName.fromCbor(e));break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s}`)}i(t,c,e,"f");return t}toCore(){let e;switch(s(this,d,"f")){case p.SingleHostAddress:e=s(this,a,"f").toCore();break;case p.SingleHostDnsName:e=s(this,o,"f").toCore();break;case p.MultiHostDnsName:e=s(this,n,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${s(this,d,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(h.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(m.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(f.MultiHostName.fromCore(e));break;default:throw new u.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;i(t,a,e,"f");i(t,d,p.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;i(t,o,e,"f");i(t,d,p.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;i(t,n,e,"f");i(t,d,p.MultiHostDnsName,"f");return t}kind(){return s(this,d,"f")}asSingleHostAddr(){return s(this,a,"f")}asSingleHostName(){return s(this,o,"f")}asMultiHostName(){return s(this,n,"f")}constructor(){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0)}}t.Relay=Relay;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostAddr=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js");const f=4;const h=0;class SingleHostAddr{toCbor(){const e=new c.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeStartArray(f);e.writeInt(h);i(this,a,"f")?e.writeInt(i(this,a,"f")):e.writeNull();i(this,o,"f")?e.writeByteString((0,u.ipV4StringToByteArray)(i(this,o,"f"))):e.writeNull();i(this,n,"f")?e.writeByteString((0,u.ipV6StringToByteArray)(i(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==h)throw new l.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${h}, but got ${i}`);let a;let o;let n;if(t.peekState()===c.CborReaderState.Null){t.readNull();a=void 0}else{a=t.readInt()}if(t.peekState()===c.CborReaderState.Null){t.readNull();o=void 0}else{o=(0,u.byteArrayToIpV4String)(t.readByteString())}if(t.peekState()===c.CborReaderState.Null){t.readNull();n=void 0}else{n=(0,u.byteArrayToIPv6String)(t.readByteString())}const m=new SingleHostAddr(a?Number(a):void 0,o,n);s(m,d,e,"f");return m}toCore(){return{__typename:"RelayByAddress",ipv4:i(this,o,"f"),ipv6:i(this,n,"f"),port:i(this,a,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return i(this,a,"f")}setPort(e){s(this,a,e,"f");s(this,d,void 0,"f")}ipv4(){return i(this,o,"f")}setIpv4(e){s(this,o,e,"f");s(this,d,void 0,"f")}ipv6(){return i(this,n,"f")}setIpv6(e){s(this,n,e,"f");s(this,d,void 0,"f")}constructor(e,t,r){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f");s(this,n,r,"f")}}t.SingleHostAddr=SingleHostAddr;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.SingleHostName=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(l);e.writeInt(u);i(this,a,"f")?e.writeInt(i(this,a,"f")):e.writeNull();e.writeTextString(i(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==u)throw new c.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${i}`);let a;if(t.peekState()===d.CborReaderState.Null){t.readNull();a=void 0}else{a=t.readInt()}const o=t.readTextString();const f=new SingleHostName(o,a?Number(a):void 0);s(f,n,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:i(this,o,"f"),port:i(this,a,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return i(this,a,"f")}setPort(e){s(this,a,e,"f");s(this,n,void 0,"f")}dnsName(){return i(this,o,"f")}setDnsName(e){if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,t,"f");if(e.length>f)throw new c.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);s(this,o,e,"f")}}t.SingleHostName=SingleHostName;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/MultiHostName.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostName.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/Relay.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/ipUtils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.byteArrayToIPv6String=t.ipV6StringToByteArray=t.byteArrayToIpV4String=t.ipV4StringToByteArray=void 0;const s=r("../../node_modules/ip-address/dist/ip-address.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const ipV4StringToByteArray=e=>{if(!s.Address4.isValid(e))throw new i.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};t.ipV4StringToByteArray=ipV4StringToByteArray;const byteArrayToIpV4String=e=>{if(4!==e.length)throw new i.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};t.byteArrayToIpV4String=byteArrayToIpV4String;const ipV6StringToByteArray=e=>{if(!s.Address6.isValid(e))throw new i.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new s.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};t.ipV6StringToByteArray=ipV6StringToByteArray;const byteArrayToIPv6String=e=>{const t=s.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};t.byteArrayToIPv6String=byteArrayToIPv6String},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolMetadata.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/PoolParams.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/Relay/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.PoolRegistration=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js");const f=u.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new n.CborWriter;if(i(this,o,"f"))return i(this,o,"f");e.writeStartArray(f);e.writeInt(d.CertificateKind.PoolRegistration);return i(this,a,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==d.CertificateKind.PoolRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.PoolRegistration}, but got ${i}`);const a=u.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(a);s(c,o,e,"f");return c}toCore(){return{__typename:c.CertificateType.PoolRegistration,poolParameters:i(this,a,"f").toCore()}}static fromCore(e){return new PoolRegistration(u.PoolParams.fromCore(e.poolParameters))}poolParameters(){return i(this,a,"f")}setPoolParameters(e){s(this,a,e,"f");s(this,o,void 0,"f")}constructor(e){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.PoolRegistration=PoolRegistration;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolRetirement=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const y=3;class PoolRetirement{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(y);e.writeInt(m.CertificateKind.PoolRetirement);e.writeByteString(s.from(d(this,c,"f"),"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.PoolRetirement)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.PoolRetirement}, but got ${s}`);const i=f.Ed25519KeyHashHex(_.HexBlob.fromBytes(t.readByteString()));const a=t.readInt();t.readEndArray();const o=new PoolRetirement(i,(0,v.EpochNo)(Number(a)));n(o,u,e,"f");return o}toCore(){return{__typename:p.CertificateType.PoolRetirement,epoch:d(this,l,"f"),poolId:w.PoolId.fromKeyHash(d(this,c,"f"))}}static fromCore(e){return new PoolRetirement(w.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return d(this,c,"f")}setPoolKeyHash(e){n(this,c,e,"f");n(this,u,void 0,"f")}epoch(){return d(this,l,"f")}setEpoch(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.PoolRetirement=PoolRetirement;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.RegisterDelegateRepresentative=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class RegisterDelegateRepresentative{toCbor(){const e=new p.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(v.CertificateKind.DrepRegistration);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));if(d(this,u,"f"))e.writeEncodedValue((0,y.hexToBytes)(d(this,u,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(4!==r)throw new w.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.DrepRegistration)throw new w.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.DrepRegistration}, but got ${s}`);const i=t.readStartArray();if(i!==g)throw new w.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=h.Hash28ByteBase16(w.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();let c;if(t.peekState()===p.CborReaderState.Null)t.readNull();else c=m.Anchor.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new RegisterDelegateRepresentative({hash:o,type:a},d,c);n(l,f,e,"f");return l}toCore(){return{__typename:_.CertificateType.RegisterDelegateRepresentative,anchor:d(this,u,"f")?d(this,u,"f").toCore():null,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?m.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}anchor(){return d(this,u,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f");n(this,u,r,"f")}}t.RegisterDelegateRepresentative=RegisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Registration=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class Registration{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.Registration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.Registration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.Registration}, but got ${s}`);const i=t.readStartArray();if(i!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Registration({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.Registration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Registration=Registration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.ResignCommitteeCold=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const y=2;class ResignCommitteeCold{toCbor(){const e=new m.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(p.CertificateKind.ResignCommitteeCold);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,w.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.ResignCommitteeCold)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.ResignCommitteeCold}, but got ${s}`);const i=t.readStartArray();if(i!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===m.CborReaderState.Null)t.readNull();else d=h.Anchor.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ResignCommitteeCold({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.ResignCommitteeCold,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,coldCredential:d(this,c,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?h.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.ResignCommitteeCold=ResignCommitteeCold;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.StakeDelegation=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const w=3;const y=2;class StakeDelegation{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(w);e.writeInt(m.CertificateKind.StakeDelegation);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.StakeDelegation)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.StakeDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=f.Ed25519KeyHashHex(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new StakeDelegation({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.StakeDelegation,poolId:_.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,_.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}poolKeyHash(){return d(this,l,"f")}setPoolKeyHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.StakeDelegation=StakeDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeDeregistration=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeDeregistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(h.CertificateKind.StakeDeregistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.StakeDeregistration)throw new p.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.StakeDeregistration}, but got ${s}`);const i=t.readStartArray();if(i!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=u.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeDeregistration({hash:o,type:a});n(d,l,e,"f");return d}toCore(){return{__typename:m.CertificateType.StakeDeregistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeDeregistration=StakeDeregistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistration=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=2;class StakeRegistration{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(v);e.writeInt(h.CertificateKind.StakeRegistration);e.writeStartArray(v);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h.CertificateKind.StakeRegistration)throw new p.InvalidArgumentError("cbor",`Expected certificate kind ${h.CertificateKind.StakeRegistration}, but got ${s}`);const i=t.readStartArray();if(i!==v)throw new p.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=u.Hash28ByteBase16(p.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const d=new StakeRegistration({hash:o,type:a});n(d,l,e,"f");return d}toCore(){return{__typename:m.CertificateType.StakeRegistration,stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.StakeRegistration=StakeRegistration;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeRegistrationDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const y=2;class StakeRegistrationDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeRegistrationDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeRegistrationDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=h.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=h.Ed25519KeyHashHex(_.HexBlob.fromBytes(t.readByteString()));const c=t.readInt();t.readEndArray();const l=new StakeRegistrationDelegation({hash:o,type:a},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeRegistrationDelegation,deposit:d(this,u,"f"),poolId:w.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,w.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeRegistrationDelegation=StakeRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const b=2;class StakeVoteDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.StakeVoteDelegation);e.writeStartArray(b);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,l,"f"),"hex"));e.writeEncodedValue((0,g.hexToBytes)(d(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new w.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.StakeVoteDelegation)throw new w.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.StakeVoteDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==b)throw new w.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=h.Hash28ByteBase16(w.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=h.Ed25519KeyHashHex(w.HexBlob.fromBytes(t.readByteString()));const c=_.DRep.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const l=new StakeVoteDelegation({hash:o,type:a},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.StakeVoteDelegation,dRep:d(this,u,"f").toCore(),poolId:y.PoolId.fromKeyHash(d(this,l,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,_.DRep.fromCore(e.dRep),y.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}drep(){return d(this,u,"f")}poolKeyHash(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.StakeVoteDelegation=StakeVoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h;Object.defineProperty(t,"__esModule",{value:true});t.StakeVoteRegistrationDelegation=void 0;const m=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const y=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/StakePool/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const P=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new p.CborWriter;if(d(this,h,"f"))return d(this,h,"f");e.writeStartArray(5);e.writeInt(v.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(P);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeByteString(s.from(d(this,u,"f"),"hex"));e.writeEncodedValue((0,b.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new p.CborReader(e);const r=t.readStartArray();if(5!==r)throw new y.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==v.CertificateKind.StakeVoteRegistrationDelegation)throw new y.InvalidArgumentError("cbor",`Expected certificate kind ${v.CertificateKind.StakeVoteRegistrationDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==P)throw new y.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=m.Hash28ByteBase16(y.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=m.Ed25519KeyHashHex(y.HexBlob.fromBytes(t.readByteString()));const c=w.DRep.fromCbor(y.HexBlob.fromBytes(t.readEncodedValue()));const l=t.readInt();t.readEndArray();const u=new StakeVoteRegistrationDelegation({hash:o,type:a},l,c,d);n(u,h,e,"f");return u}toCore(){return{__typename:_.CertificateType.StakeVoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,f,"f"),poolId:g.PoolId.fromKeyHash(d(this,u,"f")),stakeCredential:d(this,c,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,w.DRep.fromCore(e.dRep),g.PoolId.toKeyHash(e.poolId))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,f,"f")}dRep(){return d(this,l,"f")}poolKeyHash(){return d(this,u,"f")}constructor(e,t,r,s){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);n(this,c,e,"f");n(this,f,t,"f");n(this,l,r,"f");n(this,u,s,"f")}}t.StakeVoteRegistrationDelegation=StakeVoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UnregisterDelegateRepresentative=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class UnregisterDelegateRepresentative{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.DrepUnregistration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.DrepUnregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.DrepUnregistration}, but got ${s}`);const i=t.readStartArray();if(i!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new UnregisterDelegateRepresentative({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.UnregisterDelegateRepresentative,dRepCredential:d(this,c,"f"),deposit:d(this,l,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return d(this,c,"f")}deposit(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UnregisterDelegateRepresentative=UnregisterDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Unregistration=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=2;class Unregistration{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.Unregistration);e.writeStartArray(_);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeInt(d(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new v.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.Unregistration)throw new v.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.Unregistration}, but got ${s}`);const i=t.readStartArray();if(i!==_)throw new v.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(v.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=t.readInt();t.readEndArray();const c=new Unregistration({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.Unregistration,deposit:d(this,l,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return d(this,c,"f")}setStakeCredential(e){n(this,c,e,"f");n(this,u,void 0,"f")}deposit(){return d(this,l,"f")}setDeposit(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.Unregistration=Unregistration;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.UpdateDelegateRepresentative=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const y=2;class UpdateDelegateRepresentative{toCbor(){const e=new m.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(p.CertificateKind.UpdateDrep);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));if(d(this,l,"f"))e.writeEncodedValue((0,w.hexToBytes)(d(this,l,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.UpdateDrep)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.UpdateDrep}, but got ${s}`);const i=t.readStartArray();if(i!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let d;if(t.peekState()===m.CborReaderState.Null)t.readNull();else d=h.Anchor.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new UpdateDelegateRepresentative({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:v.CertificateType.UpdateDelegateRepresentative,anchor:d(this,l,"f")?d(this,l,"f").toCore():null,dRepCredential:d(this,c,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?h.Anchor.fromCore(e.anchor):void 0)}credential(){return d(this,c,"f")}anchor(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.UpdateDelegateRepresentative=UpdateDelegateRepresentative;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.VoteDelegation=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const _=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const y=2;class VoteDelegation{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(3);e.writeInt(m.CertificateKind.VoteDelegation);e.writeStartArray(y);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,w.hexToBytes)(d(this,l,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(3!==r)throw new _.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.CertificateKind.VoteDelegation)throw new _.InvalidArgumentError("cbor",`Expected certificate kind ${m.CertificateKind.VoteDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==y)throw new _.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=f.Hash28ByteBase16(_.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=v.DRep.fromCbor(_.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new VoteDelegation({hash:o,type:a},d);n(c,u,e,"f");return c}toCore(){return{__typename:p.CertificateType.VoteDelegation,dRep:d(this,l,"f").toCore(),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,v.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}dRep(){return d(this,l,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);n(this,c,e,"f");n(this,l,t,"f")}}t.VoteDelegation=VoteDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.VoteRegistrationDelegation=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/CertificateKind.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Certificate.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const g=2;class VoteRegistrationDelegation{toCbor(){const e=new m.CborWriter;if(d(this,f,"f"))return d(this,f,"f");e.writeStartArray(4);e.writeInt(p.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(g);e.writeInt(d(this,c,"f").type);e.writeByteString(s.from(d(this,c,"f").hash,"hex"));e.writeEncodedValue((0,y.hexToBytes)(d(this,l,"f").toCbor()));e.writeInt(d(this,u,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(4!==r)throw new w.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==p.CertificateKind.VoteRegistrationDelegation)throw new w.InvalidArgumentError("cbor",`Expected certificate kind ${p.CertificateKind.VoteRegistrationDelegation}, but got ${s}`);const i=t.readStartArray();if(i!==g)throw new w.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const a=Number(t.readInt());const o=h.Hash28ByteBase16(w.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const d=_.DRep.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new VoteRegistrationDelegation({hash:o,type:a},c,d);n(l,f,e,"f");return l}toCore(){return{__typename:v.CertificateType.VoteRegistrationDelegation,dRep:d(this,l,"f").toCore(),deposit:d(this,u,"f"),stakeCredential:d(this,c,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,_.DRep.fromCore(e.dRep))}stakeCredential(){return d(this,c,"f")}deposit(){return d(this,u,"f")}dRep(){return d(this,l,"f")}constructor(e,t,r){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);n(this,c,e,"f");n(this,u,t,"f");n(this,l,r,"f")}}t.VoteRegistrationDelegation=VoteRegistrationDelegation;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Certificate.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/GenesisKeyDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRegistration.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolRetirement.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeDeregistration.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistration.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/PoolParams/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/MoveInstantaneousReward/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/DRep/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Registration.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/Unregistration.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeRegistrationDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/VoteRegistrationDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/StakeVoteRegistrationDelegation.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/AuthCommitteeHot.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/ResignCommitteeCold.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/RegisterDelegateRepresentative.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UnregisterDelegateRepresentative.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/UpdateDelegateRepresentative.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Anchor=void 0;const f=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=2;const v=128;class Anchor{toCbor(){const e=new h.CborWriter;if(d(this,u,"f"))return d(this,u,"f");e.writeStartArray(p);e.writeTextString(d(this,c,"f"));e.writeByteString(s.from(d(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new h.CborReader(e);const r=t.readStartArray();if(r!==p)throw new m.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=t.readTextString();const i=f.Hash32ByteBase16(m.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const a=new Anchor(s,i);n(a,u,e,"f");return a}toCore(){return{dataHash:d(this,l,"f"),url:d(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return d(this,c,"f")}setUrl(e){n(this,c,e,"f");n(this,u,void 0,"f")}dataHash(){return d(this,l,"f")}setDataHash(e){n(this,l,e,"f");n(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>v)throw new m.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);n(this,c,e,"f");n(this,l,t,"f")}}t.Anchor=Anchor;c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.CborSet=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");class CborSet{static fromCbor(e,t){const r=new d.CborReader(e);const s=new CborSet([]);if(r.peekState()===d.CborReaderState.Tag&&r.peekTag()===d.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){a(s,o,"f").push(t(c.HexBlob.fromBytes(r.readEncodedValue())))}i(s,n,e,"f");return s}toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new d.CborWriter;if(l.inConwayEra)e.writeTag(d.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return a(this,o,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return a(this,o,"f")}setValues(e){i(this,o,[...e],"f");i(this,n,void 0,"f")}size(){return a(this,o,"f").length}constructor(e){o.set(this,void 0);n.set(this,void 0);i(this,o,[...e],"f")}}t.CborSet=CborSet;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.Credential=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const c=2;class Credential{toCbor(){const e=new o.CborWriter;e.writeStartArray(c);e.writeInt(i(this,a,"f").type);e.writeByteString((0,d.hexToBytes)(i(this,a,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);if(t.readStartArray()!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=n.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...i(this,a,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...i(this,a,"f")}}constructor(e){a.set(this,void 0);s(this,a,e,"f")}}t.Credential=Credential;a=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.Datum=t.DatumKind=t.isDatumHash=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const h=2;const isDatumHash=e=>null!==e&&"string"==typeof e;t.isDatumHash=isDatumHash;var m;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(m=t.DatumKind||(t.DatumKind={}));class Datum{toCbor(){const e=new l.CborWriter;if(a(this,c,"f"))return a(this,c,"f");e.writeStartArray(h);e.writeInt(a(this,o,"f"));if(a(this,o,"f")===m.DataHash)e.writeByteString(s.from(a(this,n,"f"),"hex").valueOf());else e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let a;let o;switch(s){case m.DataHash:a=u.HexBlob.fromBytes(t.readByteString());break;case m.InlineData:o=f.PlutusData.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new u.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const n=new Datum(a,o);i(n,c,e,"f");return n}toCore(){let e;switch(a(this,o,"f")){case m.DataHash:e=a(this,n,"f");break;case m.InlineData:e=a(this,d,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected datum kind ${a(this,o,"f")}`)}return e}static fromCore(e){if((0,t.isDatumHash)(e))return new Datum(e);return new Datum(void 0,f.PlutusData.fromCore(e))}kind(){return a(this,o,"f")}asDataHash(){return a(this,n,"f")}asInlineData(){return a(this,d,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);if(e&&t)throw new u.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new u.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)i(this,o,m.DataHash,"f");if(t)i(this,o,m.InlineData,"f");i(this,n,e,"f");i(this,d,t,"f")}}t.Datum=Datum;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.ExUnits=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ExUnits{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(l);e.writeInt(i(this,a,"f"));e.writeInt(i(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const i=t.readUInt();const a=t.readUInt();t.readEndArray();const o=new ExUnits(i,a);s(o,n,e,"f");return o}toCore(){return{memory:Number(i(this,a,"f")),steps:Number(i(this,o,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return i(this,a,"f")}setMem(e){s(this,a,e,"f");s(this,n,void 0,"f")}steps(){return i(this,o,"f")}setSteps(e){s(this,o,e,"f");s(this,n,void 0,"f")}add(e){const t=i(this,a,"f")+i(e,a,"f");const r=i(this,o,"f")+i(e,o,"f");return new ExUnits(t,r)}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.ExUnits=ExUnits;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionId=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class GovernanceActionId{toCbor(){if(a(this,d,"f"))return a(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(a(this,o,"f"),"hex"));e.writeInt(a(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const a=t.readInt();const o=new GovernanceActionId(l.HexBlob.fromBytes(s),a);i(o,d,e,"f");return o}toCore(){return{actionIndex:Number(a(this,n,"f")),id:a(this,o,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return a(this,o,"f")}setTransactionId(e){i(this,o,e,"f");i(this,d,void 0,"f")}index(){return a(this,n,"f")}setIndex(e){i(this,n,e,"f");i(this,d,void 0,"f")}equals(e){return a(this,n,"f")===a(e,n,"f")&&a(this,o,"f")===a(e,o,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f")}}t.GovernanceActionId=GovernanceActionId;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Hash=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class Hash{toCbor(){const e=new n.CborWriter;e.writeByteString(s.from(a(this,o,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);return new Hash(d.HexBlob.fromBytes(t.readByteString()))}toCore(){return a(this,o,"f")}static fromCore(e){return new Hash(e)}value(){return a(this,o,"f")}constructor(e){o.set(this,void 0);i(this,o,e,"f")}}t.Hash=Hash;o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolVersion=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=2;class ProtocolVersion{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(l);e.writeInt(i(this,a,"f"));e.writeInt(i(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const i=Number(t.readInt());const a=Number(t.readInt());t.readEndArray();const o=new ProtocolVersion(i,a);s(o,n,e,"f");return o}toCore(){return{major:Number(i(this,a,"f")),minor:Number(i(this,o,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return i(this,a,"f")}setMajor(e){s(this,a,e,"f");s(this,n,void 0,"f")}minor(){return i(this,o,"f")}setMinor(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.ProtocolVersion=ProtocolVersion;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.UnitInterval=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=a(r("../../node_modules/fraction.js/fraction.js"));const f=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new u.default(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new c.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeTag(c.CborTag.RationalNumber);e.writeStartArray(f);e.writeInt(i(this,o,"f"));e.writeInt(i(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.readTag()!==c.CborTag.RationalNumber)throw new l.InvalidArgumentError("cbor",`Expected tag ${c.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=t.readInt();const a=t.readInt();t.readEndArray();const o=new UnitInterval(i,a);s(o,d,e,"f");return o}toCore(){return{denominator:Number(i(this,n,"f")),numerator:Number(i(this,o,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return i(this,o,"f")}setNumerator(e){s(this,o,e,"f");s(this,d,void 0,"f")}denominator(){return i(this,n,"f")}setDenominator(e){s(this,n,e,"f");s(this,d,void 0,"f")}toFloat(){return Number(i(this,o,"f"))/Number(i(this,n,"f"))}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f")}}t.UnitInterval=UnitInterval;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/UnitInterval.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ExUnits.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/ProtocolVersion.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/CborSet.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Hash.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Credential.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.ConstrPlutusData=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=102n;const f=7n;class ConstrPlutusData{toCbor(){const e=new n.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(i(this,a,"f"));e.writeTag(Number(t));if(t!==u)e.writeEncodedValue((0,l.hexToBytes)(i(this,o,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(i(this,a,"f"));e.writeEncodedValue((0,l.hexToBytes)(i(this,o,"f").toCbor()))}return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new n.CborReader(e);const r=t.readTag();if(r===Number(u)){t.readStartArray();const s=t.readInt();const i=t.readEncodedValue();const a=c.PlutusList.fromCbor(d.HexBlob.fromBytes(i));t.readEndArray();return new ConstrPlutusData(s,a)}const o=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const l=t.readEncodedValue();const f=c.PlutusList.fromCbor(d.HexBlob.fromBytes(l));return new ConstrPlutusData(o,f)}getAlternative(){return i(this,a,"f")}getData(){return i(this,o,"f")}equals(e){if(i(this,a,"f")!==i(e,a,"f"))return false;return i(this,o,"f").equals(i(e,o,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+f;return u}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-f+e;return u}constructor(e,t){a.set(this,0n);o.set(this,new c.PlutusList);s(this,a,e,"f");s(this,o,t,"f")}}t.ConstrPlutusData=ConstrPlutusData;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var c,l,u,f,h,m,p;Object.defineProperty(t,"__esModule",{value:true});t.PlutusData=void 0;const v=o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/plutusDataUtils.js"));const _=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js");const g=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const j=0xffffffffffffffffn;const x=new Uint8Array([95]);const T=64;const E=32;const A=BigInt(-1);class PlutusData{toCbor(){if(n(this,p,"f"))return n(this,p,"f");let e;switch(n(this,m,"f")){case P.PlutusDataKind.ConstrPlutusData:e=n(this,h,"f").toCbor();break;case P.PlutusDataKind.Map:e=n(this,c,"f").toCbor();break;case P.PlutusDataKind.List:e=n(this,l,"f").toCbor();break;case P.PlutusDataKind.Bytes:{const t=new w.CborWriter;if(n(this,f,"f").length<=T)t.writeByteString(n(this,f,"f"));else{t.writeEncodedValue(x);for(let r=0;r<n(this,f,"f").length;r+=T){const s=n(this,f,"f").slice(r,r+T);t.writeByteString(s)}t.writeEndArray()}e=(0,k.bytesToHex)(t.encode());break}case P.PlutusDataKind.Integer:{const i=new w.CborWriter;if(n(this,u,"f")>=0&&n(this,u,"f")<=j||n(this,u,"f")<0&&n(this,u,"f")>=-1n-j)i.writeInt(n(this,u,"f"));else{const a=PlutusData.bigintToBuffer(n(this,u,"f"));i.writeTag(n(this,u,"f")<0?w.CborTag.NegativeBigNum:w.CborTag.UnsignedBigNum);if(a.length<=T)i.writeByteString(a);else{i.writeEncodedValue(x);for(let o=0;o<a.length;o+=T){const d=a.slice(o,o+T);i.writeByteString(d)}i.writeEndArray()}}e=(0,k.bytesToHex)(i.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new w.CborReader(e);const s=r.peekState();switch(s){case w.CborReaderState.Tag:{const i=r.peekTag();switch(i){case w.CborTag.UnsignedBigNum:{r.readTag();const a=r.readByteString();d(t,u,PlutusData.bufferToBigint(a),"f");d(t,m,P.PlutusDataKind.Integer,"f");break}case w.CborTag.NegativeBigNum:{r.readTag();const o=r.readByteString();d(t,u,PlutusData.bufferToBigint(o)*-1n,"f");d(t,m,P.PlutusDataKind.Integer,"f");break}default:d(t,h,y.ConstrPlutusData.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.ConstrPlutusData,"f")}break}case w.CborReaderState.NegativeInteger:case w.CborReaderState.UnsignedInteger:d(t,u,r.readInt(),"f");d(t,m,P.PlutusDataKind.Integer,"f");break;case w.CborReaderState.StartIndefiniteLengthByteString:case w.CborReaderState.ByteString:d(t,f,r.readByteString(),"f");d(t,m,P.PlutusDataKind.Bytes,"f");break;case w.CborReaderState.StartArray:d(t,l,S.PlutusList.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.List,"f");break;case w.CborReaderState.StartMap:d(t,c,C.PlutusMap.fromCbor(g.HexBlob.fromBytes(r.readEncodedValue())),"f");d(t,m,P.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}d(t,p,e,"f");return t}toCore(){switch(n(this,m,"f")){case P.PlutusDataKind.Bytes:return n(this,f,"f");case P.PlutusDataKind.ConstrPlutusData:{const e=n(this,h,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case P.PlutusDataKind.Integer:return n(this,u,"f");case P.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(n(this,l,"f"));case P.PlutusDataKind.Map:{const t=n(this,c,"f");const r=new Map;const s=t.getKeys();for(let i=0;i<s.getLength();i++){const a=s.get(i);r.set(a.toCore(),t.get(a).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new b.NotImplementedError(`PlutusData mapping for kind ${n(this,m,"f")}`)}}hash(){return _.blake2b.hash(this.toCbor(),E)}static fromCore(e){if(v.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(v.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(v.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(v.isPlutusMap(e)){const t=new C.PlutusMap;for(const[r,s]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(s));return PlutusData.newMap(t)}if(v.isConstrPlutusData(e)){const i=e.constructor;const a=new y.ConstrPlutusData(i,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(a)}throw new b.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;d(t,h,e,"f");d(t,m,P.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;d(t,c,e,"f");d(t,m,P.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;d(t,l,e,"f");d(t,m,P.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;d(t,u,e,"f");d(t,m,P.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;d(t,f,e,"f");d(t,m,P.PlutusDataKind.Bytes,"f");return t}getKind(){return n(this,m,"f")}asConstrPlutusData(){return n(this,h,"f")}asMap(){return n(this,c,"f")}asList(){return n(this,l,"f")}asInteger(){return n(this,u,"f")}asBoundedBytes(){return n(this,f,"f")}equals(e){switch(n(this,m,"f")){case P.PlutusDataKind.Bytes:if(n(this,f,"f")&&n(e,f,"f")){return n(this,f,"f").length===n(e,f,"f").length&&n(this,f,"f").every((t,r)=>t===n(e,f,"f")[r])}return false;case P.PlutusDataKind.Integer:return n(this,u,"f")===n(e,u,"f");case P.PlutusDataKind.ConstrPlutusData:if(n(this,h,"f")&&n(e,h,"f")){return n(this,h,"f").equals(n(e,h,"f"))}return false;case P.PlutusDataKind.List:if(n(this,l,"f")&&n(e,l,"f")){return n(this,l,"f").equals(n(e,l,"f"))}return false;case P.PlutusDataKind.Map:if(n(this,c,"f")&&n(e,c,"f")){return n(this,c,"f").equals(n(e,c,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new S.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+A;let t=e.toString(16);if(t.length%2)t=`0${t}`;return s.from(t,"hex")}constructor(){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,P.PlutusDataKind.ConstrPlutusData);p.set(this,void 0)}}t.PlutusData=PlutusData;c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PlutusDataKind=void 0;var r;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(r=t.PlutusDataKind||(t.PlutusDataKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.PlutusList=void 0;const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusList{toCbor(){const e=new a.CborWriter;const t=s(this,i,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(s(this,i,"f").length);for(const r of s(this,i,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new a.CborReader(e);r.readStartArray();while(r.peekState()!==a.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return s(this,i,"f").length}get(e){return s(this,i,"f")[e]}add(e){s(this,i,"f").push(e)}equals(e){if(s(this,i,"f").length!==s(e,i,"f").length)return false;for(let t=0;t<s(this,i,"f").length;++t)if(!s(this,i,"f")[t].equals(s(e,i,"f")[t]))return false;return true}constructor(){i.set(this,new Array)}}t.PlutusList=PlutusList;i=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.PlutusMap=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class PlutusMap{toCbor(){const e=new n.CborWriter;if(s(this,o,"f"))e.writeStartMap();else e.writeStartMap(s(this,a,"f").size);for(const[t,r]of s(this,a,"f").entries()){e.writeEncodedValue((0,u.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()))}if(s(this,o,"f"))e.writeEndMap();return d.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new n.CborReader(e);const s=r.readStartMap();if(null===s)i(t,o,true,"f");while(r.peekState()!==n.CborReaderState.EndMap){const a=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));const d=c.PlutusData.fromCbor((0,u.bytesToHex)(r.readEncodedValue()));t.insert(a,d)}r.readEndMap();return t}getLength(){return s(this,a,"f").size}insert(e,t){s(this,a,"f").set(e,t)}get(e){if(!s(this,a,"f"))return;const t=[...s(this,a,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new l.PlutusList;for(const t of s(this,a,"f").keys())e.add(t);return e}equals(e){if(s(this,o,"f")!==s(e,o,"f"))return false;if(s(this,a,"f").size!==s(e,a,"f").size)return false;const t=[...s(this,a,"f").entries()];const r=[...s(e,a,"f").entries()];for(let i=0;i<s(this,a,"f").size;++i){if(!t[i][0].equals(r[i][0]))return false;if(!t[i][1].equals(r[i][1]))return false}return true}constructor(){a.set(this,new Map);o.set(this,false)}}t.PlutusMap=PlutusMap;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/ConstrPlutusData.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusDataKind.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusList.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusMap.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d,c,l,u,f,h,m,p;Object.defineProperty(t,"__esModule",{value:true});t.NativeScript=void 0;const v=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js");const C=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js");const j=28;class NativeScript{toCbor(){if(o(this,p,"f"))return o(this,p,"f");let e;switch(o(this,m,"f")){case y.NativeScriptKind.RequireSignature:e=o(this,u,"f").toCbor();break;case y.NativeScriptKind.RequireAllOf:e=o(this,d,"f").toCbor();break;case y.NativeScriptKind.RequireAnyOf:e=o(this,c,"f").toCbor();break;case y.NativeScriptKind.RequireNOf:e=o(this,l,"f").toCbor();break;case y.NativeScriptKind.RequireTimeAfter:e=o(this,h,"f").toCbor();break;case y.NativeScriptKind.RequireTimeBefore:e=o(this,f,"f").toCbor();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${o(this,m,"f")}`)}return e}static fromCbor(e){let t;const r=new _.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case y.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(S.ScriptPubkey.fromCbor(e));break;case y.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(g.ScriptAll.fromCbor(e));break;case y.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(b.ScriptAny.fromCbor(e));break;case y.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(P.ScriptNOfK.fromCbor(e));break;case y.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(k.TimelockStart.fromCbor(e));break;case y.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(C.TimelockExpiry.fromCbor(e));break;default:throw new w.InvalidStateError(`Unexpected kind value: ${s}`)}n(t,p,e,"f");return t}toCore(){let e;switch(o(this,m,"f")){case y.NativeScriptKind.RequireSignature:e=o(this,u,"f").toCore();break;case y.NativeScriptKind.RequireAllOf:e=o(this,d,"f").toCore();break;case y.NativeScriptKind.RequireAnyOf:e=o(this,c,"f").toCore();break;case y.NativeScriptKind.RequireNOf:e=o(this,l,"f").toCore();break;case y.NativeScriptKind.RequireTimeAfter:e=o(this,h,"f").toCore();break;case y.NativeScriptKind.RequireTimeBefore:e=o(this,f,"f").toCore();break;default:throw new w.InvalidStateError(`Unexpected kind value: ${o(this,m,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case y.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(S.ScriptPubkey.fromCore(e));break;case y.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(g.ScriptAll.fromCore(e));break;case y.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(b.ScriptAny.fromCore(e));break;case y.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(P.ScriptNOfK.fromCore(e));break;case y.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(k.TimelockStart.fromCore(e));break;case y.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(C.TimelockExpiry.fromCore(e));break;default:throw new w.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;return v.blake2b.hash(e,j)}kind(){return o(this,m,"f")}static newScriptPubkey(e){const t=new NativeScript;n(t,u,e,"f");n(t,m,y.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;n(t,d,e,"f");n(t,m,y.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;n(t,c,e,"f");n(t,m,y.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;n(t,l,e,"f");n(t,m,y.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;n(t,h,e,"f");n(t,m,y.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;n(t,f,e,"f");n(t,m,y.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return o(this,u,"f")}asScriptAll(){return o(this,d,"f")}asScriptAny(){return o(this,c,"f")}asScriptNOfK(){return o(this,l,"f")}asTimelockStart(){return o(this,h,"f")}asTimelockExpiry(){return o(this,f,"f")}constructor(){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0)}}t.NativeScript=NativeScript;d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAll=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAll{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAllOf);e.writeStartArray(a(this,o,"f").length);for(const t of a(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAllOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const a=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)a.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const o=new ScriptAll(a);i(o,n,e,"f");return o}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAllOf,scripts:a(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return a(this,o,"f")}setNativeScripts(e){i(this,o,e,"f");i(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);i(this,o,e,"f")}}t.ScriptAll=ScriptAll;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.ScriptAny=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const f=2;class ScriptAny{toCbor(){const e=new d.CborWriter;if(a(this,n,"f"))return a(this,n,"f");e.writeStartArray(f);e.writeInt(u.NativeScriptKind.RequireAnyOf);e.writeStartArray(a(this,o,"f").length);for(const t of a(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u.NativeScriptKind.RequireAnyOf)throw new c.InvalidArgumentError("cbor",`Expected kind ${u.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const a=new Array;t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray)a.push(l.NativeScript.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const o=new ScriptAny(a);i(o,n,e,"f");return o}toCore(){return{__type:u.ScriptType.Native,kind:u.NativeScriptKind.RequireAnyOf,scripts:a(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>l.NativeScript.fromCore(e)))}nativeScripts(){return a(this,o,"f")}setNativeScripts(e){i(this,o,e,"f");i(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);i(this,o,e,"f")}}t.ScriptAny=ScriptAny;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ScriptNOfK=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const h=3;class ScriptNOfK{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(h);e.writeInt(f.NativeScriptKind.RequireNOf);e.writeInt(a(this,n,"f"));e.writeStartArray(a(this,o,"f").length);for(const t of a(this,o,"f"))e.writeEncodedValue(s.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==h)throw new l.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==f.NativeScriptKind.RequireNOf)throw new l.InvalidArgumentError("cbor",`Expected kind ${f.NativeScriptKind.RequireNOf}, but got kind ${s}`);const a=t.readInt();const o=new Array;t.readStartArray();while(t.peekState()!==c.CborReaderState.EndArray)o.push(u.NativeScript.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const n=new ScriptNOfK(o,Number(a));i(n,d,e,"f");return n}toCore(){return{__type:f.ScriptType.Native,kind:f.NativeScriptKind.RequireNOf,required:a(this,n,"f"),scripts:a(this,o,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>u.NativeScript.fromCore(e)),e.required)}required(){return a(this,n,"f")}setRequired(e){i(this,n,e,"f");i(this,d,void 0,"f")}nativeScripts(){return a(this,o,"f")}setNativeScripts(e){i(this,o,e,"f");i(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f")}}t.ScriptNOfK=ScriptNOfK;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ScriptPubkey=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=2;class ScriptPubkey{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");e.writeStartArray(p);e.writeInt(m.NativeScriptKind.RequireSignature);e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==m.NativeScriptKind.RequireSignature)throw new h.InvalidArgumentError("cbor",`Expected kind ${m.NativeScriptKind.RequireSignature}, but got kind ${s}`);const i=u.Ed25519KeyHashHex(h.HexBlob.fromBytes(t.readByteString()));const a=new ScriptPubkey(i);n(a,l,e,"f");return a}toCore(){return{__type:m.ScriptType.Native,keyHash:d(this,c,"f"),kind:m.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return d(this,c,"f")}setKeyHash(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.ScriptPubkey=ScriptPubkey;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.TimelockExpiry=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockExpiry{toCbor(){const e=new n.CborWriter;if(i(this,o,"f"))return i(this,o,"f");e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeBefore);e.writeInt(i(this,a,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==c.NativeScriptKind.RequireTimeBefore)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeBefore}, but got kind ${i}`);const a=(0,l.Slot)(Number(t.readInt()));const f=new TimelockExpiry(a);s(f,o,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeBefore,slot:i(this,a,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return i(this,a,"f")}setSlot(e){s(this,a,e,"f");s(this,o,void 0,"f")}constructor(e){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.TimelockExpiry=TimelockExpiry;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.TimelockStart=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=2;class TimelockStart{toCbor(){if(i(this,o,"f"))return i(this,o,"f");const e=new n.CborWriter;e.writeStartArray(u);e.writeInt(c.NativeScriptKind.RequireTimeAfter);e.writeInt(i(this,a,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==u)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==c.NativeScriptKind.RequireTimeAfter)throw new d.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireTimeAfter}, but got kind ${i}`);const a=(0,l.Slot)(Number(t.readInt()));const f=new TimelockStart(a);s(f,o,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireTimeAfter,slot:i(this,a,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return i(this,a,"f")}setSlot(e){s(this,a,e,"f");s(this,o,void 0,"f")}constructor(e){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.TimelockStart=TimelockStart;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/NativeScript.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAll.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptAny.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptNOfK.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/ScriptPubkey.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockExpiry.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/TimelockStart.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV1Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV1Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V1)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;return u.blake2b.hash(e,p)}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV1Script=PlutusV1Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV2Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV2Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V2)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;return u.blake2b.hash(e,p)}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV2Script=PlutusV2Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.PlutusV3Script=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const p=28;class PlutusV3Script{toCbor(){if(d(this,l,"f"))return d(this,l,"f");const e=new f.CborWriter;e.writeByteString(s.from(d(this,c,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(h.HexBlob.fromBytes(r));n(s,l,e,"f");return s}toCore(){return{__type:m.ScriptType.Plutus,bytes:this.rawBytes(),version:m.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==m.PlutusLanguageVersion.V3)throw new h.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;return u.blake2b.hash(e,p)}rawBytes(){return d(this,c,"f")}setRawBytes(e){n(this,c,e,"f");n(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);n(this,c,e,"f")}}t.PlutusV3Script=PlutusV3Script;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV1Script.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV2Script.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/PlutusV3Script.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.Script=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js");const w=2;class Script{toCbor(){if(i(this,u,"f"))return i(this,u,"f");const e=new f.CborWriter;let t;switch(i(this,l,"f")){case _.ScriptLanguage.Native:t=i(this,o,"f").toCbor();break;case _.ScriptLanguage.PlutusV1:t=i(this,n,"f").toCbor();break;case _.ScriptLanguage.PlutusV2:t=i(this,d,"f").toCbor();break;case _.ScriptLanguage.PlutusV3:t=i(this,c,"f").toCbor();break;default:throw new h.InvalidStateError(`Unexpected language value: ${i(this,l,"f")}`)}e.writeStartArray(w);e.writeInt(i(this,l,"f"));e.writeEncodedValue(s.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new f.CborReader(e);r.readStartArray();const s=Number(r.readInt());const i=h.HexBlob.fromBytes(r.readEncodedValue());switch(s){case _.ScriptLanguage.Native:t=Script.newNativeScript(m.NativeScript.fromCbor(i));break;case _.ScriptLanguage.PlutusV1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCbor(i));break;case _.ScriptLanguage.PlutusV2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCbor(i));break;case _.ScriptLanguage.PlutusV3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCbor(i));break;default:throw new h.InvalidStateError(`Unexpected language value: ${s}`)}a(t,u,e,"f");return t}toCore(){let e;switch(i(this,l,"f")){case _.ScriptLanguage.Native:e=i(this,o,"f").toCore();break;case _.ScriptLanguage.PlutusV1:e=i(this,n,"f").toCore();break;case _.ScriptLanguage.PlutusV2:e=i(this,d,"f").toCore();break;case _.ScriptLanguage.PlutusV3:e=i(this,c,"f").toCore();break;default:throw new h.InvalidStateError(`Unexpected language: ${i(this,l,"f")}`)}return e}static fromCore(e){let t;if((0,p.isNativeScript)(e))t=Script.newNativeScript(m.NativeScript.fromCore(e));else{switch(e.version){case p.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(v.PlutusV1Script.fromCore(e));break;case p.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(v.PlutusV2Script.fromCore(e));break;case p.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(v.PlutusV3Script.fromCore(e));break;default:throw new h.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return i(this,l,"f")}static newNativeScript(e){const t=new Script;a(t,o,e,"f");a(t,l,_.ScriptLanguage.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;a(t,n,e,"f");a(t,l,_.ScriptLanguage.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;a(t,d,e,"f");a(t,l,_.ScriptLanguage.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;a(t,c,e,"f");a(t,l,_.ScriptLanguage.PlutusV3,"f");return t}asNative(){return i(this,o,"f")}asPlutusV1(){return i(this,n,"f")}asPlutusV2(){return i(this,d,"f")}asPlutusV3(){return i(this,c,"f")}hash(){let e;switch(i(this,l,"f")){case _.ScriptLanguage.Native:e=i(this,o,"f").hash();break;case _.ScriptLanguage.PlutusV1:e=i(this,n,"f").hash();break;case _.ScriptLanguage.PlutusV2:e=i(this,d,"f").hash();break;case _.ScriptLanguage.PlutusV3:e=i(this,c,"f").hash();break;default:throw new h.InvalidStateError(`Unexpected script language ${i(this,l,"f")}`)}return e}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0)}}t.Script=Script;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/ScriptLanguage.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ScriptLanguage=void 0;var r;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(r=t.ScriptLanguage||(t.ScriptLanguage={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/Script.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/PlutusScript/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l;Object.defineProperty(t,"__esModule",{value:true});t.deserializeTx=t.TxBodyCBOR=t.TxCBOR=t.Transaction=void 0;const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js");const v=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const _=4;class Transaction{toCbor(){const e=new f.CborWriter;if(a(this,l,"f"))return a(this,l,"f");e.writeStartArray(_);e.writeEncodedValue((0,v.hexToBytes)(a(this,o,"f").toCbor()));e.writeEncodedValue((0,v.hexToBytes)(a(this,n,"f").toCbor()));e.writeBoolean(a(this,c,"f"));if(a(this,d,"f"))e.writeEncodedValue((0,v.hexToBytes)(a(this,d,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();const s=t.readEncodedValue();const a=m.TransactionBody.fromCbor(h.HexBlob.fromBytes(s));const o=p.TransactionWitnessSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));let n=true;if(r===_)n=t.readBoolean();let d;if(t.peekState()!==f.CborReaderState.Null)d=u.AuxiliaryData.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const v=new Transaction(a,o,d);i(v,c,n,"f");i(v,l,e,"f");return v}toCore(){const e={body:a(this,o,"f").toCore(),id:this.getId(),isValid:a(this,c,"f"),witness:a(this,n,"f").toCore()};if(a(this,d,"f"))e.auxiliaryData=a(this,d,"f").toCore();return e}static fromCore(e){const t=new Transaction(m.TransactionBody.fromCore(e.body),p.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?u.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return m.TransactionBody.fromCbor(a(this,o,"f").toCbor())}setBody(e){i(this,o,e,"f");i(this,l,void 0,"f")}witnessSet(){return p.TransactionWitnessSet.fromCbor(a(this,n,"f").toCbor())}setWitnessSet(e){i(this,n,e,"f");i(this,l,void 0,"f")}isValid(){return a(this,c,"f")}setIsValid(e){i(this,l,void 0,"f");i(this,c,e,"f")}auxiliaryData(){if(a(this,d,"f")){return u.AuxiliaryData.fromCbor(a(this,d,"f").toCbor())}return}setAuxiliaryData(e){i(this,d,e,"f");i(this,l,void 0,"f")}getId(){return a(this,o,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,true);l.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f");i(this,d,r,"f")}}t.Transaction=Transaction;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap;const TxCBOR=e=>(0,h.HexBlob)(e);t.TxCBOR=TxCBOR;t.TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,h.HexBlob)(e);t.TxBodyCBOR=TxBodyCBOR;t.TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();t.deserializeTx=e=>{const r=e instanceof s?e.toString("hex"):e instanceof Uint8Array?s.from(e).toString("hex"):e;const i=Transaction.fromCbor((0,t.TxCBOR)(r));return i.toCore()};t.TxCBOR.deserialize=e=>(0,t.deserializeTx)(e)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.Committee=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;const h=2;const m=0;const p=1;class Committee{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");if(0===i(this,o,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");e.writeStartArray(f);e.writeStartMap(i(this,o,"f").length);for(const t of i(this,o,"f")){e.writeStartArray(h);e.writeInt(t[m].type);e.writeByteString((0,u.hexToBytes)(t[m].hash));e.writeInt(t[p])}e.writeEncodedValue((0,u.hexToBytes)(i(this,a,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);t.readStartMap();const i=[];while(t.peekState()!==d.CborReaderState.EndMap){if(t.readStartArray()!==h)throw new c.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=Number(t.readUInt());const o=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const u=Number(t.readUInt());i.push([{hash:o,type:a},u])}t.readEndMap();const v=l.UnitInterval.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const _=new Committee(v);for(const w of i)_.addMember(w[m],w[p]);s(_,n,e,"f");return _}toCore(){if(0===i(this,o,"f").length)throw new c.InvalidStateError("There must be at least one Committee member");const e=i(this,o,"f").map(e=>({coldCredential:e[m],epoch:e[p]}));return{members:e,quorumThreshold:i(this,a,"f").toCore()}}static fromCore(e){const t=new Committee(l.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return i(this,o,"f").map(e=>e[0])}quorumThreshold(){return i(this,a,"f")}addMember(e,t){const r=i(this,o,"f").find(t=>t[m].type===e.type&&t[m].hash===e.hash);if(r)throw new c.InvalidArgumentError("committeeColdCredential","The given credential is already present");i(this,o,"f").push([e,t])}getMemberEpoch(e){const t=i(this,o,"f").find(t=>t[m].type===e.type&&t[m].hash===e.hash);if(t)return t[p];return}constructor(e){a.set(this,void 0);o.set(this,[]);n.set(this,void 0);s(this,a,e,"f")}}t.Committee=Committee;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.Constitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class Constitution{toCbor(){const e=new c.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(i(this,a,"f").toCbor()));i(this,o,"f")?e.writeByteString((0,u.hexToBytes)(i(this,o,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let a;if(t.peekState()===c.CborReaderState.Null)t.readNull();else a=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=new Constitution(i,a);s(o,n,e,"f");return o}toCore(){return{anchor:i(this,a,"f").toCore(),scriptHash:i(this,o,"f")?i(this,o,"f"):null}}static fromCore(e){return new Constitution(d.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return i(this,a,"f")}setAnchor(e){s(this,a,e,"f");s(this,n,void 0,"f")}scriptHash(){return i(this,o,"f")}setScriptHash(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.Constitution=Constitution;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.GovernanceActionKind=void 0;var r;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(r=t.GovernanceActionKind||(t.GovernanceActionKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.HardForkInitiationAction=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const f=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=3;class HardForkInitiationAction{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(p);e.writeInt(l.GovernanceActionKind.HardForkInitiation);i(this,o,"f")?e.writeEncodedValue((0,m.hexToBytes)(i(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(i(this,a,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==p)throw new f.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());if(i!==l.GovernanceActionKind.HardForkInitiation)throw new f.InvalidArgumentError("cbor",`Expected action kind, expected ${l.GovernanceActionKind.HardForkInitiation} but got ${i}`);let a;if(t.peekState()===d.CborReaderState.Null)t.readNull();else a=c.GovernanceActionId.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const o=h.ProtocolVersion.fromCbor(f.HexBlob.fromBytes(t.readEncodedValue()));const u=new HardForkInitiationAction(o,a);s(u,n,e,"f");return u}toCore(){return{__typename:u.GovernanceActionType.hard_fork_initiation_action,governanceActionId:i(this,o,"f")?i(this,o,"f").toCore():null,protocolVersion:i(this,a,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(h.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?c.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return i(this,o,"f")}protocolVersion(){return i(this,a,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.HardForkInitiationAction=HardForkInitiationAction;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a;Object.defineProperty(t,"__esModule",{value:true});t.InfoAction=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=1;class InfoAction{toCbor(){const e=new o.CborWriter;if(s(this,a,"f"))return s(this,a,"f");e.writeStartArray(l);e.writeInt(n.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==l)throw new c.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.Info)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.Info} but got ${s}`);const d=new InfoAction;i(d,a,e,"f");return d}toCore(){return{__typename:d.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){a.set(this,void 0)}}t.InfoAction=InfoAction;a=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.NewConstitution=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const p=3;class NewConstitution{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(p);e.writeInt(u.GovernanceActionKind.NewConstitution);i(this,o,"f")?e.writeEncodedValue((0,m.hexToBytes)(i(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,m.hexToBytes)(i(this,a,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());if(i!==u.GovernanceActionKind.NewConstitution)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.NewConstitution} but got ${i}`);let a;if(t.peekState()===d.CborReaderState.Null)t.readNull();else a=l.GovernanceActionId.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=c.Constitution.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const f=new NewConstitution(o,a);s(f,n,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.new_constitution,constitution:i(this,a,"f").toCore(),governanceActionId:i(this,o,"f")?i(this,o,"f").toCore():null}}static fromCore(e){return new NewConstitution(c.Constitution.fromCore(e.constitution),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return i(this,o,"f")}constitution(){return i(this,a,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.NewConstitution=NewConstitution;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.NoConfidence=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const h=2;class NoConfidence{toCbor(){const e=new n.CborWriter;if(i(this,o,"f"))return i(this,o,"f");e.writeStartArray(h);e.writeInt(c.GovernanceActionKind.NoConfidence);i(this,a,"f")?e.writeEncodedValue((0,f.hexToBytes)(i(this,a,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());if(i!==c.GovernanceActionKind.NoConfidence)throw new u.InvalidArgumentError("cbor",`Expected action kind, expected ${c.GovernanceActionKind.NoConfidence}  but got ${i}`);let a;if(t.peekState()===n.CborReaderState.Null)t.readNull();else a=d.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const l=new NoConfidence(a);s(l,o,e,"f");return l}toCore(){return{__typename:l.GovernanceActionType.no_confidence,governanceActionId:i(this,a,"f")?i(this,a,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?d.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return i(this,a,"f")}constructor(e){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.NoConfidence=NoConfidence;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.ParameterChangeAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=4;class ParameterChangeAction{toCbor(){const e=new c.CborWriter;if(i(this,d,"f"))return i(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.ParameterChange);i(this,o,"f")?e.writeEncodedValue((0,p.hexToBytes)(i(this,o,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,p.hexToBytes)(i(this,a,"f").toCbor()));i(this,n,"f")?e.writeByteString((0,p.hexToBytes)(i(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==v)throw new h.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());if(i!==u.GovernanceActionKind.ParameterChange)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.ParameterChange} but got ${i}`);let a;if(t.peekState()===c.CborReaderState.Null)t.readNull();else a=l.GovernanceActionId.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=m.ProtocolParamUpdate.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));let n;if(t.peekState()===c.CborReaderState.Null)t.readNull();else n=h.HexBlob.fromBytes(t.readByteString());t.readEndArray();const f=new ParameterChangeAction(o,a,n);s(f,d,e,"f");return f}toCore(){return{__typename:f.GovernanceActionType.parameter_change_action,governanceActionId:i(this,o,"f")?i(this,o,"f").toCore():null,policyHash:i(this,n,"f")?i(this,n,"f"):null,protocolParamUpdate:i(this,a,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(m.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?l.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return i(this,o,"f")}protocolParamUpdate(){return i(this,a,"f")}policyHash(){return i(this,n,"f")}constructor(e,t,r){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f");s(this,n,r,"f")}}t.ParameterChangeAction=ParameterChangeAction;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c,l,u,f,h,m,p,v,_;Object.defineProperty(t,"__esModule",{value:true});t.ProposalProcedure=void 0;const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");const B=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const F=4;class ProposalProcedure{toCbor(){const e=new g.CborWriter;if(i(this,_,"f"))return i(this,_,"f");let t;switch(i(this,h,"f")){case b.GovernanceActionKind.ParameterChange:t=i(this,o,"f").toCbor();break;case b.GovernanceActionKind.HardForkInitiation:t=i(this,n,"f").toCbor();break;case b.GovernanceActionKind.TreasuryWithdrawals:t=i(this,d,"f").toCbor();break;case b.GovernanceActionKind.NoConfidence:t=i(this,c,"f").toCbor();break;case b.GovernanceActionKind.UpdateCommittee:t=i(this,l,"f").toCbor();break;case b.GovernanceActionKind.NewConstitution:t=i(this,u,"f").toCbor();break;case b.GovernanceActionKind.Info:t=i(this,f,"f").toCbor();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${i(this,h,"f")}`)}e.writeStartArray(F);e.writeInt(i(this,m,"f"));const r=w.RewardAddress.fromAddress(w.Address.fromBech32(i(this,p,"f")));if(!r){throw new E.SerializationError(E.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${i(this,p,"f")}`)}e.writeByteString(s.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,B.hexToBytes)(t));e.writeEncodedValue((0,B.hexToBytes)(i(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new g.CborReader(e);r.readStartArray();const s=r.readInt();const i=w.Address.fromBytes(C.HexBlob.fromBytes(r.readByteString())).toBech32();const o=C.HexBlob.fromBytes(r.readEncodedValue());const n=y.Anchor.fromCbor(C.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const d=new g.CborReader(o);d.readStartArray();let c;const l=Number(d.readInt());switch(l){case b.GovernanceActionKind.ParameterChange:c=T.ParameterChangeAction.fromCbor(o);t=ProposalProcedure.newParameterChangeAction(s,i,n,c);break;case b.GovernanceActionKind.HardForkInitiation:c=S.HardForkInitiationAction.fromCbor(o);t=ProposalProcedure.newHardForkInitiationAction(s,i,n,c);break;case b.GovernanceActionKind.TreasuryWithdrawals:c=A.TreasuryWithdrawalsAction.fromCbor(o);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,i,n,c);break;case b.GovernanceActionKind.NoConfidence:c=x.NoConfidence.fromCbor(o);t=ProposalProcedure.newNoConfidence(s,i,n,c);break;case b.GovernanceActionKind.UpdateCommittee:c=I.UpdateCommittee.fromCbor(o);t=ProposalProcedure.newUpdateCommittee(s,i,n,c);break;case b.GovernanceActionKind.NewConstitution:c=j.NewConstitution.fromCbor(o);t=ProposalProcedure.newNewConstitution(s,i,n,c);break;case b.GovernanceActionKind.Info:c=k.InfoAction.fromCbor(o);t=ProposalProcedure.newInfoAction(s,i,n,c);break;default:throw new C.InvalidStateError(`Unexpected kind value: ${l}`)}a(t,_,e,"f");return t}toCore(){let e;switch(i(this,h,"f")){case b.GovernanceActionKind.ParameterChange:e=i(this,o,"f").toCore();break;case b.GovernanceActionKind.HardForkInitiation:e=i(this,n,"f").toCore();break;case b.GovernanceActionKind.TreasuryWithdrawals:e=i(this,d,"f").toCore();break;case b.GovernanceActionKind.NoConfidence:e=i(this,c,"f").toCore();break;case b.GovernanceActionKind.UpdateCommittee:e=i(this,l,"f").toCore();break;case b.GovernanceActionKind.NewConstitution:e=i(this,u,"f").toCore();break;case b.GovernanceActionKind.Info:e=i(this,f,"f").toCore();break;default:throw new C.InvalidStateError(`Unexpected kind value: ${i(this,h,"f")}`)}return{anchor:i(this,v,"f").toCore(),deposit:i(this,m,"f"),governanceAction:e,rewardAccount:i(this,p,"f")}}static fromCore(e){let t;let r;const s=y.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case P.GovernanceActionType.parameter_change_action:t=T.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.hard_fork_initiation_action:t=S.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.treasury_withdrawals_action:t=A.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.no_confidence:t=x.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.update_committee:t=I.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.new_constitution:t=j.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case P.GovernanceActionType.info_action:t=k.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new C.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.ParameterChange,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,o,s,"f");return i}static newHardForkInitiationAction(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.HardForkInitiation,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,n,s,"f");return i}static newTreasuryWithdrawalsAction(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.TreasuryWithdrawals,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,d,s,"f");return i}static newNoConfidence(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.NoConfidence,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,c,s,"f");return i}static newUpdateCommittee(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.UpdateCommittee,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,l,s,"f");return i}static newNewConstitution(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.NewConstitution,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,u,s,"f");return i}static newInfoAction(e,t,r,s){const i=new ProposalProcedure;a(i,h,b.GovernanceActionKind.Info,"f");a(i,m,e,"f");a(i,p,t,"f");a(i,v,r,"f");a(i,f,s,"f");return i}kind(){return i(this,h,"f")}deposit(){return i(this,m,"f")}rewardAccount(){return i(this,p,"f")}anchor(){return i(this,v,"f")}getParameterChangeAction(){return i(this,o,"f")}getHardForkInitiationAction(){return i(this,n,"f")}getTreasuryWithdrawalsAction(){return i(this,d,"f")}getNoConfidence(){return i(this,c,"f")}getUpdateCommittee(){return i(this,l,"f")}getNewConstitution(){return i(this,u,"f")}getInfoAction(){return i(this,f,"f")}constructor(){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0)}}t.ProposalProcedure=ProposalProcedure;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TreasuryWithdrawalsAction=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const v=3;class TreasuryWithdrawalsAction{toCbor(){const e=new l.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(v);e.writeInt(u.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...a(this,o,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,i]of t){const f=c.RewardAddress.fromAddress(c.Address.fromBech32(r));if(!f){throw new m.SerializationError(m.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(s.from(f.toAddress().toBytes(),"hex"));e.writeInt(i)}a(this,n,"f")?e.writeByteString((0,p.hexToBytes)(a(this,n,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==v)throw new h.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==u.GovernanceActionKind.TreasuryWithdrawals)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${u.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const a=new Map;while(t.peekState()!==l.CborReaderState.EndMap){const o=c.Address.fromBytes(h.HexBlob.fromBytes(t.readByteString())).toBech32();const n=t.readInt();a.set(o,n)}t.readEndMap();let f;if(t.peekState()===l.CborReaderState.Null)t.readNull();else f=h.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new TreasuryWithdrawalsAction(a,f);i(m,d,e,"f");return m}toCore(){const e=new Set([...a(this,o,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:f.GovernanceActionType.treasury_withdrawals_action,policyHash:a(this,n,"f")?a(this,n,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return a(this,o,"f")}policyHash(){return a(this,n,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f")}}t.TreasuryWithdrawalsAction=TreasuryWithdrawalsAction;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.UpdateCommittee=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const w=5;const y=2;const g=0;const b=1;class UpdateCommittee{toCbor(){const e=new l.CborWriter;if(i(this,c,"f"))return i(this,c,"f");e.writeStartArray(w);e.writeInt(p.GovernanceActionKind.UpdateCommittee);i(this,a,"f")?e.writeEncodedValue((0,_.hexToBytes)(i(this,a,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,_.hexToBytes)(i(this,o,"f").toCbor()));e.writeStartMap(i(this,n,"f").length);for(const t of i(this,n,"f")){e.writeStartArray(y);e.writeInt(t[g].type);e.writeByteString((0,_.hexToBytes)(t[g].hash));e.writeInt(t[b])}e.writeEncodedValue((0,_.hexToBytes)(i(this,d,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==w)throw new v.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());if(i!==p.GovernanceActionKind.UpdateCommittee)throw new v.InvalidArgumentError("cbor",`Expected action kind, expected ${p.GovernanceActionKind.UpdateCommittee} but got ${i}`);let a;if(t.peekState()===l.CborReaderState.Null)t.readNull();else a=m.GovernanceActionId.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const o=u.CborSet.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()),u.Credential.fromCbor);t.readStartMap();const n=[];while(t.peekState()!==l.CborReaderState.EndMap){if(t.readStartArray()!==y)throw new v.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const d=Number(t.readUInt());const f=v.HexBlob.fromBytes(t.readByteString());t.readEndArray();const h=Number(t.readUInt());n.push([{hash:f,type:d},h])}t.readEndMap();const _=u.UnitInterval.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const g=new UpdateCommittee(o,n,_,a);s(g,c,e,"f");return g}toCore(){return{__typename:f.GovernanceActionType.update_committee,governanceActionId:i(this,a,"f")?i(this,a,"f").toCore():null,membersToBeAdded:new Set(i(this,n,"f").map(e=>({coldCredential:e[g],epoch:(0,h.EpochNo)(e[b])}))),membersToBeRemoved:new Set(i(this,o,"f").toCore()),newQuorumThreshold:i(this,d,"f").toCore()}}static fromCore(e){return new UpdateCommittee(u.CborSet.fromCore([...e.membersToBeRemoved],u.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),u.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?m.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return i(this,a,"f")}membersToBeRemoved(){return i(this,o,"f").toCore()}membersToBeAdded(){return i(this,n,"f")}newQuorum(){return i(this,d,"f")}constructor(e,t,r,i){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f");s(this,d,r,"f");s(this,a,i,"f")}}t.UpdateCommittee=UpdateCommittee;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Committee.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/Constitution.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/InfoAction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I,B;Object.defineProperty(t,"__esModule",{value:true});t.TransactionBody=void 0;const F=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const M=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const R=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const D=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const O=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js");const G=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js");const H=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const K=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");class TransactionBody{toCbor(){var e;const t=new R.CborWriter;if(d(this,I,"f"))return d(this,I,"f");t.writeStartMap(d(this,c,"m",B).call(this));if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,$.hexToBytes)(d(this,l,"f").toCbor()))}if(void 0!==d(this,u,"f")){t.writeInt(1n);t.writeStartArray(d(this,u,"f").length);for(const r of d(this,u,"f"))t.writeEncodedValue(s.from(r.toCbor(),"hex"))}if(void 0!==d(this,f,"f")){t.writeInt(2n);t.writeInt(d(this,f,"f"))}if(void 0!==d(this,h,"f")){t.writeInt(3n);t.writeInt(d(this,h,"f"))}if(void 0!==d(this,m,"f")&&d(this,m,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,$.hexToBytes)(d(this,m,"f").toCbor()))}if(void 0!==d(this,p,"f")&&d(this,p,"f").size>0){t.writeInt(5n);const i=new Map;for(const[a,o]of d(this,p,"f")){const n=M.RewardAddress.fromAddress(M.Address.fromBech32(a));if(!n){throw new H.SerializationError(H.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${a}`)}const F=n.toAddress().toBytes();i.set(F,o)}const D=[...i].sort((e,t)=>e>t?1:-1);t.writeStartMap(D.length);for(const[O,G]of D){t.writeByteString(s.from(O,"hex"));t.writeInt(G)}}if(void 0!==d(this,v,"f")){t.writeInt(6n);t.writeEncodedValue(s.from(d(this,v,"f").toCbor(),"hex"))}if(void 0!==d(this,_,"f")){t.writeInt(7n);t.writeByteString(s.from(d(this,_,"f"),"hex"))}if(void 0!==d(this,w,"f")){t.writeInt(8n);t.writeInt(d(this,w,"f"))}if(void 0!==d(this,y,"f")&&d(this,y,"f").size>0){t.writeInt(9n);const N=(0,L.tokenMapToMultiAsset)(d(this,y,"f"));t.writeStartMap(N.size);const K=new Map([...N.entries()].sort(L.sortCanonically));for(const[V,W]of K.entries()){t.writeByteString(s.from(V,"hex"));const z=new Map([...W.entries()].sort(L.sortCanonically));t.writeStartMap(z.size);for(const[U,q]of z.entries()){t.writeByteString(s.from(U,"hex"));t.writeInt(q)}}}if(void 0!==d(this,g,"f")){t.writeInt(11n);t.writeByteString(s.from(d(this,g,"f"),"hex"))}if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,$.hexToBytes)(d(this,b,"f").toCbor()))}if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,$.hexToBytes)(d(this,P,"f").toCbor()))}if(void 0!==d(this,S,"f")){t.writeInt(15n);t.writeInt(d(this,S,"f"))}if(void 0!==d(this,C,"f")){t.writeInt(16n);t.writeEncodedValue(s.from(d(this,C,"f").toCbor(),"hex"))}if(void 0!==d(this,k,"f")){t.writeInt(17n);t.writeInt(d(this,k,"f"))}if(void 0!==d(this,j,"f")&&d(this,j,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,$.hexToBytes)(d(this,j,"f").toCbor()))}if(void 0!==d(this,x,"f")){t.writeInt(19n);t.writeEncodedValue(s.from(d(this,x,"f").toCbor(),"hex"))}if(void 0!==d(this,T,"f")&&d(this,T,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,$.hexToBytes)(d(this,T,"f").toCbor()))}if(void 0!==d(this,E,"f")){t.writeInt(21n);t.writeInt(d(this,E,"f"))}if(void 0!==d(this,A,"f")){t.writeInt(22n);t.writeInt(d(this,A,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new R.CborReader(e);const r=D.CborSet.fromCore([],V.TransactionInput.fromCore);const i=new Array;const a=0n;const o=new TransactionBody(r,i,a);t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const d=t.readInt();switch(d){case 0n:{const c=t.readEncodedValue();o.setInputs(D.CborSet.fromCbor(G.HexBlob.fromBytes(c),V.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==R.CborReaderState.EndArray){o.outputs().push(W.TransactionOutput.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:o.setFee(t.readInt());break;case 3n:o.setTtl((0,K.Slot)(Number(t.readInt())));break;case 4n:o.setCerts(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),O.Certificate.fromCbor));break;case 5n:t.readStartMap();o.setWithdrawals(new Map);while(t.peekState()!==R.CborReaderState.EndMap){const l=M.Address.fromBytes(G.HexBlob.fromBytes(t.readByteString())).toBech32();const u=t.readInt();o.withdrawals().set(l,u)}t.readEndMap();break;case 6n:o.setUpdate(z.Update.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:o.setAuxiliaryDataHash(G.HexBlob.fromBytes(t.readByteString()));break;case 8n:o.setValidityStartInterval((0,K.Slot)(Number(t.readInt())));break;case 9n:{const f=new Map;t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const h=G.HexBlob.fromBytes(t.readByteString());if(!f.has(h))f.set(h,new Map);t.readStartMap();while(t.peekState()!==R.CborReaderState.EndMap){const m=s.from(t.readByteString()).toString("hex");const p=t.readInt();f.get(h).set(m,p)}t.readEndMap()}t.readEndMap();o.setMint((0,L.multiAssetsToTokenMap)(f));break}case 11n:o.setScriptDataHash(G.HexBlob.fromBytes(t.readByteString()));break;case 13n:o.setCollateral(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),V.TransactionInput.fromCbor));break;case 14n:o.setRequiredSigners(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),D.Hash.fromCbor));break;case 15n:o.setNetworkId(Number(t.readInt()));break;case 16n:o.setCollateralReturn(W.TransactionOutput.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:o.setTotalCollateral(t.readInt());break;case 18n:o.setReferenceInputs(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),V.TransactionInput.fromCbor));break;case 19n:o.setVotingProcedures(U.VotingProcedures.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:o.setProposalProcedures(D.CborSet.fromCbor(G.HexBlob.fromBytes(t.readEncodedValue()),N.ProposalProcedure.fromCbor));break;case 21n:o.setCurrentTreasuryValue(t.readInt());break;case 22n:o.setDonation(t.readInt());break}}t.readEndMap();n(o,I,e,"f");return o}toCore(){var e,t,r,s,i,a;return{auxiliaryDataHash:d(this,_,"f"),certificates:(null===(e=d(this,m,"f"))||void 0===e?void 0:e.values())?d(this,m,"f").toCore():void 0,collateralReturn:null===(t=d(this,C,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=d(this,b,"f"))||void 0===r?void 0:r.values())?d(this,b,"f").toCore():void 0,donation:d(this,A,"f"),fee:d(this,f,"f"),inputs:d(this,l,"f").toCore(),mint:d(this,y,"f"),networkId:d(this,S,"f"),outputs:d(this,u,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=d(this,T,"f"))||void 0===s?void 0:s.values())?d(this,T,"f").toCore():void 0,referenceInputs:(null===(i=d(this,j,"f"))||void 0===i?void 0:i.size())?d(this,j,"f").toCore():void 0,requiredExtraSignatures:null===(a=d(this,P,"f"))||void 0===a?void 0:a.toCore(),scriptIntegrityHash:d(this,g,"f"),totalCollateral:d(this,k,"f"),treasuryValue:d(this,E,"f"),update:d(this,v,"f")?d(this,v,"f").toCore():void 0,validityInterval:void 0!==d(this,h,"f")||void 0!==d(this,w,"f")?{invalidBefore:d(this,w,"f"),invalidHereafter:d(this,h,"f")}:void 0,votingProcedures:d(this,x,"f")?d(this,x,"f").toCore():void 0,withdrawals:d(this,p,"f")?[...d(this,p,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(D.CborSet.fromCore(e.inputs,V.TransactionInput.fromCore),e.outputs.map(e=>W.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(D.CborSet.fromCore(e.certificates,O.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(W.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(D.CborSet.fromCore(e.collaterals,V.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(D.CborSet.fromCore(e.referenceInputs,V.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(D.CborSet.fromCore(e.requiredExtraSignatures,D.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(z.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures(U.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(D.CborSet.fromCore(e.proposalProcedures,N.ProposalProcedure.fromCore));return t}setInputs(e){n(this,l,e,"f");n(this,I,void 0,"f")}inputs(){return d(this,l,"f")}setOutputs(e){n(this,u,e,"f");n(this,I,void 0,"f")}outputs(){return d(this,u,"f")}setFee(e){n(this,f,e,"f");n(this,I,void 0,"f")}fee(){return d(this,f,"f")}setTtl(e){n(this,h,e,"f");n(this,I,void 0,"f")}ttl(){return d(this,h,"f")}setCerts(e){n(this,m,e,"f");n(this,I,void 0,"f")}certs(){return d(this,m,"f")}setWithdrawals(e){n(this,p,e,"f");n(this,I,void 0,"f")}withdrawals(){return d(this,p,"f")}setUpdate(e){n(this,v,e,"f");n(this,I,void 0,"f")}update(){return d(this,v,"f")}setAuxiliaryDataHash(e){n(this,_,e,"f");n(this,I,void 0,"f")}auxiliaryDataHash(){return d(this,_,"f")}setValidityStartInterval(e){n(this,w,e,"f");n(this,I,void 0,"f")}validityStartInterval(){return d(this,w,"f")}setMint(e){n(this,y,(0,L.multiAssetsToTokenMap)(new Map([...(0,L.tokenMapToMultiAsset)(e).entries()].sort(L.sortCanonically))),"f");n(this,I,void 0,"f")}mint(){return d(this,y,"f")}setScriptDataHash(e){n(this,g,e,"f");n(this,I,void 0,"f")}scriptDataHash(){return d(this,g,"f")}setCollateral(e){n(this,b,e,"f");n(this,I,void 0,"f")}collateral(){return d(this,b,"f")}setRequiredSigners(e){n(this,P,e,"f");n(this,I,void 0,"f")}requiredSigners(){return d(this,P,"f")}setNetworkId(e){n(this,S,e,"f");n(this,I,void 0,"f")}networkId(){return d(this,S,"f")}setCollateralReturn(e){n(this,C,e,"f");n(this,I,void 0,"f")}collateralReturn(){return d(this,C,"f")}setTotalCollateral(e){n(this,k,e,"f");n(this,I,void 0,"f")}totalCollateral(){return d(this,k,"f")}setReferenceInputs(e){n(this,j,e,"f");n(this,I,void 0,"f")}referenceInputs(){return d(this,j,"f")}setVotingProcedures(e){n(this,x,e,"f");n(this,I,void 0,"f")}votingProcedures(){return d(this,x,"f")}setProposalProcedures(e){n(this,T,e,"f");n(this,I,void 0,"f")}proposalProcedures(){return d(this,T,"f")}setCurrentTreasuryValue(e){n(this,E,e,"f");n(this,I,void 0,"f")}currentTreasuryValue(){return d(this,E,"f")}setDonation(e){n(this,A,e,"f");n(this,I,void 0,"f")}donation(){return d(this,A,"f")}hash(){return F.blake2b.hash(this.toCbor(),32)}hasTaggedSets(){const e=new R.CborReader(d(this,l,"f").toCbor());return e.peekState()===R.CborReaderState.Tag&&e.peekTag()===R.CborTag.Set}hasBabbageOutput(){if(0===d(this,u,"f").length)return false;const e=new R.CborReader(d(this,u,"f")[0].toCbor());return e.peekState()===R.CborReaderState.StartMap}constructor(e,t,r,s){c.add(this);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);n(this,l,e,"f");n(this,u,t,"f");n(this,f,r,"f");n(this,h,s,"f")}}t.TransactionBody=TransactionBody;l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,c=new WeakSet,B=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==d(this,l,"f")&&d(this,l,"f").size()>0)++t;if(void 0!==d(this,u,"f"))++t;if(void 0!==d(this,f,"f"))++t;if(void 0!==d(this,h,"f"))++t;if(void 0!==d(this,m,"f")&&d(this,m,"f").size()>0)++t;if(void 0!==d(this,p,"f")&&d(this,p,"f").size>0)++t;if(void 0!==d(this,v,"f"))++t;if(void 0!==d(this,_,"f"))++t;if(void 0!==d(this,w,"f"))++t;if(void 0!==d(this,y,"f")&&d(this,y,"f").size>0)++t;if(void 0!==d(this,g,"f"))++t;if(void 0!==d(this,b,"f")&&d(this,b,"f").size()>0)++t;if((null===(e=d(this,P,"f"))||void 0===e?void 0:e.values())!==void 0&&d(this,P,"f").size()>0)++t;if(void 0!==d(this,S,"f"))++t;if(void 0!==d(this,C,"f"))++t;if(void 0!==d(this,k,"f"))++t;if(void 0!==d(this,j,"f")&&d(this,j,"f").size()>0)++t;if(void 0!==d(this,x,"f"))++t;if(void 0!==d(this,T,"f")&&d(this,T,"f").size()>0)++t;if(void 0!==d(this,E,"f"))++t;if(void 0!==d(this,A,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TransactionInput=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=2;class TransactionInput{toCbor(){if(a(this,d,"f"))return a(this,d,"f");const e=new c.CborWriter;e.writeStartArray(u);e.writeByteString(s.from(a(this,o,"f"),"hex"));e.writeInt(a(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==u)throw new l.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const a=t.readInt();const o=new TransactionInput(l.HexBlob.fromBytes(s),a);i(o,d,e,"f");return o}toCore(){return{index:Number(a(this,n,"f")),txId:a(this,o,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return a(this,o,"f")}setTransactionId(e){i(this,o,e,"f");i(this,d,void 0,"f")}index(){return a(this,n,"f")}setIndex(e){i(this,n,e,"f");i(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f")}}t.TransactionInput=TransactionInput;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.TransactionOutput=t.REQUIRED_FIELDS_COUNT=void 0;const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Datum.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js");t.REQUIRED_FIELDS_COUNT=2;class TransactionOutput{toCbor(){if(a(this,u,"f"))return a(this,u,"f");const e=new m.CborWriter;const r=a(this,o,"m",f).call(this);if(r===t.REQUIRED_FIELDS_COUNT||3===r&&void 0!==a(this,c,"f")&&a(this,c,"f").kind()===p.DatumKind.DataHash){e.writeStartArray(r);e.writeByteString(s.from(a(this,n,"f").toBytes(),"hex"));e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex"));if(void 0!==a(this,c,"f"))e.writeByteString(s.from(a(this,c,"f").asDataHash(),"hex"))}else{e.writeStartMap(r);e.writeInt(0n);e.writeByteString(s.from(a(this,n,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex"));if(void 0!==a(this,c,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(a(this,c,"f").kind());switch(a(this,c,"f").kind()){case p.DatumKind.DataHash:e.writeByteString(s.from(a(this,c,"f").asDataHash(),"hex"));break;case p.DatumKind.InlineData:e.writeTag(m.CborTag.EncodedCborDataItem);e.writeByteString(s.from(a(this,c,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==a(this,l,"f")){e.writeInt(3n);e.writeTag(m.CborTag.EncodedCborDataItem);e.writeByteString(s.from(a(this,l,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);let r;let s;let a;let o;if(t.peekState()===m.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==m.CborReaderState.EndMap){const n=t.readInt();switch(n){case 0n:r=h.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));break;case 1n:s=y.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const d=new m.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));d.readStartArray();const c=Number(d.readInt());if(c===p.DatumKind.InlineData){const l=d.readTag();if(l!==m.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${m.CborTag.EncodedCborDataItem} but got ${l}`)}const f=d.readByteString();let g;let b;if(c===p.DatumKind.DataHash)g=v.HexBlob.fromBytes(f);if(c===p.DatumKind.InlineData)b=_.PlutusData.fromCbor(v.HexBlob.fromBytes(f));a=new p.Datum(g,b);break}case 3n:{const P=new m.CborReader(v.HexBlob.fromBytes(t.readEncodedValue()));const S=P.readTag();if(S!==m.CborTag.EncodedCborDataItem)throw new v.InvalidArgumentError("cbor",`Expected tag ${m.CborTag.EncodedCborDataItem} but got ${S}`);const C=P.readByteString();o=w.Script.fromCbor(v.HexBlob.fromBytes(C));break}}}t.readEndMap()}else{const k=t.readStartArray();r=h.Address.fromBytes(v.HexBlob.fromBytes(t.readByteString()));s=y.Value.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));if(3===k){const j=t.readByteString();a=p.Datum.newDataHash(v.HexBlob.fromBytes(j))}}if(!r)throw new v.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!s)throw new v.InvalidArgumentError("cbor","Transaction output does not contain a value.");const x=new TransactionOutput(r,s);if(a)x.setDatum(a);if(o)x.setScriptRef(o);i(x,u,e,"f");return x}toCore(){var e;const t=a(this,d,"f").toCore();if(!t.assets)delete t.assets;const r={address:a(this,n,"f").asByron()?a(this,n,"f").toBase58():a(this,n,"f").toBech32(),value:t};if(a(this,c,"f")&&a(this,c,"f").kind()===p.DatumKind.InlineData)r.datum=null===(e=a(this,c,"f").asInlineData())||void 0===e?void 0:e.toCore();if(a(this,c,"f")&&a(this,c,"f").kind()===p.DatumKind.DataHash)r.datumHash=a(this,c,"f").asDataHash();if(a(this,l,"f"))r.scriptReference=a(this,l,"f").toCore();return r}static fromCore(e){const t=h.Address.fromString(e.address);if(!t)throw new v.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,y.Value.fromCore(e.value));if(e.datum)r.setDatum(p.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(p.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(w.Script.fromCore(e.scriptReference));return r}address(){return a(this,n,"f")}amount(){return a(this,d,"f")}datum(){return a(this,c,"f")}setDatum(e){i(this,c,e,"f")}scriptRef(){return a(this,l,"f")}setScriptRef(e){i(this,l,e,"f")}isBabbageOutput(){const e=new m.CborReader(this.toCbor());return e.peekState()===m.CborReaderState.StartMap}constructor(e,t){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);i(this,n,e,"f");i(this,d,t,"f")}}t.TransactionOutput=TransactionOutput;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,o=new WeakSet,f=function _TransactionOutput_getMapSize(){let e=t.REQUIRED_FIELDS_COUNT;if(a(this,c,"f"))++e;if(a(this,l,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.multiAssetsToTokenMap=t.tokenMapToMultiAsset=t.sortCanonically=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};t.sortCanonically=sortCanonically;const tokenMapToMultiAsset=e=>{const r=new Map;const i=new Map([...e.entries()].sort(t.sortCanonically));for(const[a,o]of i.entries()){const n=s.AssetId.getPolicyId(a);const d=s.AssetId.getAssetName(a);if(!r.has(n))r.set(n,new Map);r.get(n).set(d,o)}return r};t.tokenMapToMultiAsset=tokenMapToMultiAsset;const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,i]of e.entries()){for(const[a,o]of i.entries()){const n=s.AssetId.fromParts(r,a);t.set(n,o)}}return t};t.multiAssetsToTokenMap=multiAssetsToTokenMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Value=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Utils.js");const f=2;class Value{toCbor(){if(a(this,d,"f"))return a(this,d,"f");const e=new c.CborWriter;if(!a(this,n,"f")||a(this,n,"f").size<=0)e.writeInt(a(this,o,"f"));else{e.writeStartArray(f);e.writeInt(a(this,o,"f"));const t=(0,u.tokenMapToMultiAsset)(a(this,n,"f"));const r=new Map([...t.entries()].sort(u.sortCanonically));e.writeStartMap(r.size);for(const[i,l]of r.entries()){e.writeByteString(s.from(i,"hex"));const h=new Map([...l.entries()].sort(u.sortCanonically));e.writeStartMap(h.size);for(const[m,p]of h.entries()){e.writeByteString(s.from(m,"hex"));e.writeInt(p)}}}return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);if(t.peekState()===c.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const a=t.readStartArray();if(a!==f)throw new l.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${a} elements`);const o=t.readUInt();const n=new Map;t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const h=l.HexBlob.fromBytes(t.readByteString());if(!n.has(h))n.set(h,new Map);t.readStartMap();while(t.peekState()!==c.CborReaderState.EndMap){const m=s.from(t.readByteString()).toString("hex");const p=t.readUInt();n.get(h).set(m,p)}t.readEndMap()}t.readEndMap();const v=new Map([...(0,u.multiAssetsToTokenMap)(n)].sort(u.sortCanonically));const _=new Value(o,v);i(_,d,e,"f");return _}toCore(){return{assets:a(this,n,"f"),coins:a(this,o,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return a(this,o,"f")}setCoin(e){i(this,o,e,"f");i(this,d,void 0,"f")}multiasset(){return a(this,n,"f")}setMultiasset(e){i(this,n,(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(e).entries()].sort(u.sortCanonically))),"f");i(this,d,void 0,"f")}constructor(e,t){o.set(this,0n);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t?(0,u.multiAssetsToTokenMap)(new Map([...(0,u.tokenMapToMultiAsset)(t).entries()].sort(u.sortCanonically))):void 0,"f")}}t.Value=Value;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Voter=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Governance.js");const m=2;class Voter{toCbor(){if(a(this,d,"f"))return a(this,d,"f");const e=new c.CborWriter;e.writeStartArray(m);e.writeInt(a(this,o,"f"));e.writeByteString(s.from(a(this,n,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new c.CborReader(e);const s=r.readStartArray();if(s!==m)throw new u.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${s} elements`);const a=Number(r.readInt());const o=u.HexBlob.fromBytes(r.readByteString());switch(a){case f.VoterKind.ConstitutionalCommitteeKeyHash:case f.VoterKind.DrepKeyHash:case f.VoterKind.StakePoolKeyHash:t={hash:o,type:l.CredentialType.KeyHash};break;case f.VoterKind.ConstitutionalCommitteeScriptHash:case f.VoterKind.DRepScriptHash:t={hash:o,type:l.CredentialType.ScriptHash};break;default:throw new u.InvalidStateError(`Unexpected kind value: ${a}`)}const n=new Voter(a,t);i(n,d,e,"f");return n}toCore(){switch(a(this,o,"f")){case f.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:h.VoterType.ccHotKeyHash,credential:{hash:a(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:h.VoterType.ccHotScriptHash,credential:{hash:a(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.DrepKeyHash:return{__typename:h.VoterType.dRepKeyHash,credential:{hash:a(this,n,"f").hash,type:l.CredentialType.KeyHash}};case f.VoterKind.DRepScriptHash:return{__typename:h.VoterType.dRepScriptHash,credential:{hash:a(this,n,"f").hash,type:l.CredentialType.ScriptHash}};case f.VoterKind.StakePoolKeyHash:return{__typename:h.VoterType.stakePoolKeyHash,credential:{hash:a(this,n,"f").hash,type:l.CredentialType.KeyHash}};default:throw new u.InvalidStateError(`Unexpected kind value: ${a(this,o,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case h.VoterType.ccHotKeyHash:case h.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case h.VoterType.dRepKeyHash:case h.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case h.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new u.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.ConstitutionalCommitteeKeyHash:f.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===l.CredentialType.KeyHash?f.VoterKind.DrepKeyHash:f.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(f.VoterKind.StakePoolKeyHash,{hash:e,type:l.CredentialType.KeyHash})}kind(){return a(this,o,"f")}toConstitutionalCommitteeHotCred(){if(a(this,o,"f")===f.VoterKind.ConstitutionalCommitteeKeyHash||a(this,o,"f")===f.VoterKind.ConstitutionalCommitteeScriptHash)return a(this,n,"f");return}toDrepCred(){if(a(this,o,"f")===f.VoterKind.DrepKeyHash||a(this,o,"f")===f.VoterKind.DRepScriptHash)return a(this,n,"f");return}toStakingPoolKeyHash(){if(a(this,o,"f")===f.VoterKind.StakePoolKeyHash)return a(this,n,"f").hash;return}equals(e){return a(this,o,"f")===a(e,o,"f")&&a(this,n,"f").type===a(e,n,"f").type&&a(this,n,"f").hash===a(e,n,"f").hash}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f")}}t.Voter=Voter;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VoterKind=void 0;var r;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(r=t.VoterKind||(t.VoterKind={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedure=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/Anchor.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class VotingProcedure{toCbor(){if(i(this,n,"f"))return i(this,n,"f");const e=new c.CborWriter;e.writeStartArray(f);e.writeInt(i(this,a,"f"));i(this,o,"f")?e.writeEncodedValue((0,u.hexToBytes)(i(this,o,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);t.readStartArray();const r=Number(t.readInt());let i;if(t.peekState()===c.CborReaderState.Null){t.readNull();i=void 0}else{i=d.Anchor.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()))}const a=new VotingProcedure(r,i);s(a,n,e,"f");return a}toCore(){return{anchor:i(this,o,"f")?i(this,o,"f").toCore():null,vote:i(this,a,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?d.Anchor.fromCore(e.anchor):void 0)}vote(){return i(this,a,"f")}setVote(e){s(this,a,e,"f");s(this,n,void 0,"f")}anchor(){return i(this,o,"f")}setAnchor(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.VotingProcedure=VotingProcedure;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.VotingProcedures=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/GovernanceActionId.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");class VotingProcedures{toCbor(){if(s(this,o,"f"))return s(this,o,"f");const e=new n.CborWriter;const t=this.getVoters();if(0===t.length)throw new c.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const i=this.getGovernanceActionIdsByVoter(r);if(0===i.length)throw new c.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,f.hexToBytes)(r.toCbor()));e.writeStartMap(i.length);for(const a of i){e.writeEncodedValue((0,f.hexToBytes)(a.toCbor()));const d=this.get(r,a);if(!d)throw new c.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,f.hexToBytes)(d.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const s=l.Voter.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const a=d.GovernanceActionId.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const f=u.VotingProcedure.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,a,f)}t.readEndMap()}t.readEndMap();i(r,o,e,"f");return r}toCore(){return s(this,a,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;i(t,a,e.map(e=>{const t=l.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:d.GovernanceActionId.fromCore(e.actionId),votingProcedure:u.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const n=s(this,a,"f").find(t=>t.voter.equals(e));if(!n){s(this,a,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const d=n.votes.find(e=>e.actionId.equals(t));if(d)throw new c.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");n.votes.push({actionId:t,votingProcedure:r});i(this,o,void 0,"f")}get(e,t){const r=s(this,a,"f").find(t=>t.voter.equals(e));if(!r)return;const i=r.votes.find(e=>e.actionId.equals(t));if(!i)return;return i.votingProcedure}getVoters(){return s(this,a,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=s(this,a,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){a.set(this,[]);o.set(this,void 0)}}t.VotingProcedures=VotingProcedures;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VoterKind.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/Voter.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionBody.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionInput.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/TransactionOutput.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/Value.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/VotingProcedures/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/ProposalProcedure/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.TransactionUnspentOutput=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const f=2;class TransactionUnspentOutput{toCbor(){if(i(this,n,"f"))return i(this,n,"f");const e=new d.CborWriter;e.writeStartArray(f);e.writeEncodedValue((0,u.hexToBytes)(i(this,a,"f").toCbor()));e.writeEncodedValue((0,u.hexToBytes)(i(this,o,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==f)throw new c.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=l.TransactionInput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const a=l.TransactionOutput.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));const o=new TransactionUnspentOutput(i,a);s(o,n,e,"f");return o}toCore(){return[i(this,a,"f").toCore(),i(this,o,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(l.TransactionInput.fromCore(e[0]),l.TransactionOutput.fromCore(e[1]))}input(){return i(this,a,"f")}setInput(e){s(this,a,e,"f");s(this,n,void 0,"f")}output(){return i(this,o,"f")}setOutput(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.TransactionUnspentOutput=TransactionUnspentOutput;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.BootstrapWitness=void 0;const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const h=4;const m=(0,l.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new u.CborWriter;if(i(this,c,"f"))return i(this,c,"f");if(i(this,n,"f").length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${i(this,n,"f").length/2} bytes long`);e.writeStartArray(h);e.writeByteString((0,f.hexToBytes)(i(this,a,"f")));e.writeByteString((0,f.hexToBytes)(i(this,o,"f")));e.writeByteString((0,f.hexToBytes)(i(this,n,"f")));e.writeByteString((0,f.hexToBytes)(i(this,d,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new u.CborReader(e);const r=t.readStartArray();if(r!==h)throw new l.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=l.HexBlob.fromBytes(t.readByteString());const a=l.HexBlob.fromBytes(t.readByteString());const o=l.HexBlob.fromBytes(t.readByteString());const n=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new BootstrapWitness(i,a,o,n);s(d,c,e,"f");return d}toCore(){return{addressAttributes:l.Base64Blob.fromBytes((0,f.hexToBytes)(i(this,d,"f"))),chainCode:i(this,n,"f"),key:i(this,a,"f"),signature:i(this,o,"f")}}static fromCore(e){if(!e.chainCode)throw new l.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?l.HexBlob.fromBase64(e.addressAttributes):m)}vkey(){return i(this,a,"f")}setVkey(e){s(this,a,e,"f");s(this,c,void 0,"f")}signature(){return i(this,o,"f")}setSignature(e){s(this,o,e,"f");s(this,c,void 0,"f")}chainCode(){return i(this,n,"f")}setChainCode(e){if(e.length/2!==32)throw new l.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);s(this,n,e,"f");s(this,c,void 0,"f")}attributes(){return i(this,d,"f")}setAttributes(e){s(this,d,e,"f");s(this,c,void 0,"f")}constructor(e,t,r,i){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f");s(this,n,r,"f");s(this,d,i,"f")}}t.BootstrapWitness=BootstrapWitness;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var n=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.Redeemer=void 0;const h=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const v=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const w=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Transaction.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");const g=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const b=4;const P=32;class Redeemer{toCbor(){const e=new m.CborWriter;if(n(this,f,"f"))return n(this,f,"f");e.writeStartArray(b);e.writeInt(n(this,d,"f"));e.writeInt(n(this,c,"f"));e.writeEncodedValue((0,g.hexToBytes)(n(this,l,"f").toCbor()));e.writeEncodedValue((0,g.hexToBytes)(n(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new m.CborReader(e);const r=t.readStartArray();if(r!==b)throw new v.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const i=t.readUInt();const a=_.PlutusData.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));const n=p.ExUnits.fromCbor(v.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const d=new Redeemer(s,i,a,n);o(d,f,e,"f");return d}toCore(){let e;switch(n(this,d,"f")){case y.RedeemerTag.Spend:e=w.RedeemerPurpose.spend;break;case y.RedeemerTag.Mint:e=w.RedeemerPurpose.mint;break;case y.RedeemerTag.Cert:e=w.RedeemerPurpose.certificate;break;case y.RedeemerTag.Reward:e=w.RedeemerPurpose.withdrawal;break;case y.RedeemerTag.Voting:e=w.RedeemerPurpose.vote;break;case y.RedeemerTag.Proposing:e=w.RedeemerPurpose.propose;break;default:throw new v.InvalidStateError(`Invalid redeemer type ${n(this,d,"f")}`)}return{data:n(this,l,"f").toCore(),executionUnits:n(this,u,"f").toCore(),index:Number(n(this,c,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case w.RedeemerPurpose.spend:t=y.RedeemerTag.Spend;break;case w.RedeemerPurpose.mint:t=y.RedeemerTag.Mint;break;case w.RedeemerPurpose.certificate:t=y.RedeemerTag.Cert;break;case w.RedeemerPurpose.withdrawal:t=y.RedeemerTag.Reward;break;case w.RedeemerPurpose.vote:t=y.RedeemerTag.Voting;break;case w.RedeemerPurpose.propose:t=y.RedeemerTag.Proposing;break;default:throw new v.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),_.PlutusData.fromCore(e.data),p.ExUnits.fromCore(e.executionUnits))}tag(){return n(this,d,"f")}setTag(e){o(this,d,e,"f");o(this,f,void 0,"f")}index(){return n(this,c,"f")}setIndex(e){o(this,c,e,"f");o(this,f,void 0,"f")}data(){return n(this,l,"f")}setData(e){o(this,l,e,"f");o(this,f,void 0,"f")}exUnits(){return n(this,u,"f")}setExUnits(e){o(this,u,e,"f");o(this,f,void 0,"f")}hash(){return h.blake2b.hash(this.toCbor(),P)}constructor(e,t,r,s){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);o(this,d,e,"f");o(this,c,t,"f");o(this,l,r,"f");o(this,u,s,"f")}}t.Redeemer=Redeemer;d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RedeemerTag=void 0;var r;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(r=t.RedeemerTag||(t.RedeemerTag={}))},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;Object.defineProperty(t,"__esModule",{value:true});t.Redeemers=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js");const p=2;const v=2;class Redeemers{toCbor(){if(a(this,n,"f"))return a(this,n,"f");const e=new d.CborWriter;if(m.inConwayEra){const t=new Map(a(this,o,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,h.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,h.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(a(this,o,"f").length);for(const i of a(this,o,"f"))e.writeEncodedValue(s.from(i.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new d.CborReader(e);if(r.peekState()===d.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==d.CborReaderState.EndMap){const s=r.readStartArray();if(s!==p)throw new l.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${p} elements, but got an array of ${s} elements`);const a=Number(r.readUInt());const o=r.readUInt();r.readEndArray();const h=r.readStartArray();if(h!==v)throw new l.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${v} elements, but got an array of ${h} elements`);const m=u.PlutusData.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));const _=c.ExUnits.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new f.Redeemer(a,o,m,_))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==d.CborReaderState.EndArray){t.push(f.Redeemer.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const w=new Redeemers(t);i(w,n,e,"f");return w}toCore(){return a(this,o,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>f.Redeemer.fromCore(e)))}values(){return a(this,o,"f")}setValues(e){i(this,o,[...e],"f");i(this,n,void 0,"f")}size(){return a(this,o,"f").length}constructor(e){o.set(this,void 0);n.set(this,void 0);i(this,o,[...e],"f")}}t.Redeemers=Redeemers;o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c,l,u,f,h,m,p,v,_,w,y,g;Object.defineProperty(t,"__esModule",{value:true});t.TransactionWitnessSet=void 0;const b=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js");const P=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const S=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const C=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const k=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js");const j=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/PlutusData.js");const x=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const T=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js");const E=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const A=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js");const I=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const B=o(r("../../node_modules/lodash/uniqWith.js"));class TransactionWitnessSet{toCbor(){const e=new P.CborWriter;if(i(this,_,"f"))return i(this,_,"f");e.writeStartMap(i(this,n,"m",g).call(this));if(void 0!==i(this,c,"f")&&i(this,c,"f").size()>0){i(this,c,"f").setValues((0,B.default)(i(this,c,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(s.from(i(this,c,"f").toCbor(),"hex"))}if(void 0!==i(this,l,"f")&&i(this,l,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(s.from(i(this,l,"f").toCbor(),"hex"))}if(void 0!==i(this,u,"f")&&i(this,u,"f").size()>0){i(this,u,"f").setValues((0,B.default)(i(this,u,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(s.from(i(this,u,"f").toCbor(),"hex"))}if(void 0!==i(this,f,"f")&&i(this,f,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(s.from(i(this,f,"f").toCbor(),"hex"))}if(void 0!==i(this,h,"f")&&i(this,h,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(s.from(i(this,h,"f").toCbor(),"hex"))}if(void 0!==i(this,m,"f")&&i(this,m,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,I.hexToBytes)(i(this,m,"f").toCbor()))}if(void 0!==i(this,p,"f")&&i(this,p,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(s.from(i(this,p,"f").toCbor(),"hex"))}if(void 0!==i(this,v,"f")&&i(this,v,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(s.from(i(this,v,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new P.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==P.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:r.setVkeys(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),A.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.NativeScript.fromCbor));break;case 2n:r.setBootstraps(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),b.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),j.PlutusData.fromCbor));break;case 5n:r.setRedeemers(T.Redeemers.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(S.CborSet.fromCbor(C.HexBlob.fromBytes(t.readEncodedValue()),k.PlutusV3Script.fromCbor));break}}t.readEndMap();a(r,_,e,"f");return r}toCore(){var e;const t=i(this,n,"m",w).call(this);return{bootstrap:i(this,u,"f")?i(this,u,"f").toCore():void 0,datums:i(this,h,"f")?i(this,h,"f").toCore():void 0,redeemers:(null===(e=i(this,m,"f"))||void 0===e?void 0:e.size())?i(this,m,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:i(this,c,"f")?new Map(i(this,c,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(S.CborSet.fromCore([...e.signatures],A.VkeyWitness.fromCore));if(e.scripts){const r=i(TransactionWitnessSet,d,"m",y).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(T.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(S.CborSet.fromCore(e.datums,j.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(S.CborSet.fromCore(e.bootstrap,b.BootstrapWitness.fromCore));return t}setVkeys(e){a(this,c,e,"f");a(this,_,void 0,"f")}vkeys(){return i(this,c,"f")}setNativeScripts(e){a(this,l,e,"f");a(this,_,void 0,"f")}nativeScripts(){return i(this,l,"f")}setBootstraps(e){a(this,u,e,"f");a(this,_,void 0,"f")}bootstraps(){return i(this,u,"f")}setPlutusV1Scripts(e){a(this,f,e,"f");a(this,_,void 0,"f")}plutusV1Scripts(){return i(this,f,"f")}setPlutusData(e){a(this,h,e,"f");a(this,_,void 0,"f")}plutusData(){return i(this,h,"f")}setRedeemers(e){a(this,m,e,"f");a(this,_,void 0,"f")}redeemers(){return i(this,m,"f")}setPlutusV2Scripts(e){a(this,p,e,"f");a(this,_,void 0,"f")}plutusV2Scripts(){return i(this,p,"f")}setPlutusV3Scripts(e){a(this,v,e,"f");a(this,_,void 0,"f")}plutusV3Scripts(){return i(this,v,"f")}constructor(){n.add(this);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0)}}t.TransactionWitnessSet=TransactionWitnessSet;d=TransactionWitnessSet,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,n=new WeakSet,w=function _TransactionWitnessSet_getCoreScripts(){const e=i(this,f,"f")?i(this,f,"f").toCore():[];const t=i(this,p,"f")?i(this,p,"f").toCore():[];const r=i(this,v,"f")?i(this,v,"f").toCore():[];const s=i(this,l,"f")?i(this,l,"f").toCore():[];return[...e,...t,...r,...s]},y=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,i]=e.reduce(([e,t,r,s],i)=>{if(i.__type===x.ScriptType.Native)e?e.push(i):e=[i];else{switch(i.version){case x.PlutusLanguageVersion.V1:t?t.push(i):t=[i];break;case x.PlutusLanguageVersion.V2:r?r.push(i):r=[i];break;case x.PlutusLanguageVersion.V3:s?s.push(i):s=[i];break;default:throw new E.SerializationError(E.SerializationFailure.InvalidScriptType,`Script '${i}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:S.CborSet.fromCore(t,k.NativeScript.fromCore)},...r&&{plutusV1:S.CborSet.fromCore(r,k.PlutusV1Script.fromCore)},...s&&{plutusV2:S.CborSet.fromCore(s,k.PlutusV2Script.fromCore)},...i&&{plutusV3:S.CborSet.fromCore(i,k.PlutusV3Script.fromCore)}}},g=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==i(this,c,"f")&&i(this,c,"f").size()>0)++e;if(void 0!==i(this,l,"f")&&i(this,l,"f").size()>0)++e;if(void 0!==i(this,u,"f")&&i(this,u,"f").size()>0)++e;if(void 0!==i(this,f,"f")&&i(this,f,"f").size()>0)++e;if(void 0!==i(this,h,"f")&&i(this,h,"f").size()>0)++e;if(void 0!==i(this,m,"f")&&i(this,m,"f").size()>0)++e;if(void 0!==i(this,p,"f")&&i(this,p,"f").size()>0)++e;if(void 0!==i(this,v,"f")&&i(this,v,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.VkeyWitness=void 0;const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js");const u=2;class VkeyWitness{toCbor(){const e=new d.CborWriter;if(i(this,n,"f"))return i(this,n,"f");e.writeStartArray(u);e.writeByteString((0,l.hexToBytes)(i(this,a,"f")));e.writeByteString((0,l.hexToBytes)(i(this,o,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new d.CborReader(e);const r=t.readStartArray();if(r!==u)throw new c.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const i=c.HexBlob.fromBytes(t.readByteString());const a=c.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=new VkeyWitness(i,a);s(o,n,e,"f");return o}toCore(){return[i(this,a,"f"),i(this,o,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return i(this,a,"f")}setVkey(e){s(this,a,e,"f");s(this,n,void 0,"f")}signature(){return i(this,o,"f")}setSignature(e){s(this,o,e,"f");s(this,n,void 0,"f")}constructor(e,t){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.VkeyWitness=VkeyWitness;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/Redeemer/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/BootstrapWitness.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/TransactionWitnessSet.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/VkeyWitness.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.CostModel=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class CostModel{static newPlutusV1(e){return new CostModel(l.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(l.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(l.PlutusLanguageVersion.V3,e)}set(e,t){if(!i(this,a,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${i(this,o,"f")}.`);i(this,n,"f")[e]=t}get(e){if(!i(this,a,"m",d).call(this,e))throw new c.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${i(this,o,"f")}.`);return i(this,n,"f")[e]}costs(){return i(this,n,"f")}language(){return i(this,o,"f")}constructor(e,t){a.add(this);o.set(this,void 0);n.set(this,void 0);s(this,o,e,"f");s(this,n,t,"f")}}t.CostModel=CostModel;o=new WeakMap,n=new WeakMap,a=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.Costmdls=void 0;const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js");const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");class Costmdls{toCbor(){const e=new n.CborWriter;if(i(this,o,"f"))return i(this,o,"f");const t=new Map([...i(this,a,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeInt(r);e.writeStartArray(s.costs().length);for(const d of s.costs())e.writeInt(d)}return e.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const i=Number(t.readInt());const a=new Array;t.readStartArray();while(t.peekState()!==n.CborReaderState.EndArray){a.push(Number(t.readInt()))}t.readEndArray();r.set(i,new d.CostModel(i,a))}t.readEndMap();const c=new Costmdls(r);s(c,o,e,"f");return c}toCore(){const e=new Map;for(const[t,r]of i(this,a,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new d.CostModel(r,s));return new Costmdls(t)}size(){return i(this,a,"f").size}insert(e){i(this,a,"f").set(e.language(),e);s(this,o,void 0,"f")}get(e){return i(this,a,"f").get(e)}keys(){return[...i(this,a,"f").keys()]}languageViewsEncoding(){const e=new n.CborWriter;const t=new Map([...i(this,a,"f")].sort((e,t)=>{const r=e[0]===l.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===l.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,s]of t){switch(r){case l.PlutusLanguageVersion.V1:{const o=new n.CborWriter;o.writeStartArray();for(const d of s.costs())o.writeInt(d);o.writeEndArray();const u=o.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(u);break}case l.PlutusLanguageVersion.V2:case l.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(s.costs().length);for(const f of s.costs())e.writeInt(f);break;default:throw new c.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f")}}t.Costmdls=Costmdls;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/Costmdls.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/CostModel.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u,f,h,m,p,v;Object.defineProperty(t,"__esModule",{value:true});t.DrepVotingThresholds=void 0;const _=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const w=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const g=10;class DrepVotingThresholds{toCbor(){const e=new _.CborWriter;if(a(this,v,"f"))return a(this,v,"f");e.writeStartArray(g);e.writeEncodedValue(s.from(a(this,o,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,m,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,p,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new _.CborReader(e);const r=t.readStartArray();if(r!==g)throw new w.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const a=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const o=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const n=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const d=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const c=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const l=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const u=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const f=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));const h=y.UnitInterval.fromCbor(w.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new DrepVotingThresholds(s,a,o,n,d,c,l,u,f,h);i(m,v,e,"f");return m}toCore(){return{committeeNoConfidence:a(this,d,"f").toCore(),committeeNormal:a(this,n,"f").toCore(),hardForkInitiation:a(this,l,"f").toCore(),motionNoConfidence:a(this,o,"f").toCore(),ppEconomicGroup:a(this,f,"f").toCore(),ppGovernanceGroup:a(this,m,"f").toCore(),ppNetworkGroup:a(this,u,"f").toCore(),ppTechnicalGroup:a(this,h,"f").toCore(),treasuryWithdrawal:a(this,p,"f").toCore(),updateConstitution:a(this,c,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(y.UnitInterval.fromCore(e.motionNoConfidence),y.UnitInterval.fromCore(e.committeeNormal),y.UnitInterval.fromCore(e.committeeNoConfidence),y.UnitInterval.fromCore(e.updateConstitution),y.UnitInterval.fromCore(e.hardForkInitiation),y.UnitInterval.fromCore(e.ppNetworkGroup),y.UnitInterval.fromCore(e.ppEconomicGroup),y.UnitInterval.fromCore(e.ppTechnicalGroup),y.UnitInterval.fromCore(e.ppGovernanceGroup),y.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){i(this,o,e,"f");i(this,v,void 0,"f")}setCommitteeNormal(e){i(this,n,e,"f");i(this,v,void 0,"f")}setCommitteeNoConfidence(e){i(this,d,e,"f");i(this,v,void 0,"f")}setUpdateConstitution(e){i(this,c,e,"f");i(this,v,void 0,"f")}setHardForkInitiation(e){i(this,l,e,"f");i(this,v,void 0,"f")}setPpNetworkGroup(e){i(this,u,e,"f");i(this,v,void 0,"f")}setPpEconomicGroup(e){i(this,f,e,"f");i(this,v,void 0,"f")}setPpTechnicalGroup(e){i(this,h,e,"f");i(this,v,void 0,"f")}setPpGovernanceGroup(e){i(this,m,e,"f");i(this,v,void 0,"f")}setTreasuryWithdrawal(e){i(this,p,e,"f");i(this,v,void 0,"f")}motionNoConfidence(){return a(this,o,"f")}committeeNormal(){return a(this,n,"f")}committeeNoConfidence(){return a(this,d,"f")}updateConstitution(){return a(this,c,"f")}hardForkInitiation(){return a(this,l,"f")}ppNetworkGroup(){return a(this,u,"f")}ppEconomicGroup(){return a(this,f,"f")}ppTechnicalGroup(){return a(this,h,"f")}ppGovernanceGroup(){return a(this,m,"f")}treasuryWithdrawal(){return a(this,p,"f")}constructor(e,t,r,s,a,_,w,y,g,b){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f");i(this,d,r,"f");i(this,c,s,"f");i(this,l,a,"f");i(this,u,_,"f");i(this,f,w,"f");i(this,h,y,"f");i(this,m,g,"f");i(this,p,b,"f")}}t.DrepVotingThresholds=DrepVotingThresholds;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n,d,c;Object.defineProperty(t,"__esModule",{value:true});t.ExUnitPrices=void 0;const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const h=o(r("../../node_modules/fraction.js/fraction.js"));const m=2;class ExUnitPrices{toCbor(){const e=new l.CborWriter;if(a(this,c,"f"))return a(this,c,"f");e.writeStartArray(m);e.writeEncodedValue(s.from(a(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new l.CborReader(e);const r=t.readStartArray();if(r!==m)throw new u.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const a=f.UnitInterval.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const o=new ExUnitPrices(s,a);i(o,c,e,"f");return o}toCore(){return{memory:Number(a(this,n,"f").numerator())/Number(a(this,n,"f").denominator()),steps:Number(a(this,d,"f").numerator())/Number(a(this,d,"f").denominator())}}static fromCore(e){const t=new h.default(e.memory);const r=new h.default(e.steps);return new ExUnitPrices(new f.UnitInterval(BigInt(t.n),BigInt(t.d)),new f.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return a(this,n,"f")}setMemPrice(e){i(this,n,e,"f");i(this,c,void 0,"f")}stepsPrice(){return a(this,d,"f")}setStepsPrice(e){i(this,d,e,"f");i(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);i(this,n,e,"f");i(this,d,t,"f")}}t.ExUnitPrices=ExUnitPrices;n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d,c,l,u;Object.defineProperty(t,"__esModule",{value:true});t.PoolVotingThresholds=void 0;const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const p=5;class PoolVotingThresholds{toCbor(){const e=new f.CborWriter;if(a(this,u,"f"))return a(this,u,"f");e.writeStartArray(p);e.writeEncodedValue(s.from(a(this,o,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,n,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,d,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(s.from(a(this,l,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=t.readStartArray();if(r!==p)throw new h.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const a=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const o=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const n=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));const d=m.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new PoolVotingThresholds(s,a,o,n,d);i(c,u,e,"f");return c}toCore(){return{committeeNoConfidence:a(this,d,"f").toCore(),committeeNormal:a(this,n,"f").toCore(),hardForkInitiation:a(this,c,"f").toCore(),motionNoConfidence:a(this,o,"f").toCore(),securityRelevantParamVotingThreshold:a(this,l,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(m.UnitInterval.fromCore(e.motionNoConfidence),m.UnitInterval.fromCore(e.committeeNormal),m.UnitInterval.fromCore(e.committeeNoConfidence),m.UnitInterval.fromCore(e.hardForkInitiation),m.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){i(this,o,e,"f");i(this,u,void 0,"f")}setCommitteeNormal(e){i(this,n,e,"f");i(this,u,void 0,"f")}setCommitteeNoConfidence(e){i(this,d,e,"f");i(this,u,void 0,"f")}setHardForkInitiation(e){i(this,c,e,"f");i(this,u,void 0,"f")}motionNoConfidence(){return a(this,o,"f")}committeeNormal(){return a(this,n,"f")}committeeNoConfidence(){return a(this,d,"f")}hardForkInitiation(){return a(this,c,"f")}securityRelevantParam(){return a(this,l,"f")}constructor(e,t,r,s,a){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);i(this,o,e,"f");i(this,n,t,"f");i(this,d,r,"f");i(this,c,s,"f");i(this,l,a,"f")}}t.PoolVotingThresholds=PoolVotingThresholds;o=new WeakMap,n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;Object.defineProperty(t,"__esModule",{value:true});t.ProposedProtocolParameterUpdates=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const h=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js");class ProposedProtocolParameterUpdates{toCbor(){const e=new f.CborWriter;if(d(this,l,"f"))return d(this,l,"f");const t=new Map([...d(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,i]of t){e.writeByteString(s.from(r,"hex"));e.writeEncodedValue(s.from(i.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new f.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==f.CborReaderState.EndMap){const s=u.Hash28ByteBase16(h.HexBlob.fromBytes(t.readByteString()));const i=m.ProtocolParamUpdate.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()));r.set(s,i)}t.readEndMap();const a=new ProposedProtocolParameterUpdates(r);n(a,l,e,"f");return a}toCore(){return new Map([...d(this,c,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,m.ProtocolParamUpdate.fromCore(t)])))}size(){return d(this,c,"f").size}insert(e,t){d(this,c,"f").set(e,t)}get(e){return d(this,c,"f").get(e)}keys(){return[...d(this,c,"f").keys()]}constructor(e){c.set(this,new Map);l.set(this,void 0);n(this,c,e,"f")}}t.ProposedProtocolParameterUpdates=ProposedProtocolParameterUpdates;c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K;Object.defineProperty(t,"__esModule",{value:true});t.ProtocolParamUpdate=void 0;const V=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const W=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js");const z=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js");const U=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const $=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js");const L=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js");const q=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const Y=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js");class ProtocolParamUpdate{toCbor(){const e=new V.CborWriter;if(i(this,H,"f"))return i(this,H,"f");e.writeStartMap(i(this,o,"m",K).call(this));if(void 0!==i(this,n,"f")){e.writeInt(0n);e.writeInt(i(this,n,"f"))}if(void 0!==i(this,d,"f")){e.writeInt(1n);e.writeInt(i(this,d,"f"))}if(void 0!==i(this,c,"f")){e.writeInt(2n);e.writeInt(i(this,c,"f"))}if(void 0!==i(this,l,"f")){e.writeInt(3n);e.writeInt(i(this,l,"f"))}if(void 0!==i(this,u,"f")){e.writeInt(4n);e.writeInt(i(this,u,"f"))}if(void 0!==i(this,f,"f")){e.writeInt(5n);e.writeInt(i(this,f,"f"))}if(void 0!==i(this,h,"f")){e.writeInt(6n);e.writeInt(i(this,h,"f"))}if(void 0!==i(this,m,"f")){e.writeInt(7n);e.writeInt(i(this,m,"f"))}if(void 0!==i(this,p,"f")){e.writeInt(8n);e.writeInt(i(this,p,"f"))}if(void 0!==i(this,v,"f")){e.writeInt(9n);e.writeEncodedValue(s.from(i(this,v,"f").toCbor(),"hex"))}if(void 0!==i(this,_,"f")){e.writeInt(10n);e.writeEncodedValue(s.from(i(this,_,"f").toCbor(),"hex"))}if(void 0!==i(this,w,"f")){e.writeInt(11n);e.writeEncodedValue(s.from(i(this,w,"f").toCbor(),"hex"))}if(void 0!==i(this,y,"f")){e.writeInt(12n);e.writeEncodedValue(s.from(i(this,y,"f").toCbor(),"hex"))}if(void 0!==i(this,g,"f"))if(0===i(this,g,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(s.from(i(this,g,"f"),"hex"))}if(void 0!==i(this,b,"f")){e.writeInt(14n);e.writeEncodedValue(s.from(i(this,b,"f").toCbor(),"hex"))}if(void 0!==i(this,P,"f")){e.writeInt(16n);e.writeInt(i(this,P,"f"))}if(void 0!==i(this,S,"f")){e.writeInt(17n);e.writeInt(i(this,S,"f"))}if(void 0!==i(this,C,"f")){e.writeInt(18n);e.writeEncodedValue(s.from(i(this,C,"f").toCbor(),"hex"))}if(void 0!==i(this,k,"f")){e.writeInt(19n);e.writeEncodedValue(s.from(i(this,k,"f").toCbor(),"hex"))}if(void 0!==i(this,j,"f")){e.writeInt(20n);e.writeEncodedValue(s.from(i(this,j,"f").toCbor(),"hex"))}if(void 0!==i(this,x,"f")){e.writeInt(21n);e.writeEncodedValue(s.from(i(this,x,"f").toCbor(),"hex"))}if(void 0!==i(this,T,"f")){e.writeInt(22n);e.writeInt(i(this,T,"f"))}if(void 0!==i(this,E,"f")){e.writeInt(23n);e.writeInt(i(this,E,"f"))}if(void 0!==i(this,A,"f")){e.writeInt(24n);e.writeInt(i(this,A,"f"))}if(void 0!==i(this,I,"f")){e.writeInt(25n);e.writeEncodedValue(s.from(i(this,I,"f").toCbor(),"hex"))}if(void 0!==i(this,B,"f")){e.writeInt(26n);e.writeEncodedValue(s.from(i(this,B,"f").toCbor(),"hex"))}if(void 0!==i(this,F,"f")){e.writeInt(27n);e.writeInt(i(this,F,"f"))}if(void 0!==i(this,M,"f")){e.writeInt(28n);e.writeInt(i(this,M,"f"))}if(void 0!==i(this,R,"f")){e.writeInt(29n);e.writeInt(i(this,R,"f"))}if(void 0!==i(this,D,"f")){e.writeInt(30n);e.writeInt(i(this,D,"f"))}if(void 0!==i(this,O,"f")){e.writeInt(31n);e.writeInt(i(this,O,"f"))}if(void 0!==i(this,G,"f")){e.writeInt(32n);e.writeInt(i(this,G,"f"))}if(void 0!==i(this,N,"f")){e.writeInt(33n);e.writeEncodedValue(s.from(i(this,N,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new V.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==V.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:a(r,n,t.readInt(),"f");break;case 1n:a(r,d,t.readInt(),"f");break;case 2n:a(r,c,Number(t.readInt()),"f");break;case 3n:a(r,l,Number(t.readInt()),"f");break;case 4n:a(r,u,Number(t.readInt()),"f");break;case 5n:a(r,f,t.readInt(),"f");break;case 6n:a(r,h,t.readInt(),"f");break;case 7n:a(r,m,Number(t.readInt()),"f");break;case 8n:a(r,p,Number(t.readInt()),"f");break;case 9n:a(r,v,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:a(r,_,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:a(r,w,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:a(r,y,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();a(r,g,"","f");t.readEndArray()}else{t.readEncodedValue();a(r,g,q.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:a(r,b,L.ProtocolVersion.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:a(r,P,t.readInt(),"f");break;case 17n:a(r,S,t.readInt(),"f");break;case 18n:a(r,C,W.Costmdls.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:a(r,k,$.ExUnitPrices.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:a(r,j,L.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:a(r,x,L.ExUnits.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:a(r,T,Number(t.readInt()),"f");break;case 23n:a(r,E,Number(t.readInt()),"f");break;case 24n:a(r,A,Number(t.readInt()),"f");break;case 25n:a(r,I,Y.PoolVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:a(r,B,z.DrepVotingThresholds.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:a(r,F,Number(t.readInt()),"f");break;case 28n:a(r,M,Number(t.readInt()),"f");break;case 29n:a(r,R,Number(t.readInt()),"f");break;case 30n:a(r,D,Number(t.readInt()),"f");break;case 31n:a(r,O,Number(t.readInt()),"f");break;case 32n:a(r,G,Number(t.readInt()),"f");break;case 33n:a(r,N,L.UnitInterval.fromCbor(q.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();a(r,H,e,"f");return r}toCore(){var e,t,r,s,a,o;const H={coinsPerUtxoByte:void 0!==i(this,S,"f")?Number(i(this,S,"f")):void 0,collateralPercentage:i(this,E,"f"),committeeTermLimit:void 0!==i(this,M,"f")?(0,U.EpochNo)(i(this,M,"f")):void 0,costModels:null===(e=i(this,C,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:i(this,O,"f"),dRepInactivityPeriod:void 0!==i(this,G,"f")?(0,U.EpochNo)(i(this,G,"f")):void 0,dRepVotingThresholds:null===(t=i(this,B,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:i(this,p,"f"),governanceActionDeposit:i(this,D,"f"),governanceActionValidityPeriod:void 0!==i(this,R,"f")?(0,U.EpochNo)(i(this,R,"f")):void 0,maxBlockBodySize:i(this,c,"f"),maxBlockHeaderSize:i(this,u,"f"),maxCollateralInputs:i(this,A,"f"),maxExecutionUnitsPerBlock:null===(r=i(this,x,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=i(this,j,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==i(this,l,"f")?Number(i(this,l,"f")):void 0,maxValueSize:i(this,T,"f"),minCommitteeSize:i(this,F,"f"),minFeeCoefficient:void 0!==i(this,n,"f")?Number(i(this,n,"f")):void 0,minFeeConstant:void 0!==i(this,d,"f")?Number(i(this,d,"f")):void 0,minFeeRefScriptCostPerByte:i(this,N,"f")?i(this,N,"f").toFloat().toString():void 0,minPoolCost:void 0!==i(this,P,"f")?Number(i(this,P,"f")):void 0,monetaryExpansion:i(this,_,"f")?i(this,_,"f").toFloat().toString():void 0,poolDeposit:void 0!==i(this,h,"f")?Number(i(this,h,"f")):void 0,poolInfluence:i(this,v,"f")?i(this,v,"f").toFloat().toString():void 0,poolRetirementEpochBound:i(this,m,"f"),poolVotingThresholds:null===(a=i(this,I,"f"))||void 0===a?void 0:a.toCore(),prices:null===(o=i(this,k,"f"))||void 0===o?void 0:o.toCore(),stakeKeyDeposit:void 0!==i(this,f,"f")?Number(i(this,f,"f")):void 0,treasuryExpansion:i(this,w,"f")?i(this,w,"f").toFloat().toString():void 0};if(i(this,y,"f"))H.decentralizationParameter=i(this,y,"f").toFloat().toString();if(void 0!==i(this,g,"f"))H.extraEntropy=i(this,g,"f");if(i(this,b,"f"))H.protocolVersion=i(this,b,"f").toCore();return H}static fromCore(e){const t=new ProtocolParamUpdate;a(t,n,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");a(t,c,e.maxBlockBodySize,"f");a(t,d,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");a(t,u,e.maxBlockHeaderSize,"f");a(t,f,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");a(t,h,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");a(t,m,e.poolRetirementEpochBound,"f");a(t,p,e.desiredNumberOfPools,"f");a(t,v,e.poolInfluence?L.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");a(t,_,e.monetaryExpansion?L.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");a(t,w,e.treasuryExpansion?L.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");a(t,P,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");a(t,T,e.maxValueSize,"f");a(t,l,e.maxTxSize,"f");a(t,E,e.collateralPercentage,"f");a(t,A,e.maxCollateralInputs,"f");a(t,C,e.costModels?W.Costmdls.fromCore(e.costModels):void 0,"f");a(t,k,e.prices?$.ExUnitPrices.fromCore(e.prices):void 0,"f");a(t,j,e.maxExecutionUnitsPerTransaction?L.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");a(t,x,e.maxExecutionUnitsPerBlock?L.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");a(t,S,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");a(t,I,e.poolVotingThresholds?Y.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");a(t,B,e.dRepVotingThresholds?z.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");a(t,F,e.minCommitteeSize,"f");a(t,M,e.committeeTermLimit,"f");a(t,R,e.governanceActionValidityPeriod,"f");a(t,D,e.governanceActionDeposit,"f");a(t,O,e.dRepDeposit,"f");a(t,G,e.dRepInactivityPeriod,"f");a(t,N,e.minFeeRefScriptCostPerByte?L.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:i}=e;if(void 0!==r||void 0!==s||i){a(t,y,i?L.UnitInterval.fromFloat(Number(i)):void 0,"f");a(t,b,r?L.ProtocolVersion.fromCore(r):void 0,"f");a(t,g,s?(0,q.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){a(this,n,e,"f")}minFeeA(){return i(this,n,"f")}setMinFeeB(e){a(this,d,e,"f");a(this,H,void 0,"f")}minFeeB(){return i(this,d,"f")}setMaxBlockBodySize(e){a(this,c,e,"f");a(this,H,void 0,"f")}maxBlockBodySize(){return i(this,c,"f")}setMaxTxSize(e){a(this,l,e,"f");a(this,H,void 0,"f")}maxTxSize(){return i(this,l,"f")}setMaxBlockHeaderSize(e){a(this,u,e,"f");a(this,H,void 0,"f")}maxBlockHeaderSize(){return i(this,u,"f")}setKeyDeposit(e){a(this,f,e,"f");a(this,H,void 0,"f")}keyDeposit(){return i(this,f,"f")}setPoolDeposit(e){a(this,h,e,"f");a(this,H,void 0,"f")}poolDeposit(){return i(this,h,"f")}setMaxEpoch(e){a(this,m,e,"f");a(this,H,void 0,"f")}maxEpoch(){return i(this,m,"f")}setNOpt(e){a(this,p,e,"f");a(this,H,void 0,"f")}nOpt(){return i(this,p,"f")}setPoolPledgeInfluence(e){a(this,v,e,"f");a(this,H,void 0,"f")}poolPledgeInfluence(){return i(this,v,"f")}setExpansionRate(e){a(this,_,e,"f");a(this,H,void 0,"f")}expansionRate(){return i(this,_,"f")}setTreasuryGrowthRate(e){a(this,w,e,"f");a(this,H,void 0,"f")}treasuryGrowthRate(){return i(this,w,"f")}setD(e){a(this,y,e,"f");a(this,H,void 0,"f")}d(){return i(this,y,"f")}setExtraEntropy(e){a(this,g,e,"f");a(this,H,void 0,"f")}extraEntropy(){return i(this,g,"f")}setProtocolVersion(e){a(this,b,e,"f");a(this,H,void 0,"f")}protocolVersion(){return i(this,b,"f")}setMinPoolCost(e){a(this,P,e,"f");a(this,H,void 0,"f")}minPoolCost(){return i(this,P,"f")}setAdaPerUtxoByte(e){a(this,S,e,"f");a(this,H,void 0,"f")}adaPerUtxoByte(){return i(this,S,"f")}setCostModels(e){a(this,C,e,"f");a(this,H,void 0,"f")}costModels(){return i(this,C,"f")}setExecutionCosts(e){a(this,k,e,"f");a(this,H,void 0,"f")}executionCosts(){return i(this,k,"f")}setMaxTxExUnits(e){a(this,j,e,"f");a(this,H,void 0,"f")}maxTxExUnits(){return i(this,j,"f")}setMaxBlockExUnits(e){a(this,x,e,"f");a(this,H,void 0,"f")}maxBlockExUnits(){return i(this,x,"f")}setMaxValueSize(e){a(this,T,e,"f");a(this,H,void 0,"f")}maxValueSize(){return i(this,T,"f")}setCollateralPercentage(e){a(this,E,e,"f");a(this,H,void 0,"f")}collateralPercentage(){return i(this,E,"f")}setMaxCollateralInputs(e){a(this,A,e,"f");a(this,H,void 0,"f")}maxCollateralInputs(){return i(this,A,"f")}setPoolVotingThresholds(e){a(this,I,e,"f");a(this,H,void 0,"f")}poolVotingThresholds(){return i(this,I,"f")}setDrepVotingThresholds(e){a(this,B,e,"f");a(this,H,void 0,"f")}drepVotingThresholds(){return i(this,B,"f")}setMinCommitteeSize(e){a(this,F,e,"f");a(this,H,void 0,"f")}minCommitteeSize(){return i(this,F,"f")}setCommitteeTermLimit(e){a(this,M,e,"f");a(this,H,void 0,"f")}committeeTermLimit(){return i(this,M,"f")}setGovernanceActionValidityPeriod(e){a(this,R,e,"f");a(this,H,void 0,"f")}governanceActionValidityPeriod(){return i(this,R,"f")}setGovernanceActionDeposit(e){a(this,D,e,"f");a(this,H,void 0,"f")}governanceActionDeposit(){return i(this,D,"f")}setDrepDeposit(e){a(this,O,e,"f");a(this,H,void 0,"f")}drepDeposit(){return i(this,O,"f")}setDrepInactivityPeriod(e){a(this,G,e,"f");a(this,H,void 0,"f")}drepInactivityPeriod(){return i(this,G,"f")}minFeeRefScriptCostPerByte(){return i(this,N,"f")}constructor(){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0)}}t.ProtocolParamUpdate=ProtocolParamUpdate;n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,o=new WeakSet,K=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==i(this,n,"f"))++e;if(void 0!==i(this,d,"f"))++e;if(void 0!==i(this,c,"f"))++e;if(void 0!==i(this,l,"f"))++e;if(void 0!==i(this,u,"f"))++e;if(void 0!==i(this,f,"f"))++e;if(void 0!==i(this,h,"f"))++e;if(void 0!==i(this,m,"f"))++e;if(void 0!==i(this,p,"f"))++e;if(void 0!==i(this,v,"f"))++e;if(void 0!==i(this,_,"f"))++e;if(void 0!==i(this,w,"f"))++e;if(void 0!==i(this,y,"f"))++e;if(void 0!==i(this,g,"f"))++e;if(void 0!==i(this,b,"f"))++e;if(void 0!==i(this,P,"f"))++e;if(void 0!==i(this,S,"f"))++e;if(void 0!==i(this,C,"f"))++e;if(void 0!==i(this,k,"f"))++e;if(void 0!==i(this,j,"f"))++e;if(void 0!==i(this,x,"f"))++e;if(void 0!==i(this,T,"f"))++e;if(void 0!==i(this,E,"f"))++e;if(void 0!==i(this,A,"f"))++e;if(void 0!==i(this,I,"f"))++e;if(void 0!==i(this,B,"f"))++e;if(void 0!==i(this,F,"f"))++e;if(void 0!==i(this,M,"f"))++e;if(void 0!==i(this,R,"f"))++e;if(void 0!==i(this,D,"f"))++e;if(void 0!==i(this,O,"f"))++e;if(void 0!==i(this,G,"f"))++e;if(void 0!==i(this,N,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.Update=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js");const h=2;class Update{toCbor(){const e=new c.CborWriter;if(a(this,d,"f"))return a(this,d,"f");e.writeStartArray(h);e.writeEncodedValue(s.from(a(this,n,"f").toCbor(),"hex"));e.writeInt(a(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new c.CborReader(e);const r=t.readStartArray();if(r!==h)throw new u.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=f.ProposedProtocolParameterUpdates.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const a=t.readInt();t.readEndArray();const o=new Update(s,(0,l.EpochNo)(Number(a)));i(o,d,e,"f");return o}toCore(){return{epoch:a(this,o,"f"),proposedProtocolParameterUpdates:a(this,n,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=f.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return a(this,o,"f")}setEpoch(e){i(this,o,e,"f");i(this,d,void 0,"f")}proposedProtocolParameterUpdates(){return a(this,n,"f")}setProposedProtocolParameterUpdates(e){i(this,n,e,"f");i(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);i(this,o,t,"f");i(this,n,e,"f")}}t.Update=Update;o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Costmdls/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProposedProtocolParameterUpdates.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ProtocolParamUpdate.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/Update.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/ExUnitPrices.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/DrepVotingThresholds.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/PoolVotingThresholds.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Transaction.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Common/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/PlutusData/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/CBOR/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Certificates/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Update/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionBody/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionWitnessSet/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/AuxiliaryData/index.js"),t);i(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/TransactionUnspentOutput.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/const.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HD_WALLET_CIP_ID=t.MULTISIG_CIP_ID=void 0;t.MULTISIG_CIP_ID=1854;t.HD_WALLET_CIP_ID=1852},"../../node_modules/@cardano-sdk/core/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeoutError=t.NotImplementedError=t.InvalidProtocolParametersError=t.SerializationError=t.SerializationFailure=t.HandleOwnerChangeError=t.ProviderError=t.reasonToProviderFailure=t.statusCodeMapToProviderFailure=t.providerFailureToStatusCodeMap=t.ProviderFailure=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(a=t.ProviderFailure||(t.ProviderFailure={}));t.providerFailureToStatusCodeMap={[a.BadRequest]:400,[a.Forbidden]:403,[a.NotFound]:404,[a.Conflict]:409,[a.Unhealthy]:500,[a.Unknown]:500,[a.InvalidResponse]:500,[a.NotImplemented]:500,[a.ConnectionFailure]:500,[a.ServerUnavailable]:500};t.statusCodeMapToProviderFailure=new Map(Object.entries(t.providerFailureToStatusCodeMap).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(a).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:a.Unknown;t.reasonToProviderFailure=reasonToProviderFailure;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}t.ProviderError=ProviderError;class HandleOwnerChangeError extends i.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}t.HandleOwnerChangeError=HandleOwnerChangeError;var o;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(o=t.SerializationFailure||(t.SerializationFailure={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}t.SerializationError=SerializationError;class InvalidProtocolParametersError extends i.CustomError{constructor(e){super(e)}}t.InvalidProtocolParametersError=InvalidProtocolParametersError;class NotImplementedError extends i.CustomError{constructor(e){super(`Not implemented: ${e}`)}}t.NotImplementedError=NotImplementedError;class TimeoutError extends i.CustomError{constructor(e){super(`Timeout: ${e}`)}}t.TimeoutError=TimeoutError},"../../node_modules/@cardano-sdk/core/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.Serialization=t.Cardano=t.Asset=void 0;t.Asset=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js"));t.Cardano=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js"));t.Serialization=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/Provider/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/const.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/CardanoNode/index.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.calculateStabilityWindowSlotsCount=void 0;const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;t.calculateStabilityWindowSlotsCount=calculateStabilityWindowSlotsCount},"../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.coalesceValueQuantities=void 0;const o=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js"));const n=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const coalesceValueQuantities=e=>({assets:o.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:n.BigIntMath.sum(e.map(({coins:e})=>e))});t.coalesceValueQuantities=coalesceValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setInConwayEra=t.inConwayEra=void 0;t.inConwayEra=false;const setInConwayEra=e=>t.inConwayEra=e;t.setInConwayEra=setInConwayEra},"../../node_modules/@cardano-sdk/core/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.metadatum=t.util=void 0;t.util=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/conwayEra.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/calcStabilityWindow.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js"),t);o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js"),t);t.metadatum=a(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js"));o(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/metadatum.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.metadatumToJson=t.jsonToMetadatum=t.asMetadatumArray=t.asMetadatumMap=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};t.asMetadatumMap=asMetadatumMap;const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};t.asMetadatumArray=asMetadatumArray;const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const r=[];for(const i of e)r.push((0,t.jsonToMetadatum)(i));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const a=new Map;for(const o in e){const n=e[o];a.set((0,t.jsonToMetadatum)(o),(0,t.jsonToMetadatum)(n))}return a}}};t.jsonToMetadatum=jsonToMetadatum;const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const r=[];for(const i of e)r.push((0,t.metadatumToJson)(i));return r}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const a={};for(const[o,n]of e.entries())a[(0,t.metadatumToJson)(o)]=(0,t.metadatumToJson)(n);return a}}};t.metadatumToJson=metadatumToJson},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.utf8ToHex=t.utf8ToBytes=t.hexToBytes=t.bytesToHex=void 0;const bytesToHex=e=>s.from(e).toString("hex");t.bytesToHex=bytesToHex;const hexToBytes=e=>s.from(e,"hex");t.hexToBytes=hexToBytes;const utf8ToBytes=e=>s.from(e,"utf8");t.utf8ToBytes=utf8ToBytes;const utf8ToHex=e=>s.from(e,"utf8").toString("hex");t.utf8ToHex=utf8ToHex},"../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/core/dist/cjs/util/misc/encoding.js"),t)},"../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.jsonToNativeScript=t.nativeScriptPolicyId=void 0;const o=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Serialization/Scripts/NativeScript/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Script.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const nativeScriptPolicyId=e=>(0,c.PolicyId)(n.NativeScript.fromCore(e).hash());t.nativeScriptPolicyId=nativeScriptPolicyId;const jsonToNativeScript=e=>{let r;if(!e.type){throw new l.SerializationError(l.SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":r={__type:d.ScriptType.Native,keyHash:o.Ed25519KeyHashHex(e.keyHash),kind:d.NativeScriptKind.RequireSignature};break;case"all":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAllOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[s]));break;case"any":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireAnyOf,scripts:new Array};for(let i=0;i<e.scripts.length;++i)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[i]));break;case"atLeast":{const a=Number.parseInt(e.required);r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireNOf,required:a,scripts:new Array};for(let n=0;n<e.scripts.length;++n)r.scripts.push((0,t.jsonToNativeScript)(e.scripts[n]));break}case"before":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeBefore,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;case"after":r={__type:d.ScriptType.Native,kind:d.NativeScriptKind.RequireTimeAfter,slot:(0,u.Slot)(Number.parseInt(e.slot))};break;default:throw new l.SerializationError(l.SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return r};t.jsonToNativeScript=jsonToNativeScript},"../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.promiseTimeout=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const promiseTimeout=(e,t)=>{let r;return Promise.race([e,new Promise((e,i)=>r=setTimeout(()=>i(new s.TimeoutError("Failed to resolve the promise in time")),t))]).finally(()=>{if(r)clearTimeout(r)})};t.promiseTimeout=promiseTimeout},"../../node_modules/@cardano-sdk/core/dist/cjs/util/slotCalc.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.epochSlotsCalcFactory=t.epochSlotsCalc=t.createSlotEpochInfoCalc=t.createSlotTimeCalc=t.createSlotEpochCalc=t.EraSummaryError=void 0;const i=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Block.js");const o=s(r("../../node_modules/lodash/groupBy.js"));const n=s(r("../../node_modules/lodash/last.js"));const d=s(r("../../node_modules/lodash/memoize.js"));const c=s(r("../../node_modules/lodash/orderBy.js"));class EraSummaryError extends i.CustomError{}t.EraSummaryError=EraSummaryError;const createSlotEpochCalcImpl=e=>{const t=Object.values((0,o.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot);return e=>{const t=(0,c.default)(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let i;for(let a=0;a<t.length;a++){i=t[a];const o=t[a+1];s+=Math.floor((((null==o?void 0:o.start.slot)||e)-i.start.slot)/i.parameters.epochLength)}return{epochEraSummary:i,epochNo:s}}};t.createSlotEpochCalc=(0,d.default)(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,a.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values((0,o.default)(e,"start.slot")).map(n.default);const r=(0,c.default)(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};t.createSlotTimeCalc=createSlotTimeCalc;const createSlotEpochInfoCalc=e=>{const r=(0,t.createSlotTimeCalc)(e);const s=createSlotEpochCalcImpl(e);return e=>{const{epochNo:t,epochEraSummary:i}=s(e);const o=i.start.slot+Math.floor((e-i.start.slot)/i.parameters.epochLength)*i.parameters.epochLength;const n=o+i.parameters.epochLength-1;return{epochNo:(0,a.EpochNo)(t),firstSlot:{date:r((0,a.Slot)(o)),slot:(0,a.Slot)(o)},lastSlot:{date:r((0,a.Slot)(n)),slot:(0,a.Slot)(n)}}}};t.createSlotEpochInfoCalc=createSlotEpochInfoCalc;const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let i=0;const o=t.length-1;const checkNextEraSummary=()=>i<o&&s>=t[i+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())i++};findNextEraSummary();while(r!==e){s+=t[i].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[i];return{eraSummary:n,firstSlot:(0,a.Slot)(s),lastSlot:(0,a.Slot)(s+n.parameters.epochLength-1)}};t.epochSlotsCalc=(0,d.default)(epochSlotsCalcImplementation);t.epochSlotsCalcFactory=(0,d.default)(e=>(0,d.default)(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.subtractValueQuantities=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/index.js");const subtractValueQuantities=e=>({assets:i.util.subtractTokenMaps(e.map(({assets:e})=>e)),coins:s.BigIntMath.subtract(e.map(({coins:e})=>e))});t.subtractValueQuantities=subtractValueQuantities},"../../node_modules/@cardano-sdk/core/dist/cjs/util/time.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TimeSpan=t.Days=t.Hours=t.Minutes=t.Seconds=t.Milliseconds=void 0;const Milliseconds=e=>e;t.Milliseconds=Milliseconds;const Seconds=e=>e;t.Seconds=Seconds;const Minutes=e=>e;t.Minutes=Minutes;const Hours=e=>e;t.Hours=Hours;const Days=e=>e;t.Days=Days;t.Hours.toDays=e=>e/24;t.Days.toHours=e=>24*e;t.Minutes.toHours=e=>e/60;t.Hours.toMinutes=e=>60*e;t.Seconds.toMinutes=e=>e/60;t.Minutes.toSeconds=e=>60*e;t.Seconds.toMilliseconds=e=>1e3*e;t.Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(t.Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(t.Seconds.toMilliseconds(t.Minutes.toSeconds(t.Hours.toMinutes(e))))}getTotalDays(){return t.Hours.toDays(this.getTotalHours())}getTotalHours(){return t.Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return t.Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return t.Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return(0,t.Days)(Math.floor(this.getTotalDays()))}getHours(){return(0,t.Hours)(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return(0,t.Minutes)(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return(0,t.Seconds)(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return(0,t.Milliseconds)(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=(0,t.Milliseconds)(0);this.elapsed=e}}t.TimeSpan=TimeSpan},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tokenTransferInspector.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.tokenTransferInspector=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const l=s(r("../../node_modules/lodash/uniq.js"));const coalesceByAddress=e=>{const t=e.reduce((e,t)=>{var r;if(!e.has(t.address))e.set(t.address,[]);null===(r=e.get(t.address))||void 0===r?void 0:r.push(t);return e},new Map);const r=new Map;for(const[s,i]of t)r.set(s,(0,o.coalesceValueQuantities)(i.map(e=>e.value)));return r};const initializeAddressMap=e=>new Map(e.map(e=>[e,{assets:new Map,coins:0n}]));const updateFromAddressMap=(e,t,r)=>{var s;if(r.coins<0n)e.get(t).coins=r.coins;var i;for(const[a,o]of null!==(i=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==i?i:[])if(o<0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(a,o)}};const updateToAddressMap=(e,t,r)=>{var s;if(r.coins>0n)e.get(t).coins=r.coins;var i;for(const[a,o]of null!==(i=null===(s=r.assets)||void 0===s?void 0:s.entries())&&void 0!==i?i:[])if(o>0n){var n;null===(n=e.get(t).assets)||void 0===n?void 0:n.set(a,o)}};const computeNetDifferences=(e,t,r,s)=>{for(const[i,a]of e.entries()){var o;const n=null!==(o=t.get(i))&&void 0!==o?o:{assets:new Map,coins:0n};const c=(0,d.subtractValueQuantities)([n,a]);updateFromAddressMap(r,i,c);updateToAddressMap(s,i,c)}for(const[l,u]of t.entries())if(!e.has(l))updateToAddressMap(s,l,u)};const removeZeroBalanceEntries=e=>{for(const[t,r]of e.entries()){var s;if(0n===r.coins&&(null===(s=r.assets)||void 0===s?void 0:s.size)===0)e.delete(t)}};const intoTokenTransferValue=async({logger:e,assetProvider:t,timeout:r,addressMap:s})=>{const i=new Map;for(const[a,o]of s.entries()){const n=o.coins;const d=(0,l.default)(o.assets&&o.assets.size>0?[...o.assets.keys()]:[]);const u=new Map;if(d.length>0){const f=await (0,c.tryGetAssetInfos)({assetIds:d,assetProvider:t,logger:e,timeout:r});for(const h of f){var m;var p;const v=null!==(p=null===(m=o.assets)||void 0===m?void 0:m.get(h.assetId))&&void 0!==p?p:0n;u.set(h.assetId,{amount:v,assetInfo:h})}}i.set(a,{assets:u,coins:n})}return i};const tokenTransferInspector=({inputResolver:e,fromAddressAssetProvider:t,toAddressAssetProvider:r,timeout:s,logger:o})=>async d=>{let c;try{const u=await (0,n.promiseTimeout)((0,i.resolveInputs)(d.body.inputs,e),s);c=u.resolvedInputs}catch(f){if(f instanceof a.TimeoutError)o.error("Error: Inputs resolution timed out");c=[]}const h=coalesceByAddress(c);const m=coalesceByAddress(d.body.outputs);const p=(0,l.default)([...h.keys(),...m.keys()]);const v=initializeAddressMap(p);const _=initializeAddressMap(p);computeNetDifferences(h,m,v,_);removeZeroBalanceEntries(v);removeZeroBalanceEntries(_);return{fromAddress:await intoTokenTransferValue({addressMap:v,assetProvider:t,logger:o,timeout:s}),toAddress:await intoTokenTransferValue({addressMap:_,assetProvider:r,logger:o,timeout:s})}};t.tokenTransferInspector=tokenTransferInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/transactionSummaryInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.transactionSummaryInspector=t.getCollateral=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/errors.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/util/index.js");const l=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const u=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const f=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js");const getCollateral=async(e,t,r)=>{if(!e.body.collaterals||0===e.body.collaterals.length)return 0n;const s=(await (0,i.resolveInputs)(e.body.collaterals,t)).resolvedInputs.filter(e=>r.includes(e.address));const o=a.BigIntMath.sum(s.map(({value:e})=>e.coins));if(e.body.collateralReturn){if(!r.includes(e.body.collateralReturn.address))return o;var n;return null!==(n=a.BigIntMath.max([o-e.body.collateralReturn.value.coins,0n]))&&void 0!==n?n:0n}return o};t.getCollateral=getCollateral;const totalInputsValue=e=>{const t=e.resolvedInputs.map(e=>e.value);return(0,d.coalesceValueQuantities)(t)};const totalOutputsValue=e=>(0,d.coalesceValueQuantities)(e.map(e=>e.value));const mintInspectionToTokenMap=e=>new Map(e.map(e=>[s.AssetId.fromParts(e.policyId,e.assetName),e.quantity]));const getImplicitAssets=async e=>{const t=mintInspectionToTokenMap(await (0,i.assetsMintedInspector)(e));const r=mintInspectionToTokenMap(await (0,i.assetsBurnedInspector)(e));return(0,n.coalesceTokenMaps)([t,r])};const getUnaccountedFunds=async(e,t,r,s,i=new Map)=>{const a=totalInputsValue(t);const o=totalOutputsValue(e.body.outputs);a.assets=(0,n.coalesceTokenMaps)([a.assets,i]);a.coins+=r;o.coins+=s;return(0,u.subtractValueQuantities)([o,a])};const intoAssetInfoWithAmount=async({assetProvider:e,logger:t,timeout:r,tokenMap:s})=>{if(!s)return new Map;const i=s&&s.size>0?[...s.keys()]:[];const a=new Map;if(i.length>0){const o=await (0,f.tryGetAssetInfos)({assetIds:i,assetProvider:e,logger:t,timeout:r});for(const n of o){var d;const c=null!==(d=null==s?void 0:s.get(n.assetId))&&void 0!==d?d:0n;a.set(n.assetId,{amount:c,assetInfo:n})}}return a};const transactionSummaryInspector=({inputResolver:e,addresses:r,rewardAccounts:s,protocolParameters:a,assetProvider:d,dRepKeyHash:u,timeout:f,logger:h})=>async m=>{let p;try{p=await (0,l.promiseTimeout)((0,i.resolveInputs)(m.body.inputs,e),f)}catch(v){if(v instanceof o.TimeoutError)h.error("Error: Inputs resolution timed out");p={resolvedInputs:[],unresolvedInputs:m.body.inputs}}const _=m.body.fee;const w=(0,c.computeImplicitCoin)(a,{certificates:m.body.certificates,withdrawals:m.body.withdrawals},s||[],u);const y=await (0,t.getCollateral)(m,e,r);const g=w.withdrawals||0n;const b=await (0,i.totalAddressOutputsValueInspector)(r)(m);const P=await (0,i.totalAddressInputsValueInspector)(r,e)(m);const S=g+(w.reclaimDeposit||0n)-(w.deposit||0n);const C=await getImplicitAssets(m);const k={assets:(0,n.subtractTokenMaps)([b.assets,P.assets]),coins:b.coins-(P.coins+g)};return{assets:await intoAssetInfoWithAmount({assetProvider:d,logger:h,timeout:f,tokenMap:k.assets}),coins:k.coins,collateral:y,deposit:w.deposit||0n,fee:_,resolvedInputs:p.resolvedInputs,returnedDeposit:w.reclaimDeposit||0n,unresolved:{inputs:p.unresolvedInputs,value:await getUnaccountedFunds(m,p,S,_,C)}}};t.transactionSummaryInspector=transactionSummaryInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/tryGetAssetInfos.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryGetAssetInfos=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/Asset.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/promiseTimeout.js");const tryGetAssetInfos=async({assetIds:e,assetProvider:t,logger:r,timeout:a})=>{try{return await (0,i.promiseTimeout)(t.getAssets({assetIds:e,extraData:{nftMetadata:true,tokenMetadata:true}}),a)}catch(o){r.error("Error: Failed to retrieve assets",o);return e.map(e=>{const t=s.AssetId.getPolicyId(e);const r=s.AssetId.getAssetName(e);return{assetId:e,fingerprint:s.AssetFingerprint.fromParts(t,r),name:r,policyId:t,quantity:0n,supply:0n}})}};t.tryGetAssetInfos=tryGetAssetInfos},"../../node_modules/@cardano-sdk/core/dist/cjs/util/txInspector.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createTxInspector=t.metadataInspector=t.assetsBurnedInspector=t.assetsMintedInspector=t.mintInspector=t.withdrawalInspector=t.poolRetirementInspector=t.poolRegistrationInspector=t.stakeKeyRegistrationInspector=t.stakeKeyDeregistrationInspector=t.delegationInspector=t.valueReceivedInspector=t.valueSentInspector=t.sentInspector=t.signedCertificatesInspector=t.getCertificatesByType=t.totalAddressOutputsValueInspector=t.totalAddressInputsValueInspector=t.resolveInputs=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/types/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/Cardano/Address/index.js");const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/coalesceValueQuantities.js");const n=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/nativeScript.js");const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/Asset/util/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/util/subtractValueQuantities.js");const resolveInputs=async(e,t)=>{const r=[];const s=[];for(const i of e){const a=await t.resolveInput(i);if(a)r.push({address:a.address,index:i.index,txId:i.txId,value:a.value});else s.push(i)}return{resolvedInputs:r,unresolvedInputs:s}};t.resolveInputs=resolveInputs;const totalAddressInputsValueInspector=(e,r)=>async s=>{const{resolvedInputs:i}=await (0,t.resolveInputs)(s.body.inputs,r);const n=i.filter(t=>(0,a.isAddressWithin)(e)(t));const d=n.map(e=>e.value);return(0,o.coalesceValueQuantities)(d)};t.totalAddressInputsValueInspector=totalAddressInputsValueInspector;const totalAddressOutputsValueInspector=e=>async t=>{const r=t.body.outputs.filter(t=>(0,a.isAddressWithin)(e)(t));return(0,o.coalesceValueQuantities)(r.map(e=>e.value))};t.totalAddressOutputsValueInspector=totalAddressOutputsValueInspector;const getCertificatesByType=(e,t,r)=>{var i;if(!e.body.certificates||0===e.body.certificates.length)return[];const o=r?null===(i=e.body.certificates)||void 0===i?void 0:i.filter(e=>(0,s.isCertType)(e,r)):e.body.certificates;return o.filter(e=>{if((0,s.isCertType)(e,s.StakeCredentialCertificateTypes)){return t.some(t=>a.RewardAccount.toHash(t)===e.stakeCredential.hash)}if((0,s.isCertType)(e,[s.CertificateType.PoolRegistration]))return t.includes(e.poolParameters.rewardAccount);return false})};t.getCertificatesByType=getCertificatesByType;const signedCertificatesInspector=(e,r)=>async s=>(0,t.getCertificatesByType)(s,e,r);t.signedCertificatesInspector=signedCertificatesInspector;const sentInspector=({addresses:e,rewardAccounts:r,inputResolver:s})=>{return async i=>{const o=(null==r?void 0:r.length)?await (0,t.signedCertificatesInspector)(r)(i):[];let n=[];if(e){const{resolvedInputs:d}=await (0,t.resolveInputs)(i.body.inputs,s);const c=d.filter(t=>(0,a.isAddressWithin)(e)(t));n=c.map(e=>({address:e.address,index:e.index,txId:e.txId}))}return{certificates:o,inputs:n}}};t.sentInspector=sentInspector;const valueSentInspector=(e,r)=>async s=>{let i=new Map;if(0===(await (0,t.sentInspector)({addresses:e,inputResolver:r})(s)).inputs.length)return{coins:0n};const a=await (0,t.totalAddressOutputsValueInspector)(e)(s);const o=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([o,a]);if(n.assets)i=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:i.size>0?i:void 0,coins:n.coins<0n?0n:n.coins}};t.valueSentInspector=valueSentInspector;const valueReceivedInspector=(e,r)=>async s=>{let i=new Map;const a=await (0,t.totalAddressOutputsValueInspector)(e)(s);const o=await (0,t.totalAddressInputsValueInspector)(e,r)(s);const n=(0,c.subtractValueQuantities)([a,o]);if(n.assets)i=(0,d.removeNegativesFromTokenMap)(n.assets);return{assets:i.size>0?i:void 0,coins:n.coins<0n?0n:n.coins}};t.valueReceivedInspector=valueReceivedInspector;var l;const certificateInspector=e=>{return async t=>{var r;return null!==(l=null===(r=t.body.certificates)||void 0===r?void 0:r.filter(t=>t.__typename===e))&&void 0!==l?l:[]}};t.delegationInspector=certificateInspector(s.CertificateType.StakeDelegation);t.stakeKeyDeregistrationInspector=certificateInspector(s.CertificateType.StakeDeregistration);t.stakeKeyRegistrationInspector=certificateInspector(s.CertificateType.StakeRegistration);t.poolRegistrationInspector=certificateInspector(s.CertificateType.PoolRegistration);t.poolRetirementInspector=certificateInspector(s.CertificateType.PoolRetirement);const withdrawalInspector=async e=>{var t;return(null===(t=e.body.withdrawals)||void 0===t?void 0:t.length)?i.BigIntMath.sum(e.body.withdrawals.map(({quantity:e})=>e)):0n};t.withdrawalInspector=withdrawalInspector;const mintInspector=e=>{return async t=>{var r,i;const a=[];const o=new Map;if(!t.body.mint)return a;const d=[...(null===(r=t.auxiliaryData)||void 0===r?void 0:r.scripts)||[],...(null===(i=t.witness)||void 0===i?void 0:i.scripts)||[]];for(const c of d){switch(c.__type){case s.ScriptType.Native:{const l=(0,n.nativeScriptPolicyId)(c);if(o.has(l))continue;o.set(l,c);break}case s.ScriptType.Plutus:default:}}for(const[u,f]of t.body.mint.entries()){const[h,m]=[s.AssetId.getPolicyId(u),s.AssetId.getAssetName(u)];const p={assetName:m,fingerprint:s.AssetFingerprint.fromParts(h,m),policyId:h,quantity:f,script:o.get(h)};if(e(p.quantity))a.push(p)}return a}};t.mintInspector=mintInspector;t.assetsMintedInspector=(0,t.mintInspector)(e=>e>0);t.assetsBurnedInspector=(0,t.mintInspector)(e=>e<0);var u;const metadataInspector=async e=>{var t;return null!==(u=null===(t=e.auxiliaryData)||void 0===t?void 0:t.blob)&&void 0!==u?u:new Map};t.metadataInspector=metadataInspector;const createTxInspector=e=>async t=>{const r=await Promise.all(Object.entries(e).map(async([e,r])=>{const s=await r(t);return{key:e,result:s}}));return r.reduce((e,{key:t,result:r})=>{e[t]=r;return e},{})};t.createTxInspector=createTxInspector},"../../node_modules/@cardano-sdk/core/dist/cjs/util/utxo.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createUtxoId=void 0;const createUtxoId=(e,t)=>`${e}:${t}`;t.createUtxoId=createUtxoId},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js":(e,t,r)=>{"use strict";r.d(t,{ImageMediaType:()=>ImageMediaType,MediaType:()=>MediaType,Uri:()=>Uri});var s=r("../../node_modules/@biglup/is-cid/dist/esm/index.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const looksLikeIpfsUrlWithoutProtocol=e=>{const[t]=e.split("/");if(!t)return false;return s.isValid(t)};const Uri=e=>{if(/^[a-z]+:\/\/.+/.test(e)){return e}if(e.startsWith("data:")){return e}if(looksLikeIpfsUrlWithoutProtocol(e)){return`ipfs://${e}`}throw new i.InvalidStringError('Expected Uri to start with "[protocol]:", where protocol is usually "https", "ipfs" or "data"')};const ImageMediaType=e=>{if(/^image\/.+$/.test(e)){return e}throw new i.InvalidStringError('Expected media type to be "image/*"')};const MediaType=e=>{if(/^[a-z]+\/.+$/.test(e)){return e}throw new i.InvalidStringError('Expected media type to be "*/*"')}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js":(e,t,r)=>{"use strict";r.d(t,{AssetNameLabel:()=>AssetNameLabel,AssetNameLabelNum:()=>l});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");let a=[0,7,14,9,28,27,18,21,56,63,54,49,36,35,42,45,112,119,126,121,108,107,98,101,72,79,70,65,84,83,90,93,224,231,238,233,252,251,242,245,216,223,214,209,196,195,202,205,144,151,158,153,140,139,130,133,168,175,166,161,180,179,186,189,199,192,201,206,219,220,213,210,255,248,241,246,227,228,237,234,183,176,185,190,171,172,165,162,143,136,129,134,147,148,157,154,39,32,41,46,59,60,53,50,31,24,17,22,3,4,13,10,87,80,89,94,75,76,69,66,111,104,97,102,115,116,125,122,137,142,135,128,149,146,155,156,177,182,191,184,173,170,163,164,249,254,247,240,229,226,235,236,193,198,207,200,221,218,211,212,105,110,103,96,117,114,123,124,81,86,95,88,77,74,67,68,25,30,23,16,5,2,11,12,33,38,47,40,61,58,51,52,78,73,64,71,82,85,92,91,118,113,120,127,106,109,100,99,62,57,48,55,34,37,44,43,6,1,8,15,26,29,20,19,174,169,160,167,178,181,188,187,150,145,152,159,138,141,132,131,222,217,208,215,194,197,204,203,230,225,232,239,250,253,244,243];if("undefined"!=typeof Int32Array)a=new Int32Array(a);const crc8=(e,t=0)=>{let r=Math.trunc(t);for(const s of e)r=255&a[(r^s)&255];return r};const o=crc8;var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=8;const c="0";const AssetNameLabel=e=>e;const l={ReferenceNFT:100,UserFT:333,UserNFT:222,UserRFT:444,VirtualHandle:0};const assertLabelNumInterval=e=>{if(e<0||e>65535){throw new i.InvalidArgumentError("Label num",`Label ${e} out of range 0 - 65535.`)}};const checksum=e=>o(Uint8Array.from(n.from(e,"hex"))).toString(16).padStart(2,"0");const isInvalidChecksum=(e,t)=>t!==checksum(e);const isInvalidLength=e=>e.length!==d;const isInvalidBracket=(e,t)=>e!==c||t!==c;const assetNameLabelHexToNum=e=>{const t=e[0];const r=e[7];const s=e.slice(1,5);const i=e.slice(5,7);if(isInvalidLength(e)||isInvalidBracket(t,r)||isInvalidChecksum(s,i)){return null}return AssetNameLabel(Number.parseInt(s,16))};AssetNameLabel.decode=e=>{const t=e.slice(0,d);const r=e.slice(d);const i=assetNameLabelHexToNum(t);if(null===i){return null}return{content:(0,s.AssetName)(r),label:i}};AssetNameLabel.encode=(e,t)=>{assertLabelNumInterval(t);const r=t.toString(16).padStart(4,c);return(0,s.AssetName)(`${c}${r}${checksum(r)}${c}${e}`)}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AssetNameLabel:()=>c.AssetNameLabel,AssetNameLabelNum:()=>c.AssetNameLabelNum,ImageMediaType:()=>u.ImageMediaType,InvalidFileError:()=>InvalidFileError,MediaType:()=>u.MediaType,NftMetadata:()=>g,Uri:()=>u.Uri,util:()=>s});var s={};r.r(s);r.d(s,{coalesceTokenMaps:()=>i.coalesceTokenMaps,getAssetNameAsText:()=>d.getAssetNameAsText,isValidHandle:()=>isValidHandle,removeNegativesFromTokenMap:()=>removeNegativesFromTokenMap,subtractMaps:()=>subtractMaps,subtractTokenMaps:()=>subtractTokenMaps});var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");const removeNegativesFromTokenMap=e=>{const t=new Map(e);for(const[r,s]of t)if(s<0)t.delete(r);return t};var a=r("../../node_modules/lodash/uniq.js");const subtractMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,i]of e.entries())if(0n!==i)r.set(s,i);return r}if(!e){const o=new Map;for(const[n,d]of t.entries())if(0n!==d)o.set(n,-d);return o}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=a(l);for(const v of p){const _=e.get(v);const w=t.get(v);const y=_-w;if(0n!==y)c.set(v,y)}return c};const subtractTokenMaps=e=>{if(!e||0===e.length)return;return e.reduce(subtractMaps)};const o=new RegExp(/^[a-z0-9_.-]{1,15}$/);const n=new RegExp(/(?:^[a-z0-9_.-]{1,15}$)|(?:^(?!.{29})[a-z0-9_.-]+@[a-z0-9_.-]{1,15}$)/g);const isValidHandle=e=>{n.lastIndex=0;return o.test(e)||n.test(e)||"0|0"===e};var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/NftMetadata/types.js");var f=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidFileError extends f.CustomError{}var h=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");const asString=e=>"string"==typeof e?e:void 0;var m=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var p=r("../../node_modules/lodash/difference.js");var v=r("../../node_modules/buffer/index.js")["Buffer"];const isString=e=>"string"==typeof e;const _=/^\d+\.?\d?$/;const metadatumToString=e=>{if(Array.isArray(e)){const t=e.map(asString);if(t.some(e=>void 0===e)){return}return t.join("")}return asString(e)};const mapOtherProperties=(e,t)=>{const r=p([...e.keys()].filter(isString),t);if(0===r.length)return;return r.reduce((t,r)=>{t.set(r,e.get(r));return t},new Map)};const missingFieldLogMessage=(e,t,r)=>`Omitting cip25 ${r?"root":"file"} metadata: missing "${e}". AssetId: ${t}`;const mapFile=(e,t,r)=>{const s=(0,h.asMetadatumMap)(e);if(!s)throw new InvalidFileError;const i=asString(s.get("name"));const a=asString(s.get("mediaType"));if(!a){r.warn(missingFieldLogMessage("mediaType",t,false));return null}const o=metadatumToString(s.get("src"));if(!o){r.warn(missingFieldLogMessage("source",t,false));return null}return{mediaType:(0,u.MediaType)(a),name:i,otherProperties:mapOtherProperties(s,["mediaType","name","src"]),src:(0,u.Uri)(o)}};const getPolicyMetadata=(e,t)=>(0,h.asMetadatumMap)(e.get(t)||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&v.from(r).toString("hex")===t)return s})());const getAssetMetadata=(e,t)=>(0,h.asMetadatumMap)(e.get(t)||e.get(v.from(t,"hex").toString("utf8"))||(()=>{for(const[r,s]of e.entries())if(ArrayBuffer.isView(r)&&v.from(r).toString("hex")===t)return s})());const getName=(e,t,r,s,i=false)=>{const a=asString(e.get("name"));if(a)return a;if("1.0"===t){try{return l.AssetName.toUTF8(r.name,i)}catch(o){s.warn(o)}}};const parseVersion=e=>{if(!e)return"1.0";if("bigint"==typeof e){return`${e}.0`}const t=asString(e);if(t&&_.test(t)){return`${Number(t)}.0`}};const fromMetadatum=(e,t,r,s=false)=>{const i=null==t?void 0:t.get(721n);if(!i)return null;const a=(0,h.asMetadatumMap)(i);if(!a)return null;const o=getPolicyMetadata(a,e.policyId);if(!o)return null;const n=parseVersion(o.get("version"));if(!n)return null;const d=getAssetMetadata(o,e.name);if(!d)return null;const c=getName(d,n,e,r,true);const f=metadatumToString(d.get("image"));const p=l.AssetId.fromParts(e.policyId,e.name);if(s&&!c||!f){r.warn(missingFieldLogMessage(c?"image":"name",p,true));return null}const v=asString(d.get("mediaType"));const _=(0,h.asMetadatumArray)(d.get("files"));try{return{description:metadatumToString(d.get("description")),files:null==_?void 0:_.map(e=>mapFile(e,p,r)).filter(m.isNotNil),image:(0,u.Uri)(f),mediaType:v?(0,u.ImageMediaType)(v):void 0,name:c||"",otherProperties:mapOtherProperties(d,["name","image","mediaType","description","files"]),version:n}}catch(w){r.warn("Invalid CIP-25 metadata",d,w);return null}};var w=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");const tryCoerce=(e,t,r)=>{if("string"!=typeof e)return;try{return t(e)}catch(s){r.warn(s instanceof Error?s.message:s)}};const mapOtherPropertyValue=(e,t)=>{if("string"==typeof e||(0,y.isPlutusBigInt)(e)||(0,y.isPlutusBoundedBytes)(e))return e;if((0,y.isPlutusMap)(e)){const r=fromPlutusData_mapOtherProperties((0,y.tryConvertPlutusMapToUtf8Record)(e,t),t);return new Map(Object.entries(r))}const s=(0,y.isPlutusList)(e)?e.items:e.fields.items;return s.map(e=>mapOtherPropertyValue(e,t))};const fromPlutusData_mapOtherProperties=(e,t)=>Object.entries(e).reduce((e,[r,s])=>{if(void 0!==s)e.set(r,mapOtherPropertyValue(s,t));return e},new Map);const undefinedIfEmpty=e=>e.size>0?e:void 0;const fromPlutusData_mapFile=(e,t)=>{if(!(0,y.isPlutusMap)(e)){t.warn('expected "files[n]" to be a map');return}const{mediaType:r,src:s,name:i,...a}=(0,y.tryConvertPlutusMapToUtf8Record)(e,t);const o=tryCoerce(r,u.MediaType,t);const n=tryCoerce(s,u.Uri,t);if("string"!=typeof n||"string"!=typeof o){t.warn('invalid "files[n].src" or "files[n].mediaType"');return}return{mediaType:o,name:asString(i),otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(a,t)),src:n}};const mapFiles=(e,t)=>{if(!e)return;if(!(0,y.isPlutusList)(e)){t.warn('expected "files" to be a list');return}return e.items.map(e=>fromPlutusData_mapFile(e,t)).filter(m.isNotNil)};const getConditionalValidators=(e,t)=>({isNameValid:r=>{if("string"==typeof r)return true;if(void 0===r){if(e){t.debug('Invalid PlutusData: "name" is required');return false}return true}t.debug('Invalid PlutusData: "name" must be utf8 bounded bytes');return false},isValidDatumShape:r=>{const s=e?3:2;const i=(0,y.isConstrPlutusData)(r)&&0n===r.constructor&&r.fields.items.length>=s;if(!i)t.debug(`Invalid PlutusData: expecting ConstrPlutusData with 0th constructor and ${s} items`);return i}});const fromPlutusData=(e,t,r=false)=>{const s=(0,w.contextLogger)(t,"NftMetadata.fromPlutusData");const i=getConditionalValidators(r,s);if(!i.isValidDatumShape(e)){return null}const[a,o]=e.fields.items;if(!(0,y.isPlutusMap)(a)||!(0,y.isPlutusBigInt)(o)){s.debug("Invalid PlutusData: expecting a map at [0] and integer at [1]");return null}const n=(0,y.tryConvertPlutusMapToUtf8Record)(a,s);const{name:d,image:c,mediaType:l,description:f,files:h,...m}=n;if(!i.isNameValid(d)){return null}if("string"!=typeof c){s.debug('Invalid PlutusData: "image" must be UTF-8 bounded bytes');return null}const p=tryCoerce(c,u.Uri,s);if(!p){return null}return{description:asString(f),files:mapFiles(h,s),image:p,mediaType:tryCoerce(l,u.ImageMediaType,s),name:d||"",otherProperties:undefinedIfEmpty(fromPlutusData_mapOtherProperties(m,s)),version:o.toString()}};const g={fromMetadatum:fromMetadatum,fromPlutusData:fromPlutusData}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js":(e,t,r)=>{"use strict";r.d(t,{coalesceTokenMaps:()=>coalesceTokenMaps});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const coalesceTokenMaps=e=>{const t=new Map;for(const r of e.filter(s.isNotNil)){for(const[i,a]of r.entries()){const o=t.get(i)||0n;t.set(i,o+a)}}if(0===t.size){return}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js":(e,t,r)=>{"use strict";r.d(t,{getAssetNameAsText:()=>getAssetNameAsText});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const getAssetNameAsText=e=>{var t;const r=s.AssetId.getAssetName(e);const o=null===(t=i.AssetNameLabel.decode(r))||void 0===t?void 0:t.content;return a.from(o||r,"hex").toString("utf8")}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js":(e,t,r)=>{"use strict";r.d(t,{Address:()=>Address,AddressType:()=>p,CredentialType:()=>v,isAddress:()=>isAddress});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h;const m=1023;var p;(function(e){e[e["BasePaymentKeyStakeKey"]=0]="BasePaymentKeyStakeKey";e[e["BasePaymentScriptStakeKey"]=1]="BasePaymentScriptStakeKey";e[e["BasePaymentKeyStakeScript"]=2]="BasePaymentKeyStakeScript";e[e["BasePaymentScriptStakeScript"]=3]="BasePaymentScriptStakeScript";e[e["PointerKey"]=4]="PointerKey";e[e["PointerScript"]=5]="PointerScript";e[e["EnterpriseKey"]=6]="EnterpriseKey";e[e["EnterpriseScript"]=7]="EnterpriseScript";e[e["Byron"]=8]="Byron";e[e["RewardKey"]=14]="RewardKey";e[e["RewardScript"]=15]="RewardScript"})(p||(p={}));var v;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash"})(v||(v={}));class Address{static fromBytes(e){const t=f.from(e,"hex");const r=t[0]>>4;let s;switch(r){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:s=i.BaseAddress.unpackParts(r,t);break;case p.PointerKey:case p.PointerScript:s=l.PointerAddress.unpackParts(r,t);break;case p.EnterpriseKey:case p.EnterpriseScript:s=o.EnterpriseAddress.unpackParts(r,t);break;case p.RewardKey:case p.RewardScript:s=u.RewardAddress.unpackParts(r,t);break;case p.Byron:s=a.ByronAddress.unpackParts(r,t);break;default:throw new n.InvalidArgumentError("data","Invalid address raw data")}return s}toBytes(){let e;switch(__classPrivateFieldGet(this,h,"f").type){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:e=i.BaseAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.PointerKey:case p.PointerScript:e=l.PointerAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.EnterpriseKey:case p.EnterpriseScript:e=o.EnterpriseAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.RewardKey:case p.RewardScript:e=u.RewardAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;case p.Byron:e=a.ByronAddress.packParts(__classPrivateFieldGet(this,h,"f"));break;default:throw new Error("Invalid address")}return d.HexBlob.fromBytes(e)}static fromBase58(e){return Address.fromBytes(d.HexBlob.fromBytes(s.base58.decode(e)))}toBase58(){if(__classPrivateFieldGet(this,h,"f").type!==p.Byron)throw new Error("Only Byron addresses will be encoded in base58");return s.base58.encode(f.from(this.toBytes(),"hex"))}toBech32(){const e=s.bech32.toWords(f.from(this.toBytes(),"hex"));if(__classPrivateFieldGet(this,h,"f").type===p.Byron)throw new Error("Only Shelley addresses will be encoded in bech32");const t=Address.getBech32Prefix(__classPrivateFieldGet(this,h,"f").type,__classPrivateFieldGet(this,h,"f").networkId);const r=s.bech32.encode(t,e,m);return __classPrivateFieldGet(this,h,"f").type===p.RewardKey||(__classPrivateFieldGet(this,h,"f").type,p.RewardScript),r}static fromBech32(e){const{words:t}=s.bech32.decode(e,m);return Address.fromBytes(d.HexBlob.fromBytes(s.bech32.fromWords(t)))}static fromString(e){try{if(Address.isValidBech32(e))return Address.fromBech32(e);if(Address.isValidByron(e))return Address.fromBase58(e);return Address.fromBytes((0,d.HexBlob)(e))}catch{}return null}static isValidBech32(e){try{Address.fromBech32(e)}catch{return false}return true}static isValidByron(e){try{const t=Address.fromBase58(e);if(__classPrivateFieldGet(t,h,"f").type!==p.Byron)return false}catch{return false}return true}static isValid(e){return Address.isValidBech32(e)||Address.isValidByron(e)}asByron(){return a.ByronAddress.fromAddress(this)}asReward(){return u.RewardAddress.fromAddress(this)}asPointer(){return l.PointerAddress.fromAddress(this)}asEnterprise(){return o.EnterpriseAddress.fromAddress(this)}asBase(){return i.BaseAddress.fromAddress(this)}getType(){return __classPrivateFieldGet(this,h,"f").type}getNetworkId(){if(__classPrivateFieldGet(this,h,"f").type===p.Byron){var e;if((null===(e=__classPrivateFieldGet(this,h,"f").byronAddressContent)||void 0===e?void 0:e.attrs.magic)===void 0)return c.NetworkId.Mainnet;return c.NetworkId.Testnet}return __classPrivateFieldGet(this,h,"f").networkId}getProps(){return __classPrivateFieldGet(this,h,"f")}static getBech32Prefix(e,t){let r="";switch(e){case p.BasePaymentKeyStakeKey:case p.BasePaymentScriptStakeKey:case p.BasePaymentKeyStakeScript:case p.BasePaymentScriptStakeScript:case p.PointerKey:case p.PointerScript:case p.EnterpriseKey:case p.EnterpriseScript:r="addr";break;case p.RewardKey:case p.RewardScript:r="stake";break;default:throw new Error("Invalid address")}r+=0===t?"_test":"";return r}constructor(e){h.set(this,void 0);__classPrivateFieldSet(this,h,e,"f")}}h=new WeakMap;const isAddress=e=>Address.isValid(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js":(e,t,r)=>{"use strict";r.d(t,{BaseAddress:()=>BaseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;class BaseAddress{static fromCredentials(e,t,r){let i=s.AddressType.BasePaymentKeyStakeKey;if(t.type===s.CredentialType.ScriptHash)i|=1;if(r.type===s.CredentialType.ScriptHash)i|=2;return new BaseAddress({delegationPart:r,networkId:e,paymentPart:t,type:i})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakeCredential(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({delegationPart:__classPrivateFieldGet(this,l,"f"),networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.BasePaymentKeyStakeKey:case s.AddressType.BasePaymentScriptStakeKey:case s.AddressType.BasePaymentKeyStakeScript:case s.AddressType.BasePaymentScriptStakeScript:t=new BaseAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex"),o.from(e.delegationPart.hash,"hex")])}static unpackParts(e,t){if(57!==t.length)throw new a.InvalidArgumentError("data","Base address data length should be 57 bytes long.");const r=15&t[0];const n=(0,i.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));const d=(0,i.Hash28ByteBase16)(o.from(t.slice(29,57)).toString("hex"));const c=e===s.AddressType.BasePaymentKeyStakeScript||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;const l=e===s.AddressType.BasePaymentScriptStakeKey||e===s.AddressType.BasePaymentScriptStakeScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash;return new s.Address({delegationPart:{hash:d,type:c},networkId:r,paymentPart:{hash:n,type:l},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.delegationPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js":(e,t,r)=>{"use strict";r.d(t,{ByronAddress:()=>ByronAddress,ByronAddressType:()=>p});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@foxglove/crc/dist/esm/src/index.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m;var p;(function(e){e[e["PubKey"]=0]="PubKey";e[e["Script"]=1]="Script";e[e["Redeem"]=2]="Redeem"})(p||(p={}));class ByronAddress{static fromCredentials(e,t,r){return new ByronAddress({byronAddressContent:{attrs:t,root:e,type:r},type:s.AddressType.Byron})}getAttributes(){return __classPrivateFieldGet(this,m,"f").attrs}getRoot(){return __classPrivateFieldGet(this,m,"f").root}getByronAddressType(){return __classPrivateFieldGet(this,m,"f").type}toAddress(){return new s.Address({byronAddressContent:__classPrivateFieldGet(this,m,"f"),type:__classPrivateFieldGet(this,h,"f")})}static fromAddress(e){return e.getProps().type===s.AddressType.Byron?new ByronAddress(e.getProps()):void 0}static packParts(e){const{root:t,attrs:r,type:s}=e.byronAddressContent;let o=0;if(r.derivationPath)++o;if(r.magic)++o;const n=new i.CborWriter;n.writeStartArray(3);n.writeByteString(f.from(t,"hex"));n.writeStartMap(o);if(r.derivationPath){const d=new i.CborWriter().writeByteString(f.from(r.derivationPath,"hex")).encode();n.writeInt(1);n.writeByteString(d)}if(r.magic){const c=new i.CborWriter().writeInt(r.magic).encode();n.writeInt(2);n.writeByteString(c)}n.writeInt(s);const l=f.from(n.encodeAsHex(),"hex");n.reset();n.writeStartArray(2);n.writeTag(a.CborTag.EncodedCborDataItem);n.writeByteString(l);n.writeInt((0,u.crc32)(l));return n.encode()}static unpackParts(e,t){let r=new o.CborReader(c.HexBlob.fromBytes(t));r.readStartArray();r.readTag();const i=r.readByteString();if(Number(r.readInt())!==(0,u.crc32)(i))throw new l.InvalidArgumentError("data","Invalid Byron raw data. Checksum doesnt match.");r=new o.CborReader(c.HexBlob.fromBytes(i));r.readStartArray();const a=(0,d.Hash28ByteBase16)(f.from(r.readByteString()).toString("hex"));r.readStartMap();let h;let m;while(r.peekState()!==n.CborReaderState.EndMap){const p=r.readInt();switch(p){case 1n:{const v=r.readByteString();m=c.HexBlob.fromBytes(new o.CborReader(c.HexBlob.fromBytes(v)).readByteString());break}case 2n:{const _=r.readByteString();h=Number(new o.CborReader(c.HexBlob.fromBytes(_)).readInt());break}}}r.readEndMap();const w=Number(r.readInt());return new s.Address({byronAddressContent:{attrs:{derivationPath:m,magic:h},root:a,type:w},type:e})}constructor(e){h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,m,e.byronAddressContent,"f");__classPrivateFieldSet(this,h,e.type,"f")}}h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js":(e,t,r)=>{"use strict";r.d(t,{DRepID:()=>DRepID});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const d=1023;const c=28;const l=29;const DRepID=e=>{try{return(0,o.typedBech32)(e,["drep"],47)}catch{return(0,o.typedBech32)(e,["drep","drep_script"],45)}};DRepID.isValid=e=>{try{DRepID(e);return true}catch{return false}};DRepID.cip105FromCredential=e=>{let t="drep";if(e.type===i.CredentialType.ScriptHash)t="drep_script";const r=s.bech32.toWords(n.from(e.hash,"hex"));return s.bech32.encode(t,r,d)};DRepID.cip129FromCredential=e=>{let t="22";if(e.type===i.CredentialType.ScriptHash)t="23";const r=`${t}${e.hash}`;const a=s.bech32.toWords(n.from(r,"hex"));return s.bech32.encode("drep",a,d)};DRepID.toCredential=e=>{const{words:t}=s.bech32.decode(e,d);const r=s.bech32.fromWords(t);if(r.length!==c&&r.length!==l){throw new Error("Invalid DRepID payload")}if(r.length===c){const o=e.includes("drep_script");return{hash:(0,a.Hash28ByteBase16)(n.from(r).toString("hex")),type:o?i.CredentialType.ScriptHash:i.CredentialType.KeyHash}}const u=r[0];const f=r.slice(1);const h=(32&u)===32;const m=(3&u)===3;if(!h){throw new Error("Invalid governance credential type")}return{hash:(0,a.Hash28ByteBase16)(n.from(f).toString("hex")),type:m?i.CredentialType.ScriptHash:i.CredentialType.KeyHash}};DRepID.toCip105DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip105FromCredential(t)};DRepID.toCip129DRepID=e=>{const t=DRepID.toCredential(e);return DRepID.cip129FromCredential(t)};DRepID.toAddress=e=>{const t=DRepID.toCredential(e);return new i.Address({paymentPart:t,type:t.type===i.CredentialType.KeyHash?i.AddressType.EnterpriseKey:i.AddressType.EnterpriseScript}).asEnterprise()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js":(e,t,r)=>{"use strict";r.d(t,{EnterpriseAddress:()=>EnterpriseAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class EnterpriseAddress{static fromCredentials(e,t){const r=t.type===s.CredentialType.ScriptHash?s.AddressType.EnterpriseScript:s.AddressType.EnterpriseKey;return new EnterpriseAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.EnterpriseKey:case s.AddressType.EnterpriseScript:t=new EnterpriseAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new a.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,i.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.EnterpriseScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js":(e,t,r)=>{"use strict";r.d(t,{PaymentAddress:()=>PaymentAddress,addressNetworkId:()=>addressNetworkId,inputsWithAddresses:()=>inputsWithAddresses,isAddressWithin:()=>isAddressWithin,isRewardAccount:()=>isRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];const isRewardAccount=e=>{try{(0,a.assertIsBech32WithPrefix)(e,["stake","stake_test"]);return true}catch{return false}};const PaymentAddress=e=>{if(s.Address.isValid(e)){if(isRewardAccount(e)||i.DRepID.isValid(e)){throw new o.InvalidStringError(e,"Address type can only be used for payment addresses")}return e}try{(0,a.assertIsHexString)(e)}catch{throw new o.InvalidStringError(e,"Expected payment address as bech32, base58 or hex-encoded bytes")}const t=s.Address.fromBytes(a.HexBlob.fromBytes(n.from(e,"hex")));return t.getType()===s.AddressType.Byron?t.toBase58():t.toBech32()};const isAddressWithin=e=>({address:t})=>e.includes(t);const inputsWithAddresses=(e,t)=>e.body.inputs.filter(isAddressWithin(t));const addressNetworkId=e=>{const t=s.Address.fromString(e);return t.getNetworkId()}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js":(e,t,r)=>{"use strict";r.d(t,{CertIndex:()=>CertIndex,PointerAddress:()=>PointerAddress,TxIndex:()=>TxIndex});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c,l;const variableLengthEncode=e=>{if("bigint"!=typeof e)e=BigInt(e);if(e<0){throw new a.InvalidArgumentError("val",`Negative numbers not supported. Number supplied: ${e}`)}const t=[];let r=e.toString(2).length;t.push(Number(127n&e));while(r>7){e>>=7n;r-=7;t.unshift(Number((127n&e)+128n))}return o.from(t)};const variableLengthDecode=e=>{let t=true;let r=0n;let s=0;while(t&&s<e.length){const i=e[s];r<<=7n;r|=BigInt(127&i);t=(128&i)!==0;++s}return{bytesRead:s,value:r}};const TxIndex=e=>e;const CertIndex=e=>e;class PointerAddress{static fromCredentials(e,t,r){let i=s.AddressType.PointerKey;if(t.type===s.CredentialType.ScriptHash)i&=1;return new PointerAddress({networkId:e,paymentPart:t,pointer:r,type:i})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}getStakePointer(){return __classPrivateFieldGet(this,l,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),pointer:__classPrivateFieldGet(this,l,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.PointerKey:case s.AddressType.PointerScript:t=new PointerAddress(e.getProps());break;default:}return t}static packParts(e){const{slot:t,txIndex:r,certIndex:s}=e.pointer;return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex"),o.concat([variableLengthEncode(t),variableLengthEncode(r),variableLengthEncode(s)])])}static unpackParts(e,t){if(t.length<=29)throw new a.InvalidArgumentError("data","Pointer address data length should greater than 29 bytes long.");const r=15&t[0];const n=(0,i.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));let d=29;const c=o.from(t);const{value:l,bytesRead:u}=variableLengthDecode(c.subarray(d));d+=u;const{value:f,bytesRead:h}=variableLengthDecode(c.subarray(d));d+=h;const{value:m}=variableLengthDecode(c.subarray(d));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.PointerScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},pointer:{certIndex:CertIndex(Number(m)),slot:l,txIndex:TxIndex(Number(f))},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,l,e.pointer,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js":(e,t,r)=>{"use strict";r.d(t,{RewardAccount:()=>RewardAccount,createRewardAccount:()=>createRewardAccount});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const RewardAccount=e=>(0,a.typedBech32)(e,["stake","stake_test"],47);RewardAccount.toHash=e=>s.Address.fromBech32(e).asReward().getPaymentCredential().hash;RewardAccount.fromCredential=(e,t)=>RewardAccount(o.RewardAddress.fromCredentials(t,{hash:e.hash,type:e.type}).toAddress().toBech32());RewardAccount.toNetworkId=e=>s.Address.fromBech32(e).asReward().toAddress().getNetworkId();const createRewardAccount=(e,t)=>RewardAccount(o.RewardAddress.fromCredentials(t,{hash:(0,i.Hash28ByteBase16)(e),type:s.CredentialType.KeyHash}).toAddress().toBech32())},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js":(e,t,r)=>{"use strict";r.d(t,{RewardAddress:()=>RewardAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;class RewardAddress{static fromCredentials(e,t){let r=s.AddressType.RewardKey;if(t.type===s.CredentialType.ScriptHash)r|=1;return new RewardAddress({networkId:e,paymentPart:t,type:r})}getPaymentCredential(){return __classPrivateFieldGet(this,c,"f")}toAddress(){return new s.Address({networkId:__classPrivateFieldGet(this,d,"f"),paymentPart:__classPrivateFieldGet(this,c,"f"),type:__classPrivateFieldGet(this,n,"f")})}static fromAddress(e){let t;switch(e.getProps().type){case s.AddressType.RewardKey:case s.AddressType.RewardScript:t=new RewardAddress(e.getProps());break;default:}return t}static packParts(e){return o.concat([o.from([e.type<<4|e.networkId]),o.from(e.paymentPart.hash,"hex")])}static unpackParts(e,t){if(29!==t.length)throw new a.InvalidArgumentError("data","Enterprise address data length should be 29 bytes long.");const r=15&t[0];const n=(0,i.Hash28ByteBase16)(o.from(t.slice(1,29)).toString("hex"));return new s.Address({networkId:r,paymentPart:{hash:n,type:e===s.AddressType.RewardScript?s.CredentialType.ScriptHash:s.CredentialType.KeyHash},type:e})}constructor(e){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e.networkId,"f");__classPrivateFieldSet(this,c,e.paymentPart,"f");__classPrivateFieldSet(this,n,e.type,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js":(e,t,r)=>{"use strict";r.d(t,{ChainIds:()=>a,NetworkId:()=>s,NetworkMagics:()=>i});var s;(function(e){e[e["Mainnet"]=1]="Mainnet";e[e["Testnet"]=0]="Testnet"})(s||(s={}));var i;(function(e){e[e["Mainnet"]=764824073]="Mainnet";e[e["Preprod"]=1]="Preprod";e[e["Preview"]=2]="Preview";e[e["Sanchonet"]=4]="Sanchonet"})(i||(i={}));const a={Mainnet:{networkId:s.Mainnet,networkMagic:i.Mainnet},Preprod:{networkId:s.Testnet,networkMagic:i.Preprod},Preview:{networkId:s.Testnet,networkMagic:i.Preview},Sanchonet:{networkId:s.Testnet,networkMagic:i.Sanchonet}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{Address:()=>c.Address,AddressType:()=>c.AddressType,AssetFingerprint:()=>b.AssetFingerprint,AssetId:()=>b.AssetId,AssetName:()=>b.AssetName,BaseAddress:()=>F.BaseAddress,BlockId:()=>g.BlockId,BlockNo:()=>g.BlockNo,BlockSize:()=>g.BlockSize,ByronAddress:()=>M.ByronAddress,ByronAddressType:()=>M.ByronAddressType,CertIndex:()=>G.CertIndex,CertificateType:()=>y.CertificateType,ChainIds:()=>i.ChainIds,Cip1854ExtendedAccountPublicKey:()=>Cip1854ExtendedAccountPublicKey,CredentialType:()=>c.CredentialType,DRepID:()=>R.DRepID,DelegationMetadataLabel:()=>_.DelegationMetadataLabel,EnterpriseAddress:()=>D.EnterpriseAddress,EpochNo:()=>g.EpochNo,ExtendedPoolStatus:()=>p,FractionUtils:()=>j.FractionUtils,GenesisDelegate:()=>g.GenesisDelegate,GovernanceActionType:()=>x.GovernanceActionType,InputSource:()=>w.InputSource,MirCertificateKind:()=>y.MirCertificateKind,MirCertificatePot:()=>y.MirCertificatePot,NativeScriptKind:()=>S.NativeScriptKind,NetworkId:()=>i.NetworkId,NetworkMagics:()=>i.NetworkMagics,PaymentAddress:()=>O.PaymentAddress,PlutusLanguageVersion:()=>S.PlutusLanguageVersion,PlutusListEncoding:()=>C,PlutusMapEncoding:()=>k,PointerAddress:()=>G.PointerAddress,PolicyId:()=>b.PolicyId,PoolId:()=>v.PoolId,PoolIdHex:()=>v.PoolIdHex,PoolMdVk:()=>PoolMdVk,PostConwayStakeRegistrationCertificateTypes:()=>y.PostConwayStakeRegistrationCertificateTypes,RedeemerPurpose:()=>w.RedeemerPurpose,RegAndDeregCertificateTypes:()=>y.RegAndDeregCertificateTypes,RewardAccount:()=>N.RewardAccount,RewardAddress:()=>H.RewardAddress,ScriptType:()=>S.ScriptType,Slot:()=>g.Slot,SlotLeader:()=>g.SlotLeader,StakeCredentialCertificateTypes:()=>y.StakeCredentialCertificateTypes,StakeCredentialStatus:()=>_.StakeCredentialStatus,StakeDelegationCertificateTypes:()=>y.StakeDelegationCertificateTypes,StakePoolEpochRewards:()=>h.StakePoolEpochRewards,StakePoolStatus:()=>h.StakePoolStatus,StakeRegistrationCertificateTypes:()=>y.StakeRegistrationCertificateTypes,TransactionId:()=>w.TransactionId,TxIndex:()=>G.TxIndex,Vote:()=>x.Vote,VoteDelegationCredentialCertificateTypes:()=>y.VoteDelegationCredentialCertificateTypes,VoterType:()=>x.VoterType,VrfVkBech32:()=>g.VrfVkBech32,VrfVkHex:()=>v.VrfVkHex,addressNetworkId:()=>O.addressNetworkId,cip17FromMetadatum:()=>_.cip17FromMetadatum,computeAuxiliaryDataHash:()=>P.computeAuxiliaryDataHash,createDelegationCert:()=>y.createDelegationCert,createRewardAccount:()=>N.createRewardAccount,createStakeDeregistrationCert:()=>y.createStakeDeregistrationCert,createStakeRegistrationCert:()=>y.createStakeRegistrationCert,includesAnyCertificate:()=>y.includesAnyCertificate,inputsWithAddresses:()=>O.inputsWithAddresses,isAddress:()=>c.isAddress,isAddressWithin:()=>O.isAddressWithin,isCertType:()=>y.isCertType,isDRepAlwaysAbstain:()=>x.isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>x.isDRepAlwaysNoConfidence,isDRepCredential:()=>x.isDRepCredential,isDrepInfo:()=>x.isDrepInfo,isNativeScript:()=>S.isNativeScript,isPlutusScript:()=>S.isPlutusScript,isRewardAccount:()=>O.isRewardAccount,portfolioMetadataFromCip17:()=>_.portfolioMetadataFromCip17,stakeKeyCertificates:()=>y.stakeKeyCertificates,util:()=>s});var s={};r.r(s);r.d(s,{addressesShareAnyKey:()=>addressesShareAnyKey,computeImplicitCoin:()=>a.computeImplicitCoin,computeMinUtxoValue:()=>computeMinUtxoValue,estimateStakePoolAPY:()=>estimateStakePoolAPY,isAnyPlutusDataCollection:()=>u.isAnyPlutusDataCollection,isConstrPlutusData:()=>u.isConstrPlutusData,isPhase2ValidationErrTx:()=>d.isPhase2ValidationErrTx,isPlutusBigInt:()=>u.isPlutusBigInt,isPlutusBoundedBytes:()=>u.isPlutusBoundedBytes,isPlutusList:()=>u.isPlutusList,isPlutusMap:()=>u.isPlutusMap,isScriptAddress:()=>f.isScriptAddress,resolveInputValue:()=>resolveInputValue,tryConvertPlutusMapToUtf8Record:()=>u.tryConvertPlutusMapToUtf8Record});var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/ChainId.js");const computeMinUtxoValue=e=>29n*e;var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");const n=864e5;const estimateStakePoolAPY=e=>{if(0===e.length)return null;const{activeStake:t,epochLength:r,memberRewards:s,pledge:i}=e.reduce((e,t)=>({activeStake:e.activeStake+t.activeStake,epochLength:e.epochLength+t.epochLength,memberRewards:e.memberRewards+t.memberRewards,pledge:e.pledge+t.activeStake}));return(0,o.Percent)(Number(s)/Number(t-i)/(r/n)*365)};const resolveInputValue=(e,t)=>{var r;const s=t.find(t=>t.id===e.txId);return null===(r=null==s?void 0:s.body.outputs[e.index])||void 0===r?void 0:r.value};var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getAddressKeyIDs=e=>{const t="string"==typeof e?c.Address.fromString(e):e;if(!t){throw new l.InvalidStringError("Expected either bech32 or base58 address")}switch(t.getType()){case c.AddressType.BasePaymentKeyStakeKey:case c.AddressType.BasePaymentKeyStakeScript:case c.AddressType.BasePaymentScriptStakeKey:case c.AddressType.BasePaymentScriptStakeScript:{const r=t.asBase();return{paymentId:{credential:r.getPaymentCredential()},stakeId:{credential:r.getStakeCredential()}}}case c.AddressType.Byron:return{paymentId:{byronRoot:t.asByron().getRoot()}};case c.AddressType.EnterpriseKey:case c.AddressType.EnterpriseScript:{const s=t.asEnterprise();return{paymentId:{credential:s.getPaymentCredential()}}}case c.AddressType.PointerKey:case c.AddressType.PointerScript:{const i=t.asPointer();return{paymentId:{credential:i.getPaymentCredential()},stakeId:{pointer:i.getStakePointer()}}}case c.AddressType.RewardKey:case c.AddressType.RewardScript:{const a=t.asReward();return{stakeId:{credential:a.getPaymentCredential()}}}}};const isPaymentIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("byronRoot"in e&&"byronRoot"in t){return e.byronRoot===t.byronRoot}return false};const isStakeIdPresentAndEquals=(e,t)=>{if(!e||!t)return false;if("credential"in e&&"credential"in t){return e.credential.hash===t.credential.hash}if("pointer"in e&&"pointer"in t){return e.pointer.slot===t.pointer.slot&&e.pointer.txIndex===t.pointer.txIndex&&e.pointer.certIndex===t.pointer.certIndex}return false};const addressesShareAnyKey=(e,t)=>{if(e===t)return true;const r=getAddressKeyIDs(e);const s=getAddressKeyIDs(t);return isPaymentIdPresentAndEquals(r.paymentId,s.paymentId)||isStakeIdPresentAndEquals(r.stakeId,s.stakeId)};var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const PoolMdVk=e=>(0,m.typedBech32)(e,"poolmd_vk",52);var p;(function(e){e["Active"]="active";e["Retired"]="retired";e["Offline"]="offline";e["Experimental"]="experimental";e["Private"]="private"})(p||(p={}));var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var C;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=159]="IndefiniteLength"})(C||(C={}));var k;(function(e){e[e["FixedLength"]=0]="FixedLength";e[e["IndefiniteLength"]=191]="IndefiniteLength"})(k||(k={}));var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var T=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var E=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var A=r("../../node_modules/buffer/index.js")["Buffer"];const I=1023;const B="acct_shared_xvk";const Cip1854ExtendedAccountPublicKey=e=>{try{(0,m.assertIsBech32WithPrefix)(e,[B])}catch{throw new l.InvalidStringError(e,"Expected key to be a bech32 encoded string")}return e};Cip1854ExtendedAccountPublicKey.fromBip32PublicKeyHex=e=>{const t=T.bech32.toWords(A.from(e,"hex"));return Cip1854ExtendedAccountPublicKey(T.bech32.encode(B,t,I))};Cip1854ExtendedAccountPublicKey.toBip32PublicKeyHex=e=>{const{words:t}=T.bech32.decode(e,I);return(0,E.Bip32PublicKeyHex)(A.from(T.bech32.fromWords(t)).toString("hex"))};var F=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var M=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/ByronAddress.js");var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/EnterpriseAddress.js");var O=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var G=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PointerAddress.js");var N=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var H=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js")},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js":(e,t,r)=>{"use strict";r.d(t,{AssetFingerprint:()=>AssetFingerprint,AssetId:()=>AssetId,AssetName:()=>AssetName,PolicyId:()=>PolicyId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/web-encoding/src/lib.mjs");var d=r("../../node_modules/buffer/index.js")["Buffer"];const AssetName=e=>{if(e.length>0){(0,a.assertIsHexString)(e);if(e.length>64){throw new o.InvalidStringError("too long")}}return e.toLowerCase()};const c=new n.TextDecoder("utf8",{fatal:true});AssetName.toUTF8=(e,t=false)=>{const r=d.from(e,"hex");try{if(t){return c.decode(r.filter(e=>e>31))}return c.decode(r)}catch(s){throw new o.InvalidStringError(`Cannot convert AssetName '${e}' to UTF8`,s)}};const AssetId=e=>{const t=e.split(".").join("");(0,a.assertIsHexString)(t);if(t.length>120)throw new o.InvalidStringError("too long");if(t.length<56)throw new o.InvalidStringError("too short");return t};const PolicyId=e=>s.Hash28ByteBase16(e);AssetId.getPolicyId=e=>PolicyId(e.slice(0,56));AssetId.getAssetName=e=>AssetName(e.slice(56));AssetId.fromParts=(e,t)=>AssetId(e+t);const AssetFingerprint=e=>(0,a.typedBech32)(e,"asset",32);AssetFingerprint.fromParts=(e,t)=>{const r=d.from(e,"hex");const s=d.from(t,"hex");const o=i.blake2b.hash(a.HexBlob.fromBytes(new Uint8Array([...r,...s])),20);return AssetFingerprint(a.HexBlob.toTypedBech32("asset",o))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{computeAuxiliaryDataHash:()=>computeAuxiliaryDataHash});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");const computeAuxiliaryDataHash=e=>e?s.blake2b.hash(i.AuxiliaryData.fromCore(e).toCbor(),32):void 0},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js":(e,t,r)=>{"use strict";r.d(t,{BlockId:()=>BlockId,BlockNo:()=>BlockNo,BlockSize:()=>BlockSize,EpochNo:()=>EpochNo,GenesisDelegate:()=>GenesisDelegate,Slot:()=>Slot,SlotLeader:()=>SlotLeader,VrfVkBech32:()=>VrfVkBech32});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];const BlockSize=e=>e;const BlockNo=e=>e;const EpochNo=e=>e;const Slot=e=>e;const BlockId=e=>i.Hash32ByteBase16(e);const VrfVkBech32=e=>(0,a.typedBech32)(e,"vrf_vk",52);const GenesisDelegate=e=>{if(/ShelleyGenesis-[\da-f]{16}/.test(e)){return e}return i.Hash28ByteBase16(e)};const SlotLeader=e=>{try{return(0,n.PoolId)(e)}catch{try{return GenesisDelegate(e)}catch(t){throw new o.InvalidStringError("Expected either PoolId or GenesisDelegate",t)}}};VrfVkBech32.fromHex=e=>{const t=s.bech32.toWords(d.from(e,"hex"));return VrfVkBech32(s.bech32.encode("vrf_vk",t,1023))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{CertificateType:()=>o,MirCertificateKind:()=>d,MirCertificatePot:()=>n,PostConwayStakeRegistrationCertificateTypes:()=>c,RegAndDeregCertificateTypes:()=>f,StakeCredentialCertificateTypes:()=>h,StakeDelegationCertificateTypes:()=>u,StakeRegistrationCertificateTypes:()=>l,VoteDelegationCredentialCertificateTypes:()=>m,createDelegationCert:()=>createDelegationCert,createStakeDeregistrationCert:()=>createStakeDeregistrationCert,createStakeRegistrationCert:()=>createStakeRegistrationCert,includesAnyCertificate:()=>includesAnyCertificate,isCertType:()=>isCertType,stakeKeyCertificates:()=>stakeKeyCertificates});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var o;(function(e){e["StakeRegistration"]="StakeRegistrationCertificate";e["StakeDeregistration"]="StakeDeregistrationCertificate";e["PoolRegistration"]="PoolRegistrationCertificate";e["PoolRetirement"]="PoolRetirementCertificate";e["StakeDelegation"]="StakeDelegationCertificate";e["MIR"]="MirCertificate";e["GenesisKeyDelegation"]="GenesisKeyDelegationCertificate";e["Registration"]="RegistrationCertificate";e["Unregistration"]="UnRegistrationCertificate";e["VoteDelegation"]="VoteDelegationCertificate";e["StakeVoteDelegation"]="StakeVoteDelegationCertificate";e["StakeRegistrationDelegation"]="StakeRegistrationDelegateCertificate";e["VoteRegistrationDelegation"]="VoteRegistrationDelegateCertificate";e["StakeVoteRegistrationDelegation"]="StakeVoteRegistrationDelegateCertificate";e["AuthorizeCommitteeHot"]="AuthorizeCommitteeHotCertificate";e["ResignCommitteeCold"]="ResignCommitteeColdCertificate";e["RegisterDelegateRepresentative"]="RegisterDelegateRepresentativeCertificate";e["UnregisterDelegateRepresentative"]="UnregisterDelegateRepresentativeCertificate";e["UpdateDelegateRepresentative"]="UpdateDelegateRepresentativeCertificate"})(o||(o={}));var n;(function(e){e["Reserves"]="reserve";e["Treasury"]="treasury"})(n||(n={}));var d;(function(e){e["ToOtherPot"]="toOtherPot";e["ToStakeCreds"]="ToStakeCreds"})(d||(d={}));const c=[o.Registration,o.VoteRegistrationDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];const l=[o.StakeRegistration,...c];const u=[o.StakeDelegation,o.StakeVoteDelegation,o.StakeRegistrationDelegation,o.StakeVoteRegistrationDelegation];const f=[...l,o.Unregistration,o.StakeDeregistration];const h=[...f,...u,o.VoteDelegation];const m=[o.VoteDelegation,o.VoteRegistrationDelegation,o.StakeVoteDelegation,o.StakeVoteRegistrationDelegation];const isCertType=(e,t)=>t.includes(e.__typename);const createStakeRegistrationCert=e=>({__typename:o.StakeRegistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:i.CredentialType.KeyHash}});const createStakeDeregistrationCert=(e,t)=>void 0===t?{__typename:o.StakeDeregistration,stakeCredential:{hash:s.RewardAccount.toHash(e),type:i.CredentialType.KeyHash}}:{__typename:o.Unregistration,deposit:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:i.CredentialType.KeyHash}};const createDelegationCert=(e,t)=>({__typename:o.StakeDelegation,poolId:t,stakeCredential:{hash:s.RewardAccount.toHash(e),type:i.CredentialType.KeyHash}});const stakeKeyCertificates=e=>{return(null==e?void 0:e.map(e=>isCertType(e,f)?e:void 0).filter(a.isNotNil))||[]};const includesAnyCertificate=(e,t)=>e.some(({__typename:e})=>t.includes(e))||false},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js":(e,t,r)=>{"use strict";r.d(t,{DelegationMetadataLabel:()=>a,StakeCredentialStatus:()=>i,cip17FromMetadatum:()=>cip17FromMetadatum,portfolioMetadataFromCip17:()=>portfolioMetadataFromCip17});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var i;(function(e){e["Registering"]="REGISTERING";e["Registered"]="REGISTERED";e["Unregistering"]="UNREGISTERING";e["Unregistered"]="UNREGISTERED"})(i||(i={}));const a=6862n;const portfolioMetadataFromCip17=e=>{const t={...e};t.pools=e.pools.map(e=>({id:e.id,weight:e.weight}));return t};const cip17FromMetadatum=e=>{const t=(0,s.metadatumToJson)(e);for(const r of t.pools)r.weight=Number(r.weight);return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionType:()=>s,Vote:()=>i,VoterType:()=>a,isDRepAlwaysAbstain:()=>isDRepAlwaysAbstain,isDRepAlwaysNoConfidence:()=>isDRepAlwaysNoConfidence,isDRepCredential:()=>isDRepCredential,isDrepInfo:()=>isDrepInfo});var s;(function(e){e["parameter_change_action"]="parameter_change_action";e["hard_fork_initiation_action"]="hard_fork_initiation_action";e["treasury_withdrawals_action"]="treasury_withdrawals_action";e["no_confidence"]="no_confidence";e["update_committee"]="update_committee";e["new_constitution"]="new_constitution";e["info_action"]="info_action"})(s||(s={}));var i;(function(e){e[e["no"]=0]="no";e[e["yes"]=1]="yes";e[e["abstain"]=2]="abstain"})(i||(i={}));var a;(function(e){e["ccHotKeyHash"]="ccHotKeyHash";e["ccHotScriptHash"]="ccHotScriptHash";e["dRepKeyHash"]="dRepKeyHash";e["dRepScriptHash"]="dRepScriptHash";e["stakePoolKeyHash"]="stakePoolKeyHash"})(a||(a={}));const isDrepInfo=e=>"id"in e&&"active"in e;const isDRepCredential=e=>"type"in e&&"hash"in e;const isDRepAlwaysAbstain=e=>"__typename"in e&&"AlwaysAbstain"===e.__typename;const isDRepAlwaysNoConfidence=e=>"__typename"in e&&"AlwaysNoConfidence"===e.__typename},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js":(e,t,r)=>{"use strict";r.d(t,{NativeScriptKind:()=>i,PlutusLanguageVersion:()=>a,ScriptType:()=>s,isNativeScript:()=>isNativeScript,isPlutusScript:()=>isPlutusScript});var s;(function(e){e["Native"]="native";e["Plutus"]="plutus"})(s||(s={}));var i;(function(e){e[e["RequireSignature"]=0]="RequireSignature";e[e["RequireAllOf"]=1]="RequireAllOf";e[e["RequireAnyOf"]=2]="RequireAnyOf";e[e["RequireNOf"]=3]="RequireNOf";e[e["RequireTimeAfter"]=4]="RequireTimeAfter";e[e["RequireTimeBefore"]=5]="RequireTimeBefore"})(i||(i={}));var a;(function(e){e[e["V1"]=0]="V1";e[e["V2"]=1]="V2";e[e["V3"]=2]="V3"})(a||(a={}));const isNativeScript=e=>e.__type===s.Native;const isPlutusScript=e=>e.__type===s.Plutus},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js":(e,t,r)=>{"use strict";r.d(t,{StakePoolEpochRewards:()=>StakePoolEpochRewards,StakePoolStatus:()=>s});var s;(function(e){e["Activating"]="activating";e["Active"]="active";e["Retired"]="retired";e["Retiring"]="retiring"})(s||(s={}));class StakePoolEpochRewards{}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js":(e,t,r)=>{"use strict";r.d(t,{PoolId:()=>PoolId,PoolIdHex:()=>PoolIdHex,VrfVkHex:()=>VrfVkHex});var s=r("../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const o=1023;const PoolId=e=>(0,a.typedBech32)(e,"pool",45);PoolId.fromKeyHash=e=>a.HexBlob.toTypedBech32("pool",e);const PoolIdHex=e=>i.Hash28ByteBase16(e);const VrfVkHex=e=>(0,a.typedHex)(e,64);PoolId.toKeyHash=e=>{const{words:t}=s.bech32.decode(e,o);return i.Ed25519KeyHashHex(a.HexBlob.fromBytes(s.bech32.fromWords(t)))}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{InputSource:()=>i,RedeemerPurpose:()=>a,TransactionId:()=>TransactionId});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");const TransactionId=e=>s.Hash32ByteBase16(e);TransactionId.fromHexBlob=e=>s.Hash32ByteBase16.fromHexBlob(e);var i;(function(e){e["inputs"]="inputs";e["collaterals"]="collaterals"})(i||(i={}));var a;(function(e){e["spend"]="spend";e["mint"]="mint";e["certificate"]="certificate";e["withdrawal"]="withdrawal";e["propose"]="propose";e["vote"]="vote"})(a||(a={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/UtilityTypes.js":(e,t,r)=>{"use strict";r.d(t,{FractionUtils:()=>i});var s=r("../../node_modules/fraction.js/fraction.js");const toFractionJs=e=>{if("number"==typeof e){return new s(e)}const{numerator:t,denominator:r}=e;return new s(t,r)};const i={toFraction(e){const t=toFractionJs(e);const{n:r,d:s}=t;return{denominator:s,numerator:r}},toNumber(e){const t=toFractionJs(e);return t.valueOf()}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js":(e,t,r)=>{"use strict";r.d(t,{computeImplicitCoin:()=>computeImplicitCoin});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");const stakeCredentialInRewardAccounts=(e,t)=>{if(0===t.length)return true;const r=s.RewardAccount.toNetworkId(t[0]);return t.includes(s.RewardAccount.fromCredential(e,r))};const computeShellyDeposits=(e,t,r)=>{let i=0n;let n=0n;const c=0===r.length;const l=new Set(r.map(e=>a.PoolId.fromKeyHash((0,d.Ed25519KeyHashHex)(s.RewardAccount.toHash(e)))));for(const u of t){switch(u.__typename){case o.CertificateType.StakeRegistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))i+=e.stakeKeyDeposit;break;case o.CertificateType.StakeDeregistration:if(stakeCredentialInRewardAccounts(u.stakeCredential,r))n+=e.stakeKeyDeposit;break;case o.CertificateType.PoolRegistration:if(c||r.some(e=>u.poolParameters.owners.includes(e)))i+=e.poolDeposit;break;case o.CertificateType.PoolRetirement:if(c||l.has(u.poolId))n+=e.poolDeposit;break}}return{deposit:i,reclaimDeposit:n}};const computeConwayDeposits=(e,t,r,s)=>{let a=0n;let n=0n;for(const d of e){switch(d.__typename){case o.CertificateType.Registration:case o.CertificateType.StakeRegistrationDelegation:case o.CertificateType.VoteRegistrationDelegation:case o.CertificateType.StakeVoteRegistrationDelegation:if(stakeCredentialInRewardAccounts(d.stakeCredential,t))a+=d.deposit;break;case o.CertificateType.Unregistration:if(stakeCredentialInRewardAccounts(d.stakeCredential,t))n+=d.deposit;break;case o.CertificateType.RegisterDelegateRepresentative:case o.CertificateType.UnregisterDelegateRepresentative:if(!r||d.dRepCredential.type===i.CredentialType.KeyHash&&d.dRepCredential.hash===r)d.__typename===o.CertificateType.RegisterDelegateRepresentative?a+=d.deposit:n+=d.deposit;break}}if(s)for(const c of s)a+=c.deposit;return{deposit:a,reclaimDeposit:n}};const getTxDeposits=({stakeKeyDeposit:e,poolDeposit:t},r,s=[],i,a)=>{if(0===r.length&&(!a||0===a.length))return{deposit:0n,reclaimDeposit:0n};const o={poolDeposit:t?BigInt(t):0n,stakeKeyDeposit:BigInt(e)};const n=computeShellyDeposits(o,r,s);const d=computeConwayDeposits(r,s,i,a);return{deposit:n.deposit+d.deposit,reclaimDeposit:n.reclaimDeposit+d.reclaimDeposit}};const getOwnWithdrawalsTotal=(e,t)=>n.BigIntMath.sum(e.filter(({stakeAddress:e})=>t.includes(e)).map(({quantity:e})=>e));const computeImplicitCoin=({stakeKeyDeposit:e,poolDeposit:t},{certificates:r,proposalProcedures:s,withdrawals:i=[]},a,o)=>{const{deposit:d,reclaimDeposit:c}=getTxDeposits({poolDeposit:t,stakeKeyDeposit:e},null!=r?r:[],a,o,s);const l=!!(null==a?void 0:a.length);const u=n.BigIntMath.sum(i.map(({quantity:e})=>e));const f=l?getOwnWithdrawalsTotal(i,a):u;return{deposit:d,input:f+c,reclaimDeposit:c,withdrawals:f}}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js":(e,t,r)=>{"use strict";r.d(t,{isScriptAddress:()=>isScriptAddress});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");const isScriptAddress=e=>{if(!s.Address.isValidBech32(e)){return false}const t=s.Address.fromBech32(e).asBase();const r=null==t?void 0:t.getPaymentCredential();const i=null==t?void 0:t.getStakeCredential();return(null==r?void 0:r.type)===s.CredentialType.ScriptHash&&(null==i?void 0:i.type)===s.CredentialType.ScriptHash}},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js":(e,t,r)=>{"use strict";r.d(t,{isPhase2ValidationErrTx:()=>isPhase2ValidationErrTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");const isPhase2ValidationErrTx=({inputSource:e})=>e===s.InputSource.collaterals},"../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js":(e,t,r)=>{"use strict";r.d(t,{isAnyPlutusDataCollection:()=>isAnyPlutusDataCollection,isConstrPlutusData:()=>isConstrPlutusData,isPlutusBigInt:()=>isPlutusBigInt,isPlutusBoundedBytes:()=>isPlutusBoundedBytes,isPlutusList:()=>isPlutusList,isPlutusMap:()=>isPlutusMap,tryConvertPlutusMapToUtf8Record:()=>tryConvertPlutusMapToUtf8Record});var s=r("../../node_modules/web-encoding/src/lib.mjs");const isPlutusBoundedBytes=e=>ArrayBuffer.isView(e);const isAnyPlutusDataCollection=e=>"object"==typeof e&&!isPlutusBoundedBytes(e);const isPlutusList=e=>isAnyPlutusDataCollection(e)&&"items"in e;const isPlutusMap=e=>isAnyPlutusDataCollection(e)&&"data"in e;const isConstrPlutusData=e=>isAnyPlutusDataCollection(e)&&"fields"in e;const isPlutusBigInt=e=>"bigint"==typeof e;const i=new s.TextDecoder("utf8",{fatal:true});const tryConvertPlutusDataToUtf8String=e=>{if(!isPlutusBoundedBytes(e))return e;try{return i.decode(e)}catch{return e}};const tryConvertPlutusMapToUtf8Record=(e,t)=>{const r={};for(const[s,i]of e.data.entries()){const a=tryConvertPlutusDataToUtf8String(s);if("string"!=typeof a){t.warn("Failed to decode plutus map key",s);continue}r[a]=tryConvertPlutusDataToUtf8String(i)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js":(e,t,r)=>{"use strict";r.d(t,{ChainSyncError:()=>ChainSyncError,ChainSyncErrorCode:()=>a,GeneralCardanoNodeError:()=>GeneralCardanoNodeError,GeneralCardanoNodeErrorCode:()=>i,StateQueryError:()=>StateQueryError,StateQueryErrorCode:()=>o,TxSubmissionError:()=>TxSubmissionError,TxSubmissionErrorCode:()=>n});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e[e["ServerNotReady"]=503]="ServerNotReady";e[e["Unknown"]=500]="Unknown";e[e["ConnectionFailure"]=-1]="ConnectionFailure"})(i||(i={}));var a;(function(e){e[e["IntersectionNotFound"]=1e3]="IntersectionNotFound";e[e["IntersectionInterleaved"]=1001]="IntersectionInterleaved"})(a||(a={}));var o;(function(e){e[e["AcquireLedgerStateFailure"]=2e3]="AcquireLedgerStateFailure";e[e["EraMismatch"]=2001]="EraMismatch";e[e["UnavailableInCurrentEra"]=2002]="UnavailableInCurrentEra";e[e["AcquiredExpired"]=2003]="AcquiredExpired";e[e["InvalidGenesis"]=2004]="InvalidGenesis"})(o||(o={}));var n;(function(e){e[e["EraMismatch"]=3005]="EraMismatch";e[e["InvalidSignatories"]=3100]="InvalidSignatories";e[e["MissingSignatories"]=3101]="MissingSignatories";e[e["MissingScripts"]=3102]="MissingScripts";e[e["FailingNativeScript"]=3103]="FailingNativeScript";e[e["ExtraneousScripts"]=3104]="ExtraneousScripts";e[e["MissingMetadataHash"]=3105]="MissingMetadataHash";e[e["MissingMetadata"]=3106]="MissingMetadata";e[e["MetadataHashMismatch"]=3107]="MetadataHashMismatch";e[e["InvalidMetadata"]=3108]="InvalidMetadata";e[e["MissingRedeemers"]=3109]="MissingRedeemers";e[e["ExtraneousRedeemers"]=3110]="ExtraneousRedeemers";e[e["MissingDatums"]=3111]="MissingDatums";e[e["ExtraneousDatums"]=3112]="ExtraneousDatums";e[e["ScriptIntegrityHashMismatch"]=3113]="ScriptIntegrityHashMismatch";e[e["OrphanScriptInputs"]=3114]="OrphanScriptInputs";e[e["MissingCostModels"]=3115]="MissingCostModels";e[e["MalformedScripts"]=3116]="MalformedScripts";e[e["UnknownOutputReferences"]=3117]="UnknownOutputReferences";e[e["OutsideOfValidityInterval"]=3118]="OutsideOfValidityInterval";e[e["TransactionTooLarge"]=3119]="TransactionTooLarge";e[e["ValueTooLarge"]=3120]="ValueTooLarge";e[e["EmptyInputSet"]=3121]="EmptyInputSet";e[e["TransactionFeeTooSmall"]=3122]="TransactionFeeTooSmall";e[e["ValueNotConserved"]=3123]="ValueNotConserved";e[e["NetworkMismatch"]=3124]="NetworkMismatch";e[e["InsufficientlyFundedOutputs"]=3125]="InsufficientlyFundedOutputs";e[e["BootstrapAttributesTooLarge"]=3126]="BootstrapAttributesTooLarge";e[e["MintingOrBurningAda"]=3127]="MintingOrBurningAda";e[e["InsufficientCollateral"]=3128]="InsufficientCollateral";e[e["CollateralLockedByScript"]=3129]="CollateralLockedByScript";e[e["UnforeseeableSlot"]=3130]="UnforeseeableSlot";e[e["TooManyCollateralInputs"]=3131]="TooManyCollateralInputs";e[e["MissingCollateralInputs"]=3132]="MissingCollateralInputs";e[e["NonAdaCollateral"]=3133]="NonAdaCollateral";e[e["ExecutionUnitsTooLarge"]=3134]="ExecutionUnitsTooLarge";e[e["TotalCollateralMismatch"]=3135]="TotalCollateralMismatch";e[e["SpendsMismatch"]=3136]="SpendsMismatch";e[e["UnauthorizedVote"]=3137]="UnauthorizedVote";e[e["UnknownGovernanceProposal"]=3138]="UnknownGovernanceProposal";e[e["InvalidProtocolParametersUpdate"]=3139]="InvalidProtocolParametersUpdate";e[e["UnknownStakePool"]=3140]="UnknownStakePool";e[e["IncompleteWithdrawals"]=3141]="IncompleteWithdrawals";e[e["RetirementTooLate"]=3142]="RetirementTooLate";e[e["StakePoolCostTooLow"]=3143]="StakePoolCostTooLow";e[e["MetadataHashTooLarge"]=3144]="MetadataHashTooLarge";e[e["CredentialAlreadyRegistered"]=3145]="CredentialAlreadyRegistered";e[e["UnknownCredential"]=3146]="UnknownCredential";e[e["NonEmptyRewardAccount"]=3147]="NonEmptyRewardAccount";e[e["InvalidGenesisDelegation"]=3148]="InvalidGenesisDelegation";e[e["InvalidMIRTransfer"]=3149]="InvalidMIRTransfer";e[e["ForbiddenWithdrawal"]=3150]="ForbiddenWithdrawal";e[e["CredentialDepositMismatch"]=3151]="CredentialDepositMismatch";e[e["DRepAlreadyRegistered"]=3152]="DRepAlreadyRegistered";e[e["DRepNotRegistered"]=3153]="DRepNotRegistered";e[e["UnknownConstitutionalCommitteeMember"]=3154]="UnknownConstitutionalCommitteeMember";e[e["GovernanceProposalDepositMismatch"]=3155]="GovernanceProposalDepositMismatch";e[e["ConflictingCommitteeUpdate"]=3156]="ConflictingCommitteeUpdate";e[e["InvalidCommitteeUpdate"]=3157]="InvalidCommitteeUpdate";e[e["TreasuryWithdrawalMismatch"]=3158]="TreasuryWithdrawalMismatch";e[e["InvalidOrMissingPreviousProposal"]=3159]="InvalidOrMissingPreviousProposal";e[e["VotingOnExpiredActions"]=3160]="VotingOnExpiredActions";e[e["ExecutionBudgetOutOfBounds"]=3161]="ExecutionBudgetOutOfBounds";e[e["InvalidHardForkVersionBump"]=3162]="InvalidHardForkVersionBump";e[e["ConstitutionGuardrailsHashMismatch"]=3163]="ConstitutionGuardrailsHashMismatch";e[e["ConflictingInputsAndReferences"]=3164]="ConflictingInputsAndReferences";e[e["UnauthorizedGovernanceAction"]=3165]="UnauthorizedGovernanceAction";e[e["ReferenceScriptsTooLarge"]=3166]="ReferenceScriptsTooLarge";e[e["UnknownVoters"]=3167]="UnknownVoters";e[e["EmptyTreasuryWithdrawal"]=3168]="EmptyTreasuryWithdrawal";e[e["UnexpectedMempoolError"]=3997]="UnexpectedMempoolError";e[e["UnrecognizedCertificateType"]=3998]="UnrecognizedCertificateType";e[e["DeserialisationFailure"]=-32602]="DeserialisationFailure"})(n||(n={}));class CardanoNodeError extends s.CustomError{constructor(e,t,r){super(r);this.code=e;this.data=t}}class GeneralCardanoNodeError extends CardanoNodeError{}class ChainSyncError extends CardanoNodeError{}class TxSubmissionError extends CardanoNodeError{}class StateQueryError extends CardanoNodeError{}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{ALONZO_AUX_TAG:()=>T,AuxiliaryData:()=>AuxiliaryData,SHELLEY_ERA_FIELDS_COUNT:()=>x});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var v,_,w,y,g,b,P,S,C,k,j;const x=2;const T=259;class AuxiliaryData{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");const e=new s.CborWriter;const t=__classPrivateFieldGet(this,v,"m",C).call(this);if(1===t&&void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").metadata().size>0)e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,w,"f").toCbor()));else if(t===x&&void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").metadata().size>0&&void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").length>0){e.writeStartArray(t);e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,w,"f").toCbor()));e.writeStartArray(__classPrivateFieldGet(this,y,"f").length);for(const r of __classPrivateFieldGet(this,y,"f"))e.writeEncodedValue((0,p.hexToBytes)(r.toCbor()))}else{e.writeTag(T);e.writeStartMap(t);if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").metadata().size>0){e.writeInt(0n);e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,w,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").length>0){e.writeInt(1n);e.writeStartArray(__classPrivateFieldGet(this,y,"f").length);for(const i of __classPrivateFieldGet(this,y,"f"))e.writeEncodedValue((0,p.hexToBytes)(i.toCbor()))}if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0){e.writeInt(2n);e.writeStartArray(__classPrivateFieldGet(this,g,"f").length);for(const a of __classPrivateFieldGet(this,g,"f"))e.writeEncodedValue((0,p.hexToBytes)(a.toCbor()))}if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0){e.writeInt(3n);e.writeStartArray(__classPrivateFieldGet(this,b,"f").length);for(const o of __classPrivateFieldGet(this,b,"f"))e.writeEncodedValue((0,p.hexToBytes)(o.toCbor()))}if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0){e.writeInt(4n);e.writeStartArray(__classPrivateFieldGet(this,P,"f").length);for(const n of __classPrivateFieldGet(this,P,"f"))e.writeEncodedValue((0,p.hexToBytes)(n.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=new AuxiliaryData;const s=t.peekState();if(s===a.CborReaderState.StartMap)__classPrivateFieldSet(r,w,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");else if(s===a.CborReaderState.Tag){const h=t.readTag();if(h!==T){throw new d.InvalidArgumentError("cbor",`Expected tag '${T}', but got ${h}.`)}t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const m=t.readInt();switch(m){case 0n:__classPrivateFieldSet(r,w,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 1n:r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:r.setPlutusV1Scripts(new Array);t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){r.plutusV1Scripts().push(l.PlutusV1Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 3n:r.setPlutusV2Scripts(new Array);t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){r.plutusV2Scripts().push(u.PlutusV2Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 4n:r.setPlutusV3Scripts(new Array);t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){r.plutusV3Scripts().push(f.PlutusV3Script.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break}}t.readEndMap()}else{t.readStartArray();__classPrivateFieldSet(r,w,o.GeneralTransactionMetadata.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())),"f");r.setNativeScripts(new Array);t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){r.nativeScripts().push(c.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray()}__classPrivateFieldSet(r,S,e,"f");return r}toCore(){const e=__classPrivateFieldGet(this,v,"m",k).call(this);const t={blob:__classPrivateFieldGet(this,w,"f")?__classPrivateFieldGet(this,w,"f").toCore():void 0};if(e.length>0)t.scripts=e;return t}static fromCore(e){const t=new AuxiliaryData;if(e.blob)t.setMetadata(o.GeneralTransactionMetadata.fromCore(e.blob));if(e.scripts){const r=__classPrivateFieldGet(AuxiliaryData,_,"m",j).call(AuxiliaryData,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}return t}metadata(){return __classPrivateFieldGet(this,w,"f")}setMetadata(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,y,"f")}setNativeScripts(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,g,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,b,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,P,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,S,void 0,"f")}constructor(){v.add(this);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0)}}_=AuxiliaryData,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,v=new WeakSet,C=function _AuxiliaryData_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").metadata().size>0)++e;if(void 0!==__classPrivateFieldGet(this,y,"f")&&__classPrivateFieldGet(this,y,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(this,g,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(this,b,"f").length>0)++e;if(void 0!==__classPrivateFieldGet(this,P,"f")&&__classPrivateFieldGet(this,P,"f").length>0)++e;return e},k=function _AuxiliaryData_getCoreScripts(){const e=__classPrivateFieldGet(this,g,"f")?__classPrivateFieldGet(this,g,"f").map(e=>e.toCore()):[];const t=__classPrivateFieldGet(this,b,"f")?__classPrivateFieldGet(this,b,"f").map(e=>e.toCore()):[];const r=__classPrivateFieldGet(this,P,"f")?__classPrivateFieldGet(this,P,"f").map(e=>e.toCore()):[];const s=__classPrivateFieldGet(this,y,"f")?__classPrivateFieldGet(this,y,"f").map(e=>e.toCore()):[];return[...e,...t,...r,...s]},j=function _AuxiliaryData_getCddlScripts(e){const t={native:void 0,plutusV1:void 0,plutusV2:void 0,plutusV3:void 0};for(const r of e){switch(r.__type){case h.ScriptType.Native:if(!t.native)t.native=new Array;t.native.push(c.NativeScript.fromCore(r));break;case h.ScriptType.Plutus:if(r.version===h.PlutusLanguageVersion.V1){if(!t.plutusV1)t.plutusV1=new Array;t.plutusV1.push(l.PlutusV1Script.fromCore(r))}else if(r.version===h.PlutusLanguageVersion.V2){if(!t.plutusV2)t.plutusV2=new Array;t.plutusV2.push(u.PlutusV2Script.fromCore(r))}else if(r.version===h.PlutusLanguageVersion.V3){if(!t.plutusV3)t.plutusV3=new Array;t.plutusV3.push(f.PlutusV3Script.fromCore(r))}break;default:throw new m.SerializationError(m.SerializationFailure.InvalidScriptType,`Script '${r}' is not supported.`)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js":(e,t,r)=>{"use strict";r.d(t,{GeneralTransactionMetadata:()=>GeneralTransactionMetadata});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class GeneralTransactionMetadata{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartMap(__classPrivateFieldGet(this,c,"f").size);for(const[t,r]of __classPrivateFieldGet(this,c,"f").entries()){e.writeInt(t);e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()))}return e.encodeAsHex()}static fromCbor(e){const t=new Map;const r=new i.CborReader(e);r.readStartMap();while(r.peekState()!==a.CborReaderState.EndMap){const s=r.readInt();const d=n.TransactionMetadatum.fromCbor(o.HexBlob.fromBytes(r.readEncodedValue()));t.set(s,d)}r.readEndMap();return new GeneralTransactionMetadata(t)}toCore(){return new Map([...__classPrivateFieldGet(this,c,"f").entries()].map(e=>[e[0],e[1].toCore()]))}static fromCore(e){return new GeneralTransactionMetadata(new Map([...e.entries()].map(e=>[e[0],n.TransactionMetadatum.fromCore(e[1])])))}metadata(){return __classPrivateFieldGet(this,c,"f")}setMetadata(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){if(__classPrivateFieldGet(this,l,"f")===__classPrivateFieldGet(e,l,"f"))return true;if(__classPrivateFieldGet(this,c,"f").size!==__classPrivateFieldGet(e,c,"f").size)return false;const t=[...__classPrivateFieldGet(this,c,"f").entries()];const r=[...__classPrivateFieldGet(e,c,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,c,"f").size;++s){if(t[s][0]!==r[s][0])return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumList:()=>MetadatumList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var c,l;class MetadatumList{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const t of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(t.toCbor()));if(__classPrivateFieldGet(this,l,"f"))e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumList;const r=new i.CborReader(e);const s=r.readStartArray();if(null===s)__classPrivateFieldSet(t,l,true,"f");while(r.peekState()!==a.CborReaderState.EndArray){t.add(n.TransactionMetadatum.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array);l.set(this,false)}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js":(e,t,r)=>{"use strict";r.d(t,{MetadatumMap:()=>MetadatumMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var l,u;class MetadatumMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new MetadatumMap;const r=new i.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==a.CborReaderState.EndMap){const o=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const n=d.TransactionMetadatum.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(o,n)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new n.MetadatumList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatum:()=>TransactionMetadatum});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var m,p,v,_,w,y,g;const b=0xffffffffffffffffn;const check64Length=e=>{const t="string"==typeof e?h.from(e,"utf8").length:e.length;if(t>64)throw new l.SerializationError(l.SerializationFailure.MaxLengthLimit,`Metadatum value '${e}' is too long. Length is ${t}. Max length is 64 bytes`)};class TransactionMetadatum{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");let e;switch(__classPrivateFieldGet(this,y,"f")){case u.TransactionMetadatumKind.Map:e=__classPrivateFieldGet(this,m,"f").toCbor();break;case u.TransactionMetadatumKind.List:e=__classPrivateFieldGet(this,p,"f").toCbor();break;case u.TransactionMetadatumKind.Bytes:{const t=new s.CborWriter;check64Length(__classPrivateFieldGet(this,_,"f"));t.writeByteString(__classPrivateFieldGet(this,_,"f"));e=(0,f.bytesToHex)(t.encode());break}case u.TransactionMetadatumKind.Text:{const r=new s.CborWriter;check64Length(__classPrivateFieldGet(this,w,"f"));r.writeTextString(__classPrivateFieldGet(this,w,"f"));e=(0,f.bytesToHex)(r.encode());break}case u.TransactionMetadatumKind.Integer:{const i=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f")>=0&&__classPrivateFieldGet(this,v,"f")<=b||__classPrivateFieldGet(this,v,"f")<0&&__classPrivateFieldGet(this,v,"f")>=-1n-b)i.writeInt(__classPrivateFieldGet(this,v,"f"));else i.writeBigInteger(__classPrivateFieldGet(this,v,"f"));e=(0,f.bytesToHex)(i.encode());break}default:throw new Error("Unsupported TransactionMetadatum kind")}return e}static fromCbor(e){const t=new TransactionMetadatum;const r=new i.CborReader(e);const s=r.peekState();switch(s){case a.CborReaderState.Tag:{const l=r.peekTag();switch(l){case o.CborTag.UnsignedBigNum:{r.readTag();const f=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(f),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Integer,"f");break}case o.CborTag.NegativeBigNum:{r.readTag();const h=r.readByteString();__classPrivateFieldSet(t,v,TransactionMetadatum.bufferToBigint(h)*-1n,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Integer,"f");break}}break}case a.CborReaderState.NegativeInteger:case a.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,v,r.readInt(),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Integer,"f");break;case a.CborReaderState.StartIndefiniteLengthByteString:case a.CborReaderState.ByteString:__classPrivateFieldSet(t,_,r.readByteString(),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Bytes,"f");break;case a.CborReaderState.StartIndefiniteLengthTextString:case a.CborReaderState.TextString:__classPrivateFieldSet(t,w,r.readTextString(),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Text,"f");break;case a.CborReaderState.StartArray:__classPrivateFieldSet(t,p,d.MetadatumList.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.List,"f");break;case a.CborReaderState.StartMap:__classPrivateFieldSet(t,m,c.MetadatumMap.fromCbor(n.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,g,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,y,"f")){case u.TransactionMetadatumKind.Bytes:return new Uint8Array(__classPrivateFieldGet(this,_,"f"));case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,w,"f");case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f");case u.TransactionMetadatumKind.List:return TransactionMetadatum.mapToCoreMetadatumList(__classPrivateFieldGet(this,p,"f"));case u.TransactionMetadatumKind.Map:{const e=__classPrivateFieldGet(this,m,"f");const t=new Map;const r=e.getKeys();for(let s=0;s<r.getLength();s++){const i=r.get(s);t.set(i.toCore(),e.get(i).toCore())}return t}default:throw new l.NotImplementedError(`TransactionMetadatum mapping for kind ${__classPrivateFieldGet(this,y,"f")}`)}}static fromCore(e){if(null===e)throw new l.SerializationError(l.SerializationFailure.InvalidType);switch(typeof e){case"number":case"boolean":case"undefined":throw new l.SerializationError(l.SerializationFailure.InvalidType);case"bigint":return TransactionMetadatum.newInteger(e);case"string":check64Length(e);return TransactionMetadatum.newText(e);default:{if(Array.isArray(e)){const t=new d.MetadatumList;for(const r of e)t.add(TransactionMetadatum.fromCore(r));return TransactionMetadatum.newList(t)}if(ArrayBuffer.isView(e)){check64Length(e);return TransactionMetadatum.newBytes(e)}const s=new c.MetadatumMap;for(const[i,a]of e.entries())s.insert(TransactionMetadatum.fromCore(i),TransactionMetadatum.fromCore(a));return TransactionMetadatum.newMap(s)}}}static newMap(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Map,"f");return t}static newList(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.List,"f");return t}static newInteger(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Integer,"f");return t}static newBytes(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Bytes,"f");return t}static newText(e){const t=new TransactionMetadatum;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,y,u.TransactionMetadatumKind.Text,"f");return t}getKind(){return __classPrivateFieldGet(this,y,"f")}asMap(){return __classPrivateFieldGet(this,m,"f")}asList(){return __classPrivateFieldGet(this,p,"f")}asInteger(){return __classPrivateFieldGet(this,v,"f")}asBytes(){return __classPrivateFieldGet(this,_,"f")}asText(){return __classPrivateFieldGet(this,w,"f")}equals(e){let t=false;switch(__classPrivateFieldGet(this,y,"f")){case u.TransactionMetadatumKind.Bytes:if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(e,_,"f")){return __classPrivateFieldGet(this,_,"f").length===__classPrivateFieldGet(e,_,"f").length&&__classPrivateFieldGet(this,_,"f").every((t,r)=>t===__classPrivateFieldGet(e,_,"f")[r])}return false;case u.TransactionMetadatumKind.Integer:return __classPrivateFieldGet(this,v,"f")===__classPrivateFieldGet(e,v,"f");case u.TransactionMetadatumKind.Text:return __classPrivateFieldGet(this,w,"f")===__classPrivateFieldGet(e,w,"f");case u.TransactionMetadatumKind.List:if(__classPrivateFieldGet(this,p,"f")&&__classPrivateFieldGet(e,p,"f")){return __classPrivateFieldGet(this,p,"f").equals(__classPrivateFieldGet(e,p,"f"))}return false;case u.TransactionMetadatumKind.Map:if(__classPrivateFieldGet(this,m,"f")&&__classPrivateFieldGet(e,m,"f")){return __classPrivateFieldGet(this,m,"f").equals(__classPrivateFieldGet(e,m,"f"))}return false;default:t=false}return t}static mapToCoreMetadatumList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return t}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}constructor(){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,u.TransactionMetadatumKind.Map);g.set(this,void 0)}}m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js":(e,t,r)=>{"use strict";r.d(t,{TransactionMetadatumKind:()=>s});var s;(function(e){e[e["Map"]=0]="Map";e[e["List"]=1]="List";e[e["Integer"]=2]="Integer";e[e["Bytes"]=3]="Bytes";e[e["Text"]=4]="Text"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js":(e,t,r)=>{"use strict";r.d(t,{CborAdditionalInfo:()=>s});var s;(function(e){e[e["AdditionalFalse"]=20]="AdditionalFalse";e[e["AdditionalTrue"]=21]="AdditionalTrue";e[e["AdditionalNull"]=22]="AdditionalNull";e[e["Additional8BitData"]=24]="Additional8BitData";e[e["Additional16BitData"]=25]="Additional16BitData";e[e["Additional32BitData"]=26]="Additional32BitData";e[e["Additional64BitData"]=27]="Additional64BitData";e[e["IndefiniteLength"]=31]="IndefiniteLength"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js":(e,t,r)=>{"use strict";r.d(t,{CborInitialByte:()=>CborInitialByte});var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var s;class CborInitialByte{CborInitialByte(e,t){__classPrivateFieldSet(this,s,e<<5|t,"f")}static from(e){const t=new CborInitialByte;__classPrivateFieldSet(t,s,e,"f");return t}getInitialByte(){return __classPrivateFieldGet(this,s,"f")}getMajorType(){return __classPrivateFieldGet(this,s,"f")>>5}getAdditionalInfo(){return __classPrivateFieldGet(this,s,"f")&CborInitialByte.AdditionalInformationMask}constructor(){s.set(this,void 0)}}s=new WeakMap;CborInitialByte.IndefiniteLengthBreakByte=255;CborInitialByte.AdditionalInformationMask=31},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js":(e,t,r)=>{"use strict";r.d(t,{CborMajorType:()=>s});var s;(function(e){e[e["UnsignedInteger"]=0]="UnsignedInteger";e[e["NegativeInteger"]=1]="NegativeInteger";e[e["ByteString"]=2]="ByteString";e[e["Utf8String"]=3]="Utf8String";e[e["Array"]=4]="Array";e[e["Map"]=5]="Map";e[e["Tag"]=6]="Tag";e[e["Simple"]=7]="Simple"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js":(e,t,r)=>{"use strict";r.d(t,{CborReader:()=>CborReader});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R;const D="Unexpected end of buffer";class CborReader{peekState(){if(__classPrivateFieldGet(this,_,"f")===n.CborReaderState.Undefined)__classPrivateFieldSet(this,_,__classPrivateFieldGet(this,l,"m",T).call(this),"f");return __classPrivateFieldGet(this,_,"f")}getBytesRemaining(){return __classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,h,"f")}skipValue(){this.readEncodedValue()}readEncodedValue(){const e=__classPrivateFieldGet(this,h,"f");let t=0;do{t=__classPrivateFieldGet(this,l,"m",R).call(this,t)}while(t>0)return __classPrivateFieldGet(this,f,"f").slice(e,__classPrivateFieldGet(this,h,"f"))}readStartArray(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Array);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Array);return null}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:i}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",j).call(this,i);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Array,r);return r}readEndArray(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Array);__classPrivateFieldGet(this,l,"m",k).call(this)}}readInt(){const e=__classPrivateFieldGet(this,l,"m",I).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return e.signedInt}readUInt(){const e=__classPrivateFieldGet(this,l,"m",A).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,e.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return e.unsignedInt}readDouble(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Simple);let t;const r=__classPrivateFieldGet(this,l,"m",C).call(this);switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional16BitData:__classPrivateFieldGet(this,l,"m",x).call(this,3);t=(0,d.decodeHalf)(r.slice(1));__classPrivateFieldGet(this,l,"m",j).call(this,3);__classPrivateFieldGet(this,l,"m",k).call(this);return t;case s.CborAdditionalInfo.Additional32BitData:__classPrivateFieldGet(this,l,"m",x).call(this,5);t=c.from(r).readFloatBE(1);__classPrivateFieldGet(this,l,"m",j).call(this,5);__classPrivateFieldGet(this,l,"m",k).call(this);return t;case s.CborAdditionalInfo.Additional64BitData:__classPrivateFieldGet(this,l,"m",x).call(this,9);t=c.from(r).readDoubleBE(1);__classPrivateFieldGet(this,l,"m",j).call(this,9);__classPrivateFieldGet(this,l,"m",k).call(this);return t;default:throw new i.CborInvalidOperationException("Not a float encoding")}}readSimpleValue(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Simple);if((e.getInitialByte()&a.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this);return e.getAdditionalInfo().valueOf()}if(e.getAdditionalInfo()===s.CborAdditionalInfo.Additional8BitData){__classPrivateFieldGet(this,l,"m",x).call(this,2);const t=__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")+1];__classPrivateFieldGet(this,l,"m",j).call(this,2);__classPrivateFieldGet(this,l,"m",k).call(this);return t}throw new i.CborInvalidOperationException("Not a simple value encoding")}readCborNegativeIntegerRepresentation(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.NegativeInteger);const t=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));__classPrivateFieldGet(this,l,"m",j).call(this,t.bytesRead);__classPrivateFieldGet(this,l,"m",k).call(this);return t.unsignedInt}readStartMap(){let e=null;const t=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Map);if(t.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Map);e=null}else{const r=__classPrivateFieldGet(this,l,"m",C).call(this);const a=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,t,r);if(2*a.length>r.length-a.bytesRead)throw new i.CborContentException("Definite length exceeds buffer size");__classPrivateFieldGet(this,l,"m",j).call(this,a.bytesRead);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Map,2*a.length);e=a.length}__classPrivateFieldGet(this,v,"f").currentKeyOffset=__classPrivateFieldGet(this,h,"f");return e}readEndMap(){if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){__classPrivateFieldGet(this,l,"m",g).call(this);if(__classPrivateFieldGet(this,v,"f").itemsRead%2!==0)throw new i.CborContentException("Key missing value");__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}else{__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Map);__classPrivateFieldGet(this,l,"m",k).call(this)}}readBoolean(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalTrue&&t!==s.CborAdditionalInfo.AdditionalFalse)throw new i.CborContentException("Not a boolean encoding");const r=t===s.CborAdditionalInfo.AdditionalTrue;__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this);return r}readNull(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Simple);const t=e.getAdditionalInfo();if(t!==s.CborAdditionalInfo.AdditionalNull)throw new i.CborContentException("Not a null encoding");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",k).call(this)}readStartIndefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new i.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.ByteString)}readEndIndefiniteLengthByteString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}readByteString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",B).call(this,o.CborMajorType.ByteString);__classPrivateFieldGet(this,l,"m",j).call(this,r);__classPrivateFieldGet(this,l,"m",k).call(this);return t}const i=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:a,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,i);__classPrivateFieldGet(this,l,"m",x).call(this,n+a);__classPrivateFieldGet(this,l,"m",j).call(this,n+a);__classPrivateFieldGet(this,l,"m",k).call(this);return i.slice(n,n+a)}readDefiniteLengthByteString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.ByteString);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new i.CborInvalidOperationException("Expected definite length array and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:a}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",x).call(this,a+r);__classPrivateFieldGet(this,l,"m",j).call(this,a+r);__classPrivateFieldGet(this,l,"m",k).call(this);return t.slice(a,a+r)}readStartIndefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength)throw new i.CborInvalidOperationException("Not indefinite length string");__classPrivateFieldGet(this,l,"m",j).call(this,1);__classPrivateFieldGet(this,l,"m",b).call(this,o.CborMajorType.Utf8String)}readEndIndefiniteLengthTextString(){__classPrivateFieldGet(this,l,"m",g).call(this);__classPrivateFieldGet(this,l,"m",P).call(this,o.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",k).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,1)}readTextString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){const{val:t,encodingLength:r}=__classPrivateFieldGet(this,l,"m",B).call(this,o.CborMajorType.Utf8String);__classPrivateFieldGet(this,l,"m",j).call(this,r);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(t).toString("utf8")}const i=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:a,bytesRead:n}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,i);__classPrivateFieldGet(this,l,"m",x).call(this,n+a);__classPrivateFieldGet(this,l,"m",j).call(this,n+a);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(i.slice(n,n+a)).toString("utf8")}readDefiniteLengthTextString(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Utf8String);if(e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength){throw new i.CborInvalidOperationException("Expected definite length string and got indefinite length")}const t=__classPrivateFieldGet(this,l,"m",C).call(this);const{length:r,bytesRead:a}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,e,t);__classPrivateFieldGet(this,l,"m",x).call(this,a+r);__classPrivateFieldGet(this,l,"m",j).call(this,a+r);__classPrivateFieldGet(this,l,"m",k).call(this);return c.from(t.slice(a,a+r)).toString("utf8")}readTag(){const{tag:e,bytesRead:t}=__classPrivateFieldGet(this,l,"m",F).call(this);__classPrivateFieldGet(this,l,"m",j).call(this,t);__classPrivateFieldSet(this,p,true,"f");return e}peekTag(){const{tag:e}=__classPrivateFieldGet(this,l,"m",F).call(this);return e}static ensureReadCapacityInArray(e,t){if(e.length<t){throw new i.CborContentException(D)}}static mapSimpleValueDataToReaderState(e){switch(e){case s.CborAdditionalInfo.AdditionalNull:return n.CborReaderState.Null;case s.CborAdditionalInfo.AdditionalFalse:case s.CborAdditionalInfo.AdditionalTrue:return n.CborReaderState.Boolean;case s.CborAdditionalInfo.Additional16BitData:return n.CborReaderState.HalfPrecisionFloat;case s.CborAdditionalInfo.Additional32BitData:return n.CborReaderState.SinglePrecisionFloat;case s.CborAdditionalInfo.Additional64BitData:return n.CborReaderState.DoublePrecisionFloat;default:return n.CborReaderState.SimpleValue}}constructor(e){l.add(this);f.set(this,void 0);h.set(this,0);m.set(this,new Array);p.set(this,false);v.set(this,void 0);_.set(this,n.CborReaderState.Undefined);__classPrivateFieldSet(this,f,new Uint8Array(c.from(e,"hex")),"f");__classPrivateFieldSet(this,v,{currentKeyOffset:null,frameOffset:0,itemsRead:0,type:null},"f")}}u=CborReader,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,l=new WeakSet,w=function _CborReader_peekInitialByte(e){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0)throw new i.CborInvalidOperationException("No more data items to read");if(__classPrivateFieldGet(this,h,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,h,"f")>0)throw new i.CborInvalidOperationException("End of root-level. No more data items to read");throw new i.CborContentException(D)}const t=a.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")]);switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.ByteString:case o.CborMajorType.Utf8String:if(t.getInitialByte()===a.CborInitialByte.IndefiniteLengthBreakByte||t.getMajorType()===__classPrivateFieldGet(this,v,"f").type&&t.getAdditionalInfo()!==s.CborAdditionalInfo.IndefiniteLength){break}throw new i.CborContentException(`Indefinite length string contains invalid data item, ${t.getMajorType()}`)}if(e&&e!==t.getMajorType())throw new i.CborInvalidOperationException(`Major type mismatch, expected type ${e} but got ${t.getMajorType()}`);return t},y=function _CborReader_peekNextInitialByte(e,t){CborReader.ensureReadCapacityInArray(e,1);const r=a.CborInitialByte.from(e[0]);if(r.getInitialByte()!==a.CborInitialByte.IndefiniteLengthBreakByte&&r.getMajorType()!==t)throw new i.CborContentException("Indefinite length string contains invalid data item");return r},g=function _CborReader_validateNextByteIsBreakByte(){const e=__classPrivateFieldGet(this,l,"m",w).call(this);if(e.getInitialByte()!==a.CborInitialByte.IndefiniteLengthBreakByte)throw new i.CborInvalidOperationException("Not at end of indefinite length data item")},b=function _CborReader_pushDataItem(e,t){const r={currentKeyOffset:__classPrivateFieldGet(this,v,"f").currentKeyOffset,definiteLength:__classPrivateFieldGet(this,v,"f").definiteLength,frameOffset:__classPrivateFieldGet(this,v,"f").frameOffset,itemsRead:__classPrivateFieldGet(this,v,"f").itemsRead,type:__classPrivateFieldGet(this,v,"f").type};__classPrivateFieldGet(this,m,"f").push(r);__classPrivateFieldGet(this,v,"f").type=e;__classPrivateFieldGet(this,v,"f").definiteLength=t;__classPrivateFieldGet(this,v,"f").itemsRead=0;__classPrivateFieldGet(this,v,"f").frameOffset=__classPrivateFieldGet(this,h,"f");__classPrivateFieldSet(this,p,false,"f");__classPrivateFieldGet(this,v,"f").currentKeyOffset=null},P=function _CborReader_popDataItem(e){if(null===__classPrivateFieldGet(this,v,"f").type||__classPrivateFieldGet(this,m,"f").length<=0)throw new i.CborInvalidOperationException("Is at root context");if(e!==__classPrivateFieldGet(this,v,"f").type)throw new i.CborInvalidOperationException(`Pop major type mismatch, expected ${e} but got ${__classPrivateFieldGet(this,v,"f").type}`);if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead>0)throw new i.CborInvalidOperationException("Not at end of definite length data item");if(__classPrivateFieldGet(this,p,"f"))throw new i.CborContentException("Tag not followed by value");const t=__classPrivateFieldGet(this,m,"f").pop();__classPrivateFieldGet(this,l,"m",S).call(this,t)},S=function _CborReader_restoreStackFrame(e){__classPrivateFieldGet(this,v,"f").type=e.type;__classPrivateFieldGet(this,v,"f").frameOffset=e.frameOffset;__classPrivateFieldGet(this,v,"f").definiteLength=e.definiteLength;__classPrivateFieldGet(this,v,"f").itemsRead=e.itemsRead;__classPrivateFieldGet(this,v,"f").currentKeyOffset=e.currentKeyOffset;__classPrivateFieldSet(this,_,n.CborReaderState.Undefined,"f")},C=function _CborReader_getRemainingBytes(){return __classPrivateFieldGet(this,f,"f").slice(__classPrivateFieldGet(this,h,"f"))},k=function _CborReader_advanceDataItemCounters(){++__classPrivateFieldGet(this,v,"f").itemsRead;__classPrivateFieldSet(this,p,false,"f")},j=function _CborReader_advanceBuffer(e){if(__classPrivateFieldGet(this,h,"f")+e>__classPrivateFieldGet(this,f,"f").length)throw new i.CborContentException("Buffer offset out of bounds");__classPrivateFieldSet(this,h,__classPrivateFieldGet(this,h,"f")+e,"f");__classPrivateFieldSet(this,_,n.CborReaderState.Undefined,"f")},x=function _CborReader_ensureReadCapacity(e){if(__classPrivateFieldGet(this,f,"f").length-__classPrivateFieldGet(this,h,"f")<e){throw new i.CborContentException(D)}},T=function _CborReader_peekStateCore(){if(void 0!==__classPrivateFieldGet(this,v,"f").definiteLength&&__classPrivateFieldGet(this,v,"f").definiteLength-__classPrivateFieldGet(this,v,"f").itemsRead===0){if(null===__classPrivateFieldGet(this,v,"f").type)return n.CborReaderState.Finished;switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.Array:return n.CborReaderState.EndArray;case o.CborMajorType.Map:return n.CborReaderState.EndMap;default:throw new i.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}if(__classPrivateFieldGet(this,h,"f")===__classPrivateFieldGet(this,f,"f").length){if(null===__classPrivateFieldGet(this,v,"f").type&&void 0===__classPrivateFieldGet(this,v,"f").definiteLength){return n.CborReaderState.Finished}throw new i.CborInvalidOperationException(D)}const e=a.CborInitialByte.from(__classPrivateFieldGet(this,f,"f")[__classPrivateFieldGet(this,h,"f")]);if(e.getInitialByte()===a.CborInitialByte.IndefiniteLengthBreakByte){if(__classPrivateFieldGet(this,p,"f")){throw new i.CborContentException("Tag not followed by value")}if(void 0===__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case null:throw new i.CborContentException("Unexpected break byte");case o.CborMajorType.ByteString:return n.CborReaderState.EndIndefiniteLengthByteString;case o.CborMajorType.Utf8String:return n.CborReaderState.EndIndefiniteLengthTextString;case o.CborMajorType.Array:return n.CborReaderState.EndArray;case o.CborMajorType.Map:if(__classPrivateFieldGet(this,v,"f").itemsRead%2===0)return n.CborReaderState.EndMap;throw new i.CborContentException("Key missing value");default:throw new i.CborInvalidOperationException("Invalid CBOR major type pushed to stack.")}}else{throw new i.CborContentException("Unexpected break byte")}}if(null!==__classPrivateFieldGet(this,v,"f").type&&null!==__classPrivateFieldGet(this,v,"f").definiteLength){switch(__classPrivateFieldGet(this,v,"f").type){case o.CborMajorType.ByteString:case o.CborMajorType.Utf8String:if(e.getMajorType()!==__classPrivateFieldGet(this,v,"f").type){throw new i.CborContentException("Indefinite length string contains invalid data item")}break}}switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:return n.CborReaderState.UnsignedInteger;case o.CborMajorType.NegativeInteger:return n.CborReaderState.NegativeInteger;case o.CborMajorType.ByteString:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthByteString:n.CborReaderState.ByteString;case o.CborMajorType.Utf8String:return e.getAdditionalInfo()===s.CborAdditionalInfo.IndefiniteLength?n.CborReaderState.StartIndefiniteLengthTextString:n.CborReaderState.TextString;case o.CborMajorType.Array:return n.CborReaderState.StartArray;case o.CborMajorType.Map:return n.CborReaderState.StartMap;case o.CborMajorType.Tag:return n.CborReaderState.Tag;case o.CborMajorType.Simple:return CborReader.mapSimpleValueDataToReaderState(e.getAdditionalInfo());default:throw new i.CborContentException("Invalid CBOR major type.")}},E=function _CborReader_peekDefiniteLength(e,t){const{unsignedInt:r,bytesRead:s}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,t);return{bytesRead:s,length:Number(r)}},A=function _CborReader_peekUnsignedInteger(){const e=__classPrivateFieldGet(this,l,"m",w).call(this);switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:return __classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));case o.CborMajorType.NegativeInteger:throw new i.CborContentException("Integer overflow");default:throw new i.CborInvalidOperationException(`Reader type mismatch, expected ${o.CborMajorType.UnsignedInteger} but got ${e.getMajorType()}`)}},I=function _CborReader_peekSignedInteger(){const e=__classPrivateFieldGet(this,l,"m",w).call(this);switch(e.getMajorType()){case o.CborMajorType.UnsignedInteger:{const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,signedInt:BigInt(t)}}case o.CborMajorType.NegativeInteger:{const{unsignedInt:s,bytesRead:a}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:a,signedInt:BigInt(-1)-s}}default:throw new i.CborInvalidOperationException(`Reader type mismatch, expected ${o.CborMajorType.UnsignedInteger} or ${o.CborMajorType.NegativeInteger} but got ${e.getMajorType()}`)}},B=function _CborReader_readIndefiniteLengthByteStringConcatenated(e){const t=__classPrivateFieldGet(this,l,"m",C).call(this);let r=c.from([]);let s=0;let i=1;let o=__classPrivateFieldGet(CborReader,u,"m",y).call(CborReader,t.slice(i),e);while(o.getInitialByte()!==a.CborInitialByte.IndefiniteLengthBreakByte){const{length:n,bytesRead:d}=__classPrivateFieldGet(CborReader,u,"m",E).call(CborReader,o,t.slice(i));const f=d+Number(n);r=c.concat([r,t.slice(i+(f-n),i+f)]);i+=f;o=__classPrivateFieldGet(CborReader,u,"m",y).call(CborReader,t.slice(i),e)}s=i+1;return{encodingLength:s,val:new Uint8Array(r)}},F=function _CborReader_peekTagCore(){const e=__classPrivateFieldGet(this,l,"m",w).call(this,o.CborMajorType.Tag);const{unsignedInt:t,bytesRead:r}=__classPrivateFieldGet(CborReader,u,"m",M).call(CborReader,e,__classPrivateFieldGet(this,l,"m",C).call(this));return{bytesRead:r,tag:Number(t)}},M=function _CborReader_decodeUnsignedInteger(e,t){if((e.getInitialByte()&a.CborInitialByte.AdditionalInformationMask)<s.CborAdditionalInfo.Additional8BitData)return{bytesRead:1,unsignedInt:BigInt(e.getAdditionalInfo())};switch(e.getAdditionalInfo()){case s.CborAdditionalInfo.Additional8BitData:CborReader.ensureReadCapacityInArray(t,2);return{bytesRead:2,unsignedInt:BigInt(t[1])};case s.CborAdditionalInfo.Additional16BitData:{CborReader.ensureReadCapacityInArray(t,3);const r=c.from(t.slice(1));const o=r.readUInt16BE();return{bytesRead:3,unsignedInt:BigInt(o)}}case s.CborAdditionalInfo.Additional32BitData:{CborReader.ensureReadCapacityInArray(t,5);const n=c.from(t.slice(1));const d=n.readUInt32BE();return{bytesRead:5,unsignedInt:BigInt(d)}}case s.CborAdditionalInfo.Additional64BitData:{CborReader.ensureReadCapacityInArray(t,9);const l=c.from(t.slice(1,9));let u=BigInt(0);for(const f of l)u=(u<<BigInt(8))+BigInt(f);return{bytesRead:9,unsignedInt:u}}default:throw new i.CborContentException("Invalid integer encoding")}},R=function _CborReader_skipNextNode(e){let t;let r=e;while((t=__classPrivateFieldGet(this,l,"m",T).call(this))===n.CborReaderState.Tag)this.readTag();switch(t){case n.CborReaderState.UnsignedInteger:this.readUInt();break;case n.CborReaderState.NegativeInteger:this.readCborNegativeIntegerRepresentation();break;case n.CborReaderState.ByteString:this.readByteString();break;case n.CborReaderState.TextString:this.readTextString();break;case n.CborReaderState.StartIndefiniteLengthByteString:this.readStartIndefiniteLengthByteString();r++;break;case n.CborReaderState.EndIndefiniteLengthByteString:this.readEndIndefiniteLengthByteString();r--;break;case n.CborReaderState.StartIndefiniteLengthTextString:this.readStartIndefiniteLengthTextString();r++;break;case n.CborReaderState.EndIndefiniteLengthTextString:if(0===r)throw new i.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndIndefiniteLengthTextString();r--;break;case n.CborReaderState.StartArray:this.readStartArray();r++;break;case n.CborReaderState.EndArray:if(0===r)throw new i.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndArray();r--;break;case n.CborReaderState.StartMap:this.readStartMap();r++;break;case n.CborReaderState.EndMap:if(0===r)throw new i.CborInvalidOperationException(`Skip invalid state: ${t}`);this.readEndMap();r--;break;case n.CborReaderState.HalfPrecisionFloat:case n.CborReaderState.SinglePrecisionFloat:case n.CborReaderState.DoublePrecisionFloat:this.readDouble();break;case n.CborReaderState.Null:case n.CborReaderState.Boolean:case n.CborReaderState.SimpleValue:this.readSimpleValue();break;default:throw new i.CborInvalidOperationException(`Skip invalid state: ${t}`)}return r}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js":(e,t,r)=>{"use strict";r.d(t,{CborReaderState:()=>s});var s;(function(e){e[e["Undefined"]=0]="Undefined";e[e["UnsignedInteger"]=1]="UnsignedInteger";e[e["NegativeInteger"]=2]="NegativeInteger";e[e["ByteString"]=3]="ByteString";e[e["StartIndefiniteLengthByteString"]=4]="StartIndefiniteLengthByteString";e[e["EndIndefiniteLengthByteString"]=5]="EndIndefiniteLengthByteString";e[e["TextString"]=6]="TextString";e[e["StartIndefiniteLengthTextString"]=7]="StartIndefiniteLengthTextString";e[e["EndIndefiniteLengthTextString"]=8]="EndIndefiniteLengthTextString";e[e["StartArray"]=9]="StartArray";e[e["EndArray"]=10]="EndArray";e[e["StartMap"]=11]="StartMap";e[e["EndMap"]=12]="EndMap";e[e["Tag"]=13]="Tag";e[e["SimpleValue"]=14]="SimpleValue";e[e["HalfPrecisionFloat"]=15]="HalfPrecisionFloat";e[e["SinglePrecisionFloat"]=16]="SinglePrecisionFloat";e[e["DoublePrecisionFloat"]=17]="DoublePrecisionFloat";e[e["Null"]=18]="Null";e[e["Boolean"]=19]="Boolean";e[e["Finished"]=20]="Finished"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js":(e,t,r)=>{"use strict";r.d(t,{CborTag:()=>s});var s;(function(e){e[e["DateTimeString"]=0]="DateTimeString";e[e["UnixTimeSeconds"]=1]="UnixTimeSeconds";e[e["UnsignedBigNum"]=2]="UnsignedBigNum";e[e["NegativeBigNum"]=3]="NegativeBigNum";e[e["DecimalFraction"]=4]="DecimalFraction";e[e["BigFloat"]=5]="BigFloat";e[e["Base64UrlLaterEncoding"]=21]="Base64UrlLaterEncoding";e[e["Base64StringLaterEncoding"]=22]="Base64StringLaterEncoding";e[e["Base16StringLaterEncoding"]=23]="Base16StringLaterEncoding";e[e["EncodedCborDataItem"]=24]="EncodedCborDataItem";e[e["RationalNumber"]=30]="RationalNumber";e[e["Uri"]=32]="Uri";e[e["Base64Url"]=33]="Base64Url";e[e["Base64"]=34]="Base64";e[e["Regex"]=35]="Regex";e[e["MimeMessage"]=36]="MimeMessage";e[e["Set"]=258]="Set";e[e["SelfDescribeCbor"]=55799]="SelfDescribeCbor"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js":(e,t,r)=>{"use strict";r.d(t,{CborWriter:()=>CborWriter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d,c,l,u,f,h;const m=BigInt(-1);const p=BigInt("0x100000000");const v=24;const _=25;const w=26;const y=27;const g=244;const b=245;const P=246;const S=247;const C=159;const k=191;const j=249;const x=250;const T=251;const E=n.from("ffc00000","hex");const A=n.from("fff0000000000000","hex");const I=n.from("7ff0000000000000","hex");class CborWriter{writeBigInteger(e){let t=a.CborTag.UnsignedBigNum;if(e<0){e=-e+m;t=a.CborTag.NegativeBigNum}let r=e.toString(16);if(r.length%2)r=`0${r}`;const s=n.from(r,"hex");this.writeTag(t);__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.ByteString,s.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),s]),"f");return this}writeBoolean(e){__classPrivateFieldGet(this,d,"m",u).call(this,e?b:g);return this}writeByteString(e){__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.ByteString,e.length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeTextString(e){__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.Utf8String,n.from(e,"utf8").length);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),n.from(e,"utf8")]),"f");return this}writeEncodedValue(e){__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),e]),"f");return this}writeStartArray(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.Array,e);else __classPrivateFieldGet(this,d,"m",u).call(this,C);return this}writeEndArray(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeStartMap(e){if(void 0!==e)__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.Map,e);else __classPrivateFieldGet(this,d,"m",u).call(this,k);return this}writeEndMap(){__classPrivateFieldGet(this,d,"m",u).call(this,s.CborInitialByte.IndefiniteLengthBreakByte);return this}writeInt(e){if(e<0)__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.NegativeInteger,-(BigInt(e)+1n));else __classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.UnsignedInteger,e);return this}writeFloat(e){let t;if(e===Number.NEGATIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(A);return this}if(e===Number.POSITIVE_INFINITY){__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(I);return this}if(Number.isNaN(e)){__classPrivateFieldGet(this,d,"m",u).call(this,x);this.writeEncodedValue(E);return this}try{t=(0,o.encodeHalf)(e);__classPrivateFieldGet(this,d,"m",u).call(this,j);this.writeEncodedValue(t)}catch{const r=n.allocUnsafe(4);r.writeFloatBE(e,0);if(r.readFloatBE(0)===e){__classPrivateFieldGet(this,d,"m",u).call(this,x);this.writeEncodedValue(r.valueOf())}else{const s=n.allocUnsafe(8);s.writeFloatBE(e,0);__classPrivateFieldGet(this,d,"m",u).call(this,T);this.writeEncodedValue(s.valueOf())}}return this}writeNull(){__classPrivateFieldGet(this,d,"m",u).call(this,P);return this}writeUndefined(){__classPrivateFieldGet(this,d,"m",u).call(this,S);return this}writeTag(e){__classPrivateFieldGet(this,d,"m",l).call(this,i.CborMajorType.Tag,e);return this}encodeAsHex(){return __classPrivateFieldGet(this,c,"f").toString("hex")}encode(){return new Uint8Array(__classPrivateFieldGet(this,c,"f"))}reset(){__classPrivateFieldSet(this,c,n.from([]),"f")}constructor(){d.add(this);c.set(this,n.from([]))}}c=new WeakMap,d=new WeakSet,l=function _CborWriter_writeTypeValue(e,t){const r=e<<5;if(t<24)__classPrivateFieldGet(this,d,"m",u).call(this,r|Number(t));else if(t<256){__classPrivateFieldGet(this,d,"m",u).call(this,r|v);__classPrivateFieldGet(this,d,"m",u).call(this,Number(t))}else if(t<65536){__classPrivateFieldGet(this,d,"m",u).call(this,r|_);__classPrivateFieldGet(this,d,"m",f).call(this,Number(t))}else if(t<4294967296){__classPrivateFieldGet(this,d,"m",u).call(this,r|w);__classPrivateFieldGet(this,d,"m",h).call(this,Number(t))}else{__classPrivateFieldGet(this,d,"m",u).call(this,r|y);__classPrivateFieldGet(this,d,"m",h).call(this,Number(BigInt(t)/p));__classPrivateFieldGet(this,d,"m",h).call(this,Number(BigInt(t)%p))}},u=function _CborWriter_pushUInt8(e){const t=n.allocUnsafe(1);t.writeUInt8(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},f=function _CborWriter_pushUInt16(e){const t=n.allocUnsafe(2);t.writeUInt16BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")},h=function _CborWriter_pushUInt32(e){const t=n.allocUnsafe(4);t.writeUInt32BE(e,0);__classPrivateFieldSet(this,c,n.concat([__classPrivateFieldGet(this,c,"f"),t]),"f")}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/Half.js":(e,t,r)=>{"use strict";r.d(t,{decodeHalf:()=>decodeHalf,encodeHalf:()=>encodeHalf});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var i=r("../../node_modules/buffer/index.js")["Buffer"];const a="Invalid conversion. Loss of precision";const ldexp=(e,t)=>{const r=Math.min(3,Math.ceil(Math.abs(t)/1023));let s=e;for(let i=0;i<r;i++)s*=Math.pow(2,Math.floor((t+i)/r));return s};const decodeHalf=e=>{const t=(e[0]<<8)+e[1];const r=t>>10&31;const s=1023&t;let i;i=0===r?ldexp(s,-24):31!==r?ldexp(s+1024,r-25):0===s?Number.POSITIVE_INFINITY:Number.NaN;return 32768&t?-i:i};const encodeHalf=e=>{const t=i.allocUnsafe(4);t.writeFloatBE(e,0);const r=t.readUInt32BE(0);if((8191&r)!==0){throw new s.LossOfPrecisionException(a)}let o=r>>16&32768;const n=r>>23&255;const d=8388607&r;if(n>=113&&n<=142)o+=(n-112<<10)+(d>>13);else if(n>=103&&n<113){if(d&(1<<126-n)-1){throw new s.LossOfPrecisionException(a)}o+=d+8388608>>126-n}else{throw new s.LossOfPrecisionException(a)}const c=new Uint8Array(2);c[0]=o>>>8&255;c[1]=255&o;return c}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js":(e,t,r)=>{"use strict";r.d(t,{CborContentException:()=>CborContentException,CborInvalidOperationException:()=>CborInvalidOperationException,LossOfPrecisionException:()=>LossOfPrecisionException});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");class CborInvalidOperationException extends s.CustomError{constructor(e){super(e)}}class CborContentException extends s.CustomError{constructor(e){super(e)}}class LossOfPrecisionException extends s.CustomError{constructor(e){super(e)}}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js":(e,t,r)=>{"use strict";r.d(t,{AuthCommitteeHot:()=>AuthCommitteeHot});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class AuthCommitteeHot{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.AuthCommitteeHot);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.AuthCommitteeHot)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.AuthCommitteeHot}, but got ${i}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readStartArray();if(f!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const p=Number(t.readInt());const v=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const _=new AuthCommitteeHot({hash:u,type:l},{hash:v,type:p});__classPrivateFieldSet(_,h,e,"f");return _}toCore(){return{__typename:n.CertificateType.AuthorizeCommitteeHot,coldCredential:__classPrivateFieldGet(this,u,"f"),hotCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new AuthCommitteeHot(e.coldCredential,e.hotCredential)}coldCredential(){return __classPrivateFieldGet(this,u,"f")}hotCredential(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js":(e,t,r)=>{"use strict";r.d(t,{Certificate:()=>Certificate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$;class Certificate{toCbor(){if(__classPrivateFieldGet(this,$,"f"))return __classPrivateFieldGet(this,$,"f");let e;switch(__classPrivateFieldGet(this,j,"f")){case a.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,F,"f").toCbor();break;case a.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,B,"f").toCbor();break;case a.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,I,"f").toCbor();break;case a.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,A,"f").toCbor();break;case a.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,E,"f").toCbor();break;case a.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,T,"f").toCbor();break;case a.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,x,"f").toCbor();break;case a.CertificateKind.Registration:e=__classPrivateFieldGet(this,M,"f").toCbor();break;case a.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,R,"f").toCbor();break;case a.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCbor();break;case a.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,O,"f").toCbor();break;case a.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCbor();break;case a.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,N,"f").toCbor();break;case a.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCbor();break;case a.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,K,"f").toCbor();break;case a.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,V,"f").toCbor();break;case a.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,W,"f").toCbor();break;case a.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,z,"f").toCbor();break;case a.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,U,"f").toCbor();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}return e}static fromCbor(e){let t;const r=new i.CborReader(e);r.readStartArray();const o=Number(r.readInt());switch(o){case a.CertificateKind.StakeRegistration:t=Certificate.newStakeRegistration(_.StakeRegistration.fromCbor(e));break;case a.CertificateKind.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCbor(e));break;case a.CertificateKind.StakeDelegation:t=Certificate.newStakeDelegation(p.StakeDelegation.fromCbor(e));break;case a.CertificateKind.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCbor(e));break;case a.CertificateKind.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCbor(e));break;case a.CertificateKind.MoveInstantaneousRewards:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCbor(e));break;case a.CertificateKind.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCbor(e));break;case a.CertificateKind.Registration:t=Certificate.newRegistrationCert(h.Registration.fromCbor(e));break;case a.CertificateKind.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCbor(e));break;case a.CertificateKind.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCbor(e));break;case a.CertificateKind.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(y.StakeVoteDelegation.fromCbor(e));break;case a.CertificateKind.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(w.StakeRegistrationDelegation.fromCbor(e));break;case a.CertificateKind.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(k.VoteRegistrationDelegation.fromCbor(e));break;case a.CertificateKind.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCbor(e));break;case a.CertificateKind.AuthCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCbor(e));break;case a.CertificateKind.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(m.ResignCommitteeCold.fromCbor(e));break;case a.CertificateKind.DrepRegistration:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCbor(e));break;case a.CertificateKind.DrepUnregistration:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCbor(e));break;case a.CertificateKind.UpdateDrep:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCbor(e));break;default:throw new d.InvalidStateError(`Unexpected kind value: ${o}`)}__classPrivateFieldSet(t,$,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,j,"f")){case a.CertificateKind.StakeRegistration:e=__classPrivateFieldGet(this,F,"f").toCore();break;case a.CertificateKind.StakeDeregistration:e=__classPrivateFieldGet(this,B,"f").toCore();break;case a.CertificateKind.StakeDelegation:e=__classPrivateFieldGet(this,I,"f").toCore();break;case a.CertificateKind.PoolRetirement:e=__classPrivateFieldGet(this,A,"f").toCore();break;case a.CertificateKind.PoolRegistration:e=__classPrivateFieldGet(this,E,"f").toCore();break;case a.CertificateKind.MoveInstantaneousRewards:e=__classPrivateFieldGet(this,T,"f").toCore();break;case a.CertificateKind.GenesisKeyDelegation:e=__classPrivateFieldGet(this,x,"f").toCore();break;case a.CertificateKind.Registration:e=__classPrivateFieldGet(this,M,"f").toCore();break;case a.CertificateKind.Unregistration:e=__classPrivateFieldGet(this,R,"f").toCore();break;case a.CertificateKind.VoteDelegation:e=__classPrivateFieldGet(this,D,"f").toCore();break;case a.CertificateKind.StakeVoteDelegation:e=__classPrivateFieldGet(this,O,"f").toCore();break;case a.CertificateKind.StakeRegistrationDelegation:e=__classPrivateFieldGet(this,G,"f").toCore();break;case a.CertificateKind.VoteRegistrationDelegation:e=__classPrivateFieldGet(this,N,"f").toCore();break;case a.CertificateKind.StakeVoteRegistrationDelegation:e=__classPrivateFieldGet(this,H,"f").toCore();break;case a.CertificateKind.AuthCommitteeHot:e=__classPrivateFieldGet(this,K,"f").toCore();break;case a.CertificateKind.ResignCommitteeCold:e=__classPrivateFieldGet(this,V,"f").toCore();break;case a.CertificateKind.DrepRegistration:e=__classPrivateFieldGet(this,W,"f").toCore();break;case a.CertificateKind.DrepUnregistration:e=__classPrivateFieldGet(this,z,"f").toCore();break;case a.CertificateKind.UpdateDrep:e=__classPrivateFieldGet(this,U,"f").toCore();break;default:throw new d.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,j,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case o.CertificateType.StakeRegistration:t=Certificate.newStakeRegistration(_.StakeRegistration.fromCore(e));break;case o.CertificateType.StakeDeregistration:t=Certificate.newStakeDeregistration(v.StakeDeregistration.fromCore(e));break;case o.CertificateType.StakeDelegation:t=Certificate.newStakeDelegation(p.StakeDelegation.fromCore(e));break;case o.CertificateType.PoolRetirement:t=Certificate.newPoolRetirement(u.PoolRetirement.fromCore(e));break;case o.CertificateType.PoolRegistration:t=Certificate.newPoolRegistration(l.PoolRegistration.fromCore(e));break;case o.CertificateType.MIR:t=Certificate.newMoveInstantaneousRewardsCert(c.MoveInstantaneousReward.fromCore(e));break;case o.CertificateType.GenesisKeyDelegation:t=Certificate.newGenesisKeyDelegation(n.GenesisKeyDelegation.fromCore(e));break;case o.CertificateType.Registration:t=Certificate.newRegistrationCert(h.Registration.fromCore(e));break;case o.CertificateType.Unregistration:t=Certificate.newUnregistrationCert(P.Unregistration.fromCore(e));break;case o.CertificateType.VoteDelegation:t=Certificate.newVoteDelegationCert(C.VoteDelegation.fromCore(e));break;case o.CertificateType.StakeVoteDelegation:t=Certificate.newStakeVoteDelegationCert(y.StakeVoteDelegation.fromCore(e));break;case o.CertificateType.StakeRegistrationDelegation:t=Certificate.newStakeRegistrationDelegationCert(w.StakeRegistrationDelegation.fromCore(e));break;case o.CertificateType.VoteRegistrationDelegation:t=Certificate.newVoteRegistrationDelegationCert(k.VoteRegistrationDelegation.fromCore(e));break;case o.CertificateType.StakeVoteRegistrationDelegation:t=Certificate.newStakeVoteRegistrationDelegationCert(g.StakeVoteRegistrationDelegation.fromCore(e));break;case o.CertificateType.AuthorizeCommitteeHot:t=Certificate.newAuthCommitteeHotCert(s.AuthCommitteeHot.fromCore(e));break;case o.CertificateType.ResignCommitteeCold:t=Certificate.newResignCommitteeColdCert(m.ResignCommitteeCold.fromCore(e));break;case o.CertificateType.RegisterDelegateRepresentative:t=Certificate.newRegisterDelegateRepresentativeCert(f.RegisterDelegateRepresentative.fromCore(e));break;case o.CertificateType.UnregisterDelegateRepresentative:t=Certificate.newUnregisterDelegateRepresentativeCert(b.UnregisterDelegateRepresentative.fromCore(e));break;case o.CertificateType.UpdateDelegateRepresentative:t=Certificate.newUpdateDelegateRepresentativeCert(S.UpdateDelegateRepresentative.fromCore(e));break;default:throw new d.InvalidStateError("Unexpected certificate type")}return t}static newStakeRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,F,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeRegistration,"f");return t}static newStakeDeregistration(e){const t=new Certificate;__classPrivateFieldSet(t,B,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeDeregistration,"f");return t}static newStakeDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,I,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeDelegation,"f");return t}static newPoolRegistration(e){const t=new Certificate;__classPrivateFieldSet(t,E,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.PoolRegistration,"f");return t}static newPoolRetirement(e){const t=new Certificate;__classPrivateFieldSet(t,A,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.PoolRetirement,"f");return t}static newGenesisKeyDelegation(e){const t=new Certificate;__classPrivateFieldSet(t,x,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.GenesisKeyDelegation,"f");return t}static newMoveInstantaneousRewardsCert(e){const t=new Certificate;__classPrivateFieldSet(t,T,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.MoveInstantaneousRewards,"f");return t}static newRegistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,M,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.Registration,"f");return t}static newUnregistrationCert(e){const t=new Certificate;__classPrivateFieldSet(t,R,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.Unregistration,"f");return t}static newVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,D,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.VoteDelegation,"f");return t}static newStakeVoteDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,O,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeVoteDelegation,"f");return t}static newStakeRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,G,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeRegistrationDelegation,"f");return t}static newVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,N,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.VoteRegistrationDelegation,"f");return t}static newStakeVoteRegistrationDelegationCert(e){const t=new Certificate;__classPrivateFieldSet(t,H,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.StakeVoteRegistrationDelegation,"f");return t}static newAuthCommitteeHotCert(e){const t=new Certificate;__classPrivateFieldSet(t,K,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.AuthCommitteeHot,"f");return t}static newResignCommitteeColdCert(e){const t=new Certificate;__classPrivateFieldSet(t,V,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.ResignCommitteeCold,"f");return t}static newRegisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,W,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.DrepRegistration,"f");return t}static newUnregisterDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,z,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.DrepUnregistration,"f");return t}static newUpdateDelegateRepresentativeCert(e){const t=new Certificate;__classPrivateFieldSet(t,U,e,"f");__classPrivateFieldSet(t,j,a.CertificateKind.UpdateDrep,"f");return t}kind(){return __classPrivateFieldGet(this,j,"f")}asStakeRegistration(){return __classPrivateFieldGet(this,F,"f")}asStakeDeregistration(){return __classPrivateFieldGet(this,B,"f")}asStakeDelegation(){return __classPrivateFieldGet(this,I,"f")}asPoolRegistration(){return __classPrivateFieldGet(this,E,"f")}asPoolRetirement(){return __classPrivateFieldGet(this,A,"f")}asGenesisKeyDelegation(){return __classPrivateFieldGet(this,x,"f")}asMoveInstantaneousRewardsCert(){return __classPrivateFieldGet(this,T,"f")}asRegistrationCert(){return __classPrivateFieldGet(this,M,"f")}asUnregistrationCert(){return __classPrivateFieldGet(this,R,"f")}asVoteDelegationCert(){return __classPrivateFieldGet(this,D,"f")}asStakeVoteDelegationCert(){return __classPrivateFieldGet(this,O,"f")}asStakeRegistrationDelegationCert(){return __classPrivateFieldGet(this,G,"f")}asVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,N,"f")}asStakeVoteRegistrationDelegationCert(){return __classPrivateFieldGet(this,H,"f")}asAuthCommitteeHotCert(){return __classPrivateFieldGet(this,K,"f")}asResignCommitteeColdCert(){return __classPrivateFieldGet(this,V,"f")}asRegisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,W,"f")}asUnregisterDelegateRepresentativeCert(){return __classPrivateFieldGet(this,z,"f")}asUpdateDelegateRepresentativeCert(){return __classPrivateFieldGet(this,U,"f")}constructor(){j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0)}}j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js":(e,t,r)=>{"use strict";r.d(t,{CertificateKind:()=>s});var s;(function(e){e[e["StakeRegistration"]=0]="StakeRegistration";e[e["StakeDeregistration"]=1]="StakeDeregistration";e[e["StakeDelegation"]=2]="StakeDelegation";e[e["PoolRegistration"]=3]="PoolRegistration";e[e["PoolRetirement"]=4]="PoolRetirement";e[e["GenesisKeyDelegation"]=5]="GenesisKeyDelegation";e[e["MoveInstantaneousRewards"]=6]="MoveInstantaneousRewards";e[e["Registration"]=7]="Registration";e[e["Unregistration"]=8]="Unregistration";e[e["VoteDelegation"]=9]="VoteDelegation";e[e["StakeVoteDelegation"]=10]="StakeVoteDelegation";e[e["StakeRegistrationDelegation"]=11]="StakeRegistrationDelegation";e[e["VoteRegistrationDelegation"]=12]="VoteRegistrationDelegation";e[e["StakeVoteRegistrationDelegation"]=13]="StakeVoteRegistrationDelegation";e[e["AuthCommitteeHot"]=14]="AuthCommitteeHot";e[e["ResignCommitteeCold"]=15]="ResignCommitteeCold";e[e["DrepRegistration"]=16]="DrepRegistration";e[e["DrepUnregistration"]=17]="DrepUnregistration";e[e["UpdateDrep"]=18]="UpdateDrep"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js":(e,t,r)=>{"use strict";r.d(t,{DRep:()=>DRep});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;class DRep{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash){e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}e.writeStartArray(1);e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);t.readStartArray();const r=Number(t.readInt());if(r===n.DRepKind.KeyHash||r===n.DRepKind.ScriptHash){const i=s.Hash28ByteBase16(d.HexBlob.fromBytes(t.readByteString()));if(r===n.DRepKind.KeyHash){return DRep.newKeyHash(i)}return DRep.newScriptHash(i)}t.readEndArray();if(r===n.DRepKind.Abstain)return DRep.newAlwaysAbstain();return DRep.newAlwaysNoConfidence()}toCore(){if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.KeyHash||__classPrivateFieldGet(this,f,"f")===n.DRepKind.ScriptHash)return __classPrivateFieldGet(this,u,"f");if(__classPrivateFieldGet(this,f,"f")===n.DRepKind.Abstain)return{__typename:"AlwaysAbstain"};return{__typename:"AlwaysNoConfidence"}}static fromCore(e){if((0,c.isDRepAlwaysAbstain)(e))return DRep.newAlwaysAbstain();if((0,c.isDRepAlwaysNoConfidence)(e))return DRep.newAlwaysNoConfidence();if(e.type===o.CredentialType.KeyHash)return DRep.newKeyHash(e.hash);return DRep.newScriptHash(e.hash)}static newKeyHash(e){return new DRep(n.DRepKind.KeyHash,{hash:e,type:o.CredentialType.KeyHash})}static newScriptHash(e){return new DRep(n.DRepKind.ScriptHash,{hash:e,type:o.CredentialType.ScriptHash})}static newAlwaysAbstain(){return new DRep(n.DRepKind.Abstain,void 0)}static newAlwaysNoConfidence(){return new DRep(n.DRepKind.NoConfidence,void 0)}kind(){return __classPrivateFieldGet(this,f,"f")}toKeyHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.KeyHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}toScriptHash(){var e;if(__classPrivateFieldGet(this,f,"f")!==n.DRepKind.ScriptHash)return;return null===(e=__classPrivateFieldGet(this,u,"f"))||void 0===e?void 0:e.hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,t,"f");__classPrivateFieldSet(this,f,e,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js":(e,t,r)=>{"use strict";r.d(t,{DRepKind:()=>s});var s;(function(e){e[e["KeyHash"]=0]="KeyHash";e[e["ScriptHash"]=1]="ScriptHash";e[e["Abstain"]=2]="Abstain";e[e["NoConfidence"]=3]="NoConfidence"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js":(e,t,r)=>{"use strict";r.d(t,{GenesisKeyDelegation:()=>GenesisKeyDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h,m;const p=4;class GenesisKeyDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeInt(o.CertificateKind.GenesisKeyDelegation);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f"),"hex"));e.writeByteString(l.from(__classPrivateFieldGet(this,h,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.GenesisKeyDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.GenesisKeyDelegation}, but got ${i}`);const n=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const l=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));const u=s.Hash32ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=new GenesisKeyDelegation(n,l,u);__classPrivateFieldSet(f,m,e,"f");return f}toCore(){return{__typename:n.CertificateType.GenesisKeyDelegation,genesisDelegateHash:__classPrivateFieldGet(this,f,"f"),genesisHash:__classPrivateFieldGet(this,u,"f"),vrfKeyHash:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new GenesisKeyDelegation(e.genesisHash,e.genesisDelegateHash,e.vrfKeyHash)}genesisHash(){return __classPrivateFieldGet(this,u,"f")}setGenesisHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}genesisDelegateHash(){return __classPrivateFieldGet(this,f,"f")}setGenesisDelegateHash(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,h,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}constructor(e,t,r){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f");__classPrivateFieldSet(this,h,r,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousReward:()=>MoveInstantaneousReward});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var h,m,p,v;const _=2;class MoveInstantaneousReward{toCbor(){if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");let e;switch(__classPrivateFieldGet(this,p,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,h,"f").toCbor();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,m,"f").toCbor();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,p,"f")}`)}const t=new s.CborWriter;t.writeStartArray(_);t.writeInt(o.CertificateKind.MoveInstantaneousRewards);t.writeEncodedValue(f.from(e,"hex"));return t.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);let r=t.readStartArray();if(r!==_)throw new n.InvalidArgumentError("cbor",`Expected elements size ${_}, but got ${r}`);const s=Number(t.readInt());if(s!==o.CertificateKind.MoveInstantaneousRewards)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.MoveInstantaneousRewards}, but got ${s}`);const f=d.HexBlob.fromBytes(t.readEncodedValue());const w=new i.CborReader(f);r=w.readStartArray();if(r!==_)throw new n.InvalidArgumentError("cbor",`Expected elements size ${_}, but got ${r}`);const y=new MoveInstantaneousReward;w.readInt();if(w.peekState()===a.CborReaderState.UnsignedInteger){__classPrivateFieldSet(y,h,l.MoveInstantaneousRewardToOtherPot.fromCbor(f),"f");__classPrivateFieldSet(y,p,c.MirCertificateKind.ToOtherPot,"f")}else if(w.peekState()===a.CborReaderState.StartArray||w.peekState()===a.CborReaderState.StartMap){__classPrivateFieldSet(y,m,u.MoveInstantaneousRewardToStakeCreds.fromCbor(f),"f");__classPrivateFieldSet(y,p,c.MirCertificateKind.ToStakeCreds,"f")}else{throw new n.InvalidArgumentError("cbor","Invalid CBOR string")}__classPrivateFieldSet(y,v,e,"f");return y}toCore(){let e;switch(__classPrivateFieldGet(this,p,"f")){case c.MirCertificateKind.ToOtherPot:e=__classPrivateFieldGet(this,h,"f").toCore();break;case c.MirCertificateKind.ToStakeCreds:e=__classPrivateFieldGet(this,m,"f").toCore();break;default:throw new n.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,p,"f")}`)}return e}static fromCore(e){const t=new MoveInstantaneousReward;switch(e.kind){case c.MirCertificateKind.ToOtherPot:__classPrivateFieldSet(t,h,l.MoveInstantaneousRewardToOtherPot.fromCore(e),"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToOtherPot,"f");break;case c.MirCertificateKind.ToStakeCreds:__classPrivateFieldSet(t,m,u.MoveInstantaneousRewardToStakeCreds.fromCore(e),"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToStakeCreds,"f");break;default:throw new n.InvalidStateError(`Unexpected kind value: ${e.kind}`)}return t}static newToOtherPot(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToOtherPot,"f");return t}static newToStakeCreds(e){const t=new MoveInstantaneousReward;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,p,c.MirCertificateKind.ToStakeCreds,"f");return t}kind(){return __classPrivateFieldGet(this,p,"f")}asToOtherPot(){return __classPrivateFieldGet(this,h,"f")}asToStakeCreds(){return __classPrivateFieldGet(this,m,"f")}constructor(){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0)}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToOtherPot:()=>MoveInstantaneousRewardToOtherPot});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=2;class MoveInstantaneousRewardToOtherPot{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(__classPrivateFieldGet(this,n,"f")===a.MirCertificatePot.Reserves?0:1);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());const n=t.readInt();if(s<0||s>1)throw new o.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got ${s}`);const d=new MoveInstantaneousRewardToOtherPot(0===s?a.MirCertificatePot.Reserves:a.MirCertificatePot.Treasury,n);__classPrivateFieldSet(d,c,e,"f");return d}toCore(){return{__typename:a.CertificateType.MIR,kind:a.MirCertificateKind.ToOtherPot,pot:__classPrivateFieldGet(this,n,"f"),quantity:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){if(e.kind!==a.MirCertificateKind.ToOtherPot)throw new o.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToOtherPot', but got ${e.kind}`);if(void 0===e.quantity)throw new o.InvalidArgumentError("cert","Amount field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToOtherPot(e.pot,e.quantity)}pot(){return __classPrivateFieldGet(this,n,"f")}setPot(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}getAmount(){return __classPrivateFieldGet(this,d,"f")}setAmount(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js":(e,t,r)=>{"use strict";r.d(t,{MoveInstantaneousRewardToStakeCreds:()=>MoveInstantaneousRewardToStakeCreds});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class MoveInstantaneousRewardToStakeCreds{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f")===n.MirCertificatePot.Reserves?0:1);const t=new Map([...__classPrivateFieldGet(this,f,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeStartArray(m);e.writeInt(r.type);e.writeByteString(l.from(r.hash,"hex"));e.writeInt(s)}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i<0||i>1)throw new d.InvalidArgumentError("cbor",`Expected a pot value between 0 and 1, but got an array of ${i} elements`);t.readStartMap();const l=new Map;while(t.peekState()!==o.CborReaderState.EndMap){t.readStartArray();const u=Number(t.readInt());if(u<0||u>1)throw new d.InvalidArgumentError("cbor",`Expected a credential type value between 0 and 1, but got ${u}`);const f=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const p=t.readInt();l.set({hash:f,type:u},p)}t.readEndMap();const v=new MoveInstantaneousRewardToStakeCreds(0===i?n.MirCertificatePot.Reserves:n.MirCertificatePot.Treasury,l);__classPrivateFieldSet(v,h,e,"f");return v}toCore(){if(0===__classPrivateFieldGet(this,f,"f").size)throw new d.InvalidStateError("The credential map is empty.");const[[e,t]]=__classPrivateFieldGet(this,f,"f");return{__typename:n.CertificateType.MIR,kind:n.MirCertificateKind.ToStakeCreds,pot:__classPrivateFieldGet(this,u,"f"),quantity:t,stakeCredential:e}}static fromCore(e){if(e.kind!==n.MirCertificateKind.ToStakeCreds)throw new d.InvalidArgumentError("cert",`Expected a MIR certificate kind 'ToStakeCreds', but got ${e.kind}`);if(void 0===e.stakeCredential)throw new d.InvalidArgumentError("cert","stakeCredential field of the given MIR certificate is undefined");return new MoveInstantaneousRewardToStakeCreds(e.pot,new Map([[e.stakeCredential,e.quantity]]))}pot(){return __classPrivateFieldGet(this,u,"f")}setPot(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}getStakeCreds(){return __classPrivateFieldGet(this,f,"f")}setStakeCreds(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js":(e,t,r)=>{"use strict";r.d(t,{PoolMetadata:()=>PoolMetadata});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=64;const h=2;class PoolMetadata{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(h);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new PoolMetadata(i,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{hash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new PoolMetadata(e.url,e.hash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}poolMetadataHash(){return __classPrivateFieldGet(this,l,"f")}setPoolMetadataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>f)throw new o.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js":(e,t,r)=>{"use strict";r.d(t,{PoolParams:()=>PoolParams});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var _=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var w,y,g,b,P,S,C,k,j,x;class PoolParams{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,x,"f"))return __classPrivateFieldGet(this,x,"f");e.writeStartArray(PoolParams.subgroupCount);return this.toFlattenedCbor(e)}toFlattenedCbor(e){e.writeByteString(_.from(__classPrivateFieldGet(this,w,"f"),"hex"));e.writeByteString(_.from(__classPrivateFieldGet(this,y,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,g,"f"));e.writeInt(__classPrivateFieldGet(this,b,"f"));e.writeEncodedValue(_.from(__classPrivateFieldGet(this,P,"f").toCbor(),"hex"));e.writeByteString(_.from(__classPrivateFieldGet(this,S,"f").toAddress().toBytes(),"hex"));e.writeEncodedValue(_.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"));e.writeStartArray(__classPrivateFieldGet(this,k,"f").length);for(const t of __classPrivateFieldGet(this,k,"f"))e.writeEncodedValue(_.from(t.toCbor(),"hex"));if(__classPrivateFieldGet(this,j,"f"))e.writeEncodedValue(_.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==PoolParams.subgroupCount)throw new l.InvalidArgumentError("cbor",`Expected an array of ${PoolParams.subgroupCount} elements, but got an array of ${r} elements`);const s=PoolParams.fromFlattenedCbor(t);__classPrivateFieldSet(s,x,e,"f");return s}static fromFlattenedCbor(e){const t=s.Ed25519KeyHashHex(u.HexBlob.fromBytes(e.readByteString()));const r=(0,f.VrfVkHex)(u.HexBlob.fromBytes(e.readByteString()));const a=e.readInt();const o=e.readInt();const l=p.UnitInterval.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));const v=i.Address.fromBytes(u.HexBlob.fromBytes(e.readByteString())).asReward();const _=new Array;let w;const y=d.CborSet.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()),c.Hash.fromCbor);e.readStartArray();while(e.peekState()!==n.CborReaderState.EndArray)_.push(m.Relay.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue())));e.readEndArray();if(e.peekState()!==n.CborReaderState.Null)w=h.PoolMetadata.fromCbor(u.HexBlob.fromBytes(e.readEncodedValue()));else e.readNull();return new PoolParams(t,r,a,o,l,v,y,_,w)}toCore(){const e=__classPrivateFieldGet(this,S,"f").toAddress();const t={cost:__classPrivateFieldGet(this,b,"f"),id:f.PoolId.fromKeyHash(__classPrivateFieldGet(this,w,"f")),margin:__classPrivateFieldGet(this,P,"f").toCore(),owners:__classPrivateFieldGet(this,C,"f").toCore().map(t=>(0,v.createRewardAccount)(t,e.getNetworkId())),pledge:__classPrivateFieldGet(this,g,"f"),relays:__classPrivateFieldGet(this,k,"f").map(e=>e.toCore()),rewardAccount:__classPrivateFieldGet(this,S,"f").toAddress().toBech32(),vrf:__classPrivateFieldGet(this,y,"f")};if(__classPrivateFieldGet(this,j,"f"))t.metadataJson=__classPrivateFieldGet(this,j,"f").toCore();return t}static fromCore(e){return new PoolParams(f.PoolId.toKeyHash(e.id),e.vrf,e.pledge,e.cost,p.UnitInterval.fromCore(e.margin),i.Address.fromBech32(e.rewardAccount).asReward(),d.CborSet.fromCore(e.owners.map(e=>s.Ed25519KeyHashHex(i.Address.fromBech32(e).asReward().getPaymentCredential().hash)),c.Hash.fromCore),e.relays.map(e=>m.Relay.fromCore(e)),e.metadataJson?h.PoolMetadata.fromCore(e.metadataJson):void 0)}operator(){return __classPrivateFieldGet(this,w,"f")}setOperator(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}vrfKeyHash(){return __classPrivateFieldGet(this,y,"f")}setVrfKeyHash(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}pledge(){return __classPrivateFieldGet(this,g,"f")}setPledge(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}cost(){return __classPrivateFieldGet(this,b,"f")}setCost(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}margin(){return __classPrivateFieldGet(this,P,"f")}setMargin(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}rewardAccount(){return __classPrivateFieldGet(this,S,"f")}setRewardAccount(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}poolOwners(){return __classPrivateFieldGet(this,C,"f")}setPoolOwners(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}relays(){return __classPrivateFieldGet(this,k,"f")}setRelays(e){__classPrivateFieldSet(this,k,[...e],"f");__classPrivateFieldSet(this,x,void 0,"f")}poolMetadata(){return __classPrivateFieldGet(this,j,"f")}setPoolMetadata(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,x,void 0,"f")}constructor(e,t,r,s,i,a,o,n,d){w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,y,t,"f");__classPrivateFieldSet(this,g,r,"f");__classPrivateFieldSet(this,b,s,"f");__classPrivateFieldSet(this,P,i,"f");__classPrivateFieldSet(this,S,a,"f");__classPrivateFieldSet(this,C,o,"f");__classPrivateFieldSet(this,k,n,"f");__classPrivateFieldSet(this,j,d,"f")}}w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap;PoolParams.subgroupCount=9},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js":(e,t,r)=>{"use strict";r.d(t,{MultiHostName:()=>MultiHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n;const d=2;const c=2;const l=64;class MultiHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,n,"f"))return __classPrivateFieldGet(this,n,"f");e.writeStartArray(d);e.writeInt(c);e.writeTextString(__classPrivateFieldGet(this,o,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==d)throw new a.InvalidArgumentError("cbor",`Expected an array of ${d} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c)throw new a.InvalidArgumentError("cbor",`Expected MultiHostName id ${c}, but got ${s}`);const o=t.readTextString();const l=new MultiHostName(o);__classPrivateFieldSet(l,n,e,"f");return l}toCore(){return{__typename:"RelayByNameMultihost",dnsName:__classPrivateFieldGet(this,o,"f")}}static fromCore(e){return new MultiHostName(e.dnsName)}dnsName(){return __classPrivateFieldGet(this,o,"f")}setDnsName(e){if(e.length>l)throw new a.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,void 0,"f")}constructor(e){o.set(this,void 0);n.set(this,void 0);if(e.length>l)throw new a.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js":(e,t,r)=>{"use strict";r.d(t,{Relay:()=>Relay,RelayKind:()=>h});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d,c,l,u,f;var h;(function(e){e[e["SingleHostAddress"]=0]="SingleHostAddress";e[e["SingleHostDnsName"]=1]="SingleHostDnsName";e[e["MultiHostDnsName"]=2]="MultiHostDnsName"})(h||(h={}));class Relay{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");let e;switch(__classPrivateFieldGet(this,u,"f")){case h.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCbor();break;case h.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCbor();break;case h.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCbor();break;default:throw new i.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCbor(e){let t;const r=new s.CborReader(e);r.readStartArray();const d=Number(r.readInt());switch(d){case h.SingleHostAddress:t=Relay.newSingleHostAddr(o.SingleHostAddr.fromCbor(e));break;case h.SingleHostDnsName:t=Relay.newSingleHostName(n.SingleHostName.fromCbor(e));break;case h.MultiHostDnsName:t=Relay.newMultiHostName(a.MultiHostName.fromCbor(e));break;default:throw new i.InvalidStateError(`Unexpected kind value: ${d}`)}__classPrivateFieldSet(t,f,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,u,"f")){case h.SingleHostAddress:e=__classPrivateFieldGet(this,d,"f").toCore();break;case h.SingleHostDnsName:e=__classPrivateFieldGet(this,c,"f").toCore();break;case h.MultiHostDnsName:e=__classPrivateFieldGet(this,l,"f").toCore();break;default:throw new i.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}return e}static fromCore(e){let t;switch(e.__typename){case"RelayByAddress":t=Relay.newSingleHostAddr(o.SingleHostAddr.fromCore(e));break;case"RelayByName":t=Relay.newSingleHostName(n.SingleHostName.fromCore(e));break;case"RelayByNameMultihost":t=Relay.newMultiHostName(a.MultiHostName.fromCore(e));break;default:throw new i.InvalidStateError("Unexpected kind value")}return t}static newSingleHostAddr(e){const t=new Relay;__classPrivateFieldSet(t,d,e,"f");__classPrivateFieldSet(t,u,h.SingleHostAddress,"f");return t}static newSingleHostName(e){const t=new Relay;__classPrivateFieldSet(t,c,e,"f");__classPrivateFieldSet(t,u,h.SingleHostDnsName,"f");return t}static newMultiHostName(e){const t=new Relay;__classPrivateFieldSet(t,l,e,"f");__classPrivateFieldSet(t,u,h.MultiHostDnsName,"f");return t}kind(){return __classPrivateFieldGet(this,u,"f")}asSingleHostAddr(){return __classPrivateFieldGet(this,d,"f")}asSingleHostName(){return __classPrivateFieldGet(this,c,"f")}asMultiHostName(){return __classPrivateFieldGet(this,l,"f")}constructor(){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0)}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostAddr:()=>SingleHostAddr});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/ip-address/dist/ip-address.js");const ipV4StringToByteArray=e=>{if(!n.Address4.isValid(e))throw new o.InvalidArgumentError("address",`Invalid IP V4 string: ${e}`);return new Uint8Array(e.split(".").map(e=>Number.parseInt(e)))};const byteArrayToIpV4String=e=>{if(4!==e.length)throw new o.InvalidArgumentError("byteArray",`Invalid IP V4 byte array, expected 4 bytes, but got ${e.length}`);return[...e].map(e=>e.toString()).join(".")};const ipV6StringToByteArray=e=>{if(!n.Address6.isValid(e))throw new o.InvalidArgumentError("address",`Invalid IP V6 string: ${e}`);const t=new n.Address6(e).toUnsignedByteArray();const r=Array.from({length:16}).fill(0,0,16).slice(0,16-t.length);return new Uint8Array([...r,...t])};const byteArrayToIPv6String=e=>{const t=n.Address6.fromUnsignedByteArray([...e]);return t.canonicalForm()};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u;const f=4;const h=0;class SingleHostAddr{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(h);__classPrivateFieldGet(this,d,"f")?e.writeInt(__classPrivateFieldGet(this,d,"f")):e.writeNull();__classPrivateFieldGet(this,c,"f")?e.writeByteString(ipV4StringToByteArray(__classPrivateFieldGet(this,c,"f"))):e.writeNull();__classPrivateFieldGet(this,l,"f")?e.writeByteString(ipV6StringToByteArray(__classPrivateFieldGet(this,l,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==h)throw new o.InvalidArgumentError("cbor",`Expected SingleHostAddr id ${h}, but got ${s}`);let n;let d;let c;if(t.peekState()===a.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}if(t.peekState()===a.CborReaderState.Null){t.readNull();d=void 0}else{d=byteArrayToIpV4String(t.readByteString())}if(t.peekState()===a.CborReaderState.Null){t.readNull();c=void 0}else{c=byteArrayToIPv6String(t.readByteString())}const l=new SingleHostAddr(n?Number(n):void 0,d,c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__typename:"RelayByAddress",ipv4:__classPrivateFieldGet(this,c,"f"),ipv6:__classPrivateFieldGet(this,l,"f"),port:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new SingleHostAddr(e.port,e.ipv4,e.ipv6)}port(){return __classPrivateFieldGet(this,d,"f")}setPort(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv4(){return __classPrivateFieldGet(this,c,"f")}setIpv4(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}ipv6(){return __classPrivateFieldGet(this,l,"f")}setIpv6(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t,r){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js":(e,t,r)=>{"use strict";r.d(t,{SingleHostName:()=>SingleHostName});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n,d,c;const l=3;const u=1;const f=64;class SingleHostName{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(u);__classPrivateFieldGet(this,n,"f")?e.writeInt(__classPrivateFieldGet(this,n,"f")):e.writeNull();e.writeTextString(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==l)throw new o.InvalidArgumentError("cbor",`Expected an array of ${l} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==u)throw new o.InvalidArgumentError("cbor",`Expected SingleHostName id ${u}, but got ${s}`);let n;if(t.peekState()===a.CborReaderState.Null){t.readNull();n=void 0}else{n=t.readInt()}const d=t.readTextString();const f=new SingleHostName(d,n?Number(n):void 0);__classPrivateFieldSet(f,c,e,"f");return f}toCore(){return{__typename:"RelayByName",hostname:__classPrivateFieldGet(this,d,"f"),port:__classPrivateFieldGet(this,n,"f")}}static fromCore(e){return new SingleHostName(e.hostname,e.port)}port(){return __classPrivateFieldGet(this,n,"f")}setPort(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}dnsName(){return __classPrivateFieldGet(this,d,"f")}setDnsName(e){if(e.length>f)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e,t){n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,n,t,"f");if(e.length>f)throw new o.InvalidArgumentError("dnsName",`dnsName must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,d,e,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js":(e,t,r)=>{"use strict";r.d(t,{PoolRegistration:()=>PoolRegistration});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;const u=d.PoolParams.subgroupCount+1;class PoolRegistration{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeInt(a.CertificateKind.PoolRegistration);return __classPrivateFieldGet(this,c,"f").toFlattenedCbor(e)}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==u)throw new n.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==a.CertificateKind.PoolRegistration)throw new n.InvalidArgumentError("cbor",`Expected certificate kind ${a.CertificateKind.PoolRegistration}, but got ${s}`);const o=d.PoolParams.fromFlattenedCbor(t);t.readEndArray();const c=new PoolRegistration(o);__classPrivateFieldSet(c,l,e,"f");return c}toCore(){return{__typename:o.CertificateType.PoolRegistration,poolParameters:__classPrivateFieldGet(this,c,"f").toCore()}}static fromCore(e){return new PoolRegistration(d.PoolParams.fromCore(e.poolParameters))}poolParameters(){return __classPrivateFieldGet(this,c,"f")}setPoolParameters(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js":(e,t,r)=>{"use strict";r.d(t,{PoolRetirement:()=>PoolRetirement});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class PoolRetirement{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(o.CertificateKind.PoolRetirement);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,m,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.PoolRetirement)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.PoolRetirement}, but got ${i}`);const n=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const u=t.readInt();t.readEndArray();const f=new PoolRetirement(n,(0,d.EpochNo)(Number(u)));__classPrivateFieldSet(f,p,e,"f");return f}toCore(){return{__typename:n.CertificateType.PoolRetirement,epoch:__classPrivateFieldGet(this,m,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f"))}}static fromCore(e){return new PoolRetirement(u.PoolId.toKeyHash(e.poolId),e.epoch)}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}epoch(){return __classPrivateFieldGet(this,m,"f")}setEpoch(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,void 0,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{RegisterDelegateRepresentative:()=>RegisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,_;const w=2;class RegisterDelegateRepresentative{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(4);e.writeInt(d.CertificateKind.DrepRegistration);e.writeStartArray(w);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,p,"f"));if(__classPrivateFieldGet(this,v,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(4!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.CertificateKind.DrepRegistration)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.DrepRegistration}, but got ${a}`);const c=t.readStartArray();if(c!==w)throw new l.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const m=t.readInt();let p;if(t.peekState()===n.CborReaderState.Null)t.readNull();else p=i.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const v=new RegisterDelegateRepresentative({hash:h,type:f},m,p);__classPrivateFieldSet(v,_,e,"f");return v}toCore(){return{__typename:c.CertificateType.RegisterDelegateRepresentative,anchor:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,m,"f"),deposit:__classPrivateFieldGet(this,p,"f")}}static fromCore(e){return new RegisterDelegateRepresentative(e.dRepCredential,e.deposit,e.anchor?i.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,m,"f")}deposit(){return __classPrivateFieldGet(this,p,"f")}anchor(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,v,r,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js":(e,t,r)=>{"use strict";r.d(t,{Registration:()=>Registration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Registration{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.Registration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.Registration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.Registration}, but got ${i}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new Registration({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.Registration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Registration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js":(e,t,r)=>{"use strict";r.d(t,{ResignCommitteeCold:()=>ResignCommitteeCold});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v;const _=2;class ResignCommitteeCold{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.ResignCommitteeCold);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));if(__classPrivateFieldGet(this,p,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.CertificateKind.ResignCommitteeCold)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.ResignCommitteeCold}, but got ${a}`);const c=t.readStartArray();if(c!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let m;if(t.peekState()===n.CborReaderState.Null)t.readNull();else m=i.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new ResignCommitteeCold({hash:h,type:f},m);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:c.CertificateType.ResignCommitteeCold,anchor:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f").toCore():null,coldCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new ResignCommitteeCold(e.coldCredential,e.anchor?i.Anchor.fromCore(e.anchor):void 0)}coldCredential(){return __classPrivateFieldGet(this,m,"f")}anchor(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeDelegation:()=>StakeDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m;const p=3;const v=2;class StakeDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeInt(o.CertificateKind.StakeDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,h,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==p)throw new d.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=new StakeDelegation({hash:u,type:l},f);__classPrivateFieldSet(h,m,e,"f");return h}toCore(){return{__typename:n.CertificateType.StakeDelegation,poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeDelegation(e.stakeCredential,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}setStakeCredential(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}setPoolKeyHash(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}constructor(e,t){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,t,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeDeregistration:()=>StakeDeregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class StakeDeregistration{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(o.CertificateKind.StakeDeregistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeDeregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeDeregistration}, but got ${i}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const m=new StakeDeregistration({hash:u,type:l});__classPrivateFieldSet(m,f,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeDeregistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeDeregistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistration:()=>StakeRegistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class StakeRegistration{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(o.CertificateKind.StakeRegistration);e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeRegistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeRegistration}, but got ${i}`);const n=t.readStartArray();if(n!==h)throw new d.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();t.readEndArray();const m=new StakeRegistration({hash:u,type:l});__classPrivateFieldSet(m,f,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeRegistration,stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new StakeRegistration(e.stakeCredential)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeRegistrationDelegation:()=>StakeRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p;const v=2;class StakeRegistrationDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.StakeRegistrationDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,f,"f").type);e.writeByteString(u.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));e.writeByteString(u.from(__classPrivateFieldGet(this,h,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,m,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(4!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeRegistrationDelegation)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeRegistrationDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==v)throw new d.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=s.Ed25519KeyHashHex(c.HexBlob.fromBytes(t.readByteString()));const h=t.readInt();t.readEndArray();const m=new StakeRegistrationDelegation({hash:u,type:l},h,f);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.StakeRegistrationDelegation,deposit:__classPrivateFieldGet(this,m,"f"),poolId:l.PoolId.fromKeyHash(__classPrivateFieldGet(this,h,"f")),stakeCredential:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new StakeRegistrationDelegation(e.stakeCredential,e.deposit,l.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,f,"f")}deposit(){return __classPrivateFieldGet(this,m,"f")}poolKeyHash(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t,r){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,h,r,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteDelegation:()=>StakeVoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,_;const w=2;class StakeVoteDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.StakeVoteDelegation);e.writeStartArray(w);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeByteString(h.from(__classPrivateFieldGet(this,p,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeVoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeVoteDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==w)throw new c.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const m=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new StakeVoteDelegation({hash:f,type:u},m,h);__classPrivateFieldSet(p,_,e,"f");return p}toCore(){return{__typename:n.CertificateType.StakeVoteDelegation,dRep:__classPrivateFieldGet(this,v,"f").toCore(),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,p,"f")),stakeCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new StakeVoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,m,"f")}drep(){return __classPrivateFieldGet(this,v,"f")}poolKeyHash(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,t,"f");__classPrivateFieldSet(this,p,r,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{StakeVoteRegistrationDelegation:()=>StakeVoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v,_,w;const y=2;class StakeVoteRegistrationDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,w,"f"))return __classPrivateFieldGet(this,w,"f");e.writeStartArray(5);e.writeInt(o.CertificateKind.StakeVoteRegistrationDelegation);e.writeStartArray(y);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));e.writeByteString(h.from(__classPrivateFieldGet(this,v,"f"),"hex"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,_,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(5!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 5 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.StakeVoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.StakeVoteRegistrationDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==y)throw new c.InvalidArgumentError("cbor",`Expected an array of ${y} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=s.Ed25519KeyHashHex(l.HexBlob.fromBytes(t.readByteString()));const m=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const p=t.readInt();t.readEndArray();const v=new StakeVoteRegistrationDelegation({hash:f,type:u},p,m,h);__classPrivateFieldSet(v,w,e,"f");return v}toCore(){return{__typename:n.CertificateType.StakeVoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,p,"f").toCore(),deposit:__classPrivateFieldGet(this,_,"f"),poolId:u.PoolId.fromKeyHash(__classPrivateFieldGet(this,v,"f")),stakeCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new StakeVoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep),u.PoolId.toKeyHash(e.poolId))}stakeCredential(){return __classPrivateFieldGet(this,m,"f")}deposit(){return __classPrivateFieldGet(this,_,"f")}dRep(){return __classPrivateFieldGet(this,p,"f")}poolKeyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t,r,s){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,_,t,"f");__classPrivateFieldSet(this,p,r,"f");__classPrivateFieldSet(this,v,s,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UnregisterDelegateRepresentative:()=>UnregisterDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class UnregisterDelegateRepresentative{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.DrepUnregistration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.DrepUnregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.DrepUnregistration}, but got ${i}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new UnregisterDelegateRepresentative({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.UnregisterDelegateRepresentative,dRepCredential:__classPrivateFieldGet(this,u,"f"),deposit:__classPrivateFieldGet(this,f,"f")}}static fromCore(e){return new UnregisterDelegateRepresentative(e.dRepCredential,e.deposit)}credential(){return __classPrivateFieldGet(this,u,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js":(e,t,r)=>{"use strict";r.d(t,{Unregistration:()=>Unregistration});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Unregistration{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.Unregistration);e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f").type);e.writeByteString(l.from(__classPrivateFieldGet(this,u,"f").hash,"hex"));e.writeInt(__classPrivateFieldGet(this,f,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(3!==r)throw new d.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.Unregistration)throw new d.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.Unregistration}, but got ${i}`);const n=t.readStartArray();if(n!==m)throw new d.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const l=Number(t.readInt());const u=s.Hash28ByteBase16(c.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const f=t.readInt();t.readEndArray();const p=new Unregistration({hash:u,type:l},f);__classPrivateFieldSet(p,h,e,"f");return p}toCore(){return{__typename:n.CertificateType.Unregistration,deposit:__classPrivateFieldGet(this,f,"f"),stakeCredential:__classPrivateFieldGet(this,u,"f")}}static fromCore(e){return new Unregistration(e.stakeCredential,e.deposit)}stakeCredential(){return __classPrivateFieldGet(this,u,"f")}setStakeCredential(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}deposit(){return __classPrivateFieldGet(this,f,"f")}setDeposit(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js":(e,t,r)=>{"use strict";r.d(t,{UpdateDelegateRepresentative:()=>UpdateDelegateRepresentative});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p,v;const _=2;class UpdateDelegateRepresentative{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(3);e.writeInt(d.CertificateKind.UpdateDrep);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,m,"f").type);e.writeByteString(h.from(__classPrivateFieldGet(this,m,"f").hash,"hex"));if(__classPrivateFieldGet(this,p,"f"))e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(3!==r)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const a=Number(t.readInt());if(a!==d.CertificateKind.UpdateDrep)throw new l.InvalidArgumentError("cbor",`Expected certificate kind ${d.CertificateKind.UpdateDrep}, but got ${a}`);const c=t.readStartArray();if(c!==_)throw new l.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const f=Number(t.readInt());const h=s.Hash28ByteBase16(u.HexBlob.fromBytes(t.readByteString()));t.readEndArray();let m;if(t.peekState()===n.CborReaderState.Null)t.readNull();else m=i.Anchor.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const p=new UpdateDelegateRepresentative({hash:h,type:f},m);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:c.CertificateType.UpdateDelegateRepresentative,anchor:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f").toCore():null,dRepCredential:__classPrivateFieldGet(this,m,"f")}}static fromCore(e){return new UpdateDelegateRepresentative(e.dRepCredential,e.anchor?i.Anchor.fromCore(e.anchor):void 0)}credential(){return __classPrivateFieldGet(this,m,"f")}anchor(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,p,t,"f")}}m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteDelegation:()=>VoteDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=2;class VoteDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(3);e.writeInt(o.CertificateKind.VoteDelegation);e.writeStartArray(v);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(3!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 3 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.VoteDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.VoteDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const m=new VoteDelegation({hash:f,type:u},h);__classPrivateFieldSet(m,p,e,"f");return m}toCore(){return{__typename:n.CertificateType.VoteDelegation,dRep:__classPrivateFieldGet(this,m,"f").toCore(),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new VoteDelegation(e.stakeCredential,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}dRep(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js":(e,t,r)=>{"use strict";r.d(t,{VoteRegistrationDelegation:()=>VoteRegistrationDelegation});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/CertificateKind.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p,v;const _=2;class VoteRegistrationDelegation{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(4);e.writeInt(o.CertificateKind.VoteRegistrationDelegation);e.writeStartArray(_);e.writeInt(__classPrivateFieldGet(this,h,"f").type);e.writeByteString(f.from(__classPrivateFieldGet(this,h,"f").hash,"hex"));e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));e.writeInt(__classPrivateFieldGet(this,p,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(4!==r)throw new c.InvalidArgumentError("cbor",`Expected an array of 4 elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==o.CertificateKind.VoteRegistrationDelegation)throw new c.InvalidArgumentError("cbor",`Expected certificate kind ${o.CertificateKind.VoteRegistrationDelegation}, but got ${i}`);const n=t.readStartArray();if(n!==_)throw new c.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const u=Number(t.readInt());const f=s.Hash28ByteBase16(l.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const h=d.DRep.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const m=t.readInt();t.readEndArray();const p=new VoteRegistrationDelegation({hash:f,type:u},m,h);__classPrivateFieldSet(p,v,e,"f");return p}toCore(){return{__typename:n.CertificateType.VoteRegistrationDelegation,dRep:__classPrivateFieldGet(this,m,"f").toCore(),deposit:__classPrivateFieldGet(this,p,"f"),stakeCredential:__classPrivateFieldGet(this,h,"f")}}static fromCore(e){return new VoteRegistrationDelegation(e.stakeCredential,e.deposit,d.DRep.fromCore(e.dRep))}stakeCredential(){return __classPrivateFieldGet(this,h,"f")}deposit(){return __classPrivateFieldGet(this,p,"f")}dRep(){return __classPrivateFieldGet(this,m,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,m,r,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js":(e,t,r)=>{"use strict";r.d(t,{Anchor:()=>Anchor});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;const h=128;class Anchor{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeTextString(__classPrivateFieldGet(this,c,"f"));e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of ${f} elements, but got an array of ${r} elements`);const i=t.readTextString();const d=s.Hash32ByteBase16(n.HexBlob.fromBytes(t.readByteString()));t.readEndArray();const c=new Anchor(i,d);__classPrivateFieldSet(c,u,e,"f");return c}toCore(){return{dataHash:__classPrivateFieldGet(this,l,"f"),url:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new Anchor(e.url,e.dataHash)}url(){return __classPrivateFieldGet(this,c,"f")}setUrl(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}dataHash(){return __classPrivateFieldGet(this,l,"f")}setDataHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);if(e.length>h)throw new o.InvalidArgumentError("url",`url must be less or equal to 64 characters long, actual size ${e.length}`);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js":(e,t,r)=>{"use strict";r.d(t,{CborSet:()=>CborSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class CborSet{static fromCbor(e,t){const r=new s.CborReader(e);const o=new CborSet([]);if(r.peekState()===i.CborReaderState.Tag&&r.peekTag()===a.CborTag.Set)r.readTag();r.readStartArray();while(r.peekState()!==i.CborReaderState.EndArray){__classPrivateFieldGet(o,l,"f").push(t(n.HexBlob.fromBytes(r.readEncodedValue())))}__classPrivateFieldSet(o,u,e,"f");return o}toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new o.CborWriter;if(d.inConwayEra)e.writeTag(a.CborTag.Set);e.writeStartArray(this.size());for(const t of this.values())e.writeEncodedValue(c.from(t.toCbor(),"hex"));return e.encodeAsHex()}toCore(){return __classPrivateFieldGet(this,l,"f").map(e=>e.toCore())}static fromCore(e,t){return new CborSet(e.map(e=>t(e)))}values(){return __classPrivateFieldGet(this,l,"f")}setValues(e){__classPrivateFieldSet(this,l,[...e],"f");__classPrivateFieldSet(this,u,void 0,"f")}size(){return __classPrivateFieldGet(this,l,"f").length}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,[...e],"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js":(e,t,r)=>{"use strict";r.d(t,{Credential:()=>Credential});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;const c=2;class Credential{toCbor(){const e=new s.CborWriter;e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,d,"f").type);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f").hash));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);if(t.readStartArray()!==c)throw new a.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${length} elements`);const r=Number(t.readUInt());const s=o.HexBlob.fromBytes(t.readByteString());t.readEndArray();return new Credential({hash:s,type:r})}toCore(){return{...__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new Credential({...e})}value(){return{...__classPrivateFieldGet(this,d,"f")}}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js":(e,t,r)=>{"use strict";r.d(t,{Datum:()=>Datum,DatumKind:()=>m,isDatumHash:()=>isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f;const h=2;const isDatumHash=e=>null!==e&&"string"==typeof e;var m;(function(e){e[e["DataHash"]=0]="DataHash";e[e["InlineData"]=1]="InlineData"})(m||(m={}));class Datum{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,c,"f"));if(__classPrivateFieldGet(this,c,"f")===m.DataHash)e.writeByteString(d.from(__classPrivateFieldGet(this,l,"f"),"hex").valueOf());else e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex").valueOf());return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new a.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());let d;let c;switch(s){case m.DataHash:d=o.HexBlob.fromBytes(t.readByteString());break;case m.InlineData:c=n.PlutusData.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));break;default:throw new a.InvalidArgumentError("cbor",`Unexpected datum kind ${s}`)}t.readEndArray();const l=new Datum(d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){let e;switch(__classPrivateFieldGet(this,c,"f")){case m.DataHash:e=__classPrivateFieldGet(this,l,"f");break;case m.InlineData:e=__classPrivateFieldGet(this,u,"f").toCore();break;default:throw new a.InvalidStateError(`Unexpected datum kind ${__classPrivateFieldGet(this,c,"f")}`)}return e}static fromCore(e){if(isDatumHash(e))return new Datum(e);return new Datum(void 0,n.PlutusData.fromCore(e))}kind(){return __classPrivateFieldGet(this,c,"f")}asDataHash(){return __classPrivateFieldGet(this,l,"f")}asInlineData(){return __classPrivateFieldGet(this,u,"f")}static newDataHash(e){return new Datum(e)}static newInlineData(e){return new Datum(void 0,e)}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);if(e&&t)throw new a.InvalidStateError("Datum can only be DataHash or PlutusData but not both");if(!e&&!t)throw new a.InvalidStateError("Datum must be either DataHash or PlutusData");if(e)__classPrivateFieldSet(this,c,m.DataHash,"f");if(t)__classPrivateFieldSet(this,c,m.InlineData,"f");__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js":(e,t,r)=>{"use strict";r.d(t,{ExUnits:()=>ExUnits});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;const c=2;class ExUnits{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,o,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==c)throw new a.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=t.readUInt();const o=t.readUInt();t.readEndArray();const n=new ExUnits(s,o);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{memory:Number(__classPrivateFieldGet(this,o,"f")),steps:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ExUnits(BigInt(e.memory),BigInt(e.steps))}mem(){return __classPrivateFieldGet(this,o,"f")}setMem(e){__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}steps(){return __classPrivateFieldGet(this,n,"f")}setSteps(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}add(e){const t=__classPrivateFieldGet(this,o,"f")+__classPrivateFieldGet(e,o,"f");const r=__classPrivateFieldGet(this,n,"f")+__classPrivateFieldGet(e,n,"f");return new ExUnits(t,r)}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionId:()=>GovernanceActionId});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class GovernanceActionId{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==u)throw new a.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new GovernanceActionId(o.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{actionIndex:Number(__classPrivateFieldGet(this,c,"f")),id:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new GovernanceActionId(e.id,BigInt(e.actionIndex))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}equals(e){return __classPrivateFieldGet(this,c,"f")===__classPrivateFieldGet(e,c,"f")&&__classPrivateFieldGet(this,d,"f")===__classPrivateFieldGet(e,d,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js":(e,t,r)=>{"use strict";r.d(t,{Hash:()=>Hash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var n;class Hash{toCbor(){const e=new s.CborWriter;e.writeByteString(o.from(__classPrivateFieldGet(this,n,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);return new Hash(a.HexBlob.fromBytes(t.readByteString()))}toCore(){return __classPrivateFieldGet(this,n,"f")}static fromCore(e){return new Hash(e)}value(){return __classPrivateFieldGet(this,n,"f")}constructor(e){n.set(this,void 0);__classPrivateFieldSet(this,n,e,"f")}}n=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolVersion:()=>ProtocolVersion});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;const c=2;class ProtocolVersion{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(__classPrivateFieldGet(this,o,"f"));e.writeInt(__classPrivateFieldGet(this,n,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==c)throw new a.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readInt());const o=Number(t.readInt());t.readEndArray();const n=new ProtocolVersion(s,o);__classPrivateFieldSet(n,d,e,"f");return n}toCore(){return{major:Number(__classPrivateFieldGet(this,o,"f")),minor:Number(__classPrivateFieldGet(this,n,"f"))}}static fromCore(e){return new ProtocolVersion(e.major,e.minor)}major(){return __classPrivateFieldGet(this,o,"f")}setMajor(e){__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}minor(){return __classPrivateFieldGet(this,n,"f")}setMinor(e){__classPrivateFieldSet(this,n,e,"f");__classPrivateFieldSet(this,d,void 0,"f")}constructor(e,t){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js":(e,t,r)=>{"use strict";r.d(t,{UnitInterval:()=>UnitInterval});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/fraction.js/fraction.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class UnitInterval{static fromFloat(e){if(void 0===e)return;const t=new n(e);return new UnitInterval(BigInt(t.n),BigInt(t.d))}toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeTag(i.CborTag.RationalNumber);e.writeStartArray(u);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);if(t.readTag()!==i.CborTag.RationalNumber)throw new o.InvalidArgumentError("cbor",`Expected tag ${i.CborTag.RationalNumber}, but got ${t.peekTag()}`);const r=t.readStartArray();if(r!==u)throw new o.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readInt();const n=t.readInt();t.readEndArray();const d=new UnitInterval(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{denominator:Number(__classPrivateFieldGet(this,c,"f")),numerator:Number(__classPrivateFieldGet(this,d,"f"))}}static fromCore(e){return new UnitInterval(BigInt(e.numerator),BigInt(e.denominator))}numerator(){return __classPrivateFieldGet(this,d,"f")}setNumerator(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}denominator(){return __classPrivateFieldGet(this,c,"f")}setDenominator(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}toFloat(){return Number(__classPrivateFieldGet(this,d,"f"))/Number(__classPrivateFieldGet(this,c,"f"))}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js":(e,t,r)=>{"use strict";r.d(t,{ConstrPlutusData:()=>ConstrPlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=102n;const u=7n;class ConstrPlutusData{toCbor(){const e=new s.CborWriter;const t=ConstrPlutusData.alternativeToCompactCborTag(__classPrivateFieldGet(this,d,"f"));e.writeTag(Number(t));if(t!==l)e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()));else{e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,d,"f"));e.writeEncodedValue((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f").toCbor()))}return a.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new i.CborReader(e);const r=t.readTag();if(r===Number(l)){t.readStartArray();const s=t.readInt();const n=t.readEncodedValue();const d=o.PlutusList.fromCbor(a.HexBlob.fromBytes(n));t.readEndArray();return new ConstrPlutusData(s,d)}const c=ConstrPlutusData.compactCborTagToAlternative(BigInt(r));const u=t.readEncodedValue();const f=o.PlutusList.fromCbor(a.HexBlob.fromBytes(u));return new ConstrPlutusData(c,f)}getAlternative(){return __classPrivateFieldGet(this,d,"f")}getData(){return __classPrivateFieldGet(this,c,"f")}equals(e){if(__classPrivateFieldGet(this,d,"f")!==__classPrivateFieldGet(e,d,"f"))return false;return __classPrivateFieldGet(this,c,"f").equals(__classPrivateFieldGet(e,c,"f"))}static compactCborTagToAlternative(e){if(e>=121n&&e<=127)return e-121n;if(e>=1280n&&e<=1400)return e-1280n+u;return l}static alternativeToCompactCborTag(e){if(e<=6n)return 121n+e;if(e>=7n&&e<=127n)return 1280n-u+e;return l}constructor(e,t){d.set(this,0n);c.set(this,new o.PlutusList);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js":(e,t,r)=>{"use strict";r.d(t,{PlutusData:()=>PlutusData});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/plutusDataUtils.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var v=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var _,w,y,g,b,P,S;const C=0xffffffffffffffffn;const k=new Uint8Array([95]);const j=64;const x=32;const T=BigInt(-1);class PlutusData{toCbor(){if(__classPrivateFieldGet(this,S,"f"))return __classPrivateFieldGet(this,S,"f");let e;switch(__classPrivateFieldGet(this,P,"f")){case f.PlutusDataKind.ConstrPlutusData:e=__classPrivateFieldGet(this,b,"f").toCbor();break;case f.PlutusDataKind.Map:e=__classPrivateFieldGet(this,_,"f").toCbor();break;case f.PlutusDataKind.List:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case f.PlutusDataKind.Bytes:{const t=new a.CborWriter;if(__classPrivateFieldGet(this,g,"f").length<=j)t.writeByteString(__classPrivateFieldGet(this,g,"f"));else{t.writeEncodedValue(k);for(let r=0;r<__classPrivateFieldGet(this,g,"f").length;r+=j){const s=__classPrivateFieldGet(this,g,"f").slice(r,r+j);t.writeByteString(s)}t.writeEndArray()}e=(0,p.bytesToHex)(t.encode());break}case f.PlutusDataKind.Integer:{const i=new a.CborWriter;if(__classPrivateFieldGet(this,y,"f")>=0&&__classPrivateFieldGet(this,y,"f")<=C||__classPrivateFieldGet(this,y,"f")<0&&__classPrivateFieldGet(this,y,"f")>=-1n-C)i.writeInt(__classPrivateFieldGet(this,y,"f"));else{const n=PlutusData.bigintToBuffer(__classPrivateFieldGet(this,y,"f"));i.writeTag(__classPrivateFieldGet(this,y,"f")<0?o.CborTag.NegativeBigNum:o.CborTag.UnsignedBigNum);if(n.length<=j)i.writeByteString(n);else{i.writeEncodedValue(k);for(let d=0;d<n.length;d+=j){const c=n.slice(d,d+j);i.writeByteString(c)}i.writeEndArray()}}e=(0,p.bytesToHex)(i.encode());break}default:throw new Error("Unsupported PlutusData kind")}return e}static fromCbor(e){const t=new PlutusData;const r=new n.CborReader(e);const s=r.peekState();switch(s){case d.CborReaderState.Tag:{const i=r.peekTag();switch(i){case o.CborTag.UnsignedBigNum:{r.readTag();const a=r.readByteString();__classPrivateFieldSet(t,y,PlutusData.bufferToBigint(a),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Integer,"f");break}case o.CborTag.NegativeBigNum:{r.readTag();const u=r.readByteString();__classPrivateFieldSet(t,y,PlutusData.bufferToBigint(u)*-1n,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Integer,"f");break}default:__classPrivateFieldSet(t,b,c.ConstrPlutusData.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.ConstrPlutusData,"f")}break}case d.CborReaderState.NegativeInteger:case d.CborReaderState.UnsignedInteger:__classPrivateFieldSet(t,y,r.readInt(),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Integer,"f");break;case d.CborReaderState.StartIndefiniteLengthByteString:case d.CborReaderState.ByteString:__classPrivateFieldSet(t,g,r.readByteString(),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Bytes,"f");break;case d.CborReaderState.StartArray:__classPrivateFieldSet(t,w,h.PlutusList.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.List,"f");break;case d.CborReaderState.StartMap:__classPrivateFieldSet(t,_,m.PlutusMap.fromCbor(l.HexBlob.fromBytes(r.readEncodedValue())),"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Map,"f");break;default:throw new Error("Invalid Plutus Data")}__classPrivateFieldSet(t,S,e,"f");return t}toCore(){switch(__classPrivateFieldGet(this,P,"f")){case f.PlutusDataKind.Bytes:return __classPrivateFieldGet(this,g,"f");case f.PlutusDataKind.ConstrPlutusData:{const e=__classPrivateFieldGet(this,b,"f");return{cbor:this.toCbor(),constructor:e.getAlternative(),fields:PlutusData.mapToCorePlutusList(e.getData())}}case f.PlutusDataKind.Integer:return __classPrivateFieldGet(this,y,"f");case f.PlutusDataKind.List:return PlutusData.mapToCorePlutusList(__classPrivateFieldGet(this,w,"f"));case f.PlutusDataKind.Map:{const t=__classPrivateFieldGet(this,_,"f");const r=new Map;const s=t.getKeys();for(let i=0;i<s.getLength();i++){const a=s.get(i);r.set(a.toCore(),t.get(a).toCore())}return{cbor:this.toCbor(),data:r}}default:throw new u.NotImplementedError(`PlutusData mapping for kind ${__classPrivateFieldGet(this,P,"f")}`)}}hash(){return i.blake2b.hash(this.toCbor(),x)}static fromCore(e){if(s.isPlutusBoundedBytes(e)){return PlutusData.newBytes(e)}if(s.isPlutusBigInt(e)){return PlutusData.newInteger(e)}if(e.cbor)return PlutusData.fromCbor(e.cbor);if(s.isPlutusList(e)){return PlutusData.newList(PlutusData.mapToPlutusList(e.items))}if(s.isPlutusMap(e)){const t=new m.PlutusMap;for(const[r,i]of e.data)t.insert(PlutusData.fromCore(r),PlutusData.fromCore(i));return PlutusData.newMap(t)}if(s.isConstrPlutusData(e)){const a=e.constructor;const o=new c.ConstrPlutusData(a,PlutusData.mapToPlutusList(e.fields.items));return PlutusData.newConstrPlutusData(o)}throw new u.NotImplementedError("PlutusData type not implemented")}static newConstrPlutusData(e){const t=new PlutusData;__classPrivateFieldSet(t,b,e,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.ConstrPlutusData,"f");return t}static newMap(e){const t=new PlutusData;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Map,"f");return t}static newList(e){const t=new PlutusData;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.List,"f");return t}static newInteger(e){const t=new PlutusData;__classPrivateFieldSet(t,y,e,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Integer,"f");return t}static newBytes(e){const t=new PlutusData;__classPrivateFieldSet(t,g,e,"f");__classPrivateFieldSet(t,P,f.PlutusDataKind.Bytes,"f");return t}getKind(){return __classPrivateFieldGet(this,P,"f")}asConstrPlutusData(){return __classPrivateFieldGet(this,b,"f")}asMap(){return __classPrivateFieldGet(this,_,"f")}asList(){return __classPrivateFieldGet(this,w,"f")}asInteger(){return __classPrivateFieldGet(this,y,"f")}asBoundedBytes(){return __classPrivateFieldGet(this,g,"f")}equals(e){switch(__classPrivateFieldGet(this,P,"f")){case f.PlutusDataKind.Bytes:if(__classPrivateFieldGet(this,g,"f")&&__classPrivateFieldGet(e,g,"f")){return __classPrivateFieldGet(this,g,"f").length===__classPrivateFieldGet(e,g,"f").length&&__classPrivateFieldGet(this,g,"f").every((t,r)=>t===__classPrivateFieldGet(e,g,"f")[r])}return false;case f.PlutusDataKind.Integer:return __classPrivateFieldGet(this,y,"f")===__classPrivateFieldGet(e,y,"f");case f.PlutusDataKind.ConstrPlutusData:if(__classPrivateFieldGet(this,b,"f")&&__classPrivateFieldGet(e,b,"f")){return __classPrivateFieldGet(this,b,"f").equals(__classPrivateFieldGet(e,b,"f"))}return false;case f.PlutusDataKind.List:if(__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(e,w,"f")){return __classPrivateFieldGet(this,w,"f").equals(__classPrivateFieldGet(e,w,"f"))}return false;case f.PlutusDataKind.Map:if(__classPrivateFieldGet(this,_,"f")&&__classPrivateFieldGet(e,_,"f")){return __classPrivateFieldGet(this,_,"f").equals(__classPrivateFieldGet(e,_,"f"))}return false;default:return false}}static mapToPlutusList(e){const t=new h.PlutusList;for(const r of e)t.add(PlutusData.fromCore(r));return t}static mapToCorePlutusList(e){const t=[];for(let r=0;r<e.getLength();r++){const s=e.get(r);t.push(s.toCore())}return{cbor:e.toCbor(),items:t}}static bufferToBigint(e){let t=0n;for(const r of e.values()){const s=BigInt(r);t=(t<<8n)+s}return t}static bigintToBuffer(e){if(e<0)e=-e+T;let t=e.toString(16);if(t.length%2)t=`0${t}`;return v.from(t,"hex")}constructor(){_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,f.PlutusDataKind.ConstrPlutusData);S.set(this,void 0)}}_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js":(e,t,r)=>{"use strict";r.d(t,{PlutusDataKind:()=>s});var s;(function(e){e[e["ConstrPlutusData"]=0]="ConstrPlutusData";e[e["Map"]=1]="Map";e[e["List"]=2]="List";e[e["Integer"]=3]="Integer";e[e["Bytes"]=4]="Bytes"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js":(e,t,r)=>{"use strict";r.d(t,{PlutusList:()=>PlutusList});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;class PlutusList{toCbor(){const e=new s.CborWriter;const t=__classPrivateFieldGet(this,c,"f").length>0;if(t)e.writeStartArray();else e.writeStartArray(__classPrivateFieldGet(this,c,"f").length);for(const r of __classPrivateFieldGet(this,c,"f"))e.writeEncodedValue((0,d.hexToBytes)(r.toCbor()));if(t)e.writeEndArray();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusList;const r=new i.CborReader(e);r.readStartArray();while(r.peekState()!==a.CborReaderState.EndArray){t.add(n.PlutusData.fromCbor((0,d.bytesToHex)(r.readEncodedValue())))}r.readEndArray();return t}getLength(){return __classPrivateFieldGet(this,c,"f").length}get(e){return __classPrivateFieldGet(this,c,"f")[e]}add(e){__classPrivateFieldGet(this,c,"f").push(e)}equals(e){if(__classPrivateFieldGet(this,c,"f").length!==__classPrivateFieldGet(e,c,"f").length)return false;for(let t=0;t<__classPrivateFieldGet(this,c,"f").length;++t)if(!__classPrivateFieldGet(this,c,"f")[t].equals(__classPrivateFieldGet(e,c,"f")[t]))return false;return true}constructor(){c.set(this,new Array)}}c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js":(e,t,r)=>{"use strict";r.d(t,{PlutusMap:()=>PlutusMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var l,u;class PlutusMap{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,u,"f"))e.writeStartMap();else e.writeStartMap(__classPrivateFieldGet(this,l,"f").size);for(const[t,r]of __classPrivateFieldGet(this,l,"f").entries()){e.writeEncodedValue((0,c.hexToBytes)(t.toCbor()));e.writeEncodedValue((0,c.hexToBytes)(r.toCbor()))}if(__classPrivateFieldGet(this,u,"f"))e.writeEndMap();return o.HexBlob.fromBytes(e.encode())}static fromCbor(e){const t=new PlutusMap;const r=new i.CborReader(e);const s=r.readStartMap();if(null===s)__classPrivateFieldSet(t,u,true,"f");while(r.peekState()!==a.CborReaderState.EndMap){const o=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));const d=n.PlutusData.fromCbor((0,c.bytesToHex)(r.readEncodedValue()));t.insert(o,d)}r.readEndMap();return t}getLength(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){if(!__classPrivateFieldGet(this,l,"f"))return;const t=[...__classPrivateFieldGet(this,l,"f").entries()].find(t=>t[0].equals(e));if(!t)return;return t[1]}getKeys(){const e=new d.PlutusList;for(const t of __classPrivateFieldGet(this,l,"f").keys())e.add(t);return e}equals(e){if(__classPrivateFieldGet(this,u,"f")!==__classPrivateFieldGet(e,u,"f"))return false;if(__classPrivateFieldGet(this,l,"f").size!==__classPrivateFieldGet(e,l,"f").size)return false;const t=[...__classPrivateFieldGet(this,l,"f").entries()];const r=[...__classPrivateFieldGet(e,l,"f").entries()];for(let s=0;s<__classPrivateFieldGet(this,l,"f").size;++s){if(!t[s][0].equals(r[s][0]))return false;if(!t[s][1].equals(r[s][1]))return false}return true}constructor(){l.set(this,new Map);u.set(this,false)}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js":(e,t,r)=>{"use strict";r.d(t,{NativeScript:()=>NativeScript});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var h,m,p,v,_,w,y,g;const b=28;class NativeScript{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");let e;switch(__classPrivateFieldGet(this,y,"f")){case o.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,v,"f").toCbor();break;case o.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,h,"f").toCbor();break;case o.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,m,"f").toCbor();break;case o.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,p,"f").toCbor();break;case o.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,w,"f").toCbor();break;case o.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,_,"f").toCbor();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,y,"f")}`)}return e}static fromCbor(e){let t;const r=new i.CborReader(e);r.readStartArray();const s=Number(r.readInt());switch(s){case o.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(l.ScriptPubkey.fromCbor(e));break;case o.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(n.ScriptAll.fromCbor(e));break;case o.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(d.ScriptAny.fromCbor(e));break;case o.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(c.ScriptNOfK.fromCbor(e));break;case o.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(f.TimelockStart.fromCbor(e));break;case o.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(u.TimelockExpiry.fromCbor(e));break;default:throw new a.InvalidStateError(`Unexpected kind value: ${s}`)}__classPrivateFieldSet(t,g,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,y,"f")){case o.NativeScriptKind.RequireSignature:e=__classPrivateFieldGet(this,v,"f").toCore();break;case o.NativeScriptKind.RequireAllOf:e=__classPrivateFieldGet(this,h,"f").toCore();break;case o.NativeScriptKind.RequireAnyOf:e=__classPrivateFieldGet(this,m,"f").toCore();break;case o.NativeScriptKind.RequireNOf:e=__classPrivateFieldGet(this,p,"f").toCore();break;case o.NativeScriptKind.RequireTimeAfter:e=__classPrivateFieldGet(this,w,"f").toCore();break;case o.NativeScriptKind.RequireTimeBefore:e=__classPrivateFieldGet(this,_,"f").toCore();break;default:throw new a.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,y,"f")}`)}return e}static fromCore(e){let t;switch(e.kind){case o.NativeScriptKind.RequireSignature:t=NativeScript.newScriptPubkey(l.ScriptPubkey.fromCore(e));break;case o.NativeScriptKind.RequireAllOf:t=NativeScript.newScriptAll(n.ScriptAll.fromCore(e));break;case o.NativeScriptKind.RequireAnyOf:t=NativeScript.newScriptAny(d.ScriptAny.fromCore(e));break;case o.NativeScriptKind.RequireNOf:t=NativeScript.newScriptNOfK(c.ScriptNOfK.fromCore(e));break;case o.NativeScriptKind.RequireTimeAfter:t=NativeScript.newTimelockStart(f.TimelockStart.fromCore(e));break;case o.NativeScriptKind.RequireTimeBefore:t=NativeScript.newTimelockExpiry(u.TimelockExpiry.fromCore(e));break;default:throw new a.InvalidStateError("Unexpected kind value")}return t}hash(){const e=`00${this.toCbor()}`;return s.blake2b.hash(e,b)}kind(){return __classPrivateFieldGet(this,y,"f")}static newScriptPubkey(e){const t=new NativeScript;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireSignature,"f");return t}static newScriptAll(e){const t=new NativeScript;__classPrivateFieldSet(t,h,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireAllOf,"f");return t}static newScriptAny(e){const t=new NativeScript;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireAnyOf,"f");return t}static newScriptNOfK(e){const t=new NativeScript;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireNOf,"f");return t}static newTimelockStart(e){const t=new NativeScript;__classPrivateFieldSet(t,w,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireTimeAfter,"f");return t}static newTimelockExpiry(e){const t=new NativeScript;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,y,o.NativeScriptKind.RequireTimeBefore,"f");return t}asScriptPubkey(){return __classPrivateFieldGet(this,v,"f")}asScriptAll(){return __classPrivateFieldGet(this,h,"f")}asScriptAny(){return __classPrivateFieldGet(this,m,"f")}asScriptNOfK(){return __classPrivateFieldGet(this,p,"f")}asTimelockStart(){return __classPrivateFieldGet(this,w,"f")}asTimelockExpiry(){return __classPrivateFieldGet(this,_,"f")}constructor(){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0)}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAll:()=>ScriptAll});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class ScriptAll{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(c.NativeScriptKind.RequireAllOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAllOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAllOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAll(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAllOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAll(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js":(e,t,r)=>{"use strict";r.d(t,{ScriptAny:()=>ScriptAny});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f;const h=2;class ScriptAny{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeInt(c.NativeScriptKind.RequireAnyOf);e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireAnyOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireAnyOf}, but got kind ${s}`);const l=new Array;t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray)l.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const u=new ScriptAny(l);__classPrivateFieldSet(u,f,e,"f");return u}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireAnyOf,scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptAny(e.scripts.map(e=>d.NativeScript.fromCore(e)))}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e){u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js":(e,t,r)=>{"use strict";r.d(t,{ScriptNOfK:()=>ScriptNOfK});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=3;class ScriptNOfK{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(c.NativeScriptKind.RequireNOf);e.writeInt(__classPrivateFieldGet(this,f,"f"));e.writeStartArray(__classPrivateFieldGet(this,u,"f").length);for(const t of __classPrivateFieldGet(this,u,"f"))e.writeEncodedValue(l.from(t.toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==m)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==c.NativeScriptKind.RequireNOf)throw new o.InvalidArgumentError("cbor",`Expected kind ${c.NativeScriptKind.RequireNOf}, but got kind ${s}`);const l=t.readInt();const u=new Array;t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray)u.push(d.NativeScript.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue())));t.readEndArray();const f=new ScriptNOfK(u,Number(l));__classPrivateFieldSet(f,h,e,"f");return f}toCore(){return{__type:c.ScriptType.Native,kind:c.NativeScriptKind.RequireNOf,required:__classPrivateFieldGet(this,f,"f"),scripts:__classPrivateFieldGet(this,u,"f").map(e=>e.toCore())}}static fromCore(e){return new ScriptNOfK(e.scripts.map(e=>d.NativeScript.fromCore(e)),e.required)}required(){return __classPrivateFieldGet(this,f,"f")}setRequired(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,u,"f")}setNativeScripts(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,h,void 0,"f")}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js":(e,t,r)=>{"use strict";r.d(t,{ScriptPubkey:()=>ScriptPubkey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=2;class ScriptPubkey{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");e.writeStartArray(f);e.writeInt(d.NativeScriptKind.RequireSignature);e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==f)throw new o.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const i=Number(t.readInt());if(i!==d.NativeScriptKind.RequireSignature)throw new o.InvalidArgumentError("cbor",`Expected kind ${d.NativeScriptKind.RequireSignature}, but got kind ${i}`);const c=s.Ed25519KeyHashHex(n.HexBlob.fromBytes(t.readByteString()));const l=new ScriptPubkey(c);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return{__type:d.ScriptType.Native,keyHash:__classPrivateFieldGet(this,l,"f"),kind:d.NativeScriptKind.RequireSignature}}static fromCore(e){return new ScriptPubkey(e.keyHash)}keyHash(){return __classPrivateFieldGet(this,l,"f")}setKeyHash(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js":(e,t,r)=>{"use strict";r.d(t,{TimelockExpiry:()=>TimelockExpiry});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockExpiry{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");e.writeStartArray(l);e.writeInt(o.NativeScriptKind.RequireTimeBefore);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==l)throw new a.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==o.NativeScriptKind.RequireTimeBefore)throw new a.InvalidArgumentError("cbor",`Expected kind ${o.NativeScriptKind.RequireTimeBefore}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockExpiry(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:o.ScriptType.Native,kind:o.NativeScriptKind.RequireTimeBefore,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockExpiry(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js":(e,t,r)=>{"use strict";r.d(t,{TimelockStart:()=>TimelockStart});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c;const l=2;class TimelockStart{toCbor(){if(__classPrivateFieldGet(this,c,"f"))return __classPrivateFieldGet(this,c,"f");const e=new s.CborWriter;e.writeStartArray(l);e.writeInt(o.NativeScriptKind.RequireTimeAfter);e.writeInt(__classPrivateFieldGet(this,d,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==l)throw new a.InvalidArgumentError("cbor",`Expected an array of two elements, but got an array of ${r} elements`);const s=Number(t.readInt());if(s!==o.NativeScriptKind.RequireTimeAfter)throw new a.InvalidArgumentError("cbor",`Expected kind ${o.NativeScriptKind.RequireTimeAfter}, but got kind ${s}`);const d=(0,n.Slot)(Number(t.readInt()));const u=new TimelockStart(d);__classPrivateFieldSet(u,c,e,"f");return u}toCore(){return{__type:o.ScriptType.Native,kind:o.NativeScriptKind.RequireTimeAfter,slot:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TimelockStart(e.slot)}slot(){return __classPrivateFieldGet(this,d,"f")}setSlot(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,void 0,"f")}constructor(e){d.set(this,void 0);c.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap,c=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV1Script:()=>PlutusV1Script});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=28;class PlutusV1Script{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new i.CborWriter;e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readByteString();const s=new PlutusV1Script(o.HexBlob.fromBytes(r));__classPrivateFieldSet(s,u,e,"f");return s}toCore(){return{__type:d.ScriptType.Plutus,bytes:this.rawBytes(),version:d.PlutusLanguageVersion.V1}}static fromCore(e){if(e.version!==d.PlutusLanguageVersion.V1)throw new n.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV1Script(e.bytes)}hash(){const e=`01${this.rawBytes()}`;return s.blake2b.hash(e,f)}rawBytes(){return __classPrivateFieldGet(this,l,"f")}setRawBytes(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV2Script:()=>PlutusV2Script});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=28;class PlutusV2Script{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new i.CborWriter;e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readByteString();const s=new PlutusV2Script(o.HexBlob.fromBytes(r));__classPrivateFieldSet(s,u,e,"f");return s}toCore(){return{__type:d.ScriptType.Plutus,bytes:this.rawBytes(),version:d.PlutusLanguageVersion.V2}}static fromCore(e){if(e.version!==d.PlutusLanguageVersion.V2)throw new n.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV2Script(e.bytes)}hash(){const e=`02${this.rawBytes()}`;return s.blake2b.hash(e,f)}rawBytes(){return __classPrivateFieldGet(this,l,"f")}setRawBytes(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js":(e,t,r)=>{"use strict";r.d(t,{PlutusV3Script:()=>PlutusV3Script});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;const f=28;class PlutusV3Script{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new i.CborWriter;e.writeByteString(c.from(__classPrivateFieldGet(this,l,"f"),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readByteString();const s=new PlutusV3Script(o.HexBlob.fromBytes(r));__classPrivateFieldSet(s,u,e,"f");return s}toCore(){return{__type:d.ScriptType.Plutus,bytes:this.rawBytes(),version:d.PlutusLanguageVersion.V3}}static fromCore(e){if(e.version!==d.PlutusLanguageVersion.V3)throw new n.InvalidArgumentError("script","Wrong plutus language version.");return new PlutusV3Script(e.bytes)}hash(){const e=`03${this.rawBytes()}`;return s.blake2b.hash(e,f)}rawBytes(){return __classPrivateFieldGet(this,l,"f")}setRawBytes(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e){l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js":(e,t,r)=>{"use strict";r.d(t,{Script:()=>Script});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var f;(function(e){e[e["Native"]=0]="Native";e[e["PlutusV1"]=1]="PlutusV1";e[e["PlutusV2"]=2]="PlutusV2";e[e["PlutusV3"]=3]="PlutusV3"})(f||(f={}));var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var m,p,v,_,w,y;const g=2;class Script{toCbor(){if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");const e=new s.CborWriter;let t;switch(__classPrivateFieldGet(this,w,"f")){case f.Native:t=__classPrivateFieldGet(this,m,"f").toCbor();break;case f.PlutusV1:t=__classPrivateFieldGet(this,p,"f").toCbor();break;case f.PlutusV2:t=__classPrivateFieldGet(this,v,"f").toCbor();break;case f.PlutusV3:t=__classPrivateFieldGet(this,_,"f").toCbor();break;default:throw new a.InvalidStateError(`Unexpected language value: ${__classPrivateFieldGet(this,w,"f")}`)}e.writeStartArray(g);e.writeInt(__classPrivateFieldGet(this,w,"f"));e.writeEncodedValue(h.from(t,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new i.CborReader(e);r.readStartArray();const s=Number(r.readInt());const d=o.HexBlob.fromBytes(r.readEncodedValue());switch(s){case f.Native:t=Script.newNativeScript(n.NativeScript.fromCbor(d));break;case f.PlutusV1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCbor(d));break;case f.PlutusV2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCbor(d));break;case f.PlutusV3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCbor(d));break;default:throw new a.InvalidStateError(`Unexpected language value: ${s}`)}__classPrivateFieldSet(t,y,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,w,"f")){case f.Native:e=__classPrivateFieldGet(this,m,"f").toCore();break;case f.PlutusV1:e=__classPrivateFieldGet(this,p,"f").toCore();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").toCore();break;case f.PlutusV3:e=__classPrivateFieldGet(this,_,"f").toCore();break;default:throw new a.InvalidStateError(`Unexpected language: ${__classPrivateFieldGet(this,w,"f")}`)}return e}static fromCore(e){let t;if((0,d.isNativeScript)(e))t=Script.newNativeScript(n.NativeScript.fromCore(e));else{switch(e.version){case d.PlutusLanguageVersion.V1:t=Script.newPlutusV1Script(c.PlutusV1Script.fromCore(e));break;case d.PlutusLanguageVersion.V2:t=Script.newPlutusV2Script(l.PlutusV2Script.fromCore(e));break;case d.PlutusLanguageVersion.V3:t=Script.newPlutusV3Script(u.PlutusV3Script.fromCore(e));break;default:throw new a.InvalidStateError("Unexpected Plutus language version")}}return t}language(){return __classPrivateFieldGet(this,w,"f")}static newNativeScript(e){const t=new Script;__classPrivateFieldSet(t,m,e,"f");__classPrivateFieldSet(t,w,f.Native,"f");return t}static newPlutusV1Script(e){const t=new Script;__classPrivateFieldSet(t,p,e,"f");__classPrivateFieldSet(t,w,f.PlutusV1,"f");return t}static newPlutusV2Script(e){const t=new Script;__classPrivateFieldSet(t,v,e,"f");__classPrivateFieldSet(t,w,f.PlutusV2,"f");return t}static newPlutusV3Script(e){const t=new Script;__classPrivateFieldSet(t,_,e,"f");__classPrivateFieldSet(t,w,f.PlutusV3,"f");return t}asNative(){return __classPrivateFieldGet(this,m,"f")}asPlutusV1(){return __classPrivateFieldGet(this,p,"f")}asPlutusV2(){return __classPrivateFieldGet(this,v,"f")}asPlutusV3(){return __classPrivateFieldGet(this,_,"f")}hash(){let e;switch(__classPrivateFieldGet(this,w,"f")){case f.Native:e=__classPrivateFieldGet(this,m,"f").hash();break;case f.PlutusV1:e=__classPrivateFieldGet(this,p,"f").hash();break;case f.PlutusV2:e=__classPrivateFieldGet(this,v,"f").hash();break;case f.PlutusV3:e=__classPrivateFieldGet(this,_,"f").hash();break;default:throw new a.InvalidStateError(`Unexpected script language ${__classPrivateFieldGet(this,w,"f")}`)}return e}constructor(){m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0)}}m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js":(e,t,r)=>{"use strict";r.d(t,{Transaction:()=>Transaction,TxBodyCBOR:()=>TxBodyCBOR,TxCBOR:()=>TxCBOR,deserializeTx:()=>deserializeTx});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v;const _=4;class Transaction{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(_);e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor()));e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));e.writeBoolean(__classPrivateFieldGet(this,p,"f"));if(__classPrivateFieldGet(this,m,"f"))e.writeEncodedValue((0,l.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor()));else e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();const i=t.readEncodedValue();const l=d.TransactionBody.fromCbor(n.HexBlob.fromBytes(i));const u=c.TransactionWitnessSet.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));let f=true;if(r===_)f=t.readBoolean();let h;if(t.peekState()!==o.CborReaderState.Null)h=s.AuxiliaryData.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const m=new Transaction(l,u,h);__classPrivateFieldSet(m,p,f,"f");__classPrivateFieldSet(m,v,e,"f");return m}toCore(){const e={body:__classPrivateFieldGet(this,f,"f").toCore(),id:this.getId(),isValid:__classPrivateFieldGet(this,p,"f"),witness:__classPrivateFieldGet(this,h,"f").toCore()};if(__classPrivateFieldGet(this,m,"f"))e.auxiliaryData=__classPrivateFieldGet(this,m,"f").toCore();return e}static fromCore(e){const t=new Transaction(d.TransactionBody.fromCore(e.body),c.TransactionWitnessSet.fromCore(e.witness),e.auxiliaryData?s.AuxiliaryData.fromCore(e.auxiliaryData):void 0);if(void 0!==e.isValid)t.setIsValid(e.isValid);return t}body(){return d.TransactionBody.fromCbor(__classPrivateFieldGet(this,f,"f").toCbor())}setBody(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}witnessSet(){return c.TransactionWitnessSet.fromCbor(__classPrivateFieldGet(this,h,"f").toCbor())}setWitnessSet(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}isValid(){return __classPrivateFieldGet(this,p,"f")}setIsValid(e){__classPrivateFieldSet(this,v,void 0,"f");__classPrivateFieldSet(this,p,e,"f")}auxiliaryData(){if(__classPrivateFieldGet(this,m,"f")){return s.AuxiliaryData.fromCbor(__classPrivateFieldGet(this,m,"f").toCbor())}return}setAuxiliaryData(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,v,void 0,"f")}getId(){return __classPrivateFieldGet(this,f,"f").hash()}clone(){const e=this.toCbor();return Transaction.fromCbor(e)}constructor(e,t,r){f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,true);v.set(this,void 0);__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,h,t,"f");__classPrivateFieldSet(this,m,r,"f")}}f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap;const TxCBOR=e=>(0,n.HexBlob)(e);TxCBOR.serialize=e=>Transaction.fromCore(e).toCbor();const TxBodyCBOR=e=>(0,n.HexBlob)(e);TxBodyCBOR.fromTxCBOR=e=>Transaction.fromCbor(e).body().toCbor();const deserializeTx=e=>{const t=e instanceof u?e.toString("hex"):e instanceof Uint8Array?u.from(e).toString("hex"):e;const r=Transaction.fromCbor(TxCBOR(t));return r.toCore()};TxCBOR.deserialize=e=>deserializeTx(e)},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js":(e,t,r)=>{"use strict";r.d(t,{Constitution:()=>Constitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Constitution{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor()));__classPrivateFieldGet(this,u,"f")?e.writeByteString((0,c.hexToBytes)(__classPrivateFieldGet(this,u,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==h)throw new n.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const i=s.Anchor.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));let c;if(t.peekState()===o.CborReaderState.Null)t.readNull();else c=d.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new Constitution(i,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f").toCore(),scriptHash:__classPrivateFieldGet(this,u,"f")?__classPrivateFieldGet(this,u,"f"):null}}static fromCore(e){return new Constitution(s.Anchor.fromCore(e.anchor),null!==e.scriptHash?e.scriptHash:void 0)}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}scriptHash(){return __classPrivateFieldGet(this,u,"f")}setScriptHash(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js":(e,t,r)=>{"use strict";r.d(t,{GovernanceActionKind:()=>s});var s;(function(e){e[e["ParameterChange"]=0]="ParameterChange";e[e["HardForkInitiation"]=1]="HardForkInitiation";e[e["TreasuryWithdrawals"]=2]="TreasuryWithdrawals";e[e["NoConfidence"]=3]="NoConfidence";e[e["UpdateCommittee"]=4]="UpdateCommittee";e[e["NewConstitution"]=5]="NewConstitution";e[e["Info"]=6]="Info"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js":(e,t,r)=>{"use strict";r.d(t,{HardForkInitiationAction:()=>HardForkInitiationAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class HardForkInitiationAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(n.GovernanceActionKind.HardForkInitiation);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==v)throw new c.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.HardForkInitiation)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.HardForkInitiation} but got ${s}`);let d;if(t.peekState()===a.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolVersion.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const h=new HardForkInitiationAction(f,d);__classPrivateFieldSet(h,p,e,"f");return h}toCore(){return{__typename:d.GovernanceActionType.hard_fork_initiation_action,governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,protocolVersion:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new HardForkInitiationAction(u.ProtocolVersion.fromCore(e.protocolVersion),null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}protocolVersion(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js":(e,t,r)=>{"use strict";r.d(t,{InfoAction:()=>InfoAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d;const c=1;class InfoAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,d,"f"))return __classPrivateFieldGet(this,d,"f");e.writeStartArray(c);e.writeInt(a.GovernanceActionKind.Info);return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==c)throw new n.InvalidArgumentError("cbor",`Expected an array of ${c} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==a.GovernanceActionKind.Info)throw new n.InvalidArgumentError("cbor",`Expected action kind, expected ${a.GovernanceActionKind.Info} but got ${s}`);const o=new InfoAction;__classPrivateFieldSet(o,d,e,"f");return o}toCore(){return{__typename:o.GovernanceActionType.info_action}}static fromCore(e){return new InfoAction}constructor(){d.set(this,void 0)}}d=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js":(e,t,r)=>{"use strict";r.d(t,{NewConstitution:()=>NewConstitution});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p;const v=3;class NewConstitution{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");e.writeStartArray(v);e.writeInt(d.GovernanceActionKind.NewConstitution);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==v)throw new l.InvalidArgumentError("cbor",`Expected an array of ${v} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.NewConstitution)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.NewConstitution} but got ${s}`);let c;if(t.peekState()===a.CborReaderState.Null)t.readNull();else c=n.GovernanceActionId.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const f=o.Constitution.fromCbor(u.HexBlob.fromBytes(t.readEncodedValue()));const h=new NewConstitution(f,c);__classPrivateFieldSet(h,p,e,"f");return h}toCore(){return{__typename:c.GovernanceActionType.new_constitution,constitution:__classPrivateFieldGet(this,h,"f").toCore(),governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null}}static fromCore(e){return new NewConstitution(o.Constitution.fromCore(e.constitution),null!==e.governanceActionId?n.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}constitution(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js":(e,t,r)=>{"use strict";r.d(t,{NoConfidence:()=>NoConfidence});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h;const m=2;class NoConfidence{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");e.writeStartArray(m);e.writeInt(n.GovernanceActionKind.NoConfidence);__classPrivateFieldGet(this,f,"f")?e.writeEncodedValue((0,u.hexToBytes)(__classPrivateFieldGet(this,f,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==m)throw new c.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.NoConfidence)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.NoConfidence}  but got ${s}`);let d;if(t.peekState()===a.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const u=new NoConfidence(d);__classPrivateFieldSet(u,h,e,"f");return u}toCore(){return{__typename:d.GovernanceActionType.no_confidence,governanceActionId:__classPrivateFieldGet(this,f,"f")?__classPrivateFieldGet(this,f,"f").toCore():null}}static fromCore(e){return new NoConfidence(null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,f,"f")}constructor(e){f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,f,e,"f")}}f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js":(e,t,r)=>{"use strict";r.d(t,{ParameterChangeAction:()=>ParameterChangeAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p,v;const _=4;class ParameterChangeAction{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,v,"f"))return __classPrivateFieldGet(this,v,"f");e.writeStartArray(_);e.writeInt(n.GovernanceActionKind.ParameterChange);__classPrivateFieldGet(this,m,"f")?e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,m,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,h,"f").toCbor()));__classPrivateFieldGet(this,p,"f")?e.writeByteString((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==_)throw new c.InvalidArgumentError("cbor",`Expected an array of ${_} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==n.GovernanceActionKind.ParameterChange)throw new c.InvalidArgumentError("cbor",`Expected action kind, expected ${n.GovernanceActionKind.ParameterChange} but got ${s}`);let d;if(t.peekState()===a.CborReaderState.Null)t.readNull();else d=o.GovernanceActionId.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));const f=u.ProtocolParamUpdate.fromCbor(l.HexBlob.fromBytes(t.readEncodedValue()));let h;if(t.peekState()===a.CborReaderState.Null)t.readNull();else h=l.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new ParameterChangeAction(f,d,h);__classPrivateFieldSet(m,v,e,"f");return m}toCore(){return{__typename:d.GovernanceActionType.parameter_change_action,governanceActionId:__classPrivateFieldGet(this,m,"f")?__classPrivateFieldGet(this,m,"f").toCore():null,policyHash:__classPrivateFieldGet(this,p,"f")?__classPrivateFieldGet(this,p,"f"):null,protocolParamUpdate:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new ParameterChangeAction(u.ProtocolParamUpdate.fromCore(e.protocolParamUpdate),null!==e.governanceActionId?o.GovernanceActionId.fromCore(e.governanceActionId):void 0,null!==e.policyHash?e.policyHash:void 0)}govActionId(){return __classPrivateFieldGet(this,m,"f")}protocolParamUpdate(){return __classPrivateFieldGet(this,h,"f")}policyHash(){return __classPrivateFieldGet(this,p,"f")}constructor(e,t,r){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,p,r,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js":(e,t,r)=>{"use strict";r.d(t,{ProposalProcedure:()=>ProposalProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var b=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var P,S,C,k,j,x,T,E,A,I,B,F;const M=4;class ProposalProcedure{toCbor(){const e=new o.CborWriter;if(__classPrivateFieldGet(this,F,"f"))return __classPrivateFieldGet(this,F,"f");let t;switch(__classPrivateFieldGet(this,E,"f")){case d.GovernanceActionKind.ParameterChange:t=__classPrivateFieldGet(this,P,"f").toCbor();break;case d.GovernanceActionKind.HardForkInitiation:t=__classPrivateFieldGet(this,S,"f").toCbor();break;case d.GovernanceActionKind.TreasuryWithdrawals:t=__classPrivateFieldGet(this,C,"f").toCbor();break;case d.GovernanceActionKind.NoConfidence:t=__classPrivateFieldGet(this,k,"f").toCbor();break;case d.GovernanceActionKind.UpdateCommittee:t=__classPrivateFieldGet(this,j,"f").toCbor();break;case d.GovernanceActionKind.NewConstitution:t=__classPrivateFieldGet(this,x,"f").toCbor();break;case d.GovernanceActionKind.Info:t=__classPrivateFieldGet(this,T,"f").toCbor();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,E,"f")}`)}e.writeStartArray(M);e.writeInt(__classPrivateFieldGet(this,A,"f"));const r=s.RewardAddress.fromAddress(i.Address.fromBech32(__classPrivateFieldGet(this,I,"f")));if(!r){throw new _.SerializationError(_.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${__classPrivateFieldGet(this,I,"f")}`)}e.writeByteString(b.from(r.toAddress().toBytes(),"hex"));e.writeEncodedValue((0,g.hexToBytes)(t));e.writeEncodedValue((0,g.hexToBytes)(__classPrivateFieldGet(this,B,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){let t;const r=new n.CborReader(e);r.readStartArray();const s=r.readInt();const o=i.Address.fromBytes(f.HexBlob.fromBytes(r.readByteString())).toBech32();const c=f.HexBlob.fromBytes(r.readEncodedValue());const _=a.Anchor.fromCbor(f.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();const g=new n.CborReader(c);g.readStartArray();let b;const P=Number(g.readInt());switch(P){case d.GovernanceActionKind.ParameterChange:b=v.ParameterChangeAction.fromCbor(c);t=ProposalProcedure.newParameterChangeAction(s,o,_,b);break;case d.GovernanceActionKind.HardForkInitiation:b=l.HardForkInitiationAction.fromCbor(c);t=ProposalProcedure.newHardForkInitiationAction(s,o,_,b);break;case d.GovernanceActionKind.TreasuryWithdrawals:b=w.TreasuryWithdrawalsAction.fromCbor(c);t=ProposalProcedure.newTreasuryWithdrawalsAction(s,o,_,b);break;case d.GovernanceActionKind.NoConfidence:b=p.NoConfidence.fromCbor(c);t=ProposalProcedure.newNoConfidence(s,o,_,b);break;case d.GovernanceActionKind.UpdateCommittee:b=y.UpdateCommittee.fromCbor(c);t=ProposalProcedure.newUpdateCommittee(s,o,_,b);break;case d.GovernanceActionKind.NewConstitution:b=m.NewConstitution.fromCbor(c);t=ProposalProcedure.newNewConstitution(s,o,_,b);break;case d.GovernanceActionKind.Info:b=h.InfoAction.fromCbor(c);t=ProposalProcedure.newInfoAction(s,o,_,b);break;default:throw new u.InvalidStateError(`Unexpected kind value: ${P}`)}__classPrivateFieldSet(t,F,e,"f");return t}toCore(){let e;switch(__classPrivateFieldGet(this,E,"f")){case d.GovernanceActionKind.ParameterChange:e=__classPrivateFieldGet(this,P,"f").toCore();break;case d.GovernanceActionKind.HardForkInitiation:e=__classPrivateFieldGet(this,S,"f").toCore();break;case d.GovernanceActionKind.TreasuryWithdrawals:e=__classPrivateFieldGet(this,C,"f").toCore();break;case d.GovernanceActionKind.NoConfidence:e=__classPrivateFieldGet(this,k,"f").toCore();break;case d.GovernanceActionKind.UpdateCommittee:e=__classPrivateFieldGet(this,j,"f").toCore();break;case d.GovernanceActionKind.NewConstitution:e=__classPrivateFieldGet(this,x,"f").toCore();break;case d.GovernanceActionKind.Info:e=__classPrivateFieldGet(this,T,"f").toCore();break;default:throw new u.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,E,"f")}`)}return{anchor:__classPrivateFieldGet(this,B,"f").toCore(),deposit:__classPrivateFieldGet(this,A,"f"),governanceAction:e,rewardAccount:__classPrivateFieldGet(this,I,"f")}}static fromCore(e){let t;let r;const s=a.Anchor.fromCore(e.anchor);switch(e.governanceAction.__typename){case c.GovernanceActionType.parameter_change_action:t=v.ParameterChangeAction.fromCore(e.governanceAction);r=ProposalProcedure.newParameterChangeAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.hard_fork_initiation_action:t=l.HardForkInitiationAction.fromCore(e.governanceAction);r=ProposalProcedure.newHardForkInitiationAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.treasury_withdrawals_action:t=w.TreasuryWithdrawalsAction.fromCore(e.governanceAction);r=ProposalProcedure.newTreasuryWithdrawalsAction(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.no_confidence:t=p.NoConfidence.fromCore(e.governanceAction);r=ProposalProcedure.newNoConfidence(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.update_committee:t=y.UpdateCommittee.fromCore(e.governanceAction);r=ProposalProcedure.newUpdateCommittee(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.new_constitution:t=m.NewConstitution.fromCore(e.governanceAction);r=ProposalProcedure.newNewConstitution(e.deposit,e.rewardAccount,s,t);break;case c.GovernanceActionType.info_action:t=h.InfoAction.fromCore(e.governanceAction);r=ProposalProcedure.newInfoAction(e.deposit,e.rewardAccount,s,t);break;default:throw new u.InvalidStateError("Unexpected ProposalProcedure type")}return r}static newParameterChangeAction(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.ParameterChange,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,P,s,"f");return i}static newHardForkInitiationAction(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.HardForkInitiation,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,S,s,"f");return i}static newTreasuryWithdrawalsAction(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.TreasuryWithdrawals,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,C,s,"f");return i}static newNoConfidence(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.NoConfidence,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,k,s,"f");return i}static newUpdateCommittee(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.UpdateCommittee,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,j,s,"f");return i}static newNewConstitution(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.NewConstitution,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,x,s,"f");return i}static newInfoAction(e,t,r,s){const i=new ProposalProcedure;__classPrivateFieldSet(i,E,d.GovernanceActionKind.Info,"f");__classPrivateFieldSet(i,A,e,"f");__classPrivateFieldSet(i,I,t,"f");__classPrivateFieldSet(i,B,r,"f");__classPrivateFieldSet(i,T,s,"f");return i}kind(){return __classPrivateFieldGet(this,E,"f")}deposit(){return __classPrivateFieldGet(this,A,"f")}rewardAccount(){return __classPrivateFieldGet(this,I,"f")}anchor(){return __classPrivateFieldGet(this,B,"f")}getParameterChangeAction(){return __classPrivateFieldGet(this,P,"f")}getHardForkInitiationAction(){return __classPrivateFieldGet(this,S,"f")}getTreasuryWithdrawalsAction(){return __classPrivateFieldGet(this,C,"f")}getNoConfidence(){return __classPrivateFieldGet(this,k,"f")}getUpdateCommittee(){return __classPrivateFieldGet(this,j,"f")}getNewConstitution(){return __classPrivateFieldGet(this,x,"f")}getInfoAction(){return __classPrivateFieldGet(this,T,"f")}constructor(){P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0)}}P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js":(e,t,r)=>{"use strict";r.d(t,{TreasuryWithdrawalsAction:()=>TreasuryWithdrawalsAction});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,v,_;const w=3;class TreasuryWithdrawalsAction{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(w);e.writeInt(d.GovernanceActionKind.TreasuryWithdrawals);const t=new Map([...__classPrivateFieldGet(this,p,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,o]of t){const n=s.RewardAddress.fromAddress(i.Address.fromBech32(r));if(!n){throw new f.SerializationError(f.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${r}`)}e.writeByteString(m.from(n.toAddress().toBytes(),"hex"));e.writeInt(o)}__classPrivateFieldGet(this,v,"f")?e.writeByteString((0,h.hexToBytes)(__classPrivateFieldGet(this,v,"f"))):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==w)throw new l.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==d.GovernanceActionKind.TreasuryWithdrawals)throw new l.InvalidArgumentError("cbor",`Expected action kind, expected ${d.GovernanceActionKind.TreasuryWithdrawals} but got ${s}`);t.readStartMap();const a=new Map;while(t.peekState()!==n.CborReaderState.EndMap){const c=i.Address.fromBytes(u.HexBlob.fromBytes(t.readByteString())).toBech32();const f=t.readInt();a.set(c,f)}t.readEndMap();let h;if(t.peekState()===n.CborReaderState.Null)t.readNull();else h=u.HexBlob.fromBytes(t.readByteString());t.readEndArray();const m=new TreasuryWithdrawalsAction(a,h);__classPrivateFieldSet(m,_,e,"f");return m}toCore(){const e=new Set([...__classPrivateFieldGet(this,p,"f").entries()].map(e=>({coin:e[1],rewardAccount:e[0]})));return{__typename:c.GovernanceActionType.treasury_withdrawals_action,policyHash:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f"):null,withdrawals:e}}static fromCore(e){return new TreasuryWithdrawalsAction(new Map([...e.withdrawals].map(e=>[e.rewardAccount,e.coin])),null!==e.policyHash?e.policyHash:void 0)}withdrawals(){return __classPrivateFieldGet(this,p,"f")}policyHash(){return __classPrivateFieldGet(this,v,"f")}constructor(e,t){p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,v,t,"f")}}p=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js":(e,t,r)=>{"use strict";r.d(t,{UpdateCommittee:()=>UpdateCommittee});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,_,w,y,g;const b=5;const P=2;const S=0;const C=1;class UpdateCommittee{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");e.writeStartArray(b);e.writeInt(f.GovernanceActionKind.UpdateCommittee);__classPrivateFieldGet(this,v,"f")?e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor())):e.writeNull();e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,_,"f").toCbor()));e.writeStartMap(__classPrivateFieldGet(this,w,"f").length);for(const t of __classPrivateFieldGet(this,w,"f")){e.writeStartArray(P);e.writeInt(t[S].type);e.writeByteString((0,p.hexToBytes)(t[S].hash));e.writeInt(t[C])}e.writeEncodedValue((0,p.hexToBytes)(__classPrivateFieldGet(this,y,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==b)throw new h.InvalidArgumentError("cbor",`Expected an array of ${b} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());if(s!==f.GovernanceActionKind.UpdateCommittee)throw new h.InvalidArgumentError("cbor",`Expected action kind, expected ${f.GovernanceActionKind.UpdateCommittee} but got ${s}`);let c;if(t.peekState()===a.CborReaderState.Null)t.readNull();else c=u.GovernanceActionId.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()));const l=o.CborSet.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()),n.Credential.fromCbor);t.readStartMap();const p=[];while(t.peekState()!==a.CborReaderState.EndMap){if(t.readStartArray()!==P)throw new h.InvalidArgumentError("cbor",`Expected an array of ${P} elements, but got an array of ${r} elements`);const v=Number(t.readUInt());const _=m.HexBlob.fromBytes(t.readByteString());t.readEndArray();const w=Number(t.readUInt());p.push([{hash:_,type:v},w])}t.readEndMap();const y=d.UnitInterval.fromCbor(m.HexBlob.fromBytes(t.readEncodedValue()));const S=new UpdateCommittee(l,p,y,c);__classPrivateFieldSet(S,g,e,"f");return S}toCore(){return{__typename:c.GovernanceActionType.update_committee,governanceActionId:__classPrivateFieldGet(this,v,"f")?__classPrivateFieldGet(this,v,"f").toCore():null,membersToBeAdded:new Set(__classPrivateFieldGet(this,w,"f").map(e=>({coldCredential:e[S],epoch:(0,l.EpochNo)(e[C])}))),membersToBeRemoved:new Set(__classPrivateFieldGet(this,_,"f").toCore()),newQuorumThreshold:__classPrivateFieldGet(this,y,"f").toCore()}}static fromCore(e){return new UpdateCommittee(o.CborSet.fromCore([...e.membersToBeRemoved],n.Credential.fromCore),[...e.membersToBeAdded].map(e=>[e.coldCredential,e.epoch]),d.UnitInterval.fromCore(e.newQuorumThreshold),null!==e.governanceActionId?u.GovernanceActionId.fromCore(e.governanceActionId):void 0)}govActionId(){return __classPrivateFieldGet(this,v,"f")}membersToBeRemoved(){return __classPrivateFieldGet(this,_,"f").toCore()}membersToBeAdded(){return __classPrivateFieldGet(this,w,"f")}newQuorum(){return __classPrivateFieldGet(this,y,"f")}constructor(e,t,r,s){v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,w,t,"f");__classPrivateFieldSet(this,y,r,"f");__classPrivateFieldSet(this,v,s,"f")}}v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js":(e,t,r)=>{"use strict";r.d(t,{TransactionBody:()=>TransactionBody});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var S=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var C,k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$,L;class TransactionBody{toCbor(){var e;const t=new o.CborWriter;if(__classPrivateFieldGet(this,$,"f"))return __classPrivateFieldGet(this,$,"f");t.writeStartMap(__classPrivateFieldGet(this,C,"m",L).call(this));if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0){t.writeInt(0n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,k,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,j,"f")){t.writeInt(1n);t.writeStartArray(__classPrivateFieldGet(this,j,"f").length);for(const r of __classPrivateFieldGet(this,j,"f"))t.writeEncodedValue(S.from(r.toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")){t.writeInt(2n);t.writeInt(__classPrivateFieldGet(this,x,"f"))}if(void 0!==__classPrivateFieldGet(this,T,"f")){t.writeInt(3n);t.writeInt(__classPrivateFieldGet(this,T,"f"))}if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0){t.writeInt(4n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,E,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size>0){t.writeInt(5n);const s=new Map;for(const[n,d]of __classPrivateFieldGet(this,A,"f")){const c=i.RewardAddress.fromAddress(a.Address.fromBech32(n));if(!c){throw new p.SerializationError(p.SerializationFailure.InvalidAddress,`Invalid withdrawal address: ${n}`)}const l=c.toAddress().toBytes();s.set(l,d)}const u=[...s].sort((e,t)=>e>t?1:-1);t.writeStartMap(u.length);for(const[f,h]of u){t.writeByteString(S.from(f,"hex"));t.writeInt(h)}}if(void 0!==__classPrivateFieldGet(this,I,"f")){t.writeInt(6n);t.writeEncodedValue(S.from(__classPrivateFieldGet(this,I,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,B,"f")){t.writeInt(7n);t.writeByteString(S.from(__classPrivateFieldGet(this,B,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,F,"f")){t.writeInt(8n);t.writeInt(__classPrivateFieldGet(this,F,"f"))}if(void 0!==__classPrivateFieldGet(this,M,"f")&&__classPrivateFieldGet(this,M,"f").size>0){t.writeInt(9n);const m=(0,P.tokenMapToMultiAsset)(__classPrivateFieldGet(this,M,"f"));t.writeStartMap(m.size);const v=new Map([...m.entries()].sort(P.sortCanonically));for(const[_,w]of v.entries()){t.writeByteString(S.from(_,"hex"));const y=new Map([...w.entries()].sort(P.sortCanonically));t.writeStartMap(y.size);for(const[g,q]of y.entries()){t.writeByteString(S.from(g,"hex"));t.writeInt(q)}}}if(void 0!==__classPrivateFieldGet(this,R,"f")){t.writeInt(11n);t.writeByteString(S.from(__classPrivateFieldGet(this,R,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,D,"f")&&__classPrivateFieldGet(this,D,"f").size()>0){t.writeInt(13n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,D,"f").toCbor()))}if((null===(e=__classPrivateFieldGet(this,O,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,O,"f").size()>0){t.writeInt(14n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,O,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,G,"f")){t.writeInt(15n);t.writeInt(__classPrivateFieldGet(this,G,"f"))}if(void 0!==__classPrivateFieldGet(this,N,"f")){t.writeInt(16n);t.writeEncodedValue(S.from(__classPrivateFieldGet(this,N,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,H,"f")){t.writeInt(17n);t.writeInt(__classPrivateFieldGet(this,H,"f"))}if(void 0!==__classPrivateFieldGet(this,K,"f")&&__classPrivateFieldGet(this,K,"f").size()>0){t.writeInt(18n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,K,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,V,"f")){t.writeInt(19n);t.writeEncodedValue(S.from(__classPrivateFieldGet(this,V,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,W,"f")&&__classPrivateFieldGet(this,W,"f").size()>0){t.writeInt(20n);t.writeEncodedValue((0,b.hexToBytes)(__classPrivateFieldGet(this,W,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,z,"f")){t.writeInt(21n);t.writeInt(__classPrivateFieldGet(this,z,"f"))}if(void 0!==__classPrivateFieldGet(this,U,"f")){t.writeInt(22n);t.writeInt(__classPrivateFieldGet(this,U,"f"))}return t.encodeAsHex()}static fromCbor(e){const t=new n.CborReader(e);const r=l.CborSet.fromCore([],_.TransactionInput.fromCore);const s=new Array;const i=0n;const o=new TransactionBody(r,s,i);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const c=t.readInt();switch(c){case 0n:{const p=t.readEncodedValue();o.setInputs(l.CborSet.fromCbor(h.HexBlob.fromBytes(p),_.TransactionInput.fromCbor));break}case 1n:t.readStartArray();while(t.peekState()!==d.CborReaderState.EndArray){o.outputs().push(w.TransactionOutput.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())))}t.readEndArray();break;case 2n:o.setFee(t.readInt());break;case 3n:o.setTtl((0,v.Slot)(Number(t.readInt())));break;case 4n:o.setCerts(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),f.Certificate.fromCbor));break;case 5n:t.readStartMap();o.setWithdrawals(new Map);while(t.peekState()!==d.CborReaderState.EndMap){const b=a.Address.fromBytes(h.HexBlob.fromBytes(t.readByteString())).toBech32();const C=t.readInt();o.withdrawals().set(b,C)}t.readEndMap();break;case 6n:o.setUpdate(y.Update.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 7n:o.setAuxiliaryDataHash(h.HexBlob.fromBytes(t.readByteString()));break;case 8n:o.setValidityStartInterval((0,v.Slot)(Number(t.readInt())));break;case 9n:{const k=new Map;t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const j=h.HexBlob.fromBytes(t.readByteString());if(!k.has(j))k.set(j,new Map);t.readStartMap();while(t.peekState()!==d.CborReaderState.EndMap){const x=S.from(t.readByteString()).toString("hex");const T=t.readInt();k.get(j).set(x,T)}t.readEndMap()}t.readEndMap();o.setMint((0,P.multiAssetsToTokenMap)(k));break}case 11n:o.setScriptDataHash(h.HexBlob.fromBytes(t.readByteString()));break;case 13n:o.setCollateral(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),_.TransactionInput.fromCbor));break;case 14n:o.setRequiredSigners(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),u.Hash.fromCbor));break;case 15n:o.setNetworkId(Number(t.readInt()));break;case 16n:o.setCollateralReturn(w.TransactionOutput.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 17n:o.setTotalCollateral(t.readInt());break;case 18n:o.setReferenceInputs(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),_.TransactionInput.fromCbor));break;case 19n:o.setVotingProcedures(g.VotingProcedures.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())));break;case 20n:o.setProposalProcedures(l.CborSet.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue()),m.ProposalProcedure.fromCbor));break;case 21n:o.setCurrentTreasuryValue(t.readInt());break;case 22n:o.setDonation(t.readInt());break}}t.readEndMap();__classPrivateFieldSet(o,$,e,"f");return o}toCore(){var e,t,r,s,i,a;return{auxiliaryDataHash:__classPrivateFieldGet(this,B,"f"),certificates:(null===(e=__classPrivateFieldGet(this,E,"f"))||void 0===e?void 0:e.values())?__classPrivateFieldGet(this,E,"f").toCore():void 0,collateralReturn:null===(t=__classPrivateFieldGet(this,N,"f"))||void 0===t?void 0:t.toCore(),collaterals:(null===(r=__classPrivateFieldGet(this,D,"f"))||void 0===r?void 0:r.values())?__classPrivateFieldGet(this,D,"f").toCore():void 0,donation:__classPrivateFieldGet(this,U,"f"),fee:__classPrivateFieldGet(this,x,"f"),inputs:__classPrivateFieldGet(this,k,"f").toCore(),mint:__classPrivateFieldGet(this,M,"f"),networkId:__classPrivateFieldGet(this,G,"f"),outputs:__classPrivateFieldGet(this,j,"f").map(e=>e.toCore()),proposalProcedures:(null===(s=__classPrivateFieldGet(this,W,"f"))||void 0===s?void 0:s.values())?__classPrivateFieldGet(this,W,"f").toCore():void 0,referenceInputs:(null===(i=__classPrivateFieldGet(this,K,"f"))||void 0===i?void 0:i.size())?__classPrivateFieldGet(this,K,"f").toCore():void 0,requiredExtraSignatures:null===(a=__classPrivateFieldGet(this,O,"f"))||void 0===a?void 0:a.toCore(),scriptIntegrityHash:__classPrivateFieldGet(this,R,"f"),totalCollateral:__classPrivateFieldGet(this,H,"f"),treasuryValue:__classPrivateFieldGet(this,z,"f"),update:__classPrivateFieldGet(this,I,"f")?__classPrivateFieldGet(this,I,"f").toCore():void 0,validityInterval:void 0!==__classPrivateFieldGet(this,T,"f")||void 0!==__classPrivateFieldGet(this,F,"f")?{invalidBefore:__classPrivateFieldGet(this,F,"f"),invalidHereafter:__classPrivateFieldGet(this,T,"f")}:void 0,votingProcedures:__classPrivateFieldGet(this,V,"f")?__classPrivateFieldGet(this,V,"f").toCore():void 0,withdrawals:__classPrivateFieldGet(this,A,"f")?[...__classPrivateFieldGet(this,A,"f")].map(([e,t])=>({quantity:t,stakeAddress:e})):void 0}}static fromCore(e){const t=new TransactionBody(l.CborSet.fromCore(e.inputs,_.TransactionInput.fromCore),e.outputs.map(e=>w.TransactionOutput.fromCore(e)),e.fee);if(e.auxiliaryDataHash)t.setAuxiliaryDataHash(e.auxiliaryDataHash);if(e.certificates)t.setCerts(l.CborSet.fromCore(e.certificates,f.Certificate.fromCore));if(e.collateralReturn)t.setCollateralReturn(w.TransactionOutput.fromCore(e.collateralReturn));if(e.collaterals)t.setCollateral(l.CborSet.fromCore(e.collaterals,_.TransactionInput.fromCore));if(e.mint)t.setMint(e.mint);if(void 0!==e.networkId)t.setNetworkId(e.networkId);if(e.referenceInputs)t.setReferenceInputs(l.CborSet.fromCore(e.referenceInputs,_.TransactionInput.fromCore));if(e.requiredExtraSignatures)t.setRequiredSigners(l.CborSet.fromCore(e.requiredExtraSignatures,u.Hash.fromCore));if(e.scriptIntegrityHash)t.setScriptDataHash(e.scriptIntegrityHash);if(void 0!==e.totalCollateral)t.setTotalCollateral(e.totalCollateral);if(e.update)t.setUpdate(y.Update.fromCore(e.update));if(e.validityInterval){if(void 0!==e.validityInterval.invalidHereafter)t.setTtl(e.validityInterval.invalidHereafter);if(void 0!==e.validityInterval.invalidBefore)t.setValidityStartInterval(e.validityInterval.invalidBefore)}if(e.withdrawals){t.setWithdrawals(new Map);for(const r of e.withdrawals)t.withdrawals().set(r.stakeAddress,r.quantity)}if(void 0!==e.donation)t.setDonation(e.donation);if(void 0!==e.treasuryValue)t.setCurrentTreasuryValue(e.treasuryValue);if(e.votingProcedures)t.setVotingProcedures(g.VotingProcedures.fromCore(e.votingProcedures));if(e.proposalProcedures)t.setProposalProcedures(l.CborSet.fromCore(e.proposalProcedures,m.ProposalProcedure.fromCore));return t}setInputs(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}inputs(){return __classPrivateFieldGet(this,k,"f")}setOutputs(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}outputs(){return __classPrivateFieldGet(this,j,"f")}setFee(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}fee(){return __classPrivateFieldGet(this,x,"f")}setTtl(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}ttl(){return __classPrivateFieldGet(this,T,"f")}setCerts(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}certs(){return __classPrivateFieldGet(this,E,"f")}setWithdrawals(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}withdrawals(){return __classPrivateFieldGet(this,A,"f")}setUpdate(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}update(){return __classPrivateFieldGet(this,I,"f")}setAuxiliaryDataHash(e){__classPrivateFieldSet(this,B,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}auxiliaryDataHash(){return __classPrivateFieldGet(this,B,"f")}setValidityStartInterval(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}validityStartInterval(){return __classPrivateFieldGet(this,F,"f")}setMint(e){__classPrivateFieldSet(this,M,(0,P.multiAssetsToTokenMap)(new Map([...(0,P.tokenMapToMultiAsset)(e).entries()].sort(P.sortCanonically))),"f");__classPrivateFieldSet(this,$,void 0,"f")}mint(){return __classPrivateFieldGet(this,M,"f")}setScriptDataHash(e){__classPrivateFieldSet(this,R,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}scriptDataHash(){return __classPrivateFieldGet(this,R,"f")}setCollateral(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}collateral(){return __classPrivateFieldGet(this,D,"f")}setRequiredSigners(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}requiredSigners(){return __classPrivateFieldGet(this,O,"f")}setNetworkId(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}networkId(){return __classPrivateFieldGet(this,G,"f")}setCollateralReturn(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}collateralReturn(){return __classPrivateFieldGet(this,N,"f")}setTotalCollateral(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}totalCollateral(){return __classPrivateFieldGet(this,H,"f")}setReferenceInputs(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}referenceInputs(){return __classPrivateFieldGet(this,K,"f")}setVotingProcedures(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}votingProcedures(){return __classPrivateFieldGet(this,V,"f")}setProposalProcedures(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}proposalProcedures(){return __classPrivateFieldGet(this,W,"f")}setCurrentTreasuryValue(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}currentTreasuryValue(){return __classPrivateFieldGet(this,z,"f")}setDonation(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,$,void 0,"f")}donation(){return __classPrivateFieldGet(this,U,"f")}hash(){return s.blake2b.hash(this.toCbor(),32)}hasTaggedSets(){const e=new n.CborReader(__classPrivateFieldGet(this,k,"f").toCbor());return e.peekState()===d.CborReaderState.Tag&&e.peekTag()===c.CborTag.Set}hasBabbageOutput(){if(0===__classPrivateFieldGet(this,j,"f").length)return false;const e=new n.CborReader(__classPrivateFieldGet(this,j,"f")[0].toCbor());return e.peekState()===d.CborReaderState.StartMap}constructor(e,t,r,s){C.add(this);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,j,t,"f");__classPrivateFieldSet(this,x,r,"f");__classPrivateFieldSet(this,T,s,"f")}}k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,C=new WeakSet,L=function _TransactionBody_getMapSize(){var e;let t=0;if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,j,"f"))++t;if(void 0!==__classPrivateFieldGet(this,x,"f"))++t;if(void 0!==__classPrivateFieldGet(this,T,"f"))++t;if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,I,"f"))++t;if(void 0!==__classPrivateFieldGet(this,B,"f"))++t;if(void 0!==__classPrivateFieldGet(this,F,"f"))++t;if(void 0!==__classPrivateFieldGet(this,M,"f")&&__classPrivateFieldGet(this,M,"f").size>0)++t;if(void 0!==__classPrivateFieldGet(this,R,"f"))++t;if(void 0!==__classPrivateFieldGet(this,D,"f")&&__classPrivateFieldGet(this,D,"f").size()>0)++t;if((null===(e=__classPrivateFieldGet(this,O,"f"))||void 0===e?void 0:e.values())!==void 0&&__classPrivateFieldGet(this,O,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,G,"f"))++t;if(void 0!==__classPrivateFieldGet(this,N,"f"))++t;if(void 0!==__classPrivateFieldGet(this,H,"f"))++t;if(void 0!==__classPrivateFieldGet(this,K,"f")&&__classPrivateFieldGet(this,K,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,V,"f"))++t;if(void 0!==__classPrivateFieldGet(this,W,"f")&&__classPrivateFieldGet(this,W,"f").size()>0)++t;if(void 0!==__classPrivateFieldGet(this,z,"f"))++t;if(void 0!==__classPrivateFieldGet(this,U,"f"))++t;return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js":(e,t,r)=>{"use strict";r.d(t,{TransactionInput:()=>TransactionInput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class TransactionInput{toCbor(){if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const e=new s.CborWriter;e.writeStartArray(u);e.writeByteString(n.from(__classPrivateFieldGet(this,d,"f"),"hex"));e.writeInt(__classPrivateFieldGet(this,c,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==u)throw new a.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=t.readByteString();const n=t.readInt();const d=new TransactionInput(o.HexBlob.fromBytes(s),n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return{index:Number(__classPrivateFieldGet(this,c,"f")),txId:__classPrivateFieldGet(this,d,"f")}}static fromCore(e){return new TransactionInput(e.txId,BigInt(e.index))}transactionId(){return __classPrivateFieldGet(this,d,"f")}setTransactionId(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}index(){return __classPrivateFieldGet(this,c,"f")}setIndex(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js":(e,t,r)=>{"use strict";r.d(t,{REQUIRED_FIELDS_COUNT:()=>P,TransactionOutput:()=>TransactionOutput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var m=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var p,v,_,w,y,g,b;const P=2;class TransactionOutput{toCbor(){if(__classPrivateFieldGet(this,g,"f"))return __classPrivateFieldGet(this,g,"f");const e=new i.CborWriter;const t=__classPrivateFieldGet(this,p,"m",b).call(this);if(t===P||3===t&&void 0!==__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").kind()===d.DatumKind.DataHash){e.writeStartArray(t);e.writeByteString(m.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeEncodedValue(m.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,w,"f"))e.writeByteString(m.from(__classPrivateFieldGet(this,w,"f").asDataHash(),"hex"))}else{e.writeStartMap(t);e.writeInt(0n);e.writeByteString(m.from(__classPrivateFieldGet(this,v,"f").toBytes(),"hex"));e.writeInt(1n);e.writeEncodedValue(m.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(2n);e.writeStartArray(2);e.writeInt(__classPrivateFieldGet(this,w,"f").kind());switch(__classPrivateFieldGet(this,w,"f").kind()){case d.DatumKind.DataHash:e.writeByteString(m.from(__classPrivateFieldGet(this,w,"f").asDataHash(),"hex"));break;case d.DatumKind.InlineData:e.writeTag(a.CborTag.EncodedCborDataItem);e.writeByteString(m.from(__classPrivateFieldGet(this,w,"f").asInlineData().toCbor(),"hex"));break}}if(void 0!==__classPrivateFieldGet(this,y,"f")){e.writeInt(3n);e.writeTag(a.CborTag.EncodedCborDataItem);e.writeByteString(m.from(__classPrivateFieldGet(this,y,"f").toCbor(),"hex"))}}return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);let r;let i;let m;let p;if(t.peekState()===n.CborReaderState.StartMap){t.readStartMap();while(t.peekState()!==n.CborReaderState.EndMap){const v=t.readInt();switch(v){case 0n:r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));break;case 1n:i=h.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));break;case 2n:{const _=new o.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));_.readStartArray();const w=Number(_.readInt());if(w===d.DatumKind.InlineData){const y=_.readTag();if(y!==a.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${a.CborTag.EncodedCborDataItem} but got ${y}`)}const b=_.readByteString();let P;let S;if(w===d.DatumKind.DataHash)P=c.HexBlob.fromBytes(b);if(w===d.DatumKind.InlineData)S=u.PlutusData.fromCbor(c.HexBlob.fromBytes(b));m=new d.Datum(P,S);break}case 3n:{const C=new o.CborReader(c.HexBlob.fromBytes(t.readEncodedValue()));const k=C.readTag();if(k!==a.CborTag.EncodedCborDataItem)throw new l.InvalidArgumentError("cbor",`Expected tag ${a.CborTag.EncodedCborDataItem} but got ${k}`);const j=C.readByteString();p=f.Script.fromCbor(c.HexBlob.fromBytes(j));break}}}t.readEndMap()}else{const x=t.readStartArray();r=s.Address.fromBytes(c.HexBlob.fromBytes(t.readByteString()));i=h.Value.fromCbor(c.HexBlob.fromBytes(t.readEncodedValue()));if(3===x){const T=t.readByteString();m=d.Datum.newDataHash(c.HexBlob.fromBytes(T))}}if(!r)throw new l.InvalidArgumentError("cbor","Transaction output does not contain an address.");if(!i)throw new l.InvalidArgumentError("cbor","Transaction output does not contain a value.");const E=new TransactionOutput(r,i);if(m)E.setDatum(m);if(p)E.setScriptRef(p);__classPrivateFieldSet(E,g,e,"f");return E}toCore(){var e;const t=__classPrivateFieldGet(this,_,"f").toCore();if(!t.assets)delete t.assets;const r={address:__classPrivateFieldGet(this,v,"f").asByron()?__classPrivateFieldGet(this,v,"f").toBase58():__classPrivateFieldGet(this,v,"f").toBech32(),value:t};if(__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").kind()===d.DatumKind.InlineData)r.datum=null===(e=__classPrivateFieldGet(this,w,"f").asInlineData())||void 0===e?void 0:e.toCore();if(__classPrivateFieldGet(this,w,"f")&&__classPrivateFieldGet(this,w,"f").kind()===d.DatumKind.DataHash)r.datumHash=__classPrivateFieldGet(this,w,"f").asDataHash();if(__classPrivateFieldGet(this,y,"f"))r.scriptReference=__classPrivateFieldGet(this,y,"f").toCore();return r}static fromCore(e){const t=s.Address.fromString(e.address);if(!t)throw new l.InvalidArgumentError("coreTransactionOutput",`Invalid address ${t}`);const r=new TransactionOutput(t,h.Value.fromCore(e.value));if(e.datum)r.setDatum(d.Datum.fromCore(e.datum));if(e.datumHash)r.setDatum(d.Datum.fromCore(e.datumHash));if(e.scriptReference)r.setScriptRef(f.Script.fromCore(e.scriptReference));return r}address(){return __classPrivateFieldGet(this,v,"f")}amount(){return __classPrivateFieldGet(this,_,"f")}datum(){return __classPrivateFieldGet(this,w,"f")}setDatum(e){__classPrivateFieldSet(this,w,e,"f")}scriptRef(){return __classPrivateFieldGet(this,y,"f")}setScriptRef(e){__classPrivateFieldSet(this,y,e,"f")}isBabbageOutput(){const e=new o.CborReader(this.toCbor());return e.peekState()===n.CborReaderState.StartMap}constructor(e,t){p.add(this);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,_,t,"f")}}v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,p=new WeakSet,b=function _TransactionOutput_getMapSize(){let e=P;if(__classPrivateFieldGet(this,w,"f"))++e;if(__classPrivateFieldGet(this,y,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js":(e,t,r)=>{"use strict";r.d(t,{multiAssetsToTokenMap:()=>multiAssetsToTokenMap,sortCanonically:()=>sortCanonically,tokenMapToMultiAsset:()=>tokenMapToMultiAsset});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const sortCanonically=(e,t)=>{if(e[0].length===t[0].length){return e[0]>t[0]?1:-1}if(e[0].length>t[0].length)return 1;return -1};const tokenMapToMultiAsset=e=>{const t=new Map;const r=new Map([...e.entries()].sort(sortCanonically));for(const[i,a]of r.entries()){const o=s.AssetId.getPolicyId(i);const n=s.AssetId.getAssetName(i);if(!t.has(o))t.set(o,new Map);t.get(o).set(n,a)}return t};const multiAssetsToTokenMap=e=>{const t=new Map;for(const[r,i]of e.entries()){for(const[a,o]of i.entries()){const n=s.AssetId.fromParts(r,a);t.set(n,o)}}return t}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js":(e,t,r)=>{"use strict";r.d(t,{Value:()=>Value});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Utils.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Value{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new s.CborWriter;if(!__classPrivateFieldGet(this,u,"f")||__classPrivateFieldGet(this,u,"f").size<=0)e.writeInt(__classPrivateFieldGet(this,l,"f"));else{e.writeStartArray(h);e.writeInt(__classPrivateFieldGet(this,l,"f"));const t=(0,d.tokenMapToMultiAsset)(__classPrivateFieldGet(this,u,"f"));const r=new Map([...t.entries()].sort(d.sortCanonically));e.writeStartMap(r.size);for(const[i,a]of r.entries()){e.writeByteString(c.from(i,"hex"));const o=new Map([...a.entries()].sort(d.sortCanonically));e.writeStartMap(o.size);for(const[n,m]of o.entries()){e.writeByteString(c.from(n,"hex"));e.writeInt(m)}}}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);if(t.peekState()===a.CborReaderState.UnsignedInteger){const r=t.readUInt();return new Value(r)}const s=t.readStartArray();if(s!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${s} elements`);const l=t.readUInt();const u=new Map;t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const m=n.HexBlob.fromBytes(t.readByteString());if(!u.has(m))u.set(m,new Map);t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const p=c.from(t.readByteString()).toString("hex");const v=t.readUInt();u.get(m).set(p,v)}t.readEndMap()}t.readEndMap();const _=new Map([...(0,d.multiAssetsToTokenMap)(u)].sort(d.sortCanonically));const w=new Value(l,_);__classPrivateFieldSet(w,f,e,"f");return w}toCore(){return{assets:__classPrivateFieldGet(this,u,"f"),coins:__classPrivateFieldGet(this,l,"f")}}static fromCore(e){return new Value(e.coins,e.assets)}coin(){return __classPrivateFieldGet(this,l,"f")}setCoin(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}multiasset(){return __classPrivateFieldGet(this,u,"f")}setMultiasset(e){__classPrivateFieldSet(this,u,(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(e).entries()].sort(d.sortCanonically))),"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,0n);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t?(0,d.multiAssetsToTokenMap)(new Map([...(0,d.tokenMapToMultiAsset)(t).entries()].sort(d.sortCanonically))):void 0,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js":(e,t,r)=>{"use strict";r.d(t,{Voter:()=>Voter});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u,f,h;const m=2;class Voter{toCbor(){if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");const e=new s.CborWriter;e.writeStartArray(m);e.writeInt(__classPrivateFieldGet(this,u,"f"));e.writeByteString(l.from(__classPrivateFieldGet(this,f,"f").hash,"hex"));return e.encodeAsHex()}static fromCbor(e){let t;const r=new i.CborReader(e);const s=r.readStartArray();if(s!==m)throw new o.InvalidArgumentError("cbor",`Expected an array of ${m} elements, but got an array of ${s} elements`);const c=Number(r.readInt());const l=n.HexBlob.fromBytes(r.readByteString());switch(c){case d.VoterKind.ConstitutionalCommitteeKeyHash:case d.VoterKind.DrepKeyHash:case d.VoterKind.StakePoolKeyHash:t={hash:l,type:a.CredentialType.KeyHash};break;case d.VoterKind.ConstitutionalCommitteeScriptHash:case d.VoterKind.DRepScriptHash:t={hash:l,type:a.CredentialType.ScriptHash};break;default:throw new o.InvalidStateError(`Unexpected kind value: ${c}`)}const u=new Voter(c,t);__classPrivateFieldSet(u,h,e,"f");return u}toCore(){switch(__classPrivateFieldGet(this,u,"f")){case d.VoterKind.ConstitutionalCommitteeKeyHash:return{__typename:c.VoterType.ccHotKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:a.CredentialType.KeyHash}};case d.VoterKind.ConstitutionalCommitteeScriptHash:return{__typename:c.VoterType.ccHotScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:a.CredentialType.ScriptHash}};case d.VoterKind.DrepKeyHash:return{__typename:c.VoterType.dRepKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:a.CredentialType.KeyHash}};case d.VoterKind.DRepScriptHash:return{__typename:c.VoterType.dRepScriptHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:a.CredentialType.ScriptHash}};case d.VoterKind.StakePoolKeyHash:return{__typename:c.VoterType.stakePoolKeyHash,credential:{hash:__classPrivateFieldGet(this,f,"f").hash,type:a.CredentialType.KeyHash}};default:throw new o.InvalidStateError(`Unexpected kind value: ${__classPrivateFieldGet(this,u,"f")}`)}}static fromCore(e){let t;switch(e.__typename){case c.VoterType.ccHotKeyHash:case c.VoterType.ccHotScriptHash:t=Voter.newConstitutionalCommitteeHotKey(e.credential);break;case c.VoterType.dRepKeyHash:case c.VoterType.dRepScriptHash:t=Voter.newDrep(e.credential);break;case c.VoterType.stakePoolKeyHash:t=Voter.newStakingPool(e.credential.hash);break;default:throw new o.InvalidStateError("Unexpected Voter type")}return t}static newConstitutionalCommitteeHotKey(e){const t=e.type===a.CredentialType.KeyHash?d.VoterKind.ConstitutionalCommitteeKeyHash:d.VoterKind.ConstitutionalCommitteeScriptHash;return new Voter(t,e)}static newDrep(e){const t=e.type===a.CredentialType.KeyHash?d.VoterKind.DrepKeyHash:d.VoterKind.DRepScriptHash;return new Voter(t,e)}static newStakingPool(e){return new Voter(d.VoterKind.StakePoolKeyHash,{hash:e,type:a.CredentialType.KeyHash})}kind(){return __classPrivateFieldGet(this,u,"f")}toConstitutionalCommitteeHotCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.ConstitutionalCommitteeScriptHash)return __classPrivateFieldGet(this,f,"f");return}toDrepCred(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.DrepKeyHash||__classPrivateFieldGet(this,u,"f")===d.VoterKind.DRepScriptHash)return __classPrivateFieldGet(this,f,"f");return}toStakingPoolKeyHash(){if(__classPrivateFieldGet(this,u,"f")===d.VoterKind.StakePoolKeyHash)return __classPrivateFieldGet(this,f,"f").hash;return}equals(e){return __classPrivateFieldGet(this,u,"f")===__classPrivateFieldGet(e,u,"f")&&__classPrivateFieldGet(this,f,"f").type===__classPrivateFieldGet(e,f,"f").type&&__classPrivateFieldGet(this,f,"f").hash===__classPrivateFieldGet(e,f,"f").hash}constructor(e,t){u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,t,"f")}}u=new WeakMap,f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js":(e,t,r)=>{"use strict";r.d(t,{VoterKind:()=>s});var s;(function(e){e[e["ConstitutionalCommitteeKeyHash"]=0]="ConstitutionalCommitteeKeyHash";e[e["ConstitutionalCommitteeScriptHash"]=1]="ConstitutionalCommitteeScriptHash";e[e["DrepKeyHash"]=2]="DrepKeyHash";e[e["DRepScriptHash"]=3]="DRepScriptHash";e[e["StakePoolKeyHash"]=4]="StakePoolKeyHash"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedure:()=>VotingProcedure});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u;const f=2;class VotingProcedure{toCbor(){if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const e=new i.CborWriter;e.writeStartArray(f);e.writeInt(__classPrivateFieldGet(this,c,"f"));__classPrivateFieldGet(this,l,"f")?e.writeEncodedValue((0,d.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor())):e.writeNull();return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);t.readStartArray();const r=Number(t.readInt());let i;if(t.peekState()===o.CborReaderState.Null){t.readNull();i=void 0}else{i=s.Anchor.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()))}const d=new VotingProcedure(r,i);__classPrivateFieldSet(d,u,e,"f");return d}toCore(){return{anchor:__classPrivateFieldGet(this,l,"f")?__classPrivateFieldGet(this,l,"f").toCore():null,vote:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){return new VotingProcedure(e.vote,e.anchor?s.Anchor.fromCore(e.anchor):void 0)}vote(){return __classPrivateFieldGet(this,c,"f")}setVote(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}anchor(){return __classPrivateFieldGet(this,l,"f")}setAnchor(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,void 0,"f")}constructor(e,t){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{VotingProcedures:()=>VotingProcedures});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var f,h;class VotingProcedures{toCbor(){if(__classPrivateFieldGet(this,h,"f"))return __classPrivateFieldGet(this,h,"f");const e=new s.CborWriter;const t=this.getVoters();if(0===t.length)throw new n.InvalidStateError("Empty VotingProcedures. There must be at least one VotingProcedure in the map");e.writeStartMap(t.length);for(const r of t){const i=this.getGovernanceActionIdsByVoter(r);if(0===i.length)throw new n.InvalidStateError("Each voter must at least be associated to a GovernanceActionId");e.writeEncodedValue((0,u.hexToBytes)(r.toCbor()));e.writeStartMap(i.length);for(const a of i){e.writeEncodedValue((0,u.hexToBytes)(a.toCbor()));const o=this.get(r,a);if(!o)throw new n.InvalidStateError("Each governanceActionIds must at least be associated to a vote");e.writeEncodedValue((0,u.hexToBytes)(o.toCbor()))}}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=new VotingProcedures;t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const s=c.Voter.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const n=o.GovernanceActionId.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));const u=l.VotingProcedure.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));r.insert(s,n,u)}t.readEndMap()}t.readEndMap();__classPrivateFieldSet(r,h,e,"f");return r}toCore(){return __classPrivateFieldGet(this,f,"f").map(e=>{const t=e.voter.toCore();const r=e.votes.map(e=>({actionId:e.actionId.toCore(),votingProcedure:e.votingProcedure.toCore()}));return{voter:t,votes:r}})}static fromCore(e){const t=new VotingProcedures;__classPrivateFieldSet(t,f,e.map(e=>{const t=c.Voter.fromCore(e.voter);const r=e.votes.map(e=>({actionId:o.GovernanceActionId.fromCore(e.actionId),votingProcedure:l.VotingProcedure.fromCore(e.votingProcedure)}));return{voter:t,votes:r}}),"f");return t}insert(e,t,r){const s=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!s){__classPrivateFieldGet(this,f,"f").push({voter:e,votes:[{actionId:t,votingProcedure:r}]});return}const i=s.votes.find(e=>e.actionId.equals(t));if(i)throw new n.InvalidArgumentError("actionId","Voter already has a voting procedure for the given actionId");s.votes.push({actionId:t,votingProcedure:r});__classPrivateFieldSet(this,h,void 0,"f")}get(e,t){const r=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!r)return;const s=r.votes.find(e=>e.actionId.equals(t));if(!s)return;return s.votingProcedure}getVoters(){return __classPrivateFieldGet(this,f,"f").map(e=>e.voter)}getGovernanceActionIdsByVoter(e){const t=__classPrivateFieldGet(this,f,"f").find(t=>t.voter.equals(e));if(!t)return[];return t.votes.map(e=>e.actionId)}constructor(){f.set(this,[]);h.set(this,void 0)}}f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js":(e,t,r)=>{"use strict";r.d(t,{TransactionUnspentOutput:()=>TransactionUnspentOutput});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class TransactionUnspentOutput{toCbor(){if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");const e=new s.CborWriter;e.writeStartArray(h);e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,l,"f").toCbor()));e.writeEncodedValue((0,c.hexToBytes)(__classPrivateFieldGet(this,u,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new a.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=n.TransactionInput.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=d.TransactionOutput.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=new TransactionUnspentOutput(s,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return[__classPrivateFieldGet(this,l,"f").toCore(),__classPrivateFieldGet(this,u,"f").toCore()]}static fromCore(e){return new TransactionUnspentOutput(n.TransactionInput.fromCore(e[0]),d.TransactionOutput.fromCore(e[1]))}input(){return __classPrivateFieldGet(this,l,"f")}setInput(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}output(){return __classPrivateFieldGet(this,u,"f")}setOutput(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js":(e,t,r)=>{"use strict";r.d(t,{BootstrapWitness:()=>BootstrapWitness});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f;const h=4;const m=(0,s.HexBlob)("a0");class BootstrapWitness{toCbor(){const e=new a.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");if(__classPrivateFieldGet(this,l,"f").length/2!==32)throw new i.InvalidStateError(`Chaincode must be 32 bytes long, but got ${__classPrivateFieldGet(this,l,"f").length/2} bytes long`);e.writeStartArray(h);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,l,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new o.CborReader(e);const r=t.readStartArray();if(r!==h)throw new i.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const a=s.HexBlob.fromBytes(t.readByteString());const n=s.HexBlob.fromBytes(t.readByteString());const d=s.HexBlob.fromBytes(t.readByteString());const c=s.HexBlob.fromBytes(t.readByteString());t.readEndArray();const l=new BootstrapWitness(a,n,d,c);__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{addressAttributes:s.Base64Blob.fromBytes((0,n.hexToBytes)(__classPrivateFieldGet(this,u,"f"))),chainCode:__classPrivateFieldGet(this,l,"f"),key:__classPrivateFieldGet(this,d,"f"),signature:__classPrivateFieldGet(this,c,"f")}}static fromCore(e){if(!e.chainCode)throw new i.InvalidStateError("Chaincode must be present");if(e.chainCode.length/2!==32)throw new i.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.chainCode.length/2} bytes long`);return new BootstrapWitness(e.key,e.signature,e.chainCode,e.addressAttributes?s.HexBlob.fromBase64(e.addressAttributes):m)}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}chainCode(){return __classPrivateFieldGet(this,l,"f")}setChainCode(e){if(e.length/2!==32)throw new i.InvalidStateError(`Chaincode must be 32 bytes long, but got ${e.length/2} bytes long`);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}attributes(){return __classPrivateFieldGet(this,u,"f")}setAttributes(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t,r,s){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f");__classPrivateFieldSet(this,l,r,"f");__classPrivateFieldSet(this,u,s,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js":(e,t,r)=>{"use strict";r.d(t,{Redeemer:()=>Redeemer});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var h,m,p,v,_;const w=4;const y=32;class Redeemer{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,_,"f"))return __classPrivateFieldGet(this,_,"f");e.writeStartArray(w);e.writeInt(__classPrivateFieldGet(this,h,"f"));e.writeInt(__classPrivateFieldGet(this,m,"f"));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,p,"f").toCbor()));e.writeEncodedValue((0,f.hexToBytes)(__classPrivateFieldGet(this,v,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=t.readStartArray();if(r!==w)throw new n.InvalidArgumentError("cbor",`Expected an array of ${w} elements, but got an array of ${r} elements`);const s=Number(t.readUInt());const i=t.readUInt();const l=c.PlutusData.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));const u=o.ExUnits.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new Redeemer(s,i,l,u);__classPrivateFieldSet(f,_,e,"f");return f}toCore(){let e;switch(__classPrivateFieldGet(this,h,"f")){case u.RedeemerTag.Spend:e=l.RedeemerPurpose.spend;break;case u.RedeemerTag.Mint:e=l.RedeemerPurpose.mint;break;case u.RedeemerTag.Cert:e=l.RedeemerPurpose.certificate;break;case u.RedeemerTag.Reward:e=l.RedeemerPurpose.withdrawal;break;case u.RedeemerTag.Voting:e=l.RedeemerPurpose.vote;break;case u.RedeemerTag.Proposing:e=l.RedeemerPurpose.propose;break;default:throw new n.InvalidStateError(`Invalid redeemer type ${__classPrivateFieldGet(this,h,"f")}`)}return{data:__classPrivateFieldGet(this,p,"f").toCore(),executionUnits:__classPrivateFieldGet(this,v,"f").toCore(),index:Number(__classPrivateFieldGet(this,m,"f")),purpose:e}}static fromCore(e){let t;switch(e.purpose){case l.RedeemerPurpose.spend:t=u.RedeemerTag.Spend;break;case l.RedeemerPurpose.mint:t=u.RedeemerTag.Mint;break;case l.RedeemerPurpose.certificate:t=u.RedeemerTag.Cert;break;case l.RedeemerPurpose.withdrawal:t=u.RedeemerTag.Reward;break;case l.RedeemerPurpose.vote:t=u.RedeemerTag.Voting;break;case l.RedeemerPurpose.propose:t=u.RedeemerTag.Proposing;break;default:throw new n.InvalidStateError(`Invalid redeemer type ${e.purpose}`)}return new Redeemer(t,BigInt(e.index),c.PlutusData.fromCore(e.data),o.ExUnits.fromCore(e.executionUnits))}tag(){return __classPrivateFieldGet(this,h,"f")}setTag(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,_,void 0,"f")}index(){return __classPrivateFieldGet(this,m,"f")}setIndex(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,_,void 0,"f")}data(){return __classPrivateFieldGet(this,p,"f")}setData(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,_,void 0,"f")}exUnits(){return __classPrivateFieldGet(this,v,"f")}setExUnits(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,_,void 0,"f")}hash(){return s.blake2b.hash(this.toCbor(),y)}constructor(e,t,r,s){h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,m,t,"f");__classPrivateFieldSet(this,p,r,"f");__classPrivateFieldSet(this,v,s,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js":(e,t,r)=>{"use strict";r.d(t,{RedeemerTag:()=>s});var s;(function(e){e[e["Spend"]=0]="Spend";e[e["Mint"]=1]="Mint";e[e["Cert"]=2]="Cert";e[e["Reward"]=3]="Reward";e[e["Voting"]=4]="Voting";e[e["Proposing"]=5]="Proposing"})(s||(s={}))},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js":(e,t,r)=>{"use strict";r.d(t,{Redeemers:()=>Redeemers});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var h=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var m,p;const v=2;const _=2;class Redeemers{toCbor(){if(__classPrivateFieldGet(this,p,"f"))return __classPrivateFieldGet(this,p,"f");const e=new s.CborWriter;if(f.inConwayEra){const t=new Map(__classPrivateFieldGet(this,m,"f").map(e=>[`${e.tag()}:${e.index()}`,e]));e.writeStartMap(t.size);for(const r of t.values()){e.writeStartArray(2);e.writeInt(r.tag());e.writeInt(r.index());e.writeStartArray(2);e.writeEncodedValue((0,u.hexToBytes)(r.data().toCbor()));e.writeEncodedValue((0,u.hexToBytes)(r.exUnits().toCbor()))}}else{e.writeStartArray(__classPrivateFieldGet(this,m,"f").length);for(const i of __classPrivateFieldGet(this,m,"f"))e.writeEncodedValue(h.from(i.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=[];const r=new i.CborReader(e);if(r.peekState()===a.CborReaderState.StartMap){r.readStartMap();while(r.peekState()!==a.CborReaderState.EndMap){const s=r.readStartArray();if(s!==v)throw new n.InvalidArgumentError("cbor",`Redeemers map index should be an array of ${v} elements, but got an array of ${s} elements`);const u=Number(r.readUInt());const f=r.readUInt();r.readEndArray();const h=r.readStartArray();if(h!==_)throw new n.InvalidArgumentError("cbor",`Redeemers map value should be an array of ${_} elements, but got an array of ${h} elements`);const m=c.PlutusData.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));const w=o.ExUnits.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue()));r.readEndArray();t.push(new l.Redeemer(u,f,m,w))}r.readEndMap()}else{r.readStartArray();while(r.peekState()!==a.CborReaderState.EndArray){t.push(l.Redeemer.fromCbor(d.HexBlob.fromBytes(r.readEncodedValue())))}r.readEndArray()}const y=new Redeemers(t);__classPrivateFieldSet(y,p,e,"f");return y}toCore(){return __classPrivateFieldGet(this,m,"f").map(e=>e.toCore())}static fromCore(e){return new Redeemers(e.map(e=>l.Redeemer.fromCore(e)))}values(){return __classPrivateFieldGet(this,m,"f")}setValues(e){__classPrivateFieldSet(this,m,[...e],"f");__classPrivateFieldSet(this,p,void 0,"f")}size(){return __classPrivateFieldGet(this,m,"f").length}constructor(e){m.set(this,void 0);p.set(this,void 0);__classPrivateFieldSet(this,m,[...e],"f")}}m=new WeakMap,p=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js":(e,t,r)=>{"use strict";r.d(t,{TransactionWitnessSet:()=>TransactionWitnessSet});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var y=r("../../node_modules/lodash/uniqWith.js");var g=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var b,P,S,C,k,j,x,T,E,A,I,B,F,M;class TransactionWitnessSet{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,I,"f"))return __classPrivateFieldGet(this,I,"f");e.writeStartMap(__classPrivateFieldGet(this,b,"m",M).call(this));if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0){__classPrivateFieldGet(this,S,"f").setValues(y(__classPrivateFieldGet(this,S,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(0n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,S,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0){e.writeInt(1n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,C,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0){__classPrivateFieldGet(this,k,"f").setValues(y(__classPrivateFieldGet(this,k,"f").values(),(e,t)=>e.vkey()===t.vkey()));e.writeInt(2n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,k,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0){e.writeInt(3n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size()>0){e.writeInt(4n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,x,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0){e.writeInt(5n);e.writeEncodedValue((0,w.hexToBytes)(__classPrivateFieldGet(this,T,"f").toCbor()))}if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0){e.writeInt(6n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,E,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0){e.writeInt(7n);e.writeEncodedValue(g.from(__classPrivateFieldGet(this,A,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new TransactionWitnessSet;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const i=t.readInt();switch(i){case 0n:r.setVkeys(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),_.VkeyWitness.fromCbor));break;case 1n:r.setNativeScripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),c.NativeScript.fromCbor));break;case 2n:r.setBootstraps(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),s.BootstrapWitness.fromCbor));break;case 3n:r.setPlutusV1Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),l.PlutusV1Script.fromCbor));break;case 4n:r.setPlutusData(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),h.PlutusData.fromCbor));break;case 5n:r.setRedeemers(p.Redeemers.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue())));break;case 6n:r.setPlutusV2Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),u.PlutusV2Script.fromCbor));break;case 7n:r.setPlutusV3Scripts(n.CborSet.fromCbor(d.HexBlob.fromBytes(t.readEncodedValue()),f.PlutusV3Script.fromCbor));break}}t.readEndMap();__classPrivateFieldSet(r,I,e,"f");return r}toCore(){var e;const t=__classPrivateFieldGet(this,b,"m",B).call(this);return{bootstrap:__classPrivateFieldGet(this,k,"f")?__classPrivateFieldGet(this,k,"f").toCore():void 0,datums:__classPrivateFieldGet(this,x,"f")?__classPrivateFieldGet(this,x,"f").toCore():void 0,redeemers:(null===(e=__classPrivateFieldGet(this,T,"f"))||void 0===e?void 0:e.size())?__classPrivateFieldGet(this,T,"f").toCore():void 0,scripts:t.length>0?t:void 0,signatures:__classPrivateFieldGet(this,S,"f")?new Map(__classPrivateFieldGet(this,S,"f").toCore()):new Map}}static fromCore(e){const t=new TransactionWitnessSet;if(e.signatures)t.setVkeys(n.CborSet.fromCore([...e.signatures],_.VkeyWitness.fromCore));if(e.scripts){const r=__classPrivateFieldGet(TransactionWitnessSet,P,"m",F).call(TransactionWitnessSet,e.scripts);if(r.native)t.setNativeScripts(r.native);if(r.plutusV1)t.setPlutusV1Scripts(r.plutusV1);if(r.plutusV2)t.setPlutusV2Scripts(r.plutusV2);if(r.plutusV3)t.setPlutusV3Scripts(r.plutusV3)}if(e.redeemers)t.setRedeemers(p.Redeemers.fromCore(e.redeemers));if(e.datums)t.setPlutusData(n.CborSet.fromCore(e.datums,h.PlutusData.fromCore));if(e.bootstrap)t.setBootstraps(n.CborSet.fromCore(e.bootstrap,s.BootstrapWitness.fromCore));return t}setVkeys(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}vkeys(){return __classPrivateFieldGet(this,S,"f")}setNativeScripts(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}nativeScripts(){return __classPrivateFieldGet(this,C,"f")}setBootstraps(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}bootstraps(){return __classPrivateFieldGet(this,k,"f")}setPlutusV1Scripts(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV1Scripts(){return __classPrivateFieldGet(this,j,"f")}setPlutusData(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusData(){return __classPrivateFieldGet(this,x,"f")}setRedeemers(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}redeemers(){return __classPrivateFieldGet(this,T,"f")}setPlutusV2Scripts(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV2Scripts(){return __classPrivateFieldGet(this,E,"f")}setPlutusV3Scripts(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,I,void 0,"f")}plutusV3Scripts(){return __classPrivateFieldGet(this,A,"f")}constructor(){b.add(this);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0)}}P=TransactionWitnessSet,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,b=new WeakSet,B=function _TransactionWitnessSet_getCoreScripts(){const e=__classPrivateFieldGet(this,j,"f")?__classPrivateFieldGet(this,j,"f").toCore():[];const t=__classPrivateFieldGet(this,E,"f")?__classPrivateFieldGet(this,E,"f").toCore():[];const r=__classPrivateFieldGet(this,A,"f")?__classPrivateFieldGet(this,A,"f").toCore():[];const s=__classPrivateFieldGet(this,C,"f")?__classPrivateFieldGet(this,C,"f").toCore():[];return[...e,...t,...r,...s]},F=function _TransactionWitnessSet_getCddlScripts(e){const[t,r,s,i]=e.reduce(([e,t,r,s],i)=>{if(i.__type===m.ScriptType.Native)e?e.push(i):e=[i];else{switch(i.version){case m.PlutusLanguageVersion.V1:t?t.push(i):t=[i];break;case m.PlutusLanguageVersion.V2:r?r.push(i):r=[i];break;case m.PlutusLanguageVersion.V3:s?s.push(i):s=[i];break;default:throw new v.SerializationError(v.SerializationFailure.InvalidScriptType,`Script '${i}' is not supported.`)}}return[e,t,r,s]},[null,null,null,null]);return{...t&&{native:n.CborSet.fromCore(t,c.NativeScript.fromCore)},...r&&{plutusV1:n.CborSet.fromCore(r,l.PlutusV1Script.fromCore)},...s&&{plutusV2:n.CborSet.fromCore(s,u.PlutusV2Script.fromCore)},...i&&{plutusV3:n.CborSet.fromCore(i,f.PlutusV3Script.fromCore)}}},M=function _TransactionWitnessSet_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,S,"f")&&__classPrivateFieldGet(this,S,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,C,"f")&&__classPrivateFieldGet(this,C,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,k,"f")&&__classPrivateFieldGet(this,k,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,j,"f")&&__classPrivateFieldGet(this,j,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,x,"f")&&__classPrivateFieldGet(this,x,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,T,"f")&&__classPrivateFieldGet(this,T,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,E,"f")&&__classPrivateFieldGet(this,E,"f").size()>0)++e;if(void 0!==__classPrivateFieldGet(this,A,"f")&&__classPrivateFieldGet(this,A,"f").size()>0)++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js":(e,t,r)=>{"use strict";r.d(t,{VkeyWitness:()=>VkeyWitness});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l;const u=2;class VkeyWitness{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");e.writeStartArray(u);e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,d,"f")));e.writeByteString((0,n.hexToBytes)(__classPrivateFieldGet(this,c,"f")));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==u)throw new a.InvalidArgumentError("cbor",`Expected an array of ${u} elements, but got an array of ${r} elements`);const s=o.HexBlob.fromBytes(t.readByteString());const n=o.HexBlob.fromBytes(t.readByteString());t.readEndArray();const d=new VkeyWitness(s,n);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){return[__classPrivateFieldGet(this,d,"f"),__classPrivateFieldGet(this,c,"f")]}static fromCore(e){return new VkeyWitness(e[0],e[1])}vkey(){return __classPrivateFieldGet(this,d,"f")}setVkey(e){__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}signature(){return __classPrivateFieldGet(this,c,"f")}setSignature(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,void 0,"f")}constructor(e,t){d.set(this,void 0);c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,d,e,"f");__classPrivateFieldSet(this,c,t,"f")}}d=new WeakMap,c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js":(e,t,r)=>{"use strict";r.d(t,{CostModel:()=>CostModel});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;class CostModel{static newPlutusV1(e){return new CostModel(i.PlutusLanguageVersion.V1,e)}static newPlutusV2(e){return new CostModel(i.PlutusLanguageVersion.V2,e)}static newPlutusV3(e){return new CostModel(i.PlutusLanguageVersion.V3,e)}set(e,t){if(!__classPrivateFieldGet(this,a,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,o,"f")}.`);__classPrivateFieldGet(this,n,"f")[e]=t}get(e){if(!__classPrivateFieldGet(this,a,"m",d).call(this,e))throw new s.InvalidArgumentError("operation",`The given operation ${e} is invalid for the current Language version ${__classPrivateFieldGet(this,o,"f")}.`);return __classPrivateFieldGet(this,n,"f")[e]}costs(){return __classPrivateFieldGet(this,n,"f")}language(){return __classPrivateFieldGet(this,o,"f")}constructor(e,t){a.add(this);o.set(this,void 0);n.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f")}}o=new WeakMap,n=new WeakMap,a=new WeakSet,d=function _CostModel_isOperationValid(e){return e>=0}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js":(e,t,r)=>{"use strict";r.d(t,{Costmdls:()=>Costmdls});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l;class Costmdls{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,l,"f"))return __classPrivateFieldGet(this,l,"f");const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,i]of t){e.writeInt(r);e.writeStartArray(i.costs().length);for(const a of i.costs())e.writeInt(a)}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);t.readStartMap();const r=new Map;while(t.peekState()!==a.CborReaderState.EndMap){const s=Number(t.readInt());const n=new Array;t.readStartArray();while(t.peekState()!==a.CborReaderState.EndArray){n.push(Number(t.readInt()))}t.readEndArray();r.set(s,new o.CostModel(s,n))}t.readEndMap();const d=new Costmdls(r);__classPrivateFieldSet(d,l,e,"f");return d}toCore(){const e=new Map;for(const[t,r]of __classPrivateFieldGet(this,c,"f"))e.set(t,r.costs());return e}static fromCore(e){const t=new Map;for(const[r,s]of e)t.set(r,new o.CostModel(r,s));return new Costmdls(t)}size(){return __classPrivateFieldGet(this,c,"f").size}insert(e){__classPrivateFieldGet(this,c,"f").set(e.language(),e);__classPrivateFieldSet(this,l,void 0,"f")}get(e){return __classPrivateFieldGet(this,c,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,c,"f").keys()]}languageViewsEncoding(){const e=new s.CborWriter;const t=new Map([...__classPrivateFieldGet(this,c,"f")].sort((e,t)=>{const r=e[0]===d.PlutusLanguageVersion.V1?65:e[0];const s=t[0]===d.PlutusLanguageVersion.V1?65:t[0];return r>s?1:-1}));e.writeStartMap(t.size);for(const[r,i]of t){switch(r){case d.PlutusLanguageVersion.V1:{const a=new s.CborWriter;a.writeStartArray();for(const o of i.costs())a.writeInt(o);a.writeEndArray();const l=a.encode();e.writeByteString(new Uint8Array([0]));e.writeByteString(l);break}case d.PlutusLanguageVersion.V2:case d.PlutusLanguageVersion.V3:e.writeInt(r);e.writeStartArray(i.costs().length);for(const u of i.costs())e.writeInt(u);break;default:throw new n.InvalidStateError("Invalid plutus language version.")}}return e.encodeAsHex()}constructor(e=new Map){c.set(this,void 0);l.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap,l=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{DrepVotingThresholds:()=>DrepVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m,p,v,_,w,y;const g=10;class DrepVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,y,"f"))return __classPrivateFieldGet(this,y,"f");e.writeStartArray(g);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,h,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,m,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,p,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,v,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,_,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,w,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==g)throw new a.InvalidArgumentError("cbor",`Expected an array of ${g} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const f=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const h=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const m=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const p=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const v=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const _=new DrepVotingThresholds(s,d,c,l,u,f,h,m,p,v);__classPrivateFieldSet(_,y,e,"f");return _}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,h,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),ppEconomicGroup:__classPrivateFieldGet(this,p,"f").toCore(),ppGovernanceGroup:__classPrivateFieldGet(this,_,"f").toCore(),ppNetworkGroup:__classPrivateFieldGet(this,m,"f").toCore(),ppTechnicalGroup:__classPrivateFieldGet(this,v,"f").toCore(),treasuryWithdrawal:__classPrivateFieldGet(this,w,"f").toCore(),updateConstitution:__classPrivateFieldGet(this,f,"f").toCore()}}static fromCore(e){return new DrepVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.updateConstitution),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.ppNetworkGroup),n.UnitInterval.fromCore(e.ppEconomicGroup),n.UnitInterval.fromCore(e.ppTechnicalGroup),n.UnitInterval.fromCore(e.ppGovernanceGroup),n.UnitInterval.fromCore(e.treasuryWithdrawal))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setUpdateConstitution(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,h,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setPpNetworkGroup(e){__classPrivateFieldSet(this,m,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setPpEconomicGroup(e){__classPrivateFieldSet(this,p,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setPpTechnicalGroup(e){__classPrivateFieldSet(this,v,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setPpGovernanceGroup(e){__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}setTreasuryWithdrawal(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,y,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}updateConstitution(){return __classPrivateFieldGet(this,f,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,h,"f")}ppNetworkGroup(){return __classPrivateFieldGet(this,m,"f")}ppEconomicGroup(){return __classPrivateFieldGet(this,p,"f")}ppTechnicalGroup(){return __classPrivateFieldGet(this,v,"f")}ppGovernanceGroup(){return __classPrivateFieldGet(this,_,"f")}treasuryWithdrawal(){return __classPrivateFieldGet(this,w,"f")}constructor(e,t,r,s,i,a,o,n,d,g){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,h,i,"f");__classPrivateFieldSet(this,m,a,"f");__classPrivateFieldSet(this,p,o,"f");__classPrivateFieldSet(this,v,n,"f");__classPrivateFieldSet(this,_,d,"f");__classPrivateFieldSet(this,w,g,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js":(e,t,r)=>{"use strict";r.d(t,{ExUnitPrices:()=>ExUnitPrices});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/fraction.js/fraction.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class ExUnitPrices{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new a.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const c=new ExUnitPrices(s,d);__classPrivateFieldSet(c,f,e,"f");return c}toCore(){return{memory:Number(__classPrivateFieldGet(this,l,"f").numerator())/Number(__classPrivateFieldGet(this,l,"f").denominator()),steps:Number(__classPrivateFieldGet(this,u,"f").numerator())/Number(__classPrivateFieldGet(this,u,"f").denominator())}}static fromCore(e){const t=new d(e.memory);const r=new d(e.steps);return new ExUnitPrices(new n.UnitInterval(BigInt(t.n),BigInt(t.d)),new n.UnitInterval(BigInt(r.n),BigInt(r.d)))}memPrice(){return __classPrivateFieldGet(this,l,"f")}setMemPrice(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}stepsPrice(){return __classPrivateFieldGet(this,u,"f")}setStepsPrice(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,u,t,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js":(e,t,r)=>{"use strict";r.d(t,{PoolVotingThresholds:()=>PoolVotingThresholds});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c,l,u,f,h,m;const p=5;class PoolVotingThresholds{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,m,"f"))return __classPrivateFieldGet(this,m,"f");e.writeStartArray(p);e.writeEncodedValue(d.from(__classPrivateFieldGet(this,c,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,l,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,f,"f").toCbor(),"hex"));e.writeEncodedValue(d.from(__classPrivateFieldGet(this,h,"f").toCbor(),"hex"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==p)throw new a.InvalidArgumentError("cbor",`Expected an array of ${p} elements, but got an array of ${r} elements`);const s=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const d=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const c=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const l=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));const u=n.UnitInterval.fromCbor(o.HexBlob.fromBytes(t.readEncodedValue()));t.readEndArray();const f=new PoolVotingThresholds(s,d,c,l,u);__classPrivateFieldSet(f,m,e,"f");return f}toCore(){return{committeeNoConfidence:__classPrivateFieldGet(this,u,"f").toCore(),committeeNormal:__classPrivateFieldGet(this,l,"f").toCore(),hardForkInitiation:__classPrivateFieldGet(this,f,"f").toCore(),motionNoConfidence:__classPrivateFieldGet(this,c,"f").toCore(),securityRelevantParamVotingThreshold:__classPrivateFieldGet(this,h,"f").toCore()}}static fromCore(e){return new PoolVotingThresholds(n.UnitInterval.fromCore(e.motionNoConfidence),n.UnitInterval.fromCore(e.committeeNormal),n.UnitInterval.fromCore(e.committeeNoConfidence),n.UnitInterval.fromCore(e.hardForkInitiation),n.UnitInterval.fromCore(e.securityRelevantParamVotingThreshold))}setMotionNoConfidence(e){__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setCommitteeNormal(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setCommitteeNoConfidence(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}setHardForkInitiation(e){__classPrivateFieldSet(this,f,e,"f");__classPrivateFieldSet(this,m,void 0,"f")}motionNoConfidence(){return __classPrivateFieldGet(this,c,"f")}committeeNormal(){return __classPrivateFieldGet(this,l,"f")}committeeNoConfidence(){return __classPrivateFieldGet(this,u,"f")}hardForkInitiation(){return __classPrivateFieldGet(this,f,"f")}securityRelevantParam(){return __classPrivateFieldGet(this,h,"f")}constructor(e,t,r,s,i){c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,s,"f");__classPrivateFieldSet(this,h,i,"f")}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,h=new WeakMap,m=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js":(e,t,r)=>{"use strict";r.d(t,{ProposedProtocolParameterUpdates:()=>ProposedProtocolParameterUpdates});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u;class ProposedProtocolParameterUpdates{toCbor(){const e=new i.CborWriter;if(__classPrivateFieldGet(this,u,"f"))return __classPrivateFieldGet(this,u,"f");const t=new Map([...__classPrivateFieldGet(this,l,"f")].sort((e,t)=>e>t?1:-1));e.writeStartMap(t.size);for(const[r,s]of t){e.writeByteString(c.from(r,"hex"));e.writeEncodedValue(c.from(s.toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new a.CborReader(e);const r=new Map;t.readStartMap();while(t.peekState()!==o.CborReaderState.EndMap){const i=s.Hash28ByteBase16(n.HexBlob.fromBytes(t.readByteString()));const c=d.ProtocolParamUpdate.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));r.set(i,c)}t.readEndMap();const l=new ProposedProtocolParameterUpdates(r);__classPrivateFieldSet(l,u,e,"f");return l}toCore(){return new Map([...__classPrivateFieldGet(this,l,"f")].map(([e,t])=>[e,t.toCore()]))}static fromCore(e){return new ProposedProtocolParameterUpdates(new Map([...e].map(([e,t])=>[e,d.ProtocolParamUpdate.fromCore(t)])))}size(){return __classPrivateFieldGet(this,l,"f").size}insert(e,t){__classPrivateFieldGet(this,l,"f").set(e,t)}get(e){return __classPrivateFieldGet(this,l,"f").get(e)}keys(){return[...__classPrivateFieldGet(this,l,"f").keys()]}constructor(e){l.set(this,new Map);u.set(this,void 0);__classPrivateFieldSet(this,l,e,"f")}}l=new WeakMap,u=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js":(e,t,r)=>{"use strict";r.d(t,{ProtocolParamUpdate:()=>ProtocolParamUpdate});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O,G,N,H,K,V,W,z,U,$,L,q,Y,Q,J;class ProtocolParamUpdate{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,Q,"f"))return __classPrivateFieldGet(this,Q,"f");e.writeStartMap(__classPrivateFieldGet(this,v,"m",J).call(this));if(void 0!==__classPrivateFieldGet(this,_,"f")){e.writeInt(0n);e.writeInt(__classPrivateFieldGet(this,_,"f"))}if(void 0!==__classPrivateFieldGet(this,w,"f")){e.writeInt(1n);e.writeInt(__classPrivateFieldGet(this,w,"f"))}if(void 0!==__classPrivateFieldGet(this,y,"f")){e.writeInt(2n);e.writeInt(__classPrivateFieldGet(this,y,"f"))}if(void 0!==__classPrivateFieldGet(this,g,"f")){e.writeInt(3n);e.writeInt(__classPrivateFieldGet(this,g,"f"))}if(void 0!==__classPrivateFieldGet(this,b,"f")){e.writeInt(4n);e.writeInt(__classPrivateFieldGet(this,b,"f"))}if(void 0!==__classPrivateFieldGet(this,P,"f")){e.writeInt(5n);e.writeInt(__classPrivateFieldGet(this,P,"f"))}if(void 0!==__classPrivateFieldGet(this,S,"f")){e.writeInt(6n);e.writeInt(__classPrivateFieldGet(this,S,"f"))}if(void 0!==__classPrivateFieldGet(this,C,"f")){e.writeInt(7n);e.writeInt(__classPrivateFieldGet(this,C,"f"))}if(void 0!==__classPrivateFieldGet(this,k,"f")){e.writeInt(8n);e.writeInt(__classPrivateFieldGet(this,k,"f"))}if(void 0!==__classPrivateFieldGet(this,j,"f")){e.writeInt(9n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,j,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,x,"f")){e.writeInt(10n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,x,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,T,"f")){e.writeInt(11n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,T,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,E,"f")){e.writeInt(12n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,E,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,A,"f"))if(0===__classPrivateFieldGet(this,A,"f").length){e.writeInt(13n);e.writeStartArray(1);e.writeInt(0)}else{e.writeInt(13n);e.writeStartArray(2);e.writeInt(1);e.writeByteString(p.from(__classPrivateFieldGet(this,A,"f"),"hex"))}if(void 0!==__classPrivateFieldGet(this,I,"f")){e.writeInt(14n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,I,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,B,"f")){e.writeInt(16n);e.writeInt(__classPrivateFieldGet(this,B,"f"))}if(void 0!==__classPrivateFieldGet(this,F,"f")){e.writeInt(17n);e.writeInt(__classPrivateFieldGet(this,F,"f"))}if(void 0!==__classPrivateFieldGet(this,M,"f")){e.writeInt(18n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,M,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,R,"f")){e.writeInt(19n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,R,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,D,"f")){e.writeInt(20n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,D,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,O,"f")){e.writeInt(21n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,O,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,G,"f")){e.writeInt(22n);e.writeInt(__classPrivateFieldGet(this,G,"f"))}if(void 0!==__classPrivateFieldGet(this,N,"f")){e.writeInt(23n);e.writeInt(__classPrivateFieldGet(this,N,"f"))}if(void 0!==__classPrivateFieldGet(this,H,"f")){e.writeInt(24n);e.writeInt(__classPrivateFieldGet(this,H,"f"))}if(void 0!==__classPrivateFieldGet(this,K,"f")){e.writeInt(25n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,K,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,V,"f")){e.writeInt(26n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,V,"f").toCbor(),"hex"))}if(void 0!==__classPrivateFieldGet(this,W,"f")){e.writeInt(27n);e.writeInt(__classPrivateFieldGet(this,W,"f"))}if(void 0!==__classPrivateFieldGet(this,z,"f")){e.writeInt(28n);e.writeInt(__classPrivateFieldGet(this,z,"f"))}if(void 0!==__classPrivateFieldGet(this,U,"f")){e.writeInt(29n);e.writeInt(__classPrivateFieldGet(this,U,"f"))}if(void 0!==__classPrivateFieldGet(this,$,"f")){e.writeInt(30n);e.writeInt(__classPrivateFieldGet(this,$,"f"))}if(void 0!==__classPrivateFieldGet(this,L,"f")){e.writeInt(31n);e.writeInt(__classPrivateFieldGet(this,L,"f"))}if(void 0!==__classPrivateFieldGet(this,q,"f")){e.writeInt(32n);e.writeInt(__classPrivateFieldGet(this,q,"f"))}if(void 0!==__classPrivateFieldGet(this,Y,"f")){e.writeInt(33n);e.writeEncodedValue(p.from(__classPrivateFieldGet(this,Y,"f").toCbor(),"hex"))}return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=new ProtocolParamUpdate;t.readStartMap();while(t.peekState()!==a.CborReaderState.EndMap){const s=t.readInt();switch(s){case 0n:__classPrivateFieldSet(r,_,t.readInt(),"f");break;case 1n:__classPrivateFieldSet(r,w,t.readInt(),"f");break;case 2n:__classPrivateFieldSet(r,y,Number(t.readInt()),"f");break;case 3n:__classPrivateFieldSet(r,g,Number(t.readInt()),"f");break;case 4n:__classPrivateFieldSet(r,b,Number(t.readInt()),"f");break;case 5n:__classPrivateFieldSet(r,P,t.readInt(),"f");break;case 6n:__classPrivateFieldSet(r,S,t.readInt(),"f");break;case 7n:__classPrivateFieldSet(r,C,Number(t.readInt()),"f");break;case 8n:__classPrivateFieldSet(r,k,Number(t.readInt()),"f");break;case 9n:__classPrivateFieldSet(r,j,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 10n:__classPrivateFieldSet(r,x,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 11n:__classPrivateFieldSet(r,T,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 12n:__classPrivateFieldSet(r,E,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 13n:if(1===t.readStartArray()){t.readEncodedValue();__classPrivateFieldSet(r,A,"","f");t.readEndArray()}else{t.readEncodedValue();__classPrivateFieldSet(r,A,h.HexBlob.fromBytes(t.readByteString()),"f");t.readEndArray()}break;case 14n:__classPrivateFieldSet(r,I,u.ProtocolVersion.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 16n:__classPrivateFieldSet(r,B,t.readInt(),"f");break;case 17n:__classPrivateFieldSet(r,F,t.readInt(),"f");break;case 18n:__classPrivateFieldSet(r,M,o.Costmdls.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 19n:__classPrivateFieldSet(r,R,c.ExUnitPrices.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 20n:__classPrivateFieldSet(r,D,f.ExUnits.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 21n:__classPrivateFieldSet(r,O,f.ExUnits.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 22n:__classPrivateFieldSet(r,G,Number(t.readInt()),"f");break;case 23n:__classPrivateFieldSet(r,N,Number(t.readInt()),"f");break;case 24n:__classPrivateFieldSet(r,H,Number(t.readInt()),"f");break;case 25n:__classPrivateFieldSet(r,K,m.PoolVotingThresholds.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 26n:__classPrivateFieldSet(r,V,n.DrepVotingThresholds.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break;case 27n:__classPrivateFieldSet(r,W,Number(t.readInt()),"f");break;case 28n:__classPrivateFieldSet(r,z,Number(t.readInt()),"f");break;case 29n:__classPrivateFieldSet(r,U,Number(t.readInt()),"f");break;case 30n:__classPrivateFieldSet(r,$,Number(t.readInt()),"f");break;case 31n:__classPrivateFieldSet(r,L,Number(t.readInt()),"f");break;case 32n:__classPrivateFieldSet(r,q,Number(t.readInt()),"f");break;case 33n:__classPrivateFieldSet(r,Y,l.UnitInterval.fromCbor(h.HexBlob.fromBytes(t.readEncodedValue())),"f");break}}t.readEndMap();__classPrivateFieldSet(r,Q,e,"f");return r}toCore(){var e,t,r,s,i,a;const o={coinsPerUtxoByte:void 0!==__classPrivateFieldGet(this,F,"f")?Number(__classPrivateFieldGet(this,F,"f")):void 0,collateralPercentage:__classPrivateFieldGet(this,N,"f"),committeeTermLimit:void 0!==__classPrivateFieldGet(this,z,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,z,"f")):void 0,costModels:null===(e=__classPrivateFieldGet(this,M,"f"))||void 0===e?void 0:e.toCore(),dRepDeposit:__classPrivateFieldGet(this,L,"f"),dRepInactivityPeriod:void 0!==__classPrivateFieldGet(this,q,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,q,"f")):void 0,dRepVotingThresholds:null===(t=__classPrivateFieldGet(this,V,"f"))||void 0===t?void 0:t.toCore(),desiredNumberOfPools:__classPrivateFieldGet(this,k,"f"),governanceActionDeposit:__classPrivateFieldGet(this,$,"f"),governanceActionValidityPeriod:void 0!==__classPrivateFieldGet(this,U,"f")?(0,d.EpochNo)(__classPrivateFieldGet(this,U,"f")):void 0,maxBlockBodySize:__classPrivateFieldGet(this,y,"f"),maxBlockHeaderSize:__classPrivateFieldGet(this,b,"f"),maxCollateralInputs:__classPrivateFieldGet(this,H,"f"),maxExecutionUnitsPerBlock:null===(r=__classPrivateFieldGet(this,O,"f"))||void 0===r?void 0:r.toCore(),maxExecutionUnitsPerTransaction:null===(s=__classPrivateFieldGet(this,D,"f"))||void 0===s?void 0:s.toCore(),maxTxSize:void 0!==__classPrivateFieldGet(this,g,"f")?Number(__classPrivateFieldGet(this,g,"f")):void 0,maxValueSize:__classPrivateFieldGet(this,G,"f"),minCommitteeSize:__classPrivateFieldGet(this,W,"f"),minFeeCoefficient:void 0!==__classPrivateFieldGet(this,_,"f")?Number(__classPrivateFieldGet(this,_,"f")):void 0,minFeeConstant:void 0!==__classPrivateFieldGet(this,w,"f")?Number(__classPrivateFieldGet(this,w,"f")):void 0,minFeeRefScriptCostPerByte:__classPrivateFieldGet(this,Y,"f")?__classPrivateFieldGet(this,Y,"f").toFloat().toString():void 0,minPoolCost:void 0!==__classPrivateFieldGet(this,B,"f")?Number(__classPrivateFieldGet(this,B,"f")):void 0,monetaryExpansion:__classPrivateFieldGet(this,x,"f")?__classPrivateFieldGet(this,x,"f").toFloat().toString():void 0,poolDeposit:void 0!==__classPrivateFieldGet(this,S,"f")?Number(__classPrivateFieldGet(this,S,"f")):void 0,poolInfluence:__classPrivateFieldGet(this,j,"f")?__classPrivateFieldGet(this,j,"f").toFloat().toString():void 0,poolRetirementEpochBound:__classPrivateFieldGet(this,C,"f"),poolVotingThresholds:null===(i=__classPrivateFieldGet(this,K,"f"))||void 0===i?void 0:i.toCore(),prices:null===(a=__classPrivateFieldGet(this,R,"f"))||void 0===a?void 0:a.toCore(),stakeKeyDeposit:void 0!==__classPrivateFieldGet(this,P,"f")?Number(__classPrivateFieldGet(this,P,"f")):void 0,treasuryExpansion:__classPrivateFieldGet(this,T,"f")?__classPrivateFieldGet(this,T,"f").toFloat().toString():void 0};if(__classPrivateFieldGet(this,E,"f"))o.decentralizationParameter=__classPrivateFieldGet(this,E,"f").toFloat().toString();if(void 0!==__classPrivateFieldGet(this,A,"f"))o.extraEntropy=__classPrivateFieldGet(this,A,"f");if(__classPrivateFieldGet(this,I,"f"))o.protocolVersion=__classPrivateFieldGet(this,I,"f").toCore();return o}static fromCore(e){const t=new ProtocolParamUpdate;__classPrivateFieldSet(t,_,void 0!==e.minFeeCoefficient?BigInt(e.minFeeCoefficient):void 0,"f");__classPrivateFieldSet(t,y,e.maxBlockBodySize,"f");__classPrivateFieldSet(t,w,void 0!==e.minFeeConstant?BigInt(e.minFeeConstant):void 0,"f");__classPrivateFieldSet(t,b,e.maxBlockHeaderSize,"f");__classPrivateFieldSet(t,P,void 0!==e.stakeKeyDeposit?BigInt(e.stakeKeyDeposit):void 0,"f");__classPrivateFieldSet(t,S,void 0!==e.poolDeposit&&null!==e.poolDeposit?BigInt(e.poolDeposit):void 0,"f");__classPrivateFieldSet(t,C,e.poolRetirementEpochBound,"f");__classPrivateFieldSet(t,k,e.desiredNumberOfPools,"f");__classPrivateFieldSet(t,j,e.poolInfluence?l.UnitInterval.fromFloat(Number(e.poolInfluence)):void 0,"f");__classPrivateFieldSet(t,x,e.monetaryExpansion?l.UnitInterval.fromFloat(Number(e.monetaryExpansion)):void 0,"f");__classPrivateFieldSet(t,T,e.treasuryExpansion?l.UnitInterval.fromFloat(Number(e.treasuryExpansion)):void 0,"f");__classPrivateFieldSet(t,B,void 0!==e.minPoolCost?BigInt(e.minPoolCost):void 0,"f");__classPrivateFieldSet(t,G,e.maxValueSize,"f");__classPrivateFieldSet(t,g,e.maxTxSize,"f");__classPrivateFieldSet(t,N,e.collateralPercentage,"f");__classPrivateFieldSet(t,H,e.maxCollateralInputs,"f");__classPrivateFieldSet(t,M,e.costModels?o.Costmdls.fromCore(e.costModels):void 0,"f");__classPrivateFieldSet(t,R,e.prices?c.ExUnitPrices.fromCore(e.prices):void 0,"f");__classPrivateFieldSet(t,D,e.maxExecutionUnitsPerTransaction?f.ExUnits.fromCore(e.maxExecutionUnitsPerTransaction):void 0,"f");__classPrivateFieldSet(t,O,e.maxExecutionUnitsPerBlock?f.ExUnits.fromCore(e.maxExecutionUnitsPerBlock):void 0,"f");__classPrivateFieldSet(t,F,void 0!==e.coinsPerUtxoByte?BigInt(e.coinsPerUtxoByte):void 0,"f");__classPrivateFieldSet(t,K,e.poolVotingThresholds?m.PoolVotingThresholds.fromCore(e.poolVotingThresholds):void 0,"f");__classPrivateFieldSet(t,V,e.dRepVotingThresholds?n.DrepVotingThresholds.fromCore(e.dRepVotingThresholds):void 0,"f");__classPrivateFieldSet(t,W,e.minCommitteeSize,"f");__classPrivateFieldSet(t,z,e.committeeTermLimit,"f");__classPrivateFieldSet(t,U,e.governanceActionValidityPeriod,"f");__classPrivateFieldSet(t,$,e.governanceActionDeposit,"f");__classPrivateFieldSet(t,L,e.dRepDeposit,"f");__classPrivateFieldSet(t,q,e.dRepInactivityPeriod,"f");__classPrivateFieldSet(t,Y,e.minFeeRefScriptCostPerByte?l.UnitInterval.fromFloat(Number(e.minFeeRefScriptCostPerByte)):void 0,"f");const{protocolVersion:r,extraEntropy:s,decentralizationParameter:i}=e;if(void 0!==r||void 0!==s||i){__classPrivateFieldSet(t,E,i?l.UnitInterval.fromFloat(Number(i)):void 0,"f");__classPrivateFieldSet(t,I,r?u.ProtocolVersion.fromCore(r):void 0,"f");__classPrivateFieldSet(t,A,s?(0,h.HexBlob)(s):void 0,"f")}return t}setMinFeeA(e){__classPrivateFieldSet(this,_,e,"f")}minFeeA(){return __classPrivateFieldGet(this,_,"f")}setMinFeeB(e){__classPrivateFieldSet(this,w,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minFeeB(){return __classPrivateFieldGet(this,w,"f")}setMaxBlockBodySize(e){__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockBodySize(){return __classPrivateFieldGet(this,y,"f")}setMaxTxSize(e){__classPrivateFieldSet(this,g,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxSize(){return __classPrivateFieldGet(this,g,"f")}setMaxBlockHeaderSize(e){__classPrivateFieldSet(this,b,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockHeaderSize(){return __classPrivateFieldGet(this,b,"f")}setKeyDeposit(e){__classPrivateFieldSet(this,P,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}keyDeposit(){return __classPrivateFieldGet(this,P,"f")}setPoolDeposit(e){__classPrivateFieldSet(this,S,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolDeposit(){return __classPrivateFieldGet(this,S,"f")}setMaxEpoch(e){__classPrivateFieldSet(this,C,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxEpoch(){return __classPrivateFieldGet(this,C,"f")}setNOpt(e){__classPrivateFieldSet(this,k,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}nOpt(){return __classPrivateFieldGet(this,k,"f")}setPoolPledgeInfluence(e){__classPrivateFieldSet(this,j,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolPledgeInfluence(){return __classPrivateFieldGet(this,j,"f")}setExpansionRate(e){__classPrivateFieldSet(this,x,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}expansionRate(){return __classPrivateFieldGet(this,x,"f")}setTreasuryGrowthRate(e){__classPrivateFieldSet(this,T,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}treasuryGrowthRate(){return __classPrivateFieldGet(this,T,"f")}setD(e){__classPrivateFieldSet(this,E,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}d(){return __classPrivateFieldGet(this,E,"f")}setExtraEntropy(e){__classPrivateFieldSet(this,A,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}extraEntropy(){return __classPrivateFieldGet(this,A,"f")}setProtocolVersion(e){__classPrivateFieldSet(this,I,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}protocolVersion(){return __classPrivateFieldGet(this,I,"f")}setMinPoolCost(e){__classPrivateFieldSet(this,B,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minPoolCost(){return __classPrivateFieldGet(this,B,"f")}setAdaPerUtxoByte(e){__classPrivateFieldSet(this,F,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}adaPerUtxoByte(){return __classPrivateFieldGet(this,F,"f")}setCostModels(e){__classPrivateFieldSet(this,M,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}costModels(){return __classPrivateFieldGet(this,M,"f")}setExecutionCosts(e){__classPrivateFieldSet(this,R,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}executionCosts(){return __classPrivateFieldGet(this,R,"f")}setMaxTxExUnits(e){__classPrivateFieldSet(this,D,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxTxExUnits(){return __classPrivateFieldGet(this,D,"f")}setMaxBlockExUnits(e){__classPrivateFieldSet(this,O,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxBlockExUnits(){return __classPrivateFieldGet(this,O,"f")}setMaxValueSize(e){__classPrivateFieldSet(this,G,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxValueSize(){return __classPrivateFieldGet(this,G,"f")}setCollateralPercentage(e){__classPrivateFieldSet(this,N,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}collateralPercentage(){return __classPrivateFieldGet(this,N,"f")}setMaxCollateralInputs(e){__classPrivateFieldSet(this,H,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}maxCollateralInputs(){return __classPrivateFieldGet(this,H,"f")}setPoolVotingThresholds(e){__classPrivateFieldSet(this,K,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}poolVotingThresholds(){return __classPrivateFieldGet(this,K,"f")}setDrepVotingThresholds(e){__classPrivateFieldSet(this,V,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepVotingThresholds(){return __classPrivateFieldGet(this,V,"f")}setMinCommitteeSize(e){__classPrivateFieldSet(this,W,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}minCommitteeSize(){return __classPrivateFieldGet(this,W,"f")}setCommitteeTermLimit(e){__classPrivateFieldSet(this,z,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}committeeTermLimit(){return __classPrivateFieldGet(this,z,"f")}setGovernanceActionValidityPeriod(e){__classPrivateFieldSet(this,U,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionValidityPeriod(){return __classPrivateFieldGet(this,U,"f")}setGovernanceActionDeposit(e){__classPrivateFieldSet(this,$,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}governanceActionDeposit(){return __classPrivateFieldGet(this,$,"f")}setDrepDeposit(e){__classPrivateFieldSet(this,L,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepDeposit(){return __classPrivateFieldGet(this,L,"f")}setDrepInactivityPeriod(e){__classPrivateFieldSet(this,q,e,"f");__classPrivateFieldSet(this,Q,void 0,"f")}drepInactivityPeriod(){return __classPrivateFieldGet(this,q,"f")}minFeeRefScriptCostPerByte(){return __classPrivateFieldGet(this,Y,"f")}constructor(){v.add(this);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);P.set(this,void 0);S.set(this,void 0);C.set(this,void 0);k.set(this,void 0);j.set(this,void 0);x.set(this,void 0);T.set(this,void 0);E.set(this,void 0);A.set(this,void 0);I.set(this,void 0);B.set(this,void 0);F.set(this,void 0);M.set(this,void 0);R.set(this,void 0);D.set(this,void 0);O.set(this,void 0);G.set(this,void 0);N.set(this,void 0);H.set(this,void 0);K.set(this,void 0);V.set(this,void 0);W.set(this,void 0);z.set(this,void 0);U.set(this,void 0);$.set(this,void 0);L.set(this,void 0);q.set(this,void 0);Y.set(this,void 0);Q.set(this,void 0)}}_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap,B=new WeakMap,F=new WeakMap,M=new WeakMap,R=new WeakMap,D=new WeakMap,O=new WeakMap,G=new WeakMap,N=new WeakMap,H=new WeakMap,K=new WeakMap,V=new WeakMap,W=new WeakMap,z=new WeakMap,U=new WeakMap,$=new WeakMap,L=new WeakMap,q=new WeakMap,Y=new WeakMap,Q=new WeakMap,v=new WeakSet,J=function _ProtocolParamUpdate_getMapSize(){let e=0;if(void 0!==__classPrivateFieldGet(this,_,"f"))++e;if(void 0!==__classPrivateFieldGet(this,w,"f"))++e;if(void 0!==__classPrivateFieldGet(this,y,"f"))++e;if(void 0!==__classPrivateFieldGet(this,g,"f"))++e;if(void 0!==__classPrivateFieldGet(this,b,"f"))++e;if(void 0!==__classPrivateFieldGet(this,P,"f"))++e;if(void 0!==__classPrivateFieldGet(this,S,"f"))++e;if(void 0!==__classPrivateFieldGet(this,C,"f"))++e;if(void 0!==__classPrivateFieldGet(this,k,"f"))++e;if(void 0!==__classPrivateFieldGet(this,j,"f"))++e;if(void 0!==__classPrivateFieldGet(this,x,"f"))++e;if(void 0!==__classPrivateFieldGet(this,T,"f"))++e;if(void 0!==__classPrivateFieldGet(this,E,"f"))++e;if(void 0!==__classPrivateFieldGet(this,A,"f"))++e;if(void 0!==__classPrivateFieldGet(this,I,"f"))++e;if(void 0!==__classPrivateFieldGet(this,B,"f"))++e;if(void 0!==__classPrivateFieldGet(this,F,"f"))++e;if(void 0!==__classPrivateFieldGet(this,M,"f"))++e;if(void 0!==__classPrivateFieldGet(this,R,"f"))++e;if(void 0!==__classPrivateFieldGet(this,D,"f"))++e;if(void 0!==__classPrivateFieldGet(this,O,"f"))++e;if(void 0!==__classPrivateFieldGet(this,G,"f"))++e;if(void 0!==__classPrivateFieldGet(this,N,"f"))++e;if(void 0!==__classPrivateFieldGet(this,H,"f"))++e;if(void 0!==__classPrivateFieldGet(this,K,"f"))++e;if(void 0!==__classPrivateFieldGet(this,V,"f"))++e;if(void 0!==__classPrivateFieldGet(this,W,"f"))++e;if(void 0!==__classPrivateFieldGet(this,z,"f"))++e;if(void 0!==__classPrivateFieldGet(this,U,"f"))++e;if(void 0!==__classPrivateFieldGet(this,$,"f"))++e;if(void 0!==__classPrivateFieldGet(this,L,"f"))++e;if(void 0!==__classPrivateFieldGet(this,q,"f"))++e;if(void 0!==__classPrivateFieldGet(this,Y,"f"))++e;return e}},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js":(e,t,r)=>{"use strict";r.d(t,{Update:()=>Update});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var c=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l,u,f;const h=2;class Update{toCbor(){const e=new s.CborWriter;if(__classPrivateFieldGet(this,f,"f"))return __classPrivateFieldGet(this,f,"f");e.writeStartArray(h);e.writeEncodedValue(c.from(__classPrivateFieldGet(this,u,"f").toCbor(),"hex"));e.writeInt(__classPrivateFieldGet(this,l,"f"));return e.encodeAsHex()}static fromCbor(e){const t=new i.CborReader(e);const r=t.readStartArray();if(r!==h)throw new o.InvalidArgumentError("cbor",`Expected an array of ${h} elements, but got an array of ${r} elements`);const s=d.ProposedProtocolParameterUpdates.fromCbor(n.HexBlob.fromBytes(t.readEncodedValue()));const c=t.readInt();t.readEndArray();const l=new Update(s,(0,a.EpochNo)(Number(c)));__classPrivateFieldSet(l,f,e,"f");return l}toCore(){return{epoch:__classPrivateFieldGet(this,l,"f"),proposedProtocolParameterUpdates:__classPrivateFieldGet(this,u,"f").toCore()}}static fromCore(e){const t=e.epoch;const r=d.ProposedProtocolParameterUpdates.fromCore(e.proposedProtocolParameterUpdates);return new Update(r,t)}epoch(){return __classPrivateFieldGet(this,l,"f")}setEpoch(e){__classPrivateFieldSet(this,l,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}proposedProtocolParameterUpdates(){return __classPrivateFieldGet(this,u,"f")}setProposedProtocolParameterUpdates(e){__classPrivateFieldSet(this,u,e,"f");__classPrivateFieldSet(this,f,void 0,"f")}constructor(e,t){l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,u,e,"f")}}l=new WeakMap,u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/core/dist/esm/Serialization/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{ALONZO_AUX_TAG:()=>e8.ALONZO_AUX_TAG,Anchor:()=>y.Anchor,AuthCommitteeHot:()=>ec.AuthCommitteeHot,AuxiliaryData:()=>e8.AuxiliaryData,BootstrapWitness:()=>eZ.BootstrapWitness,CborAdditionalInfo:()=>E.CborAdditionalInfo,CborContentException:()=>O.CborContentException,CborInitialByte:()=>A.CborInitialByte,CborInvalidOperationException:()=>O.CborInvalidOperationException,CborMajorType:()=>I.CborMajorType,CborReader:()=>B.CborReader,CborReaderState:()=>F.CborReaderState,CborSet:()=>b.CborSet,CborSimpleValue:()=>M,CborTag:()=>R.CborTag,CborWriter:()=>D.CborWriter,Certificate:()=>G.Certificate,Committee:()=>Committee,Constitution:()=>eH.Constitution,ConstrPlutusData:()=>C.ConstrPlutusData,CostModel:()=>ep.CostModel,Costmdls:()=>em.Costmdls,Credential:()=>S.Credential,DRep:()=>et.DRep,DRepKind:()=>ee.DRepKind,Datum:()=>w.Datum,DatumKind:()=>w.DatumKind,DrepVotingThresholds:()=>eg.DrepVotingThresholds,ExUnitPrices:()=>ey.ExUnitPrices,ExUnits:()=>v.ExUnits,GeneralTransactionMetadata:()=>e9.GeneralTransactionMetadata,GenesisKeyDelegation:()=>N.GenesisKeyDelegation,GovernanceActionId:()=>g.GovernanceActionId,GovernanceActionKind:()=>eY.GovernanceActionKind,HardForkInitiationAction:()=>eK.HardForkInitiationAction,Hash:()=>P.Hash,InfoAction:()=>eV.InfoAction,LossOfPrecisionException:()=>O.LossOfPrecisionException,MetadatumList:()=>e2.MetadatumList,MetadatumMap:()=>e3.MetadatumMap,MoveInstantaneousReward:()=>J.MoveInstantaneousReward,MoveInstantaneousRewardToOtherPot:()=>Z.MoveInstantaneousRewardToOtherPot,MoveInstantaneousRewardToStakeCreds:()=>X.MoveInstantaneousRewardToStakeCreds,MultiHostName:()=>L.MultiHostName,NativeScript:()=>a.NativeScript,NewConstitution:()=>eW.NewConstitution,NoConfidence:()=>ez.NoConfidence,ParameterChangeAction:()=>eU.ParameterChangeAction,PlutusData:()=>k.PlutusData,PlutusDataKind:()=>j.PlutusDataKind,PlutusList:()=>x.PlutusList,PlutusMap:()=>T.PlutusMap,PlutusV1Script:()=>f.PlutusV1Script,PlutusV2Script:()=>h.PlutusV2Script,PlutusV3Script:()=>m.PlutusV3Script,PoolMetadata:()=>U.PoolMetadata,PoolParams:()=>$.PoolParams,PoolRegistration:()=>H.PoolRegistration,PoolRetirement:()=>K.PoolRetirement,PoolVotingThresholds:()=>eb.PoolVotingThresholds,ProposalProcedure:()=>eq.ProposalProcedure,ProposedProtocolParameterUpdates:()=>ev.ProposedProtocolParameterUpdates,ProtocolParamUpdate:()=>e_.ProtocolParamUpdate,ProtocolVersion:()=>_.ProtocolVersion,REQUIRED_FIELDS_COUNT:()=>eC.REQUIRED_FIELDS_COUNT,Redeemer:()=>eJ.Redeemer,RedeemerTag:()=>eQ.RedeemerTag,Redeemers:()=>eX.Redeemers,RegisterDelegateRepresentative:()=>eu.RegisterDelegateRepresentative,Registration:()=>er.Registration,Relay:()=>Y.Relay,RelayKind:()=>Y.RelayKind,ResignCommitteeCold:()=>el.ResignCommitteeCold,SHELLEY_ERA_FIELDS_COUNT:()=>e8.SHELLEY_ERA_FIELDS_COUNT,Script:()=>i.Script,ScriptAll:()=>o.ScriptAll,ScriptAny:()=>n.ScriptAny,ScriptNOfK:()=>d.ScriptNOfK,ScriptPubkey:()=>c.ScriptPubkey,SingleHostAddr:()=>Q.SingleHostAddr,SingleHostName:()=>q.SingleHostName,StakeDelegation:()=>V.StakeDelegation,StakeDeregistration:()=>W.StakeDeregistration,StakeRegistration:()=>z.StakeRegistration,StakeRegistrationDelegation:()=>eo.StakeRegistrationDelegation,StakeVoteDelegation:()=>ea.StakeVoteDelegation,StakeVoteRegistrationDelegation:()=>ed.StakeVoteRegistrationDelegation,TimelockExpiry:()=>l.TimelockExpiry,TimelockStart:()=>u.TimelockStart,Transaction:()=>s.Transaction,TransactionBody:()=>eP.TransactionBody,TransactionInput:()=>eS.TransactionInput,TransactionMetadatum:()=>e5.TransactionMetadatum,TransactionMetadatumKind:()=>e4.TransactionMetadatumKind,TransactionOutput:()=>eC.TransactionOutput,TransactionUnspentOutput:()=>e6.TransactionUnspentOutput,TransactionWitnessSet:()=>e0.TransactionWitnessSet,TreasuryWithdrawalsAction:()=>e$.TreasuryWithdrawalsAction,TxBodyCBOR:()=>s.TxBodyCBOR,TxCBOR:()=>s.TxCBOR,UnitInterval:()=>p.UnitInterval,UnregisterDelegateRepresentative:()=>ef.UnregisterDelegateRepresentative,Unregistration:()=>es.Unregistration,Update:()=>ew.Update,UpdateCommittee:()=>eL.UpdateCommittee,UpdateDelegateRepresentative:()=>eh.UpdateDelegateRepresentative,Value:()=>ek.Value,VkeyWitness:()=>e1.VkeyWitness,VoteDelegation:()=>ei.VoteDelegation,VoteRegistrationDelegation:()=>en.VoteRegistrationDelegation,Voter:()=>ex.Voter,VoterKind:()=>ej.VoterKind,VotingProcedure:()=>eT.VotingProcedure,VotingProcedures:()=>eE.VotingProcedures,deserializeTx:()=>s.deserializeTx,isDatumHash:()=>w.isDatumHash});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAll.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptAny.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptNOfK.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/ScriptPubkey.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockExpiry.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/TimelockStart.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV1Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV2Script.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/PlutusScript/PlutusV3Script.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/UnitInterval.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ExUnits.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/ProtocolVersion.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Anchor.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/GovernanceActionId.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var P=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Hash.js");var S=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Credential.js");var C=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/ConstrPlutusData.js");var k=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusDataKind.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusList.js");var T=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusMap.js");var E=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborAdditionalInfo.js");var A=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborInitialByte.js");var I=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborMajorType.js");var B=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var F=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var M;(function(e){e[e["False"]=20]="False";e[e["True"]=21]="True";e[e["Null"]=22]="Null";e[e["Undefined"]=23]="Undefined"})(M||(M={}));var R=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var D=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var O=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/errors.js");var G=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Certificate.js");var N=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/GenesisKeyDelegation.js");var H=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRegistration.js");var K=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolRetirement.js");var V=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDelegation.js");var W=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeDeregistration.js");var z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistration.js");var U=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolMetadata.js");var $=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/PoolParams.js");var L=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/MultiHostName.js");var q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostName.js");var Y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/Relay.js");var Q=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/PoolParams/Relay/SingleHostAddr.js");var J=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousReward.js");var X=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToStakeCreds.js");var Z=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/MoveInstantaneousReward/MoveInstantaneousRewardToOtherPot.js");var ee=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRepKind.js");var et=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/DRep/DRep.js");var er=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Registration.js");var es=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/Unregistration.js");var ei=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteDelegation.js");var ea=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteDelegation.js");var eo=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeRegistrationDelegation.js");var en=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/VoteRegistrationDelegation.js");var ed=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/StakeVoteRegistrationDelegation.js");var ec=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/AuthCommitteeHot.js");var el=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/ResignCommitteeCold.js");var eu=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/RegisterDelegateRepresentative.js");var ef=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UnregisterDelegateRepresentative.js");var eh=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Certificates/UpdateDelegateRepresentative.js");var em=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var ep=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var ev=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProposedProtocolParameterUpdates.js");var e_=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ProtocolParamUpdate.js");var ew=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Update.js");var ey=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/ExUnitPrices.js");var eg=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/DrepVotingThresholds.js");var eb=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/PoolVotingThresholds.js");var eP=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var eS=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionInput.js");var eC=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var ek=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var ej=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VoterKind.js");var ex=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/Voter.js");var eT=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedure.js");var eE=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/VotingProcedures/VotingProcedures.js");var eA=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var eI=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var eB=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var eF,eM,eR;const eD=2;const eO=2;const eG=0;const eN=1;class Committee{toCbor(){const e=new D.CborWriter;if(__classPrivateFieldGet(this,eR,"f"))return __classPrivateFieldGet(this,eR,"f");if(0===__classPrivateFieldGet(this,eM,"f").length)throw new eA.InvalidStateError("There must be at least one Committee member");e.writeStartArray(eD);e.writeStartMap(__classPrivateFieldGet(this,eM,"f").length);for(const t of __classPrivateFieldGet(this,eM,"f")){e.writeStartArray(eO);e.writeInt(t[eG].type);e.writeByteString((0,eB.hexToBytes)(t[eG].hash));e.writeInt(t[eN])}e.writeEncodedValue((0,eB.hexToBytes)(__classPrivateFieldGet(this,eF,"f").toCbor()));return e.encodeAsHex()}static fromCbor(e){const t=new B.CborReader(e);const r=t.readStartArray();if(r!==eD)throw new eA.InvalidArgumentError("cbor",`Expected an array of ${eD} elements, but got an array of ${r} elements`);t.readStartMap();const s=[];while(t.peekState()!==F.CborReaderState.EndMap){if(t.readStartArray()!==eO)throw new eA.InvalidArgumentError("cbor",`Expected an array of ${eO} elements, but got an array of ${r} elements`);const i=Number(t.readUInt());const a=eI.HexBlob.fromBytes(t.readByteString());t.readEndArray();const o=Number(t.readUInt());s.push([{hash:a,type:i},o])}t.readEndMap();const n=p.UnitInterval.fromCbor(eI.HexBlob.fromBytes(t.readEncodedValue()));const d=new Committee(n);for(const c of s)d.addMember(c[eG],c[eN]);__classPrivateFieldSet(d,eR,e,"f");return d}toCore(){if(0===__classPrivateFieldGet(this,eM,"f").length)throw new eA.InvalidStateError("There must be at least one Committee member");const e=__classPrivateFieldGet(this,eM,"f").map(e=>({coldCredential:e[eG],epoch:e[eN]}));return{members:e,quorumThreshold:__classPrivateFieldGet(this,eF,"f").toCore()}}static fromCore(e){const t=new Committee(p.UnitInterval.fromCore(e.quorumThreshold));for(const r of e.members)t.addMember(r.coldCredential,r.epoch);return t}membersKeys(){return __classPrivateFieldGet(this,eM,"f").map(e=>e[0])}quorumThreshold(){return __classPrivateFieldGet(this,eF,"f")}addMember(e,t){const r=__classPrivateFieldGet(this,eM,"f").find(t=>t[eG].type===e.type&&t[eG].hash===e.hash);if(r)throw new eA.InvalidArgumentError("committeeColdCredential","The given credential is already present");__classPrivateFieldGet(this,eM,"f").push([e,t])}getMemberEpoch(e){const t=__classPrivateFieldGet(this,eM,"f").find(t=>t[eG].type===e.type&&t[eG].hash===e.hash);if(t)return t[eN];return}constructor(e){eF.set(this,void 0);eM.set(this,[]);eR.set(this,void 0);__classPrivateFieldSet(this,eF,e,"f")}}eF=new WeakMap,eM=new WeakMap,eR=new WeakMap;var eH=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/Constitution.js");var eK=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/HardForkInitiationAction.js");var eV=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/InfoAction.js");var eW=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NewConstitution.js");var ez=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/NoConfidence.js");var eU=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ParameterChangeAction.js");var e$=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/TreasuryWithdrawalsAction.js");var eL=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/UpdateCommittee.js");var eq=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/ProposalProcedure.js");var eY=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/ProposalProcedure/GovernanceActionKind.js");var eQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/RedeemerTag.js");var eJ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var eX=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemers.js");var eZ=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var e0=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var e1=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var e2=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumList.js");var e3=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/MetadatumMap.js");var e5=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatum.js");var e4=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/TransactionMetadatumKind.js");var e9=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/TransactionMetadata/GeneralTransactionMetadata.js");var e8=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var e6=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js")},"../../node_modules/@cardano-sdk/core/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{InvalidProtocolParametersError:()=>InvalidProtocolParametersError,NotImplementedError:()=>NotImplementedError,ProviderError:()=>ProviderError,ProviderFailure:()=>a,SerializationError:()=>SerializationError,SerializationFailure:()=>d});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["Conflict"]="CONFLICT";e["NotFound"]="NOT_FOUND";e["Unknown"]="UNKNOWN";e["Forbidden"]="FORBIDDEN";e["InvalidResponse"]="INVALID_RESPONSE";e["NotImplemented"]="NOT_IMPLEMENTED";e["Unhealthy"]="UNHEALTHY";e["ConnectionFailure"]="CONNECTION_FAILURE";e["BadRequest"]="BAD_REQUEST";e["ServerUnavailable"]="SERVER_UNAVAILABLE"})(a||(a={}));const o={[a.BadRequest]:400,[a.Forbidden]:403,[a.NotFound]:404,[a.Conflict]:409,[a.Unhealthy]:500,[a.Unknown]:500,[a.InvalidResponse]:500,[a.NotImplemented]:500,[a.ConnectionFailure]:500,[a.ServerUnavailable]:500};const n=new Map(Object.entries(o).map(([e,t])=>[t,e]));const isProviderFailure=e=>Object.values(a).includes(e);const reasonToProviderFailure=e=>isProviderFailure(e)?e:a.Unknown;class ProviderError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,r),t);this.reason=e;this.detail=r}}class HandleOwnerChangeError extends i.CustomError{constructor(e,t,r){super(`Expected: ${t} for handle $${e}. Actual: ${r}`);this.handle=e;this.expectedAddress=t;this.actualAddress=r}}var d;(function(e){e["InvalidType"]="INVALID_TYPE";e["Overflow"]="OVERFLOW";e["InvalidAddress"]="INVALID_ADDRESS";e["MaxLengthLimit"]="MAX_LENGTH_LIMIT";e["InvalidScript"]="INVALID_SCRIPT";e["InvalidNativeScriptKind"]="INVALID_NATIVE_SCRIPT_KIND";e["InvalidScriptType"]="INVALID_SCRIPT_TYPE";e["InvalidDatum"]="INVALID_DATUM"})(d||(d={}));class SerializationError extends s.ComposableError{constructor(e,t,r){super((0,s.formatErrorMessage)(e,t),r);this.reason=e;this.detail=t}}class InvalidProtocolParametersError extends i.CustomError{constructor(e){super(e)}}class NotImplementedError extends i.CustomError{constructor(e){super(`Not implemented: ${e}`)}}class TimeoutError extends i.CustomError{constructor(e){super(`Timeout: ${e}`)}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js":(e,t,r)=>{"use strict";r.d(t,{coalesceValueQuantities:()=>coalesceValueQuantities});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/coalesceTokenMaps.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");const coalesceValueQuantities=e=>({assets:s.coalesceTokenMaps(e.map(({assets:e})=>e)),coins:i.BigIntMath.sum(e.map(({coins:e})=>e))})},"../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js":(e,t,r)=>{"use strict";r.d(t,{inConwayEra:()=>s});let s=false;const setInConwayEra=e=>s=e},"../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{asMetadatumArray:()=>asMetadatumArray,asMetadatumMap:()=>asMetadatumMap,jsonToMetadatum:()=>jsonToMetadatum,metadatumToJson:()=>metadatumToJson});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asMetadatumMap=e=>{if(e instanceof Map){return e}return null};const asMetadatumArray=e=>{if(Array.isArray(e)){return e}return null};const jsonToMetadatum=e=>{if(null===e)throw new s.InvalidArgumentError("json","JSON value can not be null");switch(typeof e){case"boolean":case"undefined":throw new s.InvalidArgumentError("json",`JSON value can not be ${typeof e}`);case"number":case"bigint":return BigInt(e);case"string":return String(e);default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(jsonToMetadatum(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e.buffer)}const i=new Map;for(const a in e){const o=e[a];i.set(jsonToMetadatum(a),jsonToMetadatum(o))}return i}}};const metadatumToJson=e=>{if(null===e)throw new s.InvalidArgumentError("data","Metadatum value can not be null");switch(typeof e){case"boolean":case"undefined":case"number":throw new s.InvalidArgumentError("metadatum",`Metadatum value can not be ${typeof e}`);case"bigint":return e;case"string":return e;default:{if(Array.isArray(e)){const t=[];for(const r of e)t.push(metadatumToJson(r));return t}if(ArrayBuffer.isView(e)){return new Uint8Array(e)}const i={};for(const[a,o]of e.entries())i[metadatumToJson(a)]=metadatumToJson(o);return i}}}},"../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js":(e,t,r)=>{"use strict";r.d(t,{bytesToHex:()=>bytesToHex,hexToBytes:()=>hexToBytes});var s=r("../../node_modules/buffer/index.js")["Buffer"];const bytesToHex=e=>s.from(e).toString("hex");const hexToBytes=e=>s.from(e,"hex");const utf8ToBytes=e=>s.from(e,"utf8");const utf8ToHex=e=>s.from(e,"utf8").toString("hex")},"../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js":(e,t,r)=>{"use strict";r.d(t,{createSlotEpochCalc:()=>c,createSlotEpochInfoCalc:()=>createSlotEpochInfoCalc,createSlotTimeCalc:()=>createSlotTimeCalc});var s=r("../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var a=r("../../node_modules/lodash/groupBy.js");var o=r("../../node_modules/lodash/last.js");var n=r("../../node_modules/lodash/memoize.js");var d=r("../../node_modules/lodash/orderBy.js");class EraSummaryError extends s.CustomError{}const createSlotEpochCalcImpl=e=>{const t=Object.values(a(e,"start.slot")).map(o);const r=d(t,({start:e})=>e.slot);return e=>{const t=d(r.filter(({start:t})=>t.slot<=e),({start:e})=>e.slot);if(0===t.length){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}let s=0;let i;for(let a=0;a<t.length;a++){i=t[a];const o=t[a+1];s+=Math.floor((((null==o?void 0:o.start.slot)||e)-i.start.slot)/i.parameters.epochLength)}return{epochEraSummary:i,epochNo:s}}};const c=n(e=>{const t=createSlotEpochCalcImpl(e);return e=>(0,i.EpochNo)(t(e).epochNo)});const createSlotTimeCalc=e=>{const t=Object.values(a(e,"start.slot")).map(o);const r=d(t,({start:e})=>e.slot,"desc");return e=>{const t=r.find(({start:t})=>t.slot<=e);if(!t){throw new EraSummaryError(`No EraSummary for slot ${e} found`)}return new Date(t.start.time.getTime()+(e-t.start.slot)*t.parameters.slotLength)}};const createSlotEpochInfoCalc=e=>{const t=createSlotTimeCalc(e);const r=createSlotEpochCalcImpl(e);return e=>{const{epochNo:s,epochEraSummary:a}=r(e);const o=a.start.slot+Math.floor((e-a.start.slot)/a.parameters.epochLength)*a.parameters.epochLength;const n=o+a.parameters.epochLength-1;return{epochNo:(0,i.EpochNo)(s),firstSlot:{date:t((0,i.Slot)(o)),slot:(0,i.Slot)(o)},lastSlot:{date:t((0,i.Slot)(n)),slot:(0,i.Slot)(n)}}}};const epochSlotsCalcImplementation=(e,t)=>{let r=0;let s=t[0].start.slot;let a=0;const o=t.length-1;const checkNextEraSummary=()=>a<o&&s>=t[a+1].start.slot;const findNextEraSummary=()=>{while(checkNextEraSummary())a++};findNextEraSummary();while(r!==e){s+=t[a].parameters.epochLength;r++;if(checkNextEraSummary())findNextEraSummary()}const n=t[a];return{eraSummary:n,firstSlot:(0,i.Slot)(s),lastSlot:(0,i.Slot)(s+n.parameters.epochLength-1)}};const l=n(epochSlotsCalcImplementation);const u=n(e=>n(async t=>epochSlotsCalcImplementation(t,await e.eraSummaries())))},"../../node_modules/@cardano-sdk/core/dist/esm/util/time.js":(e,t,r)=>{"use strict";r.d(t,{Milliseconds:()=>Milliseconds,Seconds:()=>Seconds});const Milliseconds=e=>e;const Seconds=e=>e;const Minutes=e=>e;const Hours=e=>e;const Days=e=>e;Hours.toDays=e=>e/24;Days.toHours=e=>24*e;Minutes.toHours=e=>e/60;Hours.toMinutes=e=>60*e;Seconds.toMinutes=e=>e/60;Minutes.toSeconds=e=>60*e;Seconds.toMilliseconds=e=>1e3*e;Milliseconds.toSeconds=e=>e/1e3;class TimeSpan{static fromMilliseconds(e){return new TimeSpan(e)}static fromSeconds(e){return new TimeSpan(Seconds.toMilliseconds(e))}static fromMinutes(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(e)))}static fromHours(e){return new TimeSpan(Seconds.toMilliseconds(Minutes.toSeconds(Hours.toMinutes(e))))}getTotalDays(){return Hours.toDays(this.getTotalHours())}getTotalHours(){return Minutes.toHours(this.getTotalMinutes())}getTotalMinutes(){return Seconds.toMinutes(this.getTotalSeconds())}getTotalSeconds(){return Milliseconds.toSeconds(this.elapsed)}getTotalMilliseconds(){return this.elapsed}getDays(){return Days(Math.floor(this.getTotalDays()))}getHours(){return Hours(Math.floor(this.getTotalHours()-24*this.getDays()))}getMinutes(){return Minutes(Math.floor(this.getTotalMinutes()-60*Math.floor(this.getTotalHours())))}getSeconds(){return Seconds(Math.floor(this.getTotalSeconds()-60*Math.floor(this.getTotalMinutes())))}getMilliseconds(){return Milliseconds(this.elapsed-1e3*Math.floor(this.getTotalSeconds()))}toString(){let e=this.getTotalSeconds()<0?"-P":"P";let t="";if(0!==this.getHours())t+=`${Math.abs(this.getHours()).toString()}H`;if(0!==this.getMinutes())t+=`${Math.abs(this.getMinutes()).toString()}M`;if(0!==this.getSeconds())t+=`${Math.abs(this.getSeconds()).toString()}S`;if(0!==this.getDays()||""===t)e+=`${Math.abs(this.getDays()).toString()}D`;if(""!==t)e+=`T${t}`;return e}constructor(e){this.elapsed=Milliseconds(0);this.elapsed=e}}},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/esm/index.js":(e,t,r)=>{"use strict";r.d(t,{base58:()=>l,bech32:()=>_});/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let i=r.length;if(i*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;i>0&&r[i-1]===t;i--)if(!((i-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,i)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const i=[];const a=Array.from(e);a.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let o=0;let n=true;for(let d=s;d<a.length;d++){const c=a[d];const l=t*o+c;if(!Number.isSafeInteger(l)||t*o/t!==o||l-c!==t*o){throw new Error("convertRadix: carry overflow")}o=l%r;a[d]=Math.floor(l/r);if(!Number.isSafeInteger(a[d])||a[d]*r+o!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(a[d])n=false;else s=d}i.push(o);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)i.push(0);return i.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let i=0;let a=0;const o=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);i=i<<t|d;if(a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);a+=t;for(;a>=r;a-=r)n.push((i>>a-r&o)>>>0);i&=2**a-1}i=i<<r-a&o;if(!s&&a>=t)throw new Error("Excess padding");if(!s&&i)throw new Error(`Non-zero padding: ${i}`);if(s&&a>0)n.push(i>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const i=new Uint8Array(r.length+e);i.set(r);i.set(s,r.length);return i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const i=t(s).slice(0,e);const a=r.slice(-e);for(let o=0;o<e;o++)if(i[o]!==a[o])throw new Error("Invalid checksum");return s}}}const s={alphabet,chain,checksum,radix,radix2,join,padding};const i=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));const a=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));const o=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));const n=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const d=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));const c=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));const l=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const u=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");const f=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const h=[0,2,3,5,6,7,9,10,11];const m={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=l.encode(s).padStart(h[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11);const i=h.indexOf(s.length);const a=l.decode(s);for(let o=0;o<a.length-i;o++)if(0!==a[o])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),l);const p=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const v=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<v.length;s++)if((t>>s&1)===1)r^=v[s];return r}function bechChecksum(e,t,r=1){const s=e.length;let i=1;for(let a=0;a<s;a++){const o=e.charCodeAt(a);if(o<33||o>126)throw new Error(`Invalid prefix (${e})`);i=bech32Polymod(i)^o>>5}i=bech32Polymod(i);for(let n=0;n<s;n++)i=bech32Polymod(i)^31&e.charCodeAt(n);for(let d of t)i=bech32Polymod(i)^d;for(let c=0;c<6;c++)i=bech32Polymod(i);i^=r;return p.encode(convertRadix2([i%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const s=r.decode;const i=r.encode;const a=unsafeWrapper(s);function encode(e,r,s=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const i=e.length+7+r.length;if(false!==s&&i>s)throw new TypeError(`Length ${i} exceeds limit ${s}`);e=e.toLowerCase();return`${e}1${p.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const s=e.toLowerCase();if(e!==s&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=s;const i=e.lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const a=e.slice(0,i);const o=e.slice(i+1);if(o.length<6)throw new Error("Data must be at least 6 characters long");const n=p.decode(o).slice(0,-6);const d=bechChecksum(a,n,t);if(!o.endsWith(d))throw new Error(`Invalid checksum in ${e}: expected "${d}"`);return{prefix:a,words:n}}const o=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:s(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:o,fromWords:s,fromWordsUnsafe:a,toWords:i}}const _=genBech32("bech32");const w=genBech32("bech32m");const y={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};const g=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const b={utf8:y,hex:g,base16:i,base32:a,base64:d,base64url:c,base58:l,base58xmr:m};const P=null;const bytesToString=(e,t)=>{if("string"!=typeof e||!b.hasOwnProperty(e))throw new TypeError(P);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return b[e].encode(t)};const S=null;const stringToBytes=(e,t)=>{if(!b.hasOwnProperty(e))throw new TypeError(P);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return b[e].decode(t)};const C=null},"../../node_modules/@cardano-sdk/core/node_modules/@scure/base/lib/index.js":(e,t)=>{"use strict";/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */ Object.defineProperty(t,"__esModule",{value:true});t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0;function assertNumber(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}t.assertNumber=assertNumber;function chain(...e){const wrap=(e,t)=>r=>e(t(r));const t=Array.from(e).reverse().reduce((e,t)=>e?wrap(e,t.encode):t.encode,void 0);const r=e.reduce((e,t)=>e?wrap(e,t.decode):t.decode,void 0);return{encode:t,decode:r}}function alphabet(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{assertNumber(t);if(t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const r=e.indexOf(t);if(-1===r)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function join(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let r of t)if("string"!=typeof r)throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function padding(e,t="="){assertNumber(e);if("string"!=typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.encode: non-string input=${s}`);while(r.length*e%8)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw new Error("padding.encode input should be array of strings");for(let s of r)if("string"!=typeof s)throw new Error(`padding.decode: non-string input=${s}`);let i=r.length;if(i*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;i>0&&r[i-1]===t;i--)if(!((i-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,i)}}}function normalize(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function convertRadix(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const i=[];const a=Array.from(e);a.forEach(e=>{assertNumber(e);if(e<0||e>=t)throw new Error(`Wrong integer: ${e}`)});while(true){let o=0;let n=true;for(let d=s;d<a.length;d++){const c=a[d];const l=t*o+c;if(!Number.isSafeInteger(l)||t*o/t!==o||l-c!==t*o){throw new Error("convertRadix: carry overflow")}o=l%r;a[d]=Math.floor(l/r);if(!Number.isSafeInteger(a[d])||a[d]*r+o!==l)throw new Error("convertRadix: carry overflow");if(!!n)if(a[d])n=false;else s=d}i.push(o);if(n)break}for(let u=0;u<e.length-1&&0===e[u];u++)i.push(0);return i.reverse()}const gcd=(e,t)=>t?gcd(t,e%t):e;const radix2carry=(e,t)=>e+(t-gcd(e,t));function convertRadix2(e,t,r,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(radix2carry(t,r)>32){throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${radix2carry(t,r)}`)}let i=0;let a=0;const o=2**r-1;const n=[];for(const d of e){assertNumber(d);if(d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);i=i<<t|d;if(a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);a+=t;for(;a>=r;a-=r)n.push((i>>a-r&o)>>>0);i&=2**a-1}i=i<<r-a&o;if(!s&&a>=t)throw new Error("Excess padding");if(!s&&i)throw new Error(`Non-zero padding: ${i}`);if(s&&a>0)n.push(i>>>0);return n}function radix(e){assertNumber(e);return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(t,e,256))}}}function radix2(e,t=false){assertNumber(e);if(e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,e)>32||radix2carry(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(r,e,8,t))}}}function unsafeWrapper(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(r){}}}function checksum(e,t){assertNumber(e);if("function"!=typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const s=t(r).slice(0,e);const i=new Uint8Array(r.length+e);i.set(r);i.set(s,r.length);return i},decode(r){if(!(r instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const s=r.slice(0,-e);const i=t(s).slice(0,e);const a=r.slice(-e);for(let o=0;o<e;o++)if(i[o]!==a[o])throw new Error("Invalid checksum");return s}}}t.utils={alphabet,chain,checksum,radix,radix2,join,padding};t.base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join(""));t.base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));t.base32hex=chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));t.base32crockford=chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));t.base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join(""));t.base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join(""));const genBase58=e=>chain(radix(58),alphabet(e),join(""));t.base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");t.base58flickr=genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");t.base58xrp=genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const r=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let s="";for(let i=0;i<e.length;i+=8){const a=e.subarray(i,i+8);s+=t.base58.encode(a).padStart(r[a.length],"1")}return s},decode(e){let s=[];for(let i=0;i<e.length;i+=11){const a=e.slice(i,i+11);const o=r.indexOf(a.length);const n=t.base58.decode(a);for(let d=0;d<n.length-o;d++)if(0!==n[d])throw new Error("base58xmr: wrong padding");s=s.concat(Array.from(n.slice(n.length-o)))}return Uint8Array.from(s)}};const base58check=e=>chain(checksum(4,t=>e(e(t))),t.base58);t.base58check=base58check;const s=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join(""));const i=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(e){const t=e>>25;let r=(33554431&e)<<5;for(let s=0;s<i.length;s++)if((t>>s&1)===1)r^=i[s];return r}function bechChecksum(e,t,r=1){const i=e.length;let a=1;for(let o=0;o<i;o++){const n=e.charCodeAt(o);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);a=bech32Polymod(a)^n>>5}a=bech32Polymod(a);for(let d=0;d<i;d++)a=bech32Polymod(a)^31&e.charCodeAt(d);for(let c of t)a=bech32Polymod(a)^c;for(let l=0;l<6;l++)a=bech32Polymod(a);a^=r;return s.encode(convertRadix2([a%2**30],30,5,false))}function genBech32(e){const t="bech32"===e?1:734539939;const r=radix2(5);const i=r.decode;const a=r.encode;const o=unsafeWrapper(i);function encode(e,r,i=90){if("string"!=typeof e)throw new Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw new Error(`bech32.encode words should be array of numbers, not ${typeof r}`);const a=e.length+7+r.length;if(false!==i&&a>i)throw new TypeError(`Length ${a} exceeds limit ${i}`);e=e.toLowerCase();return`${e}1${s.encode(r)}${bechChecksum(e,r,t)}`}function decode(e,r=90){if("string"!=typeof e)throw new Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||false!==r&&e.length>r)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);const i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");e=i;const a=e.lastIndexOf("1");if(0===a||-1===a)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,a);const n=e.slice(a+1);if(n.length<6)throw new Error("Data must be at least 6 characters long");const d=s.decode(n).slice(0,-6);const c=bechChecksum(o,d,t);if(!n.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:o,words:d}}const n=unsafeWrapper(decode);function decodeToBytes(e){const{prefix:t,words:r}=decode(e,false);return{prefix:t,words:r,bytes:i(r)}}return{encode,decode,decodeToBytes,decodeUnsafe:n,fromWords:i,fromWordsUnsafe:o,toWords:a}}t.bech32=genBech32("bech32");t.bech32m=genBech32("bech32m");t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)};t.hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize(e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));const a={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr};const o=`Invalid encoding type. Available types: ${Object.keys(a).join(", ")}`;const bytesToString=(e,t)=>{if("string"!=typeof e||!a.hasOwnProperty(e))throw new TypeError(o);if(!(t instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return a[e].encode(t)};t.bytesToString=bytesToString;t.str=t.bytesToString;const stringToBytes=(e,t)=>{if(!a.hasOwnProperty(e))throw new TypeError(o);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return a[e].decode(t)};t.stringToBytes=stringToBytes;t.bytes=t.stringToBytes},"../../node_modules/@cardano-sdk/core/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>i,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.derivePublic=t.derivePrivate=void 0;const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js");const n=i(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,i)=>{const a=s.allocUnsafe(69);a.writeUInt32LE(e,65);t.copy(a,1);r.copy(a,33);a[0]=0;const o=n.default.crypto_auth_hmacsha512(a,i);a[0]=1;const d=n.default.crypto_auth_hmacsha512(a,i);return{ccMac:d,zMac:o}};const deriveSoft=(e,t,r)=>{const i=s.allocUnsafe(37);i.writeUInt32LE(e,33);const a=s.from(n.default.crypto_scalarmult_ed25519_base_noclamp(t));a.copy(i,1);i[0]=2;const o=n.default.crypto_auth_hmacsha512(i,r);i[0]=3;const d=n.default.crypto_auth_hmacsha512(i,r);return{ccMac:d,zMac:o}};const pointOfTrunc28Mul8=e=>{const t=(0,o.add28Mul8)(new Uint8Array(32).fill(0),e);return n.default.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const i=e.subarray(32,64);const a=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,i,a):deriveSoft(t,r,a);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,o.add28Mul8)(r,l);const h=(0,o.add256bits)(i,u);return s.concat([f,h,c])};t.derivePrivate=derivePrivate;const derivePublic=(e,t)=>{const r=e.subarray(0,32);const i=e.subarray(32,64);const o=s.allocUnsafe(37);o.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new a.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(o,1);o[0]=2;const d=n.default.crypto_auth_hmacsha512(o,i);o[0]=3;const c=n.default.crypto_auth_hmacsha512(o,i);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return s.concat([n.default.crypto_core_ed25519_add(f,r),l])};t.derivePublic=derivePublic},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PrivateKey=t.BIP32_ED25519_PRIVATE_KEY_LENGTH=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const h=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js");const m=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/browser.js");const _=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const w=0;const y=32;const g=4096;const b=96;const P="sha512";const S=64;const C=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(w,y);t.BIP32_ED25519_PRIVATE_KEY_LENGTH=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,v.pbkdf2Sync)(t,e,g,b,P);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==t.BIP32_ED25519_PRIVATE_KEY_LENGTH)throw new p.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(s.from(e,"hex"))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return m.Ed25519PrivateKey.fromExtendedBytes(d(this,l,"f").slice(0,m.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(d(this,l,"f").slice(0,m.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=_.default.crypto_scalarmult_ed25519_base_noclamp(e);return h.Bip32PublicKey.fromBytes(s.concat([t,d(this,l,"f").slice(S,S+C)]))}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PrivateKeyHex)(s.from(d(this,l,"f")).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PrivateKey=Bip32PrivateKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l;Object.defineProperty(t,"__esModule",{value:true});t.Bip32PublicKey=t.BIP32_ED25519_PUBLIC_KEY_LENGTH=void 0;const u=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32KeyDerivation.js"));const f=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const h=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const m=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const p=c(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));t.BIP32_ED25519_PUBLIC_KEY_LENGTH=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==t.BIP32_ED25519_PUBLIC_KEY_LENGTH)throw new m.InvalidArgumentError("key",`Key should be ${t.BIP32_ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(s.from(e,"hex"))}toRawKey(){return h.Ed25519PublicKey.fromBytes(d(this,l,"f").slice(0,f.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=s.from(d(this,l,"f"));for(const r of e)t=u.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return d(this,l,"f")}hex(){return(0,f.Bip32PublicKeyHex)(s.from(d(this,l,"f")).toString("hex"))}hash(){const e=p.default.crypto_generichash(f.BIP32_PUBLIC_KEY_HASH_LENGTH,d(this,l,"f"));return(0,f.Bip32PublicKeyHashHex)(s.from(e).toString("hex"))}constructor(e){l.set(this,void 0);n(this,l,e,"f")}}t.Bip32PublicKey=Bip32PublicKey;l=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.le32=t.add256bits=t.add28Mul8=void 0;const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let i=0;i<28;i++){const a=e[i]+(t[i]<<3)+r;s[i]=255&a;r=a>>8}for(let o=28;o<32;o++){const n=e[o]+r;s[o]=255&n;r=n>>8}return s};t.add28Mul8=add28Mul8;const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let i=0;i<32;i++){const a=e[i]+t[i]+r;s[i]=a;r=a>>8}return s};t.add256bits=add256bits;const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255]);t.le32=le32},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PrivateKey.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/Bip32PublicKey.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/arithmetic.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519KeyHash=t.ED25519_PUBLIC_KEY_HASH_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_PUBLIC_KEY_HASH_LENGTH=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==t.ED25519_PUBLIC_KEY_HASH_LENGTH)throw new d.InvalidArgumentError("hash",`Hash should be ${t.ED25519_PUBLIC_KEY_HASH_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(s.from(e,"hex"))}bytes(){return a(this,o,"f")}hex(){return(0,n.Ed25519KeyHashHex)(s.from(a(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);i(this,o,e,"f")}}t.Ed25519KeyHash=Ed25519KeyHash;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PrivateKey=t.Ed25519PrivateKeyType=t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js");const u=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const f=o(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const h=0;const m=32;const p=32;const v=32;t.NORMAL_ED25519_PRIVATE_KEY_LENGTH=32;t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH=64;const extendedScalar=e=>e.slice(h,m);const extendedIv=e=>e.slice(p,p+v);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const i=f.default.crypto_scalarmult_ed25519_base_noclamp(r);const a=f.default.crypto_core_ed25519_scalar_reduce(f.default.crypto_hash_sha512(s.concat([extendedIv(e),t])));const o=f.default.crypto_scalarmult_ed25519_base_noclamp(a);let n=f.default.crypto_hash_sha512(s.concat([o,i,t]));n=f.default.crypto_core_ed25519_scalar_reduce(n);return s.concat([o,f.default.crypto_core_ed25519_scalar_add(f.default.crypto_core_ed25519_scalar_mul(n,r),a)])};var _;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(_=t.Ed25519PrivateKeyType||(t.Ed25519PrivateKeyType={}));class Ed25519PrivateKey{toPublic(){return c.Ed25519PublicKey.fromBytes(this.__type===_.Extended?f.default.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(a(this,n,"f"))):f.default.crypto_sign_seed_keypair(a(this,n,"f")).publicKey)}sign(e){return l.Ed25519Signature.fromBytes(this.__type===_.Extended?signExtendedDetached(a(this,n,"f"),s.from(e,"hex")):f.default.crypto_sign_detached(s.from(e,"hex"),s.concat([a(this,n,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==t.NORMAL_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.NORMAL_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,_.Normal)}static fromExtendedBytes(e){if(e.length!==t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH)throw new u.InvalidArgumentError("keyMaterial",`Key should be ${t.EXTENDED_ED25519_PRIVATE_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,_.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(s.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(s.from(e,"hex"))}bytes(){return a(this,n,"f")}hex(){return this.__type===_.Extended?(0,d.Ed25519PrivateExtendedKeyHex)(s.from(a(this,n,"f")).toString("hex")):(0,d.Ed25519PrivateNormalKeyHex)(s.from(a(this,n,"f")).toString("hex"))}constructor(e,t){n.set(this,void 0);i(this,n,e,"f");this.__type=t}}t.Ed25519PrivateKey=Ed25519PrivateKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var n;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519PublicKey=void 0;const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js");const c=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=o(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));class Ed25519PublicKey{verify(e,t){return u.default.crypto_sign_verify_detached(e.bytes(),s.from(t,"hex"),a(this,n,"f"))}static fromBytes(e){if(e.length!==c.ED25519_PUBLIC_KEY_LENGTH)throw new l.InvalidArgumentError("keyMaterial",`Key should be ${c.ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(s.from(e,"hex"))}hash(){const e=u.default.crypto_generichash(d.ED25519_PUBLIC_KEY_HASH_LENGTH,a(this,n,"f"));return d.Ed25519KeyHash.fromBytes(e)}bytes(){return a(this,n,"f")}hex(){return(0,c.Ed25519PublicKeyHex)(s.from(a(this,n,"f")).toString("hex"))}constructor(e){n.set(this,void 0);i(this,n,e,"f")}}t.Ed25519PublicKey=Ed25519PublicKey;n=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.Ed25519Signature=t.ED25519_SIGNATURE_LENGTH=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.ED25519_SIGNATURE_LENGTH=64;class Ed25519Signature{static fromBytes(e){if(e.length!==t.ED25519_SIGNATURE_LENGTH)throw new d.InvalidArgumentError("signature",`signature should be ${t.ED25519_SIGNATURE_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(s.from(e,"hex"))}bytes(){return a(this,o,"f")}hex(){return(0,n.Ed25519SignatureHex)(s.from(a(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);i(this,o,e,"f")}}t.Ed25519Signature=Ed25519Signature;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PrivateKey.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519PublicKey.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519Signature.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/Ed25519KeyHash.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/blake2b-hash.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.blake2b=void 0;const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=s(r("../../node_modules/blake2b-no-wasm/index.js"));t.blake2b={hash(e,t){return(0,a.default)(t).update((0,i.hexStringToBuffer)(e)).digest("hex")},async hashAsync(e,r){return t.blake2b.hash(e,r)}}},"../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Bip32PublicKeyHashHex=t.Ed25519KeyHashHex=t.Ed25519PrivateNormalKeyHex=t.Ed25519PrivateExtendedKeyHex=t.Ed25519PublicKeyHex=t.Bip32PrivateKeyHex=t.Bip32PublicKeyHex=t.Ed25519SignatureHex=t.Hash32ByteBase16=t.Hash28ByteBase16=t.ED25519_PUBLIC_KEY_LENGTH=t.BIP32_PUBLIC_KEY_HASH_LENGTH=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.BIP32_PUBLIC_KEY_HASH_LENGTH=28;t.ED25519_PUBLIC_KEY_LENGTH=32;const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);t.Hash28ByteBase16=Hash28ByteBase16;const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);t.Hash32ByteBase16=Hash32ByteBase16;t.Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);t.Ed25519SignatureHex=Ed25519SignatureHex;const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);t.Bip32PublicKeyHex=Bip32PublicKeyHex;const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);t.Bip32PrivateKeyHex=Bip32PrivateKeyHex;const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,t.ED25519_PUBLIC_KEY_LENGTH*s.HexBlob.CHARS_PER_BYTE);t.Ed25519PublicKeyHex=Ed25519PublicKeyHex;t.Ed25519PublicKeyHex.fromBip32PublicKey=e=>e.slice(0,t.ED25519_PUBLIC_KEY_LENGTH*s.HexBlob.CHARS_PER_BYTE);const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);t.Ed25519PrivateExtendedKeyHex=Ed25519PrivateExtendedKeyHex;const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);t.Ed25519PrivateNormalKeyHex=Ed25519PrivateNormalKeyHex;const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);t.Ed25519KeyHashHex=Ed25519KeyHashHex;const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,t.BIP32_PUBLIC_KEY_HASH_LENGTH*s.HexBlob.CHARS_PER_BYTE);t.Bip32PublicKeyHashHex=Bip32PublicKeyHashHex},"../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ready=void 0;const o=a(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/blake2b-hash.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32Ed25519.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js"),t);const ready=async()=>await o.default.ready;t.ready=ready},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;Object.defineProperty(t,"__esModule",{value:true});t.CmlBip32Ed25519=void 0;const n=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/hexTypes.js");const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=(0,d.usingAutoFree)(r=>{const i=r.manage(a(this,o,"f").Bip32PrivateKey.from_bip39_entropy(e,s.from(t)));return i.as_bytes()});return(0,n.Bip32PrivateKeyHex)(s.from(r).toString("hex"))}getPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=e.length===c?t.manage(a(this,o,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):t.manage(a(this,o,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const i=t.manage(r.to_public()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(i).toString("hex"))})}getPubKeyHash(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(a(this,o,"f").PublicKey.from_bytes(s.from(e,"hex")));const i=t.manage(r.hash()).to_bytes();return(0,n.Ed25519KeyHashHex)(s.from(i).toString("hex"))})}getRawPrivateKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(a(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const i=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PrivateExtendedKeyHex)(s.from(i).toString("hex"))})}getRawPublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(a(this,o,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));const i=t.manage(r.to_raw_key()).as_bytes();return(0,n.Ed25519PublicKeyHex)(s.from(i).toString("hex"))})}getBip32PublicKey(e){return(0,d.usingAutoFree)(t=>{const r=t.manage(a(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));const i=t.manage(r.to_public()).as_bytes();return(0,n.Bip32PublicKeyHex)(s.from(i).toString("hex"))})}derivePrivateKey(e,t){return(0,d.usingAutoFree)(r=>{let i=r.manage(a(this,o,"f").Bip32PrivateKey.from_bytes(s.from(e,"hex")));for(const d of t)i=r.manage(i.derive(d));return(0,n.Bip32PrivateKeyHex)(s.from(i.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return(0,d.usingAutoFree)(r=>{let i=r.manage(a(this,o,"f").Bip32PublicKey.from_bytes(s.from(e,"hex")));for(const d of t)i=r.manage(i.derive(d));return(0,n.Bip32PublicKeyHex)(s.from(i.as_bytes()).toString("hex"))})}async derivePublicKeyAsync(e,t){return this.derivePublicKey(e,t)}sign(e,t){return(0,d.usingAutoFree)(r=>{const i=e.length===c?r.manage(a(this,o,"f").PrivateKey.from_extended_bytes(s.from(e,"hex"))):r.manage(a(this,o,"f").PrivateKey.from_normal_bytes(s.from(e,"hex")));const d=r.manage(i.sign(s.from(t,"hex"))).to_bytes();return(0,n.Ed25519SignatureHex)(s.from(d).toString("hex"))})}verify(e,t,r){return(0,d.usingAutoFree)(i=>{const n=i.manage(a(this,o,"f").PublicKey.from_bytes(s.from(r,"hex")));const d=i.manage(a(this,o,"f").Ed25519Signature.from_bytes(s.from(e,"hex")));return n.verify(s.from(t,"hex"),d)})}constructor(e){o.set(this,void 0);i(this,o,e,"f")}}t.CmlBip32Ed25519=CmlBip32Ed25519;o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SodiumBip32Ed25519=void 0;const i=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Bip32/index.js");const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/Ed25519e/index.js");const o=s(r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js"));const n=128;class SodiumBip32Ed25519{static async create(){await o.default.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return i.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===n?a.Ed25519PrivateKey.fromExtendedHex(e):a.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=a.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return i.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=i.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=i.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=i.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=i.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}async derivePublicKeyAsync(e,t){return this.derivePublicKey(e,t)}sign(e,t){const r=e.length===n?a.Ed25519PrivateKey.fromExtendedHex(e):a.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=a.Ed25519PublicKey.fromHex(r);return s.verify(a.Ed25519Signature.fromHex(e),t)}constructor(){}}t.SodiumBip32Ed25519=SodiumBip32Ed25519},"../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/CmlBip32Ed25519.js"),t);i(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/strategies/SodiumBip32Ed25519.js"),t)},"../../node_modules/@cardano-sdk/crypto/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js":(e,t,r)=>{"use strict";r.d(t,{derivePrivate:()=>derivePrivate,derivePublic:()=>derivePublic});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var a=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const isHardenedDerivation=e=>e>=2147483648;const deriveHardened=(e,t,r,s)=>{const i=o.allocUnsafe(69);i.writeUInt32LE(e,65);t.copy(i,1);r.copy(i,33);i[0]=0;const n=a.crypto_auth_hmacsha512(i,s);i[0]=1;const d=a.crypto_auth_hmacsha512(i,s);return{ccMac:d,zMac:n}};const deriveSoft=(e,t,r)=>{const s=o.allocUnsafe(37);s.writeUInt32LE(e,33);const i=o.from(a.crypto_scalarmult_ed25519_base_noclamp(t));i.copy(s,1);s[0]=2;const n=a.crypto_auth_hmacsha512(s,r);s[0]=3;const d=a.crypto_auth_hmacsha512(s,r);return{ccMac:d,zMac:n}};const pointOfTrunc28Mul8=e=>{const t=(0,i.add28Mul8)(new Uint8Array(32).fill(0),e);return a.crypto_scalarmult_ed25519_base_noclamp(t)};const derivePrivate=(e,t)=>{const r=e.subarray(0,32);const s=e.subarray(32,64);const a=e.subarray(64,96);const{ccMac:n,zMac:d}=isHardenedDerivation(t)?deriveHardened(t,r,s,a):deriveSoft(t,r,a);const c=n.slice(32,64);const l=d.slice(0,32);const u=d.slice(32,64);const f=(0,i.add28Mul8)(r,l);const h=(0,i.add256bits)(s,u);return o.concat([f,h,c])};const derivePublic=(e,t)=>{const r=e.subarray(0,32);const i=e.subarray(32,64);const n=o.allocUnsafe(37);n.writeUInt32LE(t,33);if(isHardenedDerivation(t))throw new s.InvalidArgumentError("index","Public key can not be derived from a hardened index.");r.copy(n,1);n[0]=2;const d=a.crypto_auth_hmacsha512(n,i);n[0]=3;const c=a.crypto_auth_hmacsha512(n,i);const l=c.slice(32,64);const u=d.slice(0,32);const f=pointOfTrunc28Mul8(u);return o.concat([a.crypto_core_ed25519_add(f,r),l])}},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>y,Bip32PrivateKey:()=>Bip32PrivateKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/browser.js");var c=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var u;const f=0;const h=32;const m=4096;const p=96;const v="sha512";const _=64;const w=32;const clampScalar=e=>{e[0]&=248;e[31]&=31;e[31]|=64;return e};const extendedScalar=e=>e.slice(f,h);const y=96;class Bip32PrivateKey{static fromBip39Entropy(e,t){const r=(0,d.pbkdf2Sync)(t,e,m,p,v);return Bip32PrivateKey.fromBytes(clampScalar(r))}static fromBytes(e){if(e.length!==y)throw new n.InvalidArgumentError("key",`Key should be ${y} bytes; however ${e.length} bytes were provided.`);return new Bip32PrivateKey(e)}static fromHex(e){return Bip32PrivateKey.fromBytes(l.from(e,"hex"))}derive(e){let t=l.from(__classPrivateFieldGet(this,u,"f"));for(const r of e)t=s.derivePrivate(t,r);return Bip32PrivateKey.fromBytes(t)}toRawKey(){return o.Ed25519PrivateKey.fromExtendedBytes(__classPrivateFieldGet(this,u,"f").slice(0,o.EXTENDED_ED25519_PRIVATE_KEY_LENGTH))}toPublic(){const e=extendedScalar(__classPrivateFieldGet(this,u,"f").slice(0,o.EXTENDED_ED25519_PRIVATE_KEY_LENGTH));const t=c.crypto_scalarmult_ed25519_base_noclamp(e);return a.Bip32PublicKey.fromBytes(l.concat([t,__classPrivateFieldGet(this,u,"f").slice(_,_+w)]))}bytes(){return __classPrivateFieldGet(this,u,"f")}hex(){return(0,i.Bip32PrivateKeyHex)(l.from(__classPrivateFieldGet(this,u,"f")).toString("hex"))}constructor(e){u.set(this,void 0);__classPrivateFieldSet(this,u,e,"f")}}u=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>l,Bip32PublicKey:()=>Bip32PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32KeyDerivation.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=64;class Bip32PublicKey{static fromBytes(e){if(e.length!==l)throw new o.InvalidArgumentError("key",`Key should be ${l} bytes; however ${e.length} bytes were provided.`);return new Bip32PublicKey(e)}static fromHex(e){return Bip32PublicKey.fromBytes(d.from(e,"hex"))}toRawKey(){return a.Ed25519PublicKey.fromBytes(__classPrivateFieldGet(this,c,"f").slice(0,i.ED25519_PUBLIC_KEY_LENGTH))}derive(e){let t=d.from(__classPrivateFieldGet(this,c,"f"));for(const r of e)t=s.derivePublic(t,r);return Bip32PublicKey.fromBytes(t)}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return(0,i.Bip32PublicKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}hash(){const e=n.crypto_generichash(i.BIP32_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,c,"f"));return(0,i.Bip32PublicKeyHashHex)(d.from(e).toString("hex"))}constructor(e){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f")}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js":(e,t,r)=>{"use strict";r.d(t,{add256bits:()=>add256bits,add28Mul8:()=>add28Mul8,le32:()=>le32});const add28Mul8=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let i=0;i<28;i++){const a=e[i]+(t[i]<<3)+r;s[i]=255&a;r=a>>8}for(let o=28;o<32;o++){const n=e[o]+r;s[o]=255&n;r=n>>8}return s};const add256bits=(e,t)=>{let r=0;const s=new Uint8Array(32);for(let i=0;i<32;i++){const a=e[i]+t[i]+r;s[i]=a;r=a>>8}return s};const le32=e=>new Uint8Array([255&e,e>>8&255,e>>16&255,e>>24&255])},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_PUBLIC_KEY_HASH_LENGTH:()=>n,Ed25519KeyHash:()=>Ed25519KeyHash});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;const n=28;class Ed25519KeyHash{static fromBytes(e){if(e.length!==n)throw new i.InvalidArgumentError("hash",`Hash should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519KeyHash(e)}static fromHex(e){return Ed25519KeyHash.fromBytes(a.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,o,"f")}hex(){return(0,s.Ed25519KeyHashHex)(a.from(__classPrivateFieldGet(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js":(e,t,r)=>{"use strict";r.d(t,{EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>p,Ed25519PrivateKey:()=>Ed25519PrivateKey,Ed25519PrivateKeyType:()=>v,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>m});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var n=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var d=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c;const l=0;const u=32;const f=32;const h=32;const m=32;const p=64;const extendedScalar=e=>e.slice(l,u);const extendedIv=e=>e.slice(f,f+h);const signExtendedDetached=(e,t)=>{const r=extendedScalar(e);const s=n.crypto_scalarmult_ed25519_base_noclamp(r);const i=n.crypto_core_ed25519_scalar_reduce(n.crypto_hash_sha512(d.concat([extendedIv(e),t])));const a=n.crypto_scalarmult_ed25519_base_noclamp(i);let o=n.crypto_hash_sha512(d.concat([a,s,t]));o=n.crypto_core_ed25519_scalar_reduce(o);return d.concat([a,n.crypto_core_ed25519_scalar_add(n.crypto_core_ed25519_scalar_mul(o,r),i)])};var v;(function(e){e["Normal"]="Normal";e["Extended"]="Extended"})(v||(v={}));class Ed25519PrivateKey{toPublic(){return i.Ed25519PublicKey.fromBytes(this.__type===v.Extended?n.crypto_scalarmult_ed25519_base_noclamp(extendedScalar(__classPrivateFieldGet(this,c,"f"))):n.crypto_sign_seed_keypair(__classPrivateFieldGet(this,c,"f")).publicKey)}sign(e){return a.Ed25519Signature.fromBytes(this.__type===v.Extended?signExtendedDetached(__classPrivateFieldGet(this,c,"f"),d.from(e,"hex")):n.crypto_sign_detached(d.from(e,"hex"),d.concat([__classPrivateFieldGet(this,c,"f"),this.toPublic().bytes()])))}static fromNormalBytes(e){if(e.length!==m)throw new o.InvalidArgumentError("keyMaterial",`Key should be ${m} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Normal)}static fromExtendedBytes(e){if(e.length!==p)throw new o.InvalidArgumentError("keyMaterial",`Key should be ${p} bytes; however ${e.length} bytes were provided.`);return new Ed25519PrivateKey(e,v.Extended)}static fromNormalHex(e){return Ed25519PrivateKey.fromNormalBytes(d.from(e,"hex"))}static fromExtendedHex(e){return Ed25519PrivateKey.fromExtendedBytes(d.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,c,"f")}hex(){return this.__type===v.Extended?(0,s.Ed25519PrivateExtendedKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex")):(0,s.Ed25519PrivateNormalKeyHex)(d.from(__classPrivateFieldGet(this,c,"f")).toString("hex"))}constructor(e,t){c.set(this,void 0);__classPrivateFieldSet(this,c,e,"f");this.__type=t}}c=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js":(e,t,r)=>{"use strict";r.d(t,{Ed25519PublicKey:()=>Ed25519PublicKey});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var n=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;class Ed25519PublicKey{verify(e,t){return o.crypto_sign_verify_detached(e.bytes(),n.from(t,"hex"),__classPrivateFieldGet(this,d,"f"))}static fromBytes(e){if(e.length!==i.ED25519_PUBLIC_KEY_LENGTH)throw new a.InvalidArgumentError("keyMaterial",`Key should be ${i.ED25519_PUBLIC_KEY_LENGTH} bytes; however ${e.length} bytes were provided.`);return new Ed25519PublicKey(e)}static fromHex(e){return Ed25519PublicKey.fromBytes(n.from(e,"hex"))}hash(){const e=o.crypto_generichash(s.ED25519_PUBLIC_KEY_HASH_LENGTH,__classPrivateFieldGet(this,d,"f"));return s.Ed25519KeyHash.fromBytes(e)}bytes(){return __classPrivateFieldGet(this,d,"f")}hex(){return(0,i.Ed25519PublicKeyHex)(n.from(__classPrivateFieldGet(this,d,"f")).toString("hex"))}constructor(e){d.set(this,void 0);__classPrivateFieldSet(this,d,e,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js":(e,t,r)=>{"use strict";r.d(t,{ED25519_SIGNATURE_LENGTH:()=>n,Ed25519Signature:()=>Ed25519Signature});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o;const n=64;class Ed25519Signature{static fromBytes(e){if(e.length!==n)throw new i.InvalidArgumentError("signature",`signature should be ${n} bytes; however ${e.length} bytes were provided.`);return new Ed25519Signature(e)}static fromHex(e){return Ed25519Signature.fromBytes(a.from(e,"hex"))}bytes(){return __classPrivateFieldGet(this,o,"f")}hex(){return(0,s.Ed25519SignatureHex)(a.from(__classPrivateFieldGet(this,o,"f")).toString("hex"))}constructor(e){o.set(this,void 0);__classPrivateFieldSet(this,o,e,"f")}}o=new WeakMap},"../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js":(e,t,r)=>{"use strict";r.d(t,{blake2b:()=>a});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/hexString.js");var i=r("../../node_modules/blake2b-no-wasm/index.js");const a={hash(e,t){return i(t).update((0,s.hexStringToBuffer)(e)).digest("hex")},async hashAsync(e,t){return a.hash(e,t)}}},"../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js":(e,t,r)=>{"use strict";r.d(t,{BIP32_PUBLIC_KEY_HASH_LENGTH:()=>i,Bip32PrivateKeyHex:()=>Bip32PrivateKeyHex,Bip32PublicKeyHashHex:()=>Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>Bip32PublicKeyHex,ED25519_PUBLIC_KEY_LENGTH:()=>a,Ed25519KeyHashHex:()=>Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>Ed25519PrivateExtendedKeyHex,Ed25519PrivateNormalKeyHex:()=>Ed25519PrivateNormalKeyHex,Ed25519PublicKeyHex:()=>Ed25519PublicKeyHex,Ed25519SignatureHex:()=>Ed25519SignatureHex,Hash28ByteBase16:()=>Hash28ByteBase16,Hash32ByteBase16:()=>Hash32ByteBase16});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");const i=28;const a=32;const Hash28ByteBase16=e=>(0,s.typedHex)(e,56);const Hash32ByteBase16=e=>(0,s.typedHex)(e,64);Hash32ByteBase16.fromHexBlob=e=>(0,s.castHexBlob)(e,64);const Ed25519SignatureHex=e=>(0,s.typedHex)(e,128);const Bip32PublicKeyHex=e=>(0,s.typedHex)(e,128);const Bip32PrivateKeyHex=e=>(0,s.typedHex)(e,192);const Ed25519PublicKeyHex=e=>(0,s.typedHex)(e,a*s.HexBlob.CHARS_PER_BYTE);Ed25519PublicKeyHex.fromBip32PublicKey=e=>e.slice(0,a*s.HexBlob.CHARS_PER_BYTE);const Ed25519PrivateExtendedKeyHex=e=>(0,s.typedHex)(e,128);const Ed25519PrivateNormalKeyHex=e=>(0,s.typedHex)(e,64);const Ed25519KeyHashHex=e=>(0,s.typedHex)(e,56);const Bip32PublicKeyHashHex=e=>(0,s.typedHex)(e,i*s.HexBlob.CHARS_PER_BYTE)},"../../node_modules/@cardano-sdk/crypto/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{BIP32_ED25519_PRIVATE_KEY_LENGTH:()=>a.BIP32_ED25519_PRIVATE_KEY_LENGTH,BIP32_ED25519_PUBLIC_KEY_LENGTH:()=>o.BIP32_ED25519_PUBLIC_KEY_LENGTH,BIP32_PUBLIC_KEY_HASH_LENGTH:()=>f.BIP32_PUBLIC_KEY_HASH_LENGTH,Bip32PrivateKey:()=>a.Bip32PrivateKey,Bip32PrivateKeyHex:()=>f.Bip32PrivateKeyHex,Bip32PublicKey:()=>o.Bip32PublicKey,Bip32PublicKeyHashHex:()=>f.Bip32PublicKeyHashHex,Bip32PublicKeyHex:()=>f.Bip32PublicKeyHex,CmlBip32Ed25519:()=>CmlBip32Ed25519,ED25519_PUBLIC_KEY_HASH_LENGTH:()=>u.ED25519_PUBLIC_KEY_HASH_LENGTH,ED25519_PUBLIC_KEY_LENGTH:()=>f.ED25519_PUBLIC_KEY_LENGTH,ED25519_SIGNATURE_LENGTH:()=>l.ED25519_SIGNATURE_LENGTH,EXTENDED_ED25519_PRIVATE_KEY_LENGTH:()=>d.EXTENDED_ED25519_PRIVATE_KEY_LENGTH,Ed25519KeyHash:()=>u.Ed25519KeyHash,Ed25519KeyHashHex:()=>f.Ed25519KeyHashHex,Ed25519PrivateExtendedKeyHex:()=>f.Ed25519PrivateExtendedKeyHex,Ed25519PrivateKey:()=>d.Ed25519PrivateKey,Ed25519PrivateKeyType:()=>d.Ed25519PrivateKeyType,Ed25519PrivateNormalKeyHex:()=>f.Ed25519PrivateNormalKeyHex,Ed25519PublicKey:()=>c.Ed25519PublicKey,Ed25519PublicKeyHex:()=>f.Ed25519PublicKeyHex,Ed25519Signature:()=>l.Ed25519Signature,Ed25519SignatureHex:()=>f.Ed25519SignatureHex,Hash28ByteBase16:()=>f.Hash28ByteBase16,Hash32ByteBase16:()=>f.Hash32ByteBase16,NORMAL_ED25519_PRIVATE_KEY_LENGTH:()=>d.NORMAL_ED25519_PRIVATE_KEY_LENGTH,SodiumBip32Ed25519:()=>b.SodiumBip32Ed25519,add256bits:()=>n.add256bits,add28Mul8:()=>n.add28Mul8,blake2b:()=>i.blake2b,le32:()=>n.le32,ready:()=>ready});var s=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/arithmetic.js");var d=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var c=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var l=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var u=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519KeyHash.js");var f=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var m,p,v,_;class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(__classPrivateFieldGet(this,p,"f"))throw new Error("This scope is already disposed.");__classPrivateFieldGet(this,m,"f").push(e);return e}dispose(){if(__classPrivateFieldGet(this,p,"f"))return;for(const e of __classPrivateFieldGet(this,m,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}__classPrivateFieldSet(this,p,true,"f")}constructor(){m.set(this,[]);p.set(this,false)}}m=new WeakMap,p=new WeakMap;class AutoFree{execute(){let e;try{e=__classPrivateFieldGet(this,_,"f").call(this,__classPrivateFieldGet(this,v,"f"));if((0,h.isPromise)(e)){return e.then(e=>{__classPrivateFieldGet(this,v,"f").dispose();return e}).catch(e=>{__classPrivateFieldGet(this,v,"f").dispose();throw e})}__classPrivateFieldGet(this,v,"f").dispose();return e}catch(t){__classPrivateFieldGet(this,v,"f").dispose();throw t}}constructor(e){v.set(this,void 0);_.set(this,void 0);__classPrivateFieldSet(this,_,e,"f");__classPrivateFieldSet(this,v,new ManagedFreeableScope,"f")}}v=new WeakMap,_=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute();var w=r("../../node_modules/buffer/index.js")["Buffer"];var CmlBip32Ed25519_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var CmlBip32Ed25519_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var y;const g=128;class CmlBip32Ed25519{fromBip39Entropy(e,t){const r=usingAutoFree(r=>{const s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PrivateKey.from_bip39_entropy(e,w.from(t)));return s.as_bytes()});return(0,f.Bip32PrivateKeyHex)(w.from(r).toString("hex"))}getPublicKey(e){return usingAutoFree(t=>{const r=e.length===g?t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PrivateKey.from_extended_bytes(w.from(e,"hex"))):t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PrivateKey.from_normal_bytes(w.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Ed25519PublicKeyHex)(w.from(s).toString("hex"))})}getPubKeyHash(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PublicKey.from_bytes(w.from(e,"hex")));const s=t.manage(r.hash()).to_bytes();return(0,f.Ed25519KeyHashHex)(w.from(s).toString("hex"))})}getRawPrivateKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PrivateKey.from_bytes(w.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PrivateExtendedKeyHex)(w.from(s).toString("hex"))})}getRawPublicKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PublicKey.from_bytes(w.from(e,"hex")));const s=t.manage(r.to_raw_key()).as_bytes();return(0,f.Ed25519PublicKeyHex)(w.from(s).toString("hex"))})}getBip32PublicKey(e){return usingAutoFree(t=>{const r=t.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PrivateKey.from_bytes(w.from(e,"hex")));const s=t.manage(r.to_public()).as_bytes();return(0,f.Bip32PublicKeyHex)(w.from(s).toString("hex"))})}derivePrivateKey(e,t){return usingAutoFree(r=>{let s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PrivateKey.from_bytes(w.from(e,"hex")));for(const i of t)s=r.manage(s.derive(i));return(0,f.Bip32PrivateKeyHex)(w.from(s.as_bytes()).toString("hex"))})}derivePublicKey(e,t){return usingAutoFree(r=>{let s=r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Bip32PublicKey.from_bytes(w.from(e,"hex")));for(const i of t)s=r.manage(s.derive(i));return(0,f.Bip32PublicKeyHex)(w.from(s.as_bytes()).toString("hex"))})}async derivePublicKeyAsync(e,t){return this.derivePublicKey(e,t)}sign(e,t){return usingAutoFree(r=>{const s=e.length===g?r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PrivateKey.from_extended_bytes(w.from(e,"hex"))):r.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PrivateKey.from_normal_bytes(w.from(e,"hex")));const i=r.manage(s.sign(w.from(t,"hex"))).to_bytes();return(0,f.Ed25519SignatureHex)(w.from(i).toString("hex"))})}verify(e,t,r){return usingAutoFree(s=>{const i=s.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").PublicKey.from_bytes(w.from(r,"hex")));const a=s.manage(CmlBip32Ed25519_classPrivateFieldGet(this,y,"f").Ed25519Signature.from_bytes(w.from(e,"hex")));return i.verify(w.from(t,"hex"),a)})}constructor(e){y.set(this,void 0);CmlBip32Ed25519_classPrivateFieldSet(this,y,e,"f")}}y=new WeakMap;var b=r("../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js");const ready=async()=>await s.ready},"../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js":(e,t,r)=>{"use strict";r.d(t,{SodiumBip32Ed25519:()=>SodiumBip32Ed25519});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PrivateKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Bip32/Bip32PublicKey.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PrivateKey.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var n=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519Signature.js");var d=r("../../node_modules/libsodium-wrappers-sumo/dist/modules-sumo/libsodium-wrappers.js");const c=128;class SodiumBip32Ed25519{static async create(){await d.ready;return Promise.resolve(new SodiumBip32Ed25519)}fromBip39Entropy(e,t){return s.Bip32PrivateKey.fromBip39Entropy(e,t).hex()}getPublicKey(e){const t=e.length===c?a.Ed25519PrivateKey.fromExtendedHex(e):a.Ed25519PrivateKey.fromNormalHex(e);return t.toPublic().hex()}getPubKeyHash(e){const t=o.Ed25519PublicKey.fromHex(e);return t.hash().hex()}getRawPrivateKey(e){return s.Bip32PrivateKey.fromHex(e).toRawKey().hex()}getRawPublicKey(e){const t=i.Bip32PublicKey.fromHex(e);return t.toRawKey().hex()}getBip32PublicKey(e){const t=s.Bip32PrivateKey.fromHex(e);return t.toPublic().hex()}derivePrivateKey(e,t){const r=s.Bip32PrivateKey.fromHex(e);return r.derive(t).hex()}derivePublicKey(e,t){const r=i.Bip32PublicKey.fromHex(e);return r.derive(t).hex()}async derivePublicKeyAsync(e,t){return this.derivePublicKey(e,t)}sign(e,t){const r=e.length===c?a.Ed25519PrivateKey.fromExtendedHex(e):a.Ed25519PrivateKey.fromNormalHex(e);return r.sign(t).hex()}verify(e,t,r){const s=o.Ed25519PublicKey.fromHex(r);return s.verify(n.Ed25519Signature.fromHex(e),t)}constructor(){}}},"../../node_modules/@cardano-sdk/crypto/node_modules/create-hash/make-hash.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=4;var a=new s(i);a.fill(0);var o=8;var n=16;function toArray(e){if(e.length%i!==0){var t=e.length+(i-e.length%i);e=s.concat([e,a],t)}var r=new Array(e.length>>>2);for(var o=0,n=0;o<e.length;o+=i,n++)r[n]=e.readInt32LE(o);return r}e.exports=function hash(e,t){var r=t(toArray(e),e.length*o);e=new s(n);for(var i=0;i<r.length;i++)e.writeInt32LE(r[i],i<<2,true);return e}},"../../node_modules/@cardano-sdk/crypto/node_modules/create-hash/md5.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/@cardano-sdk/crypto/node_modules/create-hash/make-hash.js");function core_md5(e,t){e[t>>5]|=128<<t%32;e[(t+64>>>9<<4)+14]=t;var r=1732584193;var s=-271733879;var i=-1732584194;var a=271733878;for(var o=0;o<e.length;o+=16){var n=r;var d=s;var c=i;var l=a;r=md5_ff(r,s,i,a,e[o+0],7,-680876936);a=md5_ff(a,r,s,i,e[o+1],12,-389564586);i=md5_ff(i,a,r,s,e[o+2],17,606105819);s=md5_ff(s,i,a,r,e[o+3],22,-1044525330);r=md5_ff(r,s,i,a,e[o+4],7,-176418897);a=md5_ff(a,r,s,i,e[o+5],12,1200080426);i=md5_ff(i,a,r,s,e[o+6],17,-1473231341);s=md5_ff(s,i,a,r,e[o+7],22,-45705983);r=md5_ff(r,s,i,a,e[o+8],7,1770035416);a=md5_ff(a,r,s,i,e[o+9],12,-1958414417);i=md5_ff(i,a,r,s,e[o+10],17,-42063);s=md5_ff(s,i,a,r,e[o+11],22,-1990404162);r=md5_ff(r,s,i,a,e[o+12],7,1804603682);a=md5_ff(a,r,s,i,e[o+13],12,-40341101);i=md5_ff(i,a,r,s,e[o+14],17,-1502002290);s=md5_ff(s,i,a,r,e[o+15],22,1236535329);r=md5_gg(r,s,i,a,e[o+1],5,-165796510);a=md5_gg(a,r,s,i,e[o+6],9,-1069501632);i=md5_gg(i,a,r,s,e[o+11],14,643717713);s=md5_gg(s,i,a,r,e[o+0],20,-373897302);r=md5_gg(r,s,i,a,e[o+5],5,-701558691);a=md5_gg(a,r,s,i,e[o+10],9,38016083);i=md5_gg(i,a,r,s,e[o+15],14,-660478335);s=md5_gg(s,i,a,r,e[o+4],20,-405537848);r=md5_gg(r,s,i,a,e[o+9],5,568446438);a=md5_gg(a,r,s,i,e[o+14],9,-1019803690);i=md5_gg(i,a,r,s,e[o+3],14,-187363961);s=md5_gg(s,i,a,r,e[o+8],20,1163531501);r=md5_gg(r,s,i,a,e[o+13],5,-1444681467);a=md5_gg(a,r,s,i,e[o+2],9,-51403784);i=md5_gg(i,a,r,s,e[o+7],14,1735328473);s=md5_gg(s,i,a,r,e[o+12],20,-1926607734);r=md5_hh(r,s,i,a,e[o+5],4,-378558);a=md5_hh(a,r,s,i,e[o+8],11,-2022574463);i=md5_hh(i,a,r,s,e[o+11],16,1839030562);s=md5_hh(s,i,a,r,e[o+14],23,-35309556);r=md5_hh(r,s,i,a,e[o+1],4,-1530992060);a=md5_hh(a,r,s,i,e[o+4],11,1272893353);i=md5_hh(i,a,r,s,e[o+7],16,-155497632);s=md5_hh(s,i,a,r,e[o+10],23,-1094730640);r=md5_hh(r,s,i,a,e[o+13],4,681279174);a=md5_hh(a,r,s,i,e[o+0],11,-358537222);i=md5_hh(i,a,r,s,e[o+3],16,-722521979);s=md5_hh(s,i,a,r,e[o+6],23,76029189);r=md5_hh(r,s,i,a,e[o+9],4,-640364487);a=md5_hh(a,r,s,i,e[o+12],11,-421815835);i=md5_hh(i,a,r,s,e[o+15],16,530742520);s=md5_hh(s,i,a,r,e[o+2],23,-995338651);r=md5_ii(r,s,i,a,e[o+0],6,-198630844);a=md5_ii(a,r,s,i,e[o+7],10,1126891415);i=md5_ii(i,a,r,s,e[o+14],15,-1416354905);s=md5_ii(s,i,a,r,e[o+5],21,-57434055);r=md5_ii(r,s,i,a,e[o+12],6,1700485571);a=md5_ii(a,r,s,i,e[o+3],10,-1894986606);i=md5_ii(i,a,r,s,e[o+10],15,-1051523);s=md5_ii(s,i,a,r,e[o+1],21,-2054922799);r=md5_ii(r,s,i,a,e[o+8],6,1873313359);a=md5_ii(a,r,s,i,e[o+15],10,-30611744);i=md5_ii(i,a,r,s,e[o+6],15,-1560198380);s=md5_ii(s,i,a,r,e[o+13],21,1309151649);r=md5_ii(r,s,i,a,e[o+4],6,-145523070);a=md5_ii(a,r,s,i,e[o+11],10,-1120210379);i=md5_ii(i,a,r,s,e[o+2],15,718787259);s=md5_ii(s,i,a,r,e[o+9],21,-343485551);r=safe_add(r,n);s=safe_add(s,d);i=safe_add(i,c);a=safe_add(a,l)}return[r,s,i,a]}function md5_cmn(e,t,r,s,i,a){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(s,a)),i),r)}function md5_ff(e,t,r,s,i,a,o){return md5_cmn(t&r|~t&s,e,t,i,a,o)}function md5_gg(e,t,r,s,i,a,o){return md5_cmn(t&s|r&~s,e,t,i,a,o)}function md5_hh(e,t,r,s,i,a,o){return md5_cmn(t^r^s,e,t,i,a,o)}function md5_ii(e,t,r,s,i,a,o){return md5_cmn(r^(t|~s),e,t,i,a,o)}function safe_add(e,t){var r=(65535&e)+(65535&t);var s=(e>>16)+(t>>16)+(r>>16);return s<<16|65535&r}function bit_rol(e,t){return e<<t|e>>>32-t}e.exports=function md5(e){return s(e,core_md5)}},"../../node_modules/@cardano-sdk/crypto/node_modules/hash-base/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=r("../../node_modules/readable-stream/readable-browser.js").Transform;var a=r("../../node_modules/inherits/inherits_browser.js");function HashBase(e){i.call(this);this._block=new s(e);this._blockSize=e;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=false}a(HashBase,i);HashBase.prototype._transform=function(e,t,r){var i=null;try{if("buffer"!==t)e=new s(e,t);this.update(e)}catch(a){i=a}r(i)};HashBase.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(r){t=r}e(t)};HashBase.prototype.update=function(e,t){if(!s.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");if(!s.isBuffer(e))e=new s(e,t||"binary");var r=this._block;var i=0;while(this._blockOffset+e.length-i>=this._blockSize){for(var a=this._blockOffset;a<this._blockSize;)r[a++]=e[i++];this._update();this._blockOffset=0}while(i<e.length)r[this._blockOffset++]=e[i++];for(var o=0,n=8*e.length;n>0;++o){this._length[o]+=n;n=this._length[o]/4294967296|0;if(n>0)this._length[o]-=4294967296*n}return this};HashBase.prototype._update=function(e){throw new Error("_update is not implemented")};HashBase.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=true;var t=this._digest();if(void 0!==e)t=t.toString(e);return t};HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")};e.exports=HashBase},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/browser.js":(e,t,r)=>{"use strict";t.pbkdf2=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/async.js");t.pbkdf2Sync=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/sync-browser.js")},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/async.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/precondition.js");var a=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/default-encoding.js");var o=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/sync-browser.js");var n=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/to-buffer.js");var d;var c=r.g.crypto&&r.g.crypto.subtle;var l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"};var u=[];var f;function getNextTick(){if(f){return f}f=r.g.process&&r.g.process.nextTick?r.g.process.nextTick:r.g.queueMicrotask?r.g.queueMicrotask:r.g.setImmediate?r.g.setImmediate:r.g.setTimeout;return f}function browserPbkdf2(e,t,r,i,a){return c.importKey("raw",e,{name:"PBKDF2"},false,["deriveBits"]).then(function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:a}},e,i<<3)}).then(function(e){return s.from(e)})}function checkNative(e){if(r.g.process&&!r.g.process.browser){return Promise.resolve(false)}if(!c||!c.importKey||!c.deriveBits){return Promise.resolve(false)}if(void 0!==u[e]){return u[e]}d=d||s.alloc(8);var t=browserPbkdf2(d,d,10,128,e).then(function(){return true},function(){return false});u[e]=t;return t}function resolvePromise(e,t){e.then(function(e){getNextTick()(function(){t(null,e)})},function(e){getNextTick()(function(){t(e)})})}e.exports=function(e,t,s,d,c,u){if("function"==typeof c){u=c;c=void 0}c=c||"sha1";var f=l[c.toLowerCase()];if(!f||"function"!=typeof r.g.Promise){getNextTick()(function(){var r;try{r=o(e,t,s,d,c)}catch(i){u(i);return}u(null,r)});return}i(s,d);e=n(e,a,"Password");t=n(t,a,"Salt");if("function"!=typeof u){throw new Error("No callback provided to pbkdf2")}resolvePromise(checkNative(f).then(function(r){if(r){return browserPbkdf2(e,t,s,d,f)}return o(e,t,s,d,c)}),u)}},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/default-encoding.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/process/browser.js");var i;if(r.g.process&&r.g.process.browser)i="utf-8";else if(r.g.process&&r.g.process.version){var a=parseInt(s.version.split(".")[0].slice(1),10);i=a>=6?"utf-8":"binary"}else{i="utf-8"}e.exports=i},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/precondition.js":e=>{"use strict";var t=Math.pow(2,30)-1;e.exports=function(e,r){if("number"!=typeof e){throw new TypeError("Iterations not a number")}if(e<0){throw new TypeError("Bad iterations")}if("number"!=typeof r){throw new TypeError("Key length not a number")}if(r<0||r>t||r!==r){throw new TypeError("Bad key length")}}},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/sync-browser.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/@cardano-sdk/crypto/node_modules/create-hash/md5.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/ripemd160/index.js");var a=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/index.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/precondition.js");var d=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/default-encoding.js");var c=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/to-buffer.js");var l=o.alloc(128);var u={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20};var f={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function rmd160Func(e){return new i().update(e).digest()}function getDigest(e){function shaFunc(t){return a(e).update(t).digest()}if("rmd160"===e||"ripemd160"===e){return rmd160Func}if("md5"===e){return s}return shaFunc}function Hmac(e,t,r){var s=getDigest(e);var i="sha512"===e||"sha384"===e?128:64;if(t.length>i)t=s(t);else if(t.length<i)t=o.concat([t,l],i);var a=o.allocUnsafe(i+u[e]);var n=o.allocUnsafe(i+u[e]);for(var d=0;d<i;d++){a[d]=54^t[d];n[d]=92^t[d]}var c=o.allocUnsafe(i+r+4);a.copy(c,0,0,i);this.ipad1=c;this.ipad2=a;this.opad=n;this.alg=e;this.blocksize=i;this.hash=s;this.size=u[e]}Hmac.prototype.run=function(e,t){e.copy(t,this.blocksize);var r=this.hash(t);r.copy(this.opad,this.blocksize);return this.hash(this.opad)};function pbkdf2(e,t,r,s,i){n(r,s);e=c(e,d,"Password");t=c(t,d,"Salt");var a=(i||"sha1").toLowerCase();var l=f[a]||a;var h=u[l];if("number"!=typeof h||!h){throw new TypeError("Digest algorithm not supported: "+i)}var m=new Hmac(l,e,t.length);var p=o.allocUnsafe(s);var v=o.allocUnsafe(t.length+4);t.copy(v,0,0,t.length);var _=0;var w=h;var y=Math.ceil(s/w);for(var g=1;g<=y;g++){v.writeUInt32BE(g,t.length);var b=m.run(v,m.ipad1);var P=b;for(var S=1;S<r;S++){P=m.run(P,m.ipad2);for(var C=0;C<w;C++)b[C]^=P[C]}b.copy(p,_);_+=w}return p}e.exports=pbkdf2},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/lib/to-buffer.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/to-buffer/index.js");var a="undefined"!=typeof Uint8Array;var o=a&&"undefined"!=typeof ArrayBuffer;var n=o&&ArrayBuffer.isView;e.exports=function(e,t,r){if("string"==typeof e||s.isBuffer(e)||a&&e instanceof Uint8Array||n&&n(e)){return i(e,t)}throw new TypeError(r+" must be a string, a Buffer, a Uint8Array, or a DataView")}},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/ripemd160/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=r("../../node_modules/inherits/inherits_browser.js");var a=r("../../node_modules/@cardano-sdk/crypto/node_modules/hash-base/index.js");function RIPEMD160(){a.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}i(RIPEMD160,a);RIPEMD160.prototype._update=function(){var e=new Array(16);for(var t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a;var s=this._b;var i=this._c;var a=this._d;var o=this._e;r=fn1(r,s,i,a,o,e[0],0,11);i=rotl(i,10);o=fn1(o,r,s,i,a,e[1],0,14);s=rotl(s,10);a=fn1(a,o,r,s,i,e[2],0,15);r=rotl(r,10);i=fn1(i,a,o,r,s,e[3],0,12);o=rotl(o,10);s=fn1(s,i,a,o,r,e[4],0,5);a=rotl(a,10);r=fn1(r,s,i,a,o,e[5],0,8);i=rotl(i,10);o=fn1(o,r,s,i,a,e[6],0,7);s=rotl(s,10);a=fn1(a,o,r,s,i,e[7],0,9);r=rotl(r,10);i=fn1(i,a,o,r,s,e[8],0,11);o=rotl(o,10);s=fn1(s,i,a,o,r,e[9],0,13);a=rotl(a,10);r=fn1(r,s,i,a,o,e[10],0,14);i=rotl(i,10);o=fn1(o,r,s,i,a,e[11],0,15);s=rotl(s,10);a=fn1(a,o,r,s,i,e[12],0,6);r=rotl(r,10);i=fn1(i,a,o,r,s,e[13],0,7);o=rotl(o,10);s=fn1(s,i,a,o,r,e[14],0,9);a=rotl(a,10);r=fn1(r,s,i,a,o,e[15],0,8);i=rotl(i,10);o=fn2(o,r,s,i,a,e[7],1518500249,7);s=rotl(s,10);a=fn2(a,o,r,s,i,e[4],1518500249,6);r=rotl(r,10);i=fn2(i,a,o,r,s,e[13],1518500249,8);o=rotl(o,10);s=fn2(s,i,a,o,r,e[1],1518500249,13);a=rotl(a,10);r=fn2(r,s,i,a,o,e[10],1518500249,11);i=rotl(i,10);o=fn2(o,r,s,i,a,e[6],1518500249,9);s=rotl(s,10);a=fn2(a,o,r,s,i,e[15],1518500249,7);r=rotl(r,10);i=fn2(i,a,o,r,s,e[3],1518500249,15);o=rotl(o,10);s=fn2(s,i,a,o,r,e[12],1518500249,7);a=rotl(a,10);r=fn2(r,s,i,a,o,e[0],1518500249,12);i=rotl(i,10);o=fn2(o,r,s,i,a,e[9],1518500249,15);s=rotl(s,10);a=fn2(a,o,r,s,i,e[5],1518500249,9);r=rotl(r,10);i=fn2(i,a,o,r,s,e[2],1518500249,11);o=rotl(o,10);s=fn2(s,i,a,o,r,e[14],1518500249,7);a=rotl(a,10);r=fn2(r,s,i,a,o,e[11],1518500249,13);i=rotl(i,10);o=fn2(o,r,s,i,a,e[8],1518500249,12);s=rotl(s,10);a=fn3(a,o,r,s,i,e[3],1859775393,11);r=rotl(r,10);i=fn3(i,a,o,r,s,e[10],1859775393,13);o=rotl(o,10);s=fn3(s,i,a,o,r,e[14],1859775393,6);a=rotl(a,10);r=fn3(r,s,i,a,o,e[4],1859775393,7);i=rotl(i,10);o=fn3(o,r,s,i,a,e[9],1859775393,14);s=rotl(s,10);a=fn3(a,o,r,s,i,e[15],1859775393,9);r=rotl(r,10);i=fn3(i,a,o,r,s,e[8],1859775393,13);o=rotl(o,10);s=fn3(s,i,a,o,r,e[1],1859775393,15);a=rotl(a,10);r=fn3(r,s,i,a,o,e[2],1859775393,14);i=rotl(i,10);o=fn3(o,r,s,i,a,e[7],1859775393,8);s=rotl(s,10);a=fn3(a,o,r,s,i,e[0],1859775393,13);r=rotl(r,10);i=fn3(i,a,o,r,s,e[6],1859775393,6);o=rotl(o,10);s=fn3(s,i,a,o,r,e[13],1859775393,5);a=rotl(a,10);r=fn3(r,s,i,a,o,e[11],1859775393,12);i=rotl(i,10);o=fn3(o,r,s,i,a,e[5],1859775393,7);s=rotl(s,10);a=fn3(a,o,r,s,i,e[12],1859775393,5);r=rotl(r,10);i=fn4(i,a,o,r,s,e[1],2400959708,11);o=rotl(o,10);s=fn4(s,i,a,o,r,e[9],2400959708,12);a=rotl(a,10);r=fn4(r,s,i,a,o,e[11],2400959708,14);i=rotl(i,10);o=fn4(o,r,s,i,a,e[10],2400959708,15);s=rotl(s,10);a=fn4(a,o,r,s,i,e[0],2400959708,14);r=rotl(r,10);i=fn4(i,a,o,r,s,e[8],2400959708,15);o=rotl(o,10);s=fn4(s,i,a,o,r,e[12],2400959708,9);a=rotl(a,10);r=fn4(r,s,i,a,o,e[4],2400959708,8);i=rotl(i,10);o=fn4(o,r,s,i,a,e[13],2400959708,9);s=rotl(s,10);a=fn4(a,o,r,s,i,e[3],2400959708,14);r=rotl(r,10);i=fn4(i,a,o,r,s,e[7],2400959708,5);o=rotl(o,10);s=fn4(s,i,a,o,r,e[15],2400959708,6);a=rotl(a,10);r=fn4(r,s,i,a,o,e[14],2400959708,8);i=rotl(i,10);o=fn4(o,r,s,i,a,e[5],2400959708,6);s=rotl(s,10);a=fn4(a,o,r,s,i,e[6],2400959708,5);r=rotl(r,10);i=fn4(i,a,o,r,s,e[2],2400959708,12);o=rotl(o,10);s=fn5(s,i,a,o,r,e[4],2840853838,9);a=rotl(a,10);r=fn5(r,s,i,a,o,e[0],2840853838,15);i=rotl(i,10);o=fn5(o,r,s,i,a,e[5],2840853838,5);s=rotl(s,10);a=fn5(a,o,r,s,i,e[9],2840853838,11);r=rotl(r,10);i=fn5(i,a,o,r,s,e[7],2840853838,6);o=rotl(o,10);s=fn5(s,i,a,o,r,e[12],2840853838,8);a=rotl(a,10);r=fn5(r,s,i,a,o,e[2],2840853838,13);i=rotl(i,10);o=fn5(o,r,s,i,a,e[10],2840853838,12);s=rotl(s,10);a=fn5(a,o,r,s,i,e[14],2840853838,5);r=rotl(r,10);i=fn5(i,a,o,r,s,e[1],2840853838,12);o=rotl(o,10);s=fn5(s,i,a,o,r,e[3],2840853838,13);a=rotl(a,10);r=fn5(r,s,i,a,o,e[8],2840853838,14);i=rotl(i,10);o=fn5(o,r,s,i,a,e[11],2840853838,11);s=rotl(s,10);a=fn5(a,o,r,s,i,e[6],2840853838,8);r=rotl(r,10);i=fn5(i,a,o,r,s,e[15],2840853838,5);o=rotl(o,10);s=fn5(s,i,a,o,r,e[13],2840853838,6);a=rotl(a,10);var n=this._a;var d=this._b;var c=this._c;var l=this._d;var u=this._e;n=fn5(n,d,c,l,u,e[5],1352829926,8);c=rotl(c,10);u=fn5(u,n,d,c,l,e[14],1352829926,9);d=rotl(d,10);l=fn5(l,u,n,d,c,e[7],1352829926,9);n=rotl(n,10);c=fn5(c,l,u,n,d,e[0],1352829926,11);u=rotl(u,10);d=fn5(d,c,l,u,n,e[9],1352829926,13);l=rotl(l,10);n=fn5(n,d,c,l,u,e[2],1352829926,15);c=rotl(c,10);u=fn5(u,n,d,c,l,e[11],1352829926,15);d=rotl(d,10);l=fn5(l,u,n,d,c,e[4],1352829926,5);n=rotl(n,10);c=fn5(c,l,u,n,d,e[13],1352829926,7);u=rotl(u,10);d=fn5(d,c,l,u,n,e[6],1352829926,7);l=rotl(l,10);n=fn5(n,d,c,l,u,e[15],1352829926,8);c=rotl(c,10);u=fn5(u,n,d,c,l,e[8],1352829926,11);d=rotl(d,10);l=fn5(l,u,n,d,c,e[1],1352829926,14);n=rotl(n,10);c=fn5(c,l,u,n,d,e[10],1352829926,14);u=rotl(u,10);d=fn5(d,c,l,u,n,e[3],1352829926,12);l=rotl(l,10);n=fn5(n,d,c,l,u,e[12],1352829926,6);c=rotl(c,10);u=fn4(u,n,d,c,l,e[6],1548603684,9);d=rotl(d,10);l=fn4(l,u,n,d,c,e[11],1548603684,13);n=rotl(n,10);c=fn4(c,l,u,n,d,e[3],1548603684,15);u=rotl(u,10);d=fn4(d,c,l,u,n,e[7],1548603684,7);l=rotl(l,10);n=fn4(n,d,c,l,u,e[0],1548603684,12);c=rotl(c,10);u=fn4(u,n,d,c,l,e[13],1548603684,8);d=rotl(d,10);l=fn4(l,u,n,d,c,e[5],1548603684,9);n=rotl(n,10);c=fn4(c,l,u,n,d,e[10],1548603684,11);u=rotl(u,10);d=fn4(d,c,l,u,n,e[14],1548603684,7);l=rotl(l,10);n=fn4(n,d,c,l,u,e[15],1548603684,7);c=rotl(c,10);u=fn4(u,n,d,c,l,e[8],1548603684,12);d=rotl(d,10);l=fn4(l,u,n,d,c,e[12],1548603684,7);n=rotl(n,10);c=fn4(c,l,u,n,d,e[4],1548603684,6);u=rotl(u,10);d=fn4(d,c,l,u,n,e[9],1548603684,15);l=rotl(l,10);n=fn4(n,d,c,l,u,e[1],1548603684,13);c=rotl(c,10);u=fn4(u,n,d,c,l,e[2],1548603684,11);d=rotl(d,10);l=fn3(l,u,n,d,c,e[15],1836072691,9);n=rotl(n,10);c=fn3(c,l,u,n,d,e[5],1836072691,7);u=rotl(u,10);d=fn3(d,c,l,u,n,e[1],1836072691,15);l=rotl(l,10);n=fn3(n,d,c,l,u,e[3],1836072691,11);c=rotl(c,10);u=fn3(u,n,d,c,l,e[7],1836072691,8);d=rotl(d,10);l=fn3(l,u,n,d,c,e[14],1836072691,6);n=rotl(n,10);c=fn3(c,l,u,n,d,e[6],1836072691,6);u=rotl(u,10);d=fn3(d,c,l,u,n,e[9],1836072691,14);l=rotl(l,10);n=fn3(n,d,c,l,u,e[11],1836072691,12);c=rotl(c,10);u=fn3(u,n,d,c,l,e[8],1836072691,13);d=rotl(d,10);l=fn3(l,u,n,d,c,e[12],1836072691,5);n=rotl(n,10);c=fn3(c,l,u,n,d,e[2],1836072691,14);u=rotl(u,10);d=fn3(d,c,l,u,n,e[10],1836072691,13);l=rotl(l,10);n=fn3(n,d,c,l,u,e[0],1836072691,13);c=rotl(c,10);u=fn3(u,n,d,c,l,e[4],1836072691,7);d=rotl(d,10);l=fn3(l,u,n,d,c,e[13],1836072691,5);n=rotl(n,10);c=fn2(c,l,u,n,d,e[8],2053994217,15);u=rotl(u,10);d=fn2(d,c,l,u,n,e[6],2053994217,5);l=rotl(l,10);n=fn2(n,d,c,l,u,e[4],2053994217,8);c=rotl(c,10);u=fn2(u,n,d,c,l,e[1],2053994217,11);d=rotl(d,10);l=fn2(l,u,n,d,c,e[3],2053994217,14);n=rotl(n,10);c=fn2(c,l,u,n,d,e[11],2053994217,14);u=rotl(u,10);d=fn2(d,c,l,u,n,e[15],2053994217,6);l=rotl(l,10);n=fn2(n,d,c,l,u,e[0],2053994217,14);c=rotl(c,10);u=fn2(u,n,d,c,l,e[5],2053994217,6);d=rotl(d,10);l=fn2(l,u,n,d,c,e[12],2053994217,9);n=rotl(n,10);c=fn2(c,l,u,n,d,e[2],2053994217,12);u=rotl(u,10);d=fn2(d,c,l,u,n,e[13],2053994217,9);l=rotl(l,10);n=fn2(n,d,c,l,u,e[9],2053994217,12);c=rotl(c,10);u=fn2(u,n,d,c,l,e[7],2053994217,5);d=rotl(d,10);l=fn2(l,u,n,d,c,e[10],2053994217,15);n=rotl(n,10);c=fn2(c,l,u,n,d,e[14],2053994217,8);u=rotl(u,10);d=fn1(d,c,l,u,n,e[12],0,8);l=rotl(l,10);n=fn1(n,d,c,l,u,e[15],0,5);c=rotl(c,10);u=fn1(u,n,d,c,l,e[10],0,12);d=rotl(d,10);l=fn1(l,u,n,d,c,e[4],0,9);n=rotl(n,10);c=fn1(c,l,u,n,d,e[1],0,12);u=rotl(u,10);d=fn1(d,c,l,u,n,e[5],0,5);l=rotl(l,10);n=fn1(n,d,c,l,u,e[8],0,14);c=rotl(c,10);u=fn1(u,n,d,c,l,e[7],0,6);d=rotl(d,10);l=fn1(l,u,n,d,c,e[6],0,8);n=rotl(n,10);c=fn1(c,l,u,n,d,e[2],0,13);u=rotl(u,10);d=fn1(d,c,l,u,n,e[13],0,6);l=rotl(l,10);n=fn1(n,d,c,l,u,e[14],0,5);c=rotl(c,10);u=fn1(u,n,d,c,l,e[0],0,15);d=rotl(d,10);l=fn1(l,u,n,d,c,e[3],0,13);n=rotl(n,10);c=fn1(c,l,u,n,d,e[9],0,11);u=rotl(u,10);d=fn1(d,c,l,u,n,e[11],0,11);l=rotl(l,10);var f=this._b+i+l|0;this._b=this._c+a+u|0;this._c=this._d+o+n|0;this._d=this._e+r+d|0;this._e=this._a+s+c|0;this._a=f};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var e=new s(20);e.writeInt32LE(this._a,0);e.writeInt32LE(this._b,4);e.writeInt32LE(this._c,8);e.writeInt32LE(this._d,12);e.writeInt32LE(this._e,16);return e};function rotl(e,t){return e<<t|e>>>32-t}function fn1(e,t,r,s,i,a,o,n){return rotl(e+(t^r^s)+a+o|0,n)+i|0}function fn2(e,t,r,s,i,a,o,n){return rotl(e+(t&r|~t&s)+a+o|0,n)+i|0}function fn3(e,t,r,s,i,a,o,n){return rotl(e+((t|~r)^s)+a+o|0,n)+i|0}function fn4(e,t,r,s,i,a,o,n){return rotl(e+(t&s|r&~s)+a+o|0,n)+i|0}function fn5(e,t,r,s,i,a,o,n){return rotl(e+(t^(r|~s))+a+o|0,n)+i|0}e.exports=RIPEMD160},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/to-buffer/index.js");function Hash(e,t){this._block=s.alloc(e);this._finalSize=t;this._blockSize=e;this._len=0}Hash.prototype.update=function(e,t){e=i(e,t||"utf8");var r=this._block;var s=this._blockSize;var a=e.length;var o=this._len;for(var n=0;n<a;){var d=o%s;var c=Math.min(a-n,s-d);for(var l=0;l<c;l++)r[d+l]=e[n+l];o+=c;n+=c;if(o%s===0)this._update(r)}this._len+=a;return this};Hash.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128;this._block.fill(0,t+1);if(t>=this._finalSize){this._update(this._block);this._block.fill(0)}var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var s=(4294967295&r)>>>0;var i=(r-s)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8);this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};e.exports=Hash},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/index.js":(e,t,r)=>{"use strict";e.exports=function SHA(t){var r=t.toLowerCase();var s=e.exports[r];if(!s){throw new Error(r+" is not supported (we accept pull requests)")}return new s};e.exports.sha=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha.js");e.exports.sha1=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha1.js");e.exports.sha224=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha224.js");e.exports.sha256=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha256.js");e.exports.sha384=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha384.js");e.exports.sha512=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha512.js")},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1518500249,1859775393,-1894007588,-899497514];var n=new Array(80);function Sha(){this.init();this._w=n;i.call(this,64,56)}s(Sha,i);Sha.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,r,s){if(0===e){return t&r|~t&s}if(2===e){return t&r|t&s|r&s}return t^r^s}Sha.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;for(var d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var c=0;c<80;++c){var l=~~(c/20);var u=rotl5(r)+ft(l,s,i,a)+n+t[c]+o[l]|0;n=a;a=i;i=rotl30(s);s=r;r=u}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0};Sha.prototype._hash=function(){var e=a.allocUnsafe(20);e.writeInt32BE(0|this._a,0);e.writeInt32BE(0|this._b,4);e.writeInt32BE(0|this._c,8);e.writeInt32BE(0|this._d,12);e.writeInt32BE(0|this._e,16);return e};e.exports=Sha},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha1.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1518500249,1859775393,-1894007588,-899497514];var n=new Array(80);function Sha1(){this.init();this._w=n;i.call(this,64,56)}s(Sha1,i);Sha1.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl1(e){return e<<1|e>>>31}function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,r,s){if(0===e){return t&r|~t&s}if(2===e){return t&r|t&s|r&s}return t^r^s}Sha1.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;for(var d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=rotl1(t[d-3]^t[d-8]^t[d-14]^t[d-16]);for(var c=0;c<80;++c){var l=~~(c/20);var u=rotl5(r)+ft(l,s,i,a)+n+t[c]+o[l]|0;n=a;a=i;i=rotl30(s);s=r;r=u}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0};Sha1.prototype._hash=function(){var e=a.allocUnsafe(20);e.writeInt32BE(0|this._a,0);e.writeInt32BE(0|this._b,4);e.writeInt32BE(0|this._c,8);e.writeInt32BE(0|this._d,12);e.writeInt32BE(0|this._e,16);return e};e.exports=Sha1},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha224.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha256.js");var a=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=new Array(64);function Sha224(){this.init();this._w=n;a.call(this,64,56)}s(Sha224,i);Sha224.prototype.init=function(){this._a=3238371032;this._b=914150663;this._c=812702999;this._d=4144912697;this._e=4290775857;this._f=1750603025;this._g=1694076839;this._h=3204075428;return this};Sha224.prototype._hash=function(){var e=o.allocUnsafe(28);e.writeInt32BE(this._a,0);e.writeInt32BE(this._b,4);e.writeInt32BE(this._c,8);e.writeInt32BE(this._d,12);e.writeInt32BE(this._e,16);e.writeInt32BE(this._f,20);e.writeInt32BE(this._g,24);return e};e.exports=Sha224},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha256.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var n=new Array(64);function Sha256(){this.init();this._w=n;i.call(this,64,56)}s(Sha256,i);Sha256.prototype.init=function(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this};function ch(e,t,r){return r^e&(t^r)}function maj(e,t,r){return e&t|r&(e|t)}function sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function gamma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function gamma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}Sha256.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;var d=0|this._f;var c=0|this._g;var l=0|this._h;for(var u=0;u<16;++u)t[u]=e.readInt32BE(4*u);for(;u<64;++u)t[u]=gamma1(t[u-2])+t[u-7]+gamma0(t[u-15])+t[u-16]|0;for(var f=0;f<64;++f){var h=l+sigma1(n)+ch(n,d,c)+o[f]+t[f]|0;var m=sigma0(r)+maj(r,s,i)|0;l=c;c=d;d=n;n=a+h|0;a=i;i=s;s=r;r=h+m|0}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0;this._f=d+this._f|0;this._g=c+this._g|0;this._h=l+this._h|0};Sha256.prototype._hash=function(){var e=a.allocUnsafe(32);e.writeInt32BE(this._a,0);e.writeInt32BE(this._b,4);e.writeInt32BE(this._c,8);e.writeInt32BE(this._d,12);e.writeInt32BE(this._e,16);e.writeInt32BE(this._f,20);e.writeInt32BE(this._g,24);e.writeInt32BE(this._h,28);return e};e.exports=Sha256},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha384.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha512.js");var a=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=new Array(160);function Sha384(){this.init();this._w=n;a.call(this,128,112)}s(Sha384,i);Sha384.prototype.init=function(){this._ah=3418070365;this._bh=1654270250;this._ch=2438529370;this._dh=355462360;this._eh=1731405415;this._fh=2394180231;this._gh=3675008525;this._hh=1203062813;this._al=3238371032;this._bl=914150663;this._cl=812702999;this._dl=4144912697;this._el=4290775857;this._fl=1750603025;this._gl=1694076839;this._hl=3204075428;return this};Sha384.prototype._hash=function(){var e=o.allocUnsafe(48);function writeInt64BE(t,r,s){e.writeInt32BE(t,s);e.writeInt32BE(r,s+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);return e};e.exports=Sha384},"../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/sha512.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/crypto/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var n=new Array(160);function Sha512(){this.init();this._w=n;i.call(this,128,112)}s(Sha512,i);Sha512.prototype.init=function(){this._ah=1779033703;this._bh=3144134277;this._ch=1013904242;this._dh=2773480762;this._eh=1359893119;this._fh=2600822924;this._gh=528734635;this._hh=1541459225;this._al=4089235720;this._bl=2227873595;this._cl=4271175723;this._dl=1595750129;this._el=2917565137;this._fl=725511199;this._gl=4215389547;this._hl=327033209;return this};function Ch(e,t,r){return r^e&(t^r)}function maj(e,t,r){return e&t|r&(e|t)}function sigma0(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function sigma1(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Gamma0(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Gamma0l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function Gamma1(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function Gamma1l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function getCarry(e,t){return e>>>0<t>>>0?1:0}Sha512.prototype._update=function(e){var t=this._w;var r=0|this._ah;var s=0|this._bh;var i=0|this._ch;var a=0|this._dh;var n=0|this._eh;var d=0|this._fh;var c=0|this._gh;var l=0|this._hh;var u=0|this._al;var f=0|this._bl;var h=0|this._cl;var m=0|this._dl;var p=0|this._el;var v=0|this._fl;var _=0|this._gl;var w=0|this._hl;for(var y=0;y<32;y+=2){t[y]=e.readInt32BE(4*y);t[y+1]=e.readInt32BE(4*y+4)}for(;y<160;y+=2){var g=t[y-30];var b=t[y-30+1];var P=Gamma0(g,b);var S=Gamma0l(b,g);g=t[y-4];b=t[y-4+1];var C=Gamma1(g,b);var k=Gamma1l(b,g);var j=t[y-14];var x=t[y-14+1];var T=t[y-32];var E=t[y-32+1];var A=S+x|0;var I=P+j+getCarry(A,S)|0;A=A+k|0;I=I+C+getCarry(A,k)|0;A=A+E|0;I=I+T+getCarry(A,E)|0;t[y]=I;t[y+1]=A}for(var B=0;B<160;B+=2){I=t[B];A=t[B+1];var F=maj(r,s,i);var M=maj(u,f,h);var R=sigma0(r,u);var D=sigma0(u,r);var O=sigma1(n,p);var G=sigma1(p,n);var N=o[B];var H=o[B+1];var K=Ch(n,d,c);var V=Ch(p,v,_);var W=w+G|0;var z=l+O+getCarry(W,w)|0;W=W+V|0;z=z+K+getCarry(W,V)|0;W=W+H|0;z=z+N+getCarry(W,H)|0;W=W+A|0;z=z+I+getCarry(W,A)|0;var U=D+M|0;var $=R+F+getCarry(U,D)|0;l=c;w=_;c=d;_=v;d=n;v=p;p=m+W|0;n=a+z+getCarry(p,m)|0;a=i;m=h;i=s;h=f;s=r;f=u;u=W+U|0;r=z+$+getCarry(u,W)|0}this._al=this._al+u|0;this._bl=this._bl+f|0;this._cl=this._cl+h|0;this._dl=this._dl+m|0;this._el=this._el+p|0;this._fl=this._fl+v|0;this._gl=this._gl+_|0;this._hl=this._hl+w|0;this._ah=this._ah+r+getCarry(this._al,u)|0;this._bh=this._bh+s+getCarry(this._bl,f)|0;this._ch=this._ch+i+getCarry(this._cl,h)|0;this._dh=this._dh+a+getCarry(this._dl,m)|0;this._eh=this._eh+n+getCarry(this._el,p)|0;this._fh=this._fh+d+getCarry(this._fl,v)|0;this._gh=this._gh+c+getCarry(this._gl,_)|0;this._hh=this._hh+l+getCarry(this._hl,w)|0};Sha512.prototype._hash=function(){var e=a.allocUnsafe(64);function writeInt64BE(t,r,s){e.writeInt32BE(t,s);e.writeInt32BE(r,s+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);writeInt64BE(this._gh,this._gl,48);writeInt64BE(this._hh,this._hl,56);return e};e.exports=Sha512},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/AuthenticatorApi/PersistentAuthenticator.js":(e,t,r)=>{"use strict";r.d(t,{PersistentAuthenticator:()=>PersistentAuthenticator});var s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/util.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,a,o,n,d,c;class PersistentAuthenticator{async requestAccess(e){const t=(0,s.senderOrigin)(e);if(!t){__classPrivateFieldGet(this,n,"f").warn("Invalid sender url",e);return false}const r=await __classPrivateFieldGet(this,d,"f");if(r.includes(t)){return true}try{const o=await __classPrivateFieldGet(this,a,"f").call(this,e);if(o){const l=[...r,t];if(await __classPrivateFieldGet(this,i,"m",c).call(this,l)){__classPrivateFieldGet(this,n,"f").info("[Authenticator] added",t);return true}}}catch(u){__classPrivateFieldGet(this,n,"f").error("[Authenticator] requestAccess failed",u)}return false}async revokeAccess(e){const t=(0,s.senderOrigin)(e);if(!t){__classPrivateFieldGet(this,n,"f").warn("Invalid sender url",e);return false}const r=await __classPrivateFieldGet(this,d,"f");const a=r.indexOf(t);if(a>=0){const o=[...r.slice(0,a),...r.slice(a+1)];if(await __classPrivateFieldGet(this,i,"m",c).call(this,o)){__classPrivateFieldGet(this,n,"f").info("[Authenticator] revoked access for",t);return true}}else{__classPrivateFieldGet(this,n,"f").warn("[Authenticator] attempted to revoke access for unknown origin",t)}return false}async haveAccess(e){const t=(0,s.senderOrigin)(e);if(!t)return false;const r=await __classPrivateFieldGet(this,d,"f");return r.includes(t)}async clear(){await __classPrivateFieldGet(this,i,"m",c).call(this,[])}constructor({requestAccess:e},{logger:t,storage:r}){i.add(this);a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,a,e,"f");__classPrivateFieldSet(this,o,r,"f");__classPrivateFieldSet(this,n,t,"f");__classPrivateFieldSet(this,d,r.get(),"f")}}a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap,i=new WeakSet,c=async function _PersistentAuthenticator_store(e){try{await __classPrivateFieldGet(this,o,"f").set(e);__classPrivateFieldSet(this,d,Promise.resolve(e),"f");return true}catch(t){__classPrivateFieldGet(this,n,"f").error("[Authenticator] storage.set failed",t);return false}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/AuthenticatorApi/PersistentAuthenticatorStorage.js":(e,t,r)=>{"use strict";r.d(t,{createPersistentAuthenticatorStorage:()=>createPersistentAuthenticatorStorage});const createPersistentAuthenticatorStorage=(e,t)=>{return{async get(){const r=await t.get(e);return(null==r?void 0:r[e])||[]},async set(r){await t.set({[e]:r})}}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js":(e,t,r)=>{"use strict";r.d(t,{APIErrorCode:()=>i,ApiError:()=>ApiError});var s=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e[e["InvalidRequest"]=-1]="InvalidRequest";e[e["InternalError"]=-2]="InternalError";e[e["Refused"]=-3]="Refused"})(i||(i={}));class ApiError extends s.CustomError{constructor(e,t){super();this.code=e;this.info=t}}},"../../node_modules/@cardano-sdk/dapp-connector/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{senderOrigin:()=>senderOrigin});const senderOrigin=e=>{try{const{origin:t}=new URL((null==e?void 0:e.url)||"throw");return t}catch{return null}}},"../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.d(t,{CustomError:()=>i});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{LedgerKeyAgent:()=>LedgerKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var a=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var o=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var _=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var w=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var y=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var g=r("../../node_modules/node-hid/nodehid.js");var b=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var P=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var S=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var C=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib/webusb.js");var k=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/utils/address.js");var j=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var x=r("../../node_modules/@ledgerhq/hw-transport-node-hid-noevents/lib-es/TransportNodeHid.js");var T=r("../../node_modules/@ledgerhq/hw-transport-webusb/lib-es/TransportWebUSB.js");var E=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var A;const I=T["default"]["default"]?T["default"]["default"]:T["default"];const B=a["default"]?a["default"]:a;const F=198;const isUsbDevice=e=>"undefined"!=typeof USBDevice&&e instanceof USBDevice;const setCOSESignHashed=(e,t)=>{const r=new n.CborReader((0,b.HexBlob)(e));r.readStartArray();const s=r.readEncodedValue();r.readEncodedValue();const i=r.readEncodedValue();const a=r.readEncodedValue();r.readEndArray();const o=new d.CborWriter;o.writeStartArray(4);o.writeEncodedValue(s);o.writeStartMap(1);o.writeTextString("hashed");o.writeBoolean(t);o.writeEncodedValue(i);o.writeEncodedValue(a);return o.encodeAsHex()};const isDeviceAlreadyOpenError=e=>{if("object"!=typeof e)return false;const t=e.innerError;if("object"!=typeof t)return false;return 11===t.code||"string"==typeof t.message&&t.message.includes("cannot open device with path")};const M="Cannot communicate with Ledger Cardano App";const transportTypedError=e=>new f.TransportError("Ledger transport failed",e);const hasRegistrationOrRetirementCerts=e=>{if(!e)return false;return e.some(e=>e.type===a.CertificateType.STAKE_POOL_RETIREMENT)||e.some(e=>e.type===a.CertificateType.STAKE_POOL_REGISTRATION)};const stakeCredentialCert=e=>e.type===a.CertificateType.STAKE_REGISTRATION||e.type===a.CertificateType.STAKE_DEREGISTRATION||e.type===a.CertificateType.STAKE_DELEGATION;const R="establishDeviceConnection";const parseEstablishDeviceConnectionSecondParam=(e,t)=>{let r;let s;const i=e===h.CommunicationType.Node&&t instanceof g.HID||e===h.CommunicationType.Web&&isUsbDevice(t);const a=e===h.CommunicationType.Node&&"string"==typeof t;if(i)r=t;else if(a)s=t;else if(void 0!==t){throw new Error(`Invalid arguments of the '${R}' method`)}return{device:r,nodeHidDevicePath:s}};const containsOnlyScriptHashCreds=e=>{var t;const r=!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!(0,P.areNumbersEqualInConstantTime)(e.stakeCredential.type,a.CredentialParamsType.SCRIPT_HASH)));if(e.certificates){for(const s of e.certificates){if(!stakeCredentialCert(s))return false;const i=s.params;if(!(0,P.areNumbersEqualInConstantTime)(i.stakeCredential.type,a.CredentialParamsType.SCRIPT_HASH))return false}}return r};const isMultiSig=e=>{var t;const r=false;const s=!e.inputs.some(e=>null!==e.path);const i=!(null===(t=e.requiredSigners)||void 0===t?void 0:t.some(e=>e.type===a.TxRequiredSignerType.PATH));const o=!e.outputs.some(e=>e.destination.type!==a.TxOutputDestinationType.THIRD_PARTY);if(i&&s&&o&&!e.collateralInputs&&!e.requiredSigners&&!hasRegistrationOrRetirementCerts(e.certificates)&&containsOnlyScriptHashCreds(e)){return true}return r};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=(e,t,r,s,i)=>{const o=e.startsWith("stake");if(o){const n=t.find(({rewardAccount:t})=>t===e);if(!n)throw new m.Cip30DataSignError(m.Cip30DataSignErrorCode.ProofGeneration,"Unknown reward address");const d=p.accountKeyDerivationPathToBip32Path(r,n.stakeKeyDerivationPath||p.STAKE_KEY_DERIVATION_PATH,s);return{addressFieldType:a.MessageAddressFieldType.ADDRESS,addressParams:{params:{stakingPath:d},type:a.AddressType.REWARD_KEY},signingPath:d}}if(isPaymentAddress(e)){var l;const u=c.Address.fromString(e);if((null==u?void 0:u.getType())===c.AddressType.EnterpriseKey&&(null===(l=null==u?void 0:u.getProps().paymentPart)||void 0===l?void 0:l.hash)===i){const f=p.accountKeyDerivationPathToBip32Path(r,p.DREP_KEY_DERIVATION_PATH,s);return{addressFieldType:a.MessageAddressFieldType.KEY_HASH,signingPath:f}}}const v=t.find(({address:t})=>t===e);if(!v){throw new m.Cip30DataSignError(m.Cip30DataSignErrorCode.ProofGeneration,"Unknown address")}if(v.rewardAccount){const _=p.accountKeyDerivationPathToBip32Path(r,{index:v.index,role:v.type},s);const w=p.accountKeyDerivationPathToBip32Path(r,v.stakeKeyDerivationPath||{index:0,role:h.KeyRole.Stake},s);return{addressFieldType:a.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:_,stakingPath:w},type:a.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},signingPath:_}}const y=p.accountKeyDerivationPathToBip32Path(r,{index:v.index,role:v.type},s);return{addressFieldType:a.MessageAddressFieldType.ADDRESS,addressParams:{params:{spendingPath:y},type:a.AddressType.ENTERPRISE_KEY},signingPath:y}};const D=[p.accountKeyDerivationPathToBip32Path(0,{index:0,role:h.KeyRole.External},h.KeyPurpose.MULTI_SIG)];class LedgerKeyAgent extends v.KeyAgentBase{static async findConnectionByCommunicationTypeAndDevicePath(e,t,r){var s;const i=null===(s=this.deviceConnections)||void 0===s?void 0:s.find(s=>{const i=e===s.communicationType;if(s.communicationType===h.CommunicationType.Web){return i&&r===s.device}if(s.communicationType===h.CommunicationType.Node){return i&&r===s.device&&t===s.nodeHidDevicePath}});if(!i)return null;try{await this.testConnection(i.deviceConnection)}catch(a){if(a instanceof f.TransportError&&a.message.includes(M)){this.deviceConnections=this.deviceConnections.filter(e=>e!==i);return null}throw a}return i.deviceConnection}static async getHidDeviceList(e){try{return e===h.CommunicationType.Node?x["default"].list():I.list()}catch(t){throw new f.TransportError("Cannot fetch device list",t)}}static attachDisconnectionCleanupHandler(e){const onDisconnect=async()=>{e.off("disconnect",onDisconnect);this.deviceConnections=this.deviceConnections.filter(({deviceConnection:t})=>t.transport!==e);try{await e.close()}catch(t){if(t instanceof Error&&t.message.includes("The device was disconnected."))return;throw new f.TransportError("Failed to close transport after device disconnection",t)}};e.on("disconnect",onDisconnect)}static async openTransportForDevice({communicationType:e,device:t}){let r;try{if(e===h.CommunicationType.Node&&t instanceof g.HID)r=new x["default"](t);else if(e===h.CommunicationType.Web&&isUsbDevice(t))r=await I.open(t);else{throw new f.TransportError(`Invalid device object provided for communication type ${e}`)}}catch(s){throw new f.TransportError("Failed to open a transport for a given device",s)}this.attachDisconnectionCleanupHandler(r);return r}static async createTransport({communicationType:e,nodeHidDevicePath:t=""}){let r;try{r=e===h.CommunicationType.Node?await x["default"].open(t):await I.open(await (0,C.getFirstLedgerDevice)())}catch(s){throw new f.TransportError("Creating transport failed",s)}this.attachDisconnectionCleanupHandler(r);return r}static async testConnection(e){try{await e.getVersion()}catch(t){throw new f.TransportError(M,t)}}static async createDeviceConnection(e){const t=new B(e);await this.testConnection(t);return t}static rememberConnection({communicationType:e,device:t,deviceConnection:r,nodeHidDevicePath:s}){this.deviceConnections.push({deviceConnection:r,...e===h.CommunicationType.Node?{communicationType:e,...t instanceof g.HID&&{device:t},...void 0!==s&&{nodeHidDevicePath:s}}:{communicationType:e,...isUsbDevice(t)&&{device:t}}})}static async [(A=new WeakMap,R)](e,t){const{device:r,nodeHidDevicePath:s}=parseEstablishDeviceConnectionSecondParam(e,t);const i=await this.findConnectionByCommunicationTypeAndDevicePath(e,s,r);if(i)return i;let a;try{a=r?await LedgerKeyAgent.openTransportForDevice({communicationType:e,device:r}):await LedgerKeyAgent.createTransport({communicationType:e,nodeHidDevicePath:s});if(!a||!a.deviceModel){throw new f.TransportError("Missing transport")}const o=await LedgerKeyAgent.createDeviceConnection(a);this.rememberConnection({communicationType:e,device:r,deviceConnection:o,nodeHidDevicePath:s});return o}catch(n){if(isDeviceAlreadyOpenError(n)){throw new f.TransportError("Connection already established",n)}if(a)void a.close();throw new f.TransportError("Establishing device connection failed",n)}}static async checkDeviceConnection(e,t){try{if(!t){return await LedgerKeyAgent.establishDeviceConnection(e)}return await LedgerKeyAgent.createDeviceConnection(t.transport)}catch(r){if("DisconnectedDeviceDuringOperation"===r.name){return await LedgerKeyAgent.establishDeviceConnection(e)}throw r}}static async getXpub({deviceConnection:e,communicationType:t,accountIndex:r,purpose:i}){try{const a=await LedgerKeyAgent.checkDeviceConnection(t,e);const o=`${i}'/${h.CardanoKeyConst.COIN_TYPE}'/${r}'`;const n=await a.getExtendedPublicKey({path:(0,k.str_to_path)(o)});const d=`${n.publicKeyHex}${n.chainCodeHex}`;return s.Bip32PublicKeyHex(d)}catch(c){if(28169===c.code){throw new _.AuthenticationError("Failed to export extended account public key",c)}throw transportTypedError(c)}}static async getAppVersion(e,t){const r=await LedgerKeyAgent.checkDeviceConnection(e,t);return await r.getVersion()}static async createWithDevice({chainId:e,accountIndex:t=0,communicationType:r,deviceConnection:s,purpose:i=h.KeyPurpose.STANDARD},a){const o=await LedgerKeyAgent.getHidDeviceList(r);const n=await (s?LedgerKeyAgent.checkDeviceConnection(r,s):LedgerKeyAgent.establishDeviceConnection(r,o[0]));const d=await LedgerKeyAgent.getXpub({accountIndex:t,communicationType:r,deviceConnection:n,purpose:i});return new LedgerKeyAgent({accountIndex:t,chainId:e,communicationType:r,deviceConnection:n,extendedAccountPublicKey:d,purpose:i},a)}static isKeyHashOrScriptHashVoter(e){return!!(null==e?void 0:e.some(e=>{switch(e.voter.type){case a.VoterType.COMMITTEE_KEY_HASH:case a.VoterType.COMMITTEE_SCRIPT_HASH:case a.VoterType.DREP_KEY_HASH:case a.VoterType.DREP_SCRIPT_HASH:case a.VoterType.STAKE_POOL_KEY_HASH:return true;default:return false}}))}static getSigningMode(e){if(e.certificates){for(const t of e.certificates){if(t.type===a.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolOwners.some(e=>e.type===a.PoolOwnerType.DEVICE_OWNED))return a.TransactionSigningMode.POOL_REGISTRATION_AS_OWNER;if(t.type===a.CertificateType.STAKE_POOL_REGISTRATION&&t.params.poolKey.type===a.PoolKeyType.DEVICE_OWNED)return a.TransactionSigningMode.POOL_REGISTRATION_AS_OPERATOR}}if(e.collateralInputs||LedgerKeyAgent.isKeyHashOrScriptHashVoter(e.votingProcedures)||e.referenceInputs&&e.referenceInputs.length>0){return a.TransactionSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return a.TransactionSigningMode.MULTISIG_TRANSACTION}return a.TransactionSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r}){try{var o;const n=e.toCore();const d=e.hash();const c=await this.derivePublicKey(p.DREP_KEY_DERIVATION_PATH);const l=(await i.Ed25519PublicKey.fromHex(c).hash()).hex();const u=e.outputs().map(e=>e.isBabbageOutput()?a.TxOutputFormat.MAP_BABBAGE:a.TxOutputFormat.ARRAY_LEGACY);const f=(null===(o=e.collateralReturn())||void 0===o?void 0:o.isBabbageOutput())?a.TxOutputFormat.MAP_BABBAGE:a.TxOutputFormat.ARRAY_LEGACY;const m=await (0,j.toLedgerTx)(n,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:f,dRepKeyHashHex:l,knownAddresses:t,outputsFormat:u,txInKeyPathMap:r});const v=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,A,"f"),this.deviceConnection);const y=LedgerKeyAgent.getSigningMode(m);const g=await v.signTransaction({options:{tagCborSets:e.hasTaggedSets()},signingMode:y,tx:m,...y===a.TransactionSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessPaths:D}});if(!(0,P.areStringsEqualInConstantTime)(g.txHashHex,d)){throw new w.HwMappingError("Ledger computed a different transaction id")}return new Map(await Promise.all(g.witnesses.map(async e=>{const t=await this.derivePublicKey({index:e.path[h.Cip1852PathLevelIndexes.INDEX],role:e.path[h.Cip1852PathLevelIndexes.ROLE]});const r=s.Ed25519SignatureHex(e.witnessSignatureHex);return[t,r]})))}catch(b){if(28169===b.code){throw new _.AuthenticationError("Transaction signing aborted",b)}throw transportTypedError(b)}}async signCip8Data(e){const t=e.payload.length/2>=F;try{const r=await this.derivePublicKey(p.DREP_KEY_DERIVATION_PATH);const n=(await i.Ed25519PublicKey.fromHex(r).hash()).hex();const{signingPath:d,addressParams:c,addressFieldType:u}=getDerivationPath(e.signWith,e.knownAddresses,this.accountIndex,this.purpose,n);const f=u===a.MessageAddressFieldType.ADDRESS&&c?{address:c,addressFieldType:a.MessageAddressFieldType.ADDRESS,hashPayload:t,messageHex:e.payload,network:{networkId:this.chainId.networkId,protocolMagic:this.chainId.networkMagic},preferHexDisplay:false,signingPath:d}:{addressFieldType:a.MessageAddressFieldType.KEY_HASH,hashPayload:t,messageHex:e.payload,preferHexDisplay:false,signingPath:d};const h=await LedgerKeyAgent.checkDeviceConnection(__classPrivateFieldGet(this,A,"f"),this.deviceConnection);const v=await h.signMessage(f);const w=l.hexToBytes((0,b.HexBlob)(v.addressFieldHex));const g=o.HeaderMap.new();g.set_algorithm_id(o.Label.from_algorithm_id(o.AlgorithmId.EdDSA));g.set_header(y.CoseLabel.address,o.CBORValue.new_bytes(w));const P=l.hexToBytes(t?S.blake2b.hash(e.payload,28):e.payload);const C=o.COSESign1Builder.new(o.Headers.new(o.ProtectedHeaderMap.new(g),o.HeaderMap.new()),P,false);const k=C.build(E.from(v.signatureHex,"hex"));const j=m.createCoseKey(w,s.Ed25519PublicKeyHex(v.signingPublicKeyHex));const x=l.bytesToHex(k.to_bytes());return{key:l.bytesToHex(j.to_bytes()),signature:t?setCOSESignHashed(x,true):x}}catch(T){if(28169===T.code){throw new _.AuthenticationError("Transaction signing aborted",T)}throw transportTypedError(T)}}async signBlob(){throw new u.NotImplementedError("Operation not supported!")}async exportRootPrivateKey(){throw new u.NotImplementedError("Operation not supported!")}constructor({deviceConnection:e,...t},r){super({...t,__typename:h.KeyAgentType.Ledger},r);A.set(this,void 0);this.deviceConnection=e;__classPrivateFieldSet(this,A,t.communicationType,"f")}}LedgerKeyAgent.deviceConnections=[]},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{DeviceType:()=>v,LedgerKeyAgent:()=>p.LedgerKeyAgent,LedgerTxTransformer:()=>l.LedgerTxTransformer,getKnownAddress:()=>a.getKnownAddress,mapAuxiliaryData:()=>i.mapAuxiliaryData,mapCerts:()=>a.mapCerts,mapCollateralTxIns:()=>n.mapCollateralTxIns,mapCollateralTxOut:()=>o.mapCollateralTxOut,mapReferenceInputs:()=>d.mapReferenceInputs,mapRequiredSigners:()=>c.mapRequiredSigners,mapTokenMap:()=>s.mapTokenMap,mapTxIns:()=>u.mapTxIns,mapTxOuts:()=>f.mapTxOuts,mapVotingProcedures:()=>m.mapVotingProcedures,mapWithdrawals:()=>h.mapWithdrawals,poolRegistrationCertificate:()=>a.poolRegistrationCertificate,stakeDelegationCertificate:()=>a.stakeDelegationCertificate,toLedgerTx:()=>l.toLedgerTx,toRequiredSigner:()=>c.toRequiredSigner,toTxIn:()=>u.toTxIn,toTxOut:()=>f.toTxOut,toVoteOption:()=>m.toVoteOption,toVoter:()=>m.toVoter,toVotes:()=>m.toVotes,toVotingProcedure:()=>m.toVotingProcedure,toWithdrawal:()=>h.toWithdrawal,voteDelegationCertificate:()=>a.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");var m=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var p=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/LedgerKeyAgent.js");var v;(function(e){e["Ledger"]="Ledger"})(v||(v={}))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameHex.length===t.assetNameHex.length){return e.assetNameHex>t.assetNameHex?1:-1}if(e.assetNameHex.length>t.assetNameHex.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyIdHex>t.policyIdHex?1:-1;const tokenMapToAssetGroup=e=>{const t=new Map;for(const[r,i]of e.entries()){const a=s.AssetId.getPolicyId(r);const o=s.AssetId.getAssetName(r);if(!t.has(a))t.set(a,new Array);t.get(a).push({amount:i,assetNameHex:o})}const n=[];for(const[d,c]of t.entries()){c.sort(compareAssetNameCanonically);n.push({policyIdHex:d,tokens:c})}n.sort(comparePolicyIdCanonically);return n};const mapTokenMap=e=>{if(!e)return null;return tokenMapToAssetGroup(e)}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/types/public.js");const toAuxiliaryData=e=>({params:{hashHex:e},type:s.TxAuxiliaryDataType.ARBITRARY_HASH});const mapAuxiliaryData=e=>e?toAuxiliaryData(e):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getKnownAddress:()=>getKnownAddress,mapCerts:()=>mapCerts,poolRegistrationCertificate:()=>poolRegistrationCertificate,stakeDelegationCertificate:()=>stakeDelegationCertificate,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const mapAnchorToParams=e=>{return{..."anchor"in e&&(null==e?void 0:e.anchor)&&{anchor:{hashHex:e.anchor.dataHash,url:e.anchor.url}}}};const credentialMapper=(e,t,r)=>{let s;switch(t){case a.CredentialType.KeyHash:s=r?{keyPath:r,type:i.CredentialParamsType.KEY_PATH}:{keyHashHex:e.hash,type:i.CredentialParamsType.KEY_HASH};break;case a.CredentialType.ScriptHash:default:s={scriptHashHex:e.hash,type:i.CredentialParamsType.SCRIPT_HASH}}return s};const drepParamsMapper=(e,t)=>{let r;switch(t){case a.CredentialType.KeyHash:r={keyHashHex:e.hash,type:i.DRepParamsType.KEY_HASH};break;case a.CredentialType.ScriptHash:default:r={scriptHashHex:e.hash,type:i.DRepParamsType.SCRIPT_HASH}}return r};const getKnownAddress=(e,t)=>{return t?null==t?void 0:t.knownAddresses.find(t=>(0,u.areStringsEqualInConstantTime)(o.RewardAccount.toHash(t.rewardAccount),e.hash)):void 0};const getCredentialType=e=>{var t;const r=e?null===(t=a.Address.fromBech32(e.rewardAccount))||void 0===t?void 0:t.asReward():null;return r?r.getPaymentCredential().type:i.CredentialParamsType.SCRIPT_HASH};const stakeCredentialMapper=(e,t)=>{const r=getKnownAddress(e,t);const s=getCredentialType(r);const i=l.stakeKeyPathFromGroupedAddress(r);return credentialMapper(e,s,i)};const getStakeAddressCertificate=(e,t)=>({params:{stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.StakeRegistration?i.CertificateType.STAKE_REGISTRATION:i.CertificateType.STAKE_DEREGISTRATION});const getNewStakeAddressCertificate=(e,t)=>({params:{deposit:e.deposit,stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:e.__typename===n.CertificateType.Registration?i.CertificateType.STAKE_REGISTRATION_CONWAY:i.CertificateType.STAKE_DEREGISTRATION_CONWAY});const stakeDelegationCertificate=(e,t)=>({params:{poolKeyHashHex:d.PoolId.toKeyHash(e.poolId),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:i.CertificateType.STAKE_DELEGATION});const toPoolMetadata=e=>({metadataHashHex:e.hash,metadataUrl:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return l.stakeKeyPathFromGroupedAddress(r)};const poolRegistrationCertificate=(e,t)=>{const r=getPoolOperatorKeyPath(e.poolParameters.rewardAccount,t);const s=o.RewardAccount.toHash(e.poolParameters.rewardAccount);return{params:{cost:e.poolParameters.cost,margin:e.poolParameters.margin,metadata:e.poolParameters.metadataJson?toPoolMetadata(e.poolParameters.metadataJson):void 0,pledge:e.poolParameters.pledge,poolKey:r?{params:{path:r},type:i.PoolKeyType.DEVICE_OWNED}:{params:{keyHashHex:s},type:i.PoolKeyType.THIRD_PARTY},poolOwners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=o.RewardAccount.toHash(e);return r?{params:{stakingPath:r},type:i.PoolOwnerType.DEVICE_OWNED}:{params:{stakingKeyHashHex:s},type:i.PoolOwnerType.THIRD_PARTY}}),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{params:{ipv4:e.ipv4,ipv6:e.ipv6,portNumber:e.port},type:0};case"RelayByName":return{params:{dnsName:e.hostname,portNumber:e.port},type:1};case"RelayByNameMultihost":return{params:{dnsName:e.dnsName},type:1}}}),rewardAccount:r?{params:{path:r},type:i.PoolRewardAccountType.DEVICE_OWNED}:{params:{rewardAccountHex:a.Address.fromBech32(e.poolParameters.rewardAccount).toBytes()},type:i.PoolRewardAccountType.THIRD_PARTY},vrfKeyHashHex:e.poolParameters.vrf},type:i.CertificateType.STAKE_POOL_REGISTRATION}};const poolRetirementCertificate=(e,t)=>{const r=d.PoolId.toKeyHash(e.poolId);const s=null==t?void 0:t.knownAddresses.find(e=>(0,u.areStringsEqualInConstantTime)(o.RewardAccount.toHash(e.rewardAccount),r));const a=l.stakeKeyPathFromGroupedAddress(s);if(!a)throw new f.InvalidArgumentError("certificate","Missing key matching pool retirement certificate.");return{params:{poolKeyPath:a,retirementEpoch:e.epoch},type:i.CertificateType.STAKE_POOL_RETIREMENT}};const checkDrepPublicKeyAgainstCredential=(e,t)=>{if(!e||e!==s.Ed25519KeyHashHex(t)){throw new f.InvalidArgumentError("certificate","dRepPublicKey does not match certificate drep credential.")}};const drepRegistrationCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH)),deposit:e.deposit};return{params:r,type:e.__typename===n.CertificateType.RegisterDelegateRepresentative?i.CertificateType.DREP_REGISTRATION:i.CertificateType.DREP_DEREGISTRATION}};const updateDRepCertificate=(e,t)=>{if(!t)throw new f.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");checkDrepPublicKeyAgainstCredential(null==t?void 0:t.dRepKeyHashHex,e.dRepCredential.hash);const r={...mapAnchorToParams(e),dRepCredential:credentialMapper(e.dRepCredential,e.dRepCredential.type,l.accountKeyDerivationPathToBip32Path(t.accountIndex,l.DREP_KEY_DERIVATION_PATH))};return{params:r,type:i.CertificateType.DREP_UPDATE}};const drepMapper=e=>{if(c.isDRepAlwaysAbstain(e)){return{type:i.DRepParamsType.ABSTAIN}}if(c.isDRepAlwaysNoConfidence(e)){return{type:i.DRepParamsType.NO_CONFIDENCE}}if(c.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>({params:{dRep:drepMapper(e.dRep),stakeCredential:stakeCredentialMapper(e.stakeCredential,t)},type:i.CertificateType.VOTE_DELEGATION});const toCert=(e,t)=>{switch(e.__typename){case n.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case n.CertificateType.StakeDelegation:return stakeDelegationCertificate(e,t);case n.CertificateType.PoolRegistration:return poolRegistrationCertificate(e,t);case n.CertificateType.PoolRetirement:return poolRetirementCertificate(e,t);case n.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case n.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);case n.CertificateType.RegisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UnregisterDelegateRepresentative:return drepRegistrationCertificate(e,t);case n.CertificateType.UpdateDelegateRepresentative:return updateDRepCertificate(e,t);default:throw new f.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>{if(!e)return null;return e.map(e=>toCert(e,t))}},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxIns:()=>mapCollateralTxIns});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");const mapCollateralTxIns=(e,t)=>e?(0,s.mapTxIns)(e,t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js":(e,t,r)=>{"use strict";r.d(t,{mapCollateralTxOut:()=>mapCollateralTxOut});var s=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");const mapCollateralTxOut=(e,t)=>e?(0,s.toTxOut)({index:0,isCollateral:true,txOut:e},t):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js":(e,t,r)=>{"use strict";r.d(t,{mapReferenceInputs:()=>mapReferenceInputs});const mapReferenceInputs=e=>e?e.map(e=>({outputIndex:e.index,path:null,txHashHex:e.txId.toString()})):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,s;const a=null===(s=null===(r=i.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential().hash;return!!a&&(0,o.areStringsEqualInConstantTime)(a.toString(),e)});const d=null==t?void 0:t.knownAddresses.find(t=>{const r=a.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,o.areStringsEqualInConstantTime)(r.toString(),e)});const c=r?n.paymentKeyPathFromGroupedAddress(r):null;const l=d?n.stakeKeyPathFromGroupedAddress(d):null;if(c){return{path:c,type:s.TxRequiredSignerType.PATH}}if(l){return{path:l,type:s.TxRequiredSignerType.PATH}}return{hashHex:e,type:s.TxRequiredSignerType.HASH}};const mapRequiredSigners=(e,t)=>e?e.map(e=>toRequiredSigner(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/tx.js":(e,t,r)=>{"use strict";r.d(t,{LedgerTxTransformer:()=>p,toLedgerTx:()=>toLedgerTx});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var i=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/auxiliaryData.js");var a=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/certificates.js");var o=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralInputs.js");var n=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/collateralOutput.js");var d=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/referenceInputs.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var u=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js");var f=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js");var h=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js");var m=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js");const p={auxiliaryData:({auxiliaryDataHash:e})=>(0,i.mapAuxiliaryData)(e),certificates:({certificates:e},t)=>(0,a.mapCerts)(e,t),collateralInputs:({collaterals:e},t)=>(0,o.mapCollateralTxIns)(e,t),collateralOutput:({collateralReturn:e},t)=>(0,n.mapCollateralTxOut)(e,t),donation:({donation:e})=>e,fee:({fee:e})=>e,includeNetworkId:({networkId:e})=>!!e,inputs:({inputs:e},t)=>(0,u.mapTxIns)(e,t),mint:({mint:e})=>(0,l.mapTokenMap)(e),network:(e,t)=>({networkId:t.chainId.networkId,protocolMagic:t.chainId.networkMagic}),outputs:({outputs:e},t)=>(0,f.mapTxOuts)(e,t),referenceInputs:({referenceInputs:e})=>(0,d.mapReferenceInputs)(e),requiredSigners:({requiredExtraSignatures:e},t)=>(0,c.mapRequiredSigners)(e,t),scriptDataHashHex:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},totalCollateral:({totalCollateral:e})=>e,treasury:({treasuryValue:e})=>e,ttl:({validityInterval:e})=>{return null==e?void 0:e.invalidHereafter},validityIntervalStart:({validityInterval:e})=>{return null==e?void 0:e.invalidBefore},votingProcedures:({votingProcedures:e},t)=>(0,h.mapVotingProcedures)(e,t),withdrawals:({withdrawals:e},t)=>(0,m.mapWithdrawals)(e,t)};const toLedgerTx=(e,t)=>(0,s.transformObj)(e,p,t)},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTxIn:()=>toTxIn});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolveKeyPath=(e,{accountIndex:t,txInKeyPathMap:r})=>{const a=r[(0,s.TxInId)(e)];if(a){return i.accountKeyDerivationPathToBip32Path(t,a)}return null};const toTxIn=(e,t)=>({outputIndex:e.index,path:resolveKeyPath(e,t),txHashHex:e.txId});const mapTxIns=(e,t)=>e.map(e=>toTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/assets.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toInlineDatum=e=>({datumHex:i.PlutusData.fromCore(e).toCbor(),type:s.DatumType.INLINE});const toDatumHash=e=>({datumHashHex:e.toString(),type:s.DatumType.HASH});const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const i=a.isScriptAddress(e.address);if(r&&!i){const n=l.paymentKeyPathFromGroupedAddress(r);const c=l.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing stake key key path.");return{params:{params:{spendingPath:n,stakingPath:c},type:s.AddressType.BASE_PAYMENT_KEY_STAKE_KEY},type:s.TxOutputDestinationType.DEVICE_OWNED}}const u=o.Address.fromString(e.address);if(!u){throw new d.InvalidArgumentError("txOut","Invalid address format.")}return{params:{addressHex:u.toBytes()},type:s.TxOutputDestinationType.THIRD_PARTY}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return null;return t.toCbor()};const toTxOut=(e,t)=>{const{txOut:r,index:i,isCollateral:a}=e;const o=n.TransactionOutput.fromCore(r);const d=getScriptHex(o);const l=a?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[i];const u=l===s.TxOutputFormat.MAP_BABBAGE;var f;return{amount:r.value.coins,destination:toDestination(r,t),tokenBundle:(0,c.mapTokenMap)(r.value.assets),...u?{datum:r.datumHash?toDatumHash(r.datumHash):r.datum?toInlineDatum(r.datum):null,format:s.TxOutputFormat.MAP_BABBAGE,referenceScriptHex:d}:{datumHashHex:null!==(f=r.datumHash)&&void 0!==f?f:null,format:s.TxOutputFormat.ARRAY_LEGACY}}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/votingProcedures.js":(e,t,r)=>{"use strict";r.d(t,{mapVotingProcedures:()=>mapVotingProcedures,toVoteOption:()=>toVoteOption,toVoter:()=>toVoter,toVotes:()=>toVotes,toVotingProcedure:()=>toVotingProcedure});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toVoter=(e,t)=>{if(!t)throw new a.InvalidArgumentError("LedgerTxTransformerContext","values was not provided");switch(e.__typename){case"ccHotKeyHash":return{keyHashHex:e.credential.hash,type:i.VoterType.COMMITTEE_KEY_HASH};case"ccHotScriptHash":return{scriptHashHex:e.credential.hash,type:i.VoterType.COMMITTEE_SCRIPT_HASH};case"dRepKeyHash":if(!t.dRepKeyHashHex||t.dRepKeyHashHex!==s.Ed25519KeyHashHex(e.credential.hash)){throw new Error("Foreign voter drepKeyHash")}return{keyPath:o.accountKeyDerivationPathToBip32Path(t.accountIndex,o.DREP_KEY_DERIVATION_PATH),type:i.VoterType.DREP_KEY_PATH};case"dRepScriptHash":return{scriptHashHex:e.credential.hash,type:i.VoterType.DREP_SCRIPT_HASH};case"stakePoolKeyHash":return{keyHashHex:e.credential.hash,type:i.VoterType.STAKE_POOL_KEY_HASH};default:throw new Error("Unsupported voter type")}};const toVoteOption=e=>{switch(e){case 0:return i.VoteOption.NO;case 1:return i.VoteOption.YES;case 2:return i.VoteOption.ABSTAIN;default:throw new Error("Unsupported vote type")}};const toVotes=e=>e.map(e=>({govActionId:{govActionIndex:e.actionId.actionIndex,txHashHex:e.actionId.id},votingProcedure:{...e.votingProcedure.anchor&&{anchor:{hashHex:e.votingProcedure.anchor.dataHash,url:e.votingProcedure.anchor.url}},vote:toVoteOption(e.votingProcedure.vote)}}));const toVotingProcedure=(e,t)=>({voter:toVoter(e.voter,t),votes:toVotes(e.votes)});const mapVotingProcedures=(e,t)=>e?e.map(e=>toVotingProcedure(e,t)):null},"../../node_modules/@cardano-sdk/hardware-ledger/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toWithdrawal:()=>toWithdrawal});var s=r("../../node_modules/@cardano-foundation/ledgerjs-hw-app-cardano/dist/Ada.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const resolveKeyPath=(e,t)=>{if(!t)return null;const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());if(r&&r.stakeKeyDerivationPath){return[a.harden(o.CardanoKeyConst.PURPOSE),a.harden(o.CardanoKeyConst.COIN_TYPE),a.harden(r.accountIndex),r.stakeKeyDerivationPath.role,r.stakeKeyDerivationPath.index]}return null};const toWithdrawal=(e,t)=>{const r=i.Address.fromString(e.stakeAddress);const a=null==r?void 0:r.asReward();if(!a)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let o;if((0,d.areNumbersEqualInConstantTime)(a.getPaymentCredential().type,i.CredentialType.KeyHash)){const c=resolveKeyPath(a,null==t?void 0:t.knownAddresses);o=c?{amount:e.quantity,stakeCredential:{keyPath:c,type:s.CredentialParamsType.KEY_PATH}}:{amount:e.quantity,stakeCredential:{keyHashHex:a.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.KEY_HASH}}}else{o={amount:e.quantity,stakeCredential:{scriptHashHex:a.getPaymentCredential().hash.toString(),type:s.CredentialParamsType.SCRIPT_HASH}}}return o};const mapWithdrawals=(e,t)=>{if(!e)return null;e.sort((e,t)=>{var r,s;const a=null===(r=i.Address.fromString(e.stakeAddress))||void 0===r?void 0:r.asReward();const o=null===(s=i.Address.fromString(t.stakeAddress))||void 0===s?void 0:s.asReward();if(!a||!o)throw new n.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");return a.toAddress().toBytes()>o.toAddress().toBytes()?1:-1});return e.map(e=>toWithdrawal(e,t))}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{TrezorKeyAgent:()=>TrezorKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@trezor/connect/lib/index-browser.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var h=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/transformer.js");var p=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var v=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var _=r("../../node_modules/lodash/isArray.js");var w=r("../../node_modules/lodash/uniq.js");const mapAdditionalWitnessRequests=(e,t)=>{var r;const s=w(e.map(e=>(0,v.resolvePaymentKeyPathForTxIn)(e,t)).filter(p.isNotNil).filter(_));const i=[...s];if(null==t?void 0:null===(r=t.knownAddresses)||void 0===r?void 0:r.length){const a=c.stakeKeyPathFromGroupedAddress(t.knownAddresses[0]);if(a)i.push(a)}return i};var y=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var g=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var b=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var P=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var S=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var C=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var k=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const j={additionalWitnessRequests:({inputs:e},t)=>mapAdditionalWitnessRequests(e,t),auxiliaryData:({auxiliaryDataHash:e})=>e?(0,y.mapAuxiliaryData)(e):void 0,certificates:({certificates:e},t)=>e?(0,g.mapCerts)(e,t):void 0,collateralInputs:({collaterals:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,collateralReturn:({collateralReturn:e},t)=>e?(0,P.toTxOut)({index:0,isCollateral:true,txOut:e},t):void 0,fee:({fee:e})=>e.toString(),includeNetworkId:({networkId:e})=>!!e,inputs:({inputs:e},t)=>(0,b.mapTxIns)(e,t),mint:({mint:e})=>(0,k.mapTokenMap)(e,true),networkId:(e,t)=>t.chainId.networkId,outputs:({outputs:e},t)=>(0,P.mapTxOuts)(e,t),protocolMagic:(e,t)=>t.chainId.networkMagic,referenceInputs:({referenceInputs:e},t)=>e?(0,b.mapTxIns)(e,t):void 0,requiredSigners:({requiredExtraSignatures:e},t)=>e?(0,S.mapRequiredSigners)(e,t):void 0,scriptDataHash:({scriptIntegrityHash:e})=>{return null==e?void 0:e.toString()},tagCborSets:(e,t)=>t.tagCborSets,totalCollateral:({totalCollateral:e})=>{return null==e?void 0:e.toString()},ttl:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidHereafter)||void 0===t?void 0:t.toString()},validityIntervalStart:({validityInterval:e})=>{var t;return null==e?void 0:null===(t=e.invalidBefore)||void 0===t?void 0:t.toString()},withdrawals:({withdrawals:e},t)=>(0,C.mapWithdrawals)(e,t)};const txToTrezor=(e,t)=>(0,m.transformObj)(e,j,t);var x=r("../../node_modules/@trezor/connect-web/lib/index.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var T,E;const A=i;const I=x["default"]?x["default"]:x;const transportTypedError=e=>new o.AuthenticationError("Trezor transport failed",new n.TransportError("Trezor transport failed",e));const getTrezorConnect=e=>e===d.CommunicationType.Node?A:I;const mapDerivationType=e=>{switch(e){case"ICARUS":return i.PROTO.CardanoDerivationType.ICARUS;case"ICARUS_TREZOR":return i.PROTO.CardanoDerivationType.ICARUS_TREZOR;case"LEDGER":return i.PROTO.CardanoDerivationType.LEDGER;default:throw new Error(`Unsupported derivation type: ${e}`)}};const stakeCredentialCert=e=>e===i.PROTO.CardanoCertificateType.STAKE_REGISTRATION||e===i.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION||e===i.PROTO.CardanoCertificateType.STAKE_DELEGATION;const containsOnlyScriptHashCredentials=e=>{var t;if(e.certificates){for(const r of e.certificates)if(!stakeCredentialCert(r.type)||!r.scriptHash)return false}return!(null===(t=e.withdrawals)||void 0===t?void 0:t.some(e=>!e.scriptHash))};const B=[c.accountKeyDerivationPathToBip32Path(0,{index:0,role:d.KeyRole.External},d.KeyPurpose.MULTI_SIG)];const isMultiSig=e=>{var t;const r=!e.inputs.some(e=>e.path);const s=!(null===(t=e.requiredSigners)||void 0===t?void 0:t.some(e=>e.keyPath));const i=!e.outputs.some(e=>"addressParameters"in e);return r&&i&&s&&!e.collateralInputs&&!e.collateralReturn&&!e.totalCollateral&&!e.referenceInputs&&containsOnlyScriptHashCredentials(e)};class TrezorKeyAgent extends l.KeyAgentBase{get trezorConfig(){return __classPrivateFieldGet(this,E,"f")}static async initializeTrezorTransport({manifest:e,communicationType:t,silentMode:r=false,lazyLoad:s=false,shouldHandlePassphrase:a=false}){const o=getTrezorConnect(t);try{await o.init({lazyLoad:t!==d.CommunicationType.Node&&s,manifest:e,popup:t!==d.CommunicationType.Node&&!r});if(a)o.on(i.UI_EVENT,e=>{if(e.type===i.UI.REQUEST_PASSPHRASE&&e.payload.device)o.uiResponse({payload:{passphraseOnDevice:true,save:true,value:""},type:i.UI.RECEIVE_PASSPHRASE})});return true}catch(n){if("Init_AlreadyInitialized"===n.code)return true;throw transportTypedError(n)}}static async checkDeviceConnection(e){const t=getTrezorConnect(e);try{const r=await t.getFeatures();if(!r.success){throw new n.TransportError("Failed to get device",r.payload)}return r.payload}catch(s){throw transportTypedError(s)}}static async getXpub({accountIndex:e,communicationType:t,purpose:r,derivationType:i}){try{await TrezorKeyAgent.checkDeviceConnection(t);const a=`m/${r}'/${d.CardanoKeyConst.COIN_TYPE}'/${e}'`;const o=getTrezorConnect(t);const c=i?mapDerivationType(i):void 0;const l=await o.cardanoGetPublicKey({path:a,showOnTrezor:true,...i&&{derivationType:c}});if(!l.success){throw new n.TransportError("Failed to export extended account public key",l.payload)}return s.Bip32PublicKeyHex(l.payload.publicKey)}catch(u){throw transportTypedError(u)}}static async createWithDevice({chainId:e,accountIndex:t=0,trezorConfig:r,purpose:s=d.KeyPurpose.STANDARD},i){const a=await TrezorKeyAgent.initializeTrezorTransport(r);const o=await TrezorKeyAgent.getXpub({accountIndex:t,communicationType:r.communicationType,derivationType:r.derivationType,purpose:s});return new TrezorKeyAgent({accountIndex:t,chainId:e,extendedAccountPublicKey:o,isTrezorInitialized:a,purpose:s,trezorConfig:r},i)}static matchSigningMode(e){if(e.certificates){for(const t of e.certificates){var r;if(t.type===i.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION&&(null===(r=t.poolParameters)||void 0===r?void 0:r.owners.some(e=>e.stakingKeyPath)))return i.PROTO.CardanoTxSigningMode.POOL_REGISTRATION_AS_OWNER}}if(e.collateralInputs||e.collateralReturn||e.totalCollateral||e.referenceInputs){return i.PROTO.CardanoTxSigningMode.PLUTUS_TRANSACTION}if(isMultiSig(e)){return i.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION}return i.PROTO.CardanoTxSigningMode.ORDINARY_TRANSACTION}async signTransaction(e,{knownAddresses:t,txInKeyPathMap:r,scripts:a}){try{var d;await this.isTrezorInitialized;const c=e.toCore();const l=e.hash();const m=e.outputs().map(e=>e.isBabbageOutput()?i.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:i.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY);const p=(null===(d=e.collateralReturn())||void 0===d?void 0:d.isBabbageOutput())?i.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE:i.PROTO.CardanoTxOutputSerializationFormat.ARRAY_LEGACY;const v=await txToTrezor(c,{accountIndex:this.accountIndex,chainId:this.chainId,collateralReturnFormat:p,knownAddresses:t,outputsFormat:m,tagCborSets:e.hasTaggedSets(),txInKeyPathMap:r});const _=TrezorKeyAgent.matchSigningMode(v);const w=getTrezorConnect(__classPrivateFieldGet(this,T,"f"));const y=await w.cardanoSignTransaction({...v,..._===i.PROTO.CardanoTxSigningMode.MULTISIG_TRANSACTION&&{additionalWitnessRequests:B},signingMode:_,...this.trezorConfig.derivationType?{derivationType:mapDerivationType(this.trezorConfig.derivationType)}:{}});const g=await Promise.all(u.ownSignatureKeyPaths(c,t,r,void 0,a).map(e=>this.derivePublicKey(e)));if(!y.success){throw new n.TransportError("Failed to export extended account public key",y.payload)}const b=y.payload;if(!(0,h.areStringsEqualInConstantTime)(b.hash,l)){throw new f.HwMappingError(`Trezor computed a different transaction id: ${b.hash} than expected: ${l}`)}return new Map(await Promise.all(b.witnesses.filter(e=>g.includes(s.Ed25519PublicKeyHex(e.pubKey))).map(async e=>{const t=s.Ed25519PublicKeyHex(e.pubKey);const r=s.Ed25519SignatureHex(e.signature);return[t,r]})))}catch(S){var P;if((null===(P=S.innerError)||void 0===P?void 0:P.code)==="Failure_ActionCancelled"){throw new o.AuthenticationError("Transaction signing aborted",S)}throw transportTypedError(S)}}async signBlob(){throw new a.NotImplementedError("signBlob")}async signCip8Data(){throw new a.NotImplementedError("signCip8Data")}async exportRootPrivateKey(){throw new a.NotImplementedError("Operation not supported!")}constructor({isTrezorInitialized:e,...t},r){super({...t,__typename:d.KeyAgentType.Trezor},r);T.set(this,void 0);E.set(this,void 0);if(!e)this.isTrezorInitialized=TrezorKeyAgent.initializeTrezorTransport(t.trezorConfig);__classPrivateFieldSet(this,T,t.trezorConfig.communicationType,"f");__classPrivateFieldSet(this,E,t.trezorConfig,"f")}}T=new WeakMap,E=new WeakMap},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{TrezorKeyAgent:()=>l.TrezorKeyAgent,getNewStakeAddressCertificate:()=>n.getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>n.getPoolRegistrationCertificate,getStakeAddressCertificate:()=>n.getStakeAddressCertificate,getStakeDelegationCertificate:()=>n.getStakeDelegationCertificate,mapAuxiliaryData:()=>d.mapAuxiliaryData,mapCerts:()=>n.mapCerts,mapRequiredSigners:()=>c.mapRequiredSigners,mapTxIns:()=>i.mapTxIns,mapTxOuts:()=>a.mapTxOuts,mapWithdrawals:()=>o.mapWithdrawals,resolvePaymentKeyPathForTxIn:()=>s.resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>s.resolveStakeKeyPath,toRequiredSigner:()=>c.toRequiredSigner,toTrezorTxIn:()=>i.toTrezorTxIn,toTrezorWithdrawal:()=>o.toTrezorWithdrawal,toTxOut:()=>a.toTxOut,voteDelegationCertificate:()=>n.voteDelegationCertificate});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");var i=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js");var a=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js");var n=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js");var d=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js");var l=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/TrezorKeyAgent.js")},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js":(e,t,r)=>{"use strict";r.d(t,{mapTokenMap:()=>mapTokenMap});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const compareAssetNameCanonically=(e,t)=>{if(e.assetNameBytes.length===t.assetNameBytes.length){return e.assetNameBytes>t.assetNameBytes?1:-1}if(e.assetNameBytes.length>t.assetNameBytes.length)return 1;return -1};const comparePolicyIdCanonically=(e,t)=>e.policyId>t.policyId?1:-1;const tokenMapToAssetGroup=(e,t)=>{const r=new Map;for(const[i,a]of e.entries()){const o=s.AssetId.getPolicyId(i);const n=s.AssetId.getAssetName(i);if(!r.has(o))r.set(o,[]);r.get(o).push({assetNameBytes:n,...t?{mintAmount:a.toString()}:{amount:a.toString()}})}const d=[];for(const[c,l]of r.entries()){l.sort(compareAssetNameCanonically);d.push({policyId:c,tokenAmounts:l})}d.sort(comparePolicyIdCanonically);return d};const mapTokenMap=(e,t=false)=>e?tokenMapToAssetGroup(e,t):void 0},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/auxiliaryData.js":(e,t,r)=>{"use strict";r.d(t,{mapAuxiliaryData:()=>mapAuxiliaryData});const mapAuxiliaryData=e=>({cVoteRegistrationParameters:void 0,hash:e})},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/certificates.js":(e,t,r)=>{"use strict";r.d(t,{getNewStakeAddressCertificate:()=>getNewStakeAddressCertificate,getPoolRegistrationCertificate:()=>getPoolRegistrationCertificate,getStakeAddressCertificate:()=>getStakeAddressCertificate,getStakeDelegationCertificate:()=>getStakeDelegationCertificate,mapCerts:()=>mapCerts,voteDelegationCertificate:()=>voteDelegationCertificate});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const getCertCredentials=(e,t)=>{var r;const s=null==t?void 0:t.find(t=>(0,l.areStringsEqualInConstantTime)(i.RewardAccount.toHash(t.rewardAccount),e));const o=s?null===(r=a.Address.fromBech32(s.rewardAccount))||void 0===r?void 0:r.asReward():null;if(!!o&&(0,l.areNumbersEqualInConstantTime)(null==o?void 0:o.getPaymentCredential().type,a.CredentialType.KeyHash)){const n=c.stakeKeyPathFromGroupedAddress(s);return n?{path:n}:{keyHash:e}}return{scriptHash:e}};const toPoolMetadata=e=>({hash:e.hash,url:e.url});const getPoolOperatorKeyPath=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.rewardAccount===e);return c.stakeKeyPathFromGroupedAddress(r)};const getStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const i=e.__typename===o.CertificateType.StakeRegistration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION;return{dRep:void 0,deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:i}};const getStakeDelegationCertificate=(e,t)=>{const r=n.PoolId.toKeyHash(e.poolId);const i=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:void 0,deposit:void 0,keyHash:i.keyHash,path:i.path,pool:r,poolParameters:void 0,scriptHash:i.scriptHash,type:s.PROTO.CardanoCertificateType.STAKE_DELEGATION}};const getNewStakeAddressCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);const i=e.__typename===o.CertificateType.Registration?s.PROTO.CardanoCertificateType.STAKE_REGISTRATION_CONWAY:s.PROTO.CardanoCertificateType.STAKE_DEREGISTRATION_CONWAY;return{dRep:void 0,deposit:e.deposit.toString(),keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:i}};const drepParamsMapper=(e,t)=>{let r;switch(t){case a.CredentialType.KeyHash:r={keyHash:e.hash,type:s.PROTO.CardanoDRepType.KEY_HASH};break;case a.CredentialType.ScriptHash:default:r={scriptHash:e.hash,type:s.PROTO.CardanoDRepType.SCRIPT_HASH}}return r};const drepMapper=e=>{if(d.isDRepAlwaysAbstain(e)){return{type:s.PROTO.CardanoDRepType.ABSTAIN}}if(d.isDRepAlwaysNoConfidence(e)){return{type:s.PROTO.CardanoDRepType.NO_CONFIDENCE}}if(d.isDRepCredential(e)){return drepParamsMapper(e,e.type)}throw new Error("incorrect drep supplied")};const voteDelegationCertificate=(e,t)=>{const r=getCertCredentials(e.stakeCredential.hash,null==t?void 0:t.knownAddresses);return{dRep:drepMapper(e.dRep),deposit:void 0,keyHash:r.keyHash,path:r.path,pool:void 0,poolParameters:void 0,scriptHash:r.scriptHash,type:s.PROTO.CardanoCertificateType.VOTE_DELEGATION}};const getPoolRegistrationCertificate=(e,t)=>{if(!e.poolParameters.metadataJson)throw new u.InvalidArgumentError("certificate","Missing pool registration pool metadata.");return{dRep:void 0,deposit:void 0,keyHash:void 0,path:void 0,pool:void 0,poolParameters:{cost:e.poolParameters.cost.toString(),margin:{denominator:e.poolParameters.margin.denominator.toString(),numerator:e.poolParameters.margin.numerator.toString()},metadata:toPoolMetadata(e.poolParameters.metadataJson),owners:e.poolParameters.owners.map(e=>{const r=getPoolOperatorKeyPath(e,t);const s=i.RewardAccount.toHash(e);return r?{stakingKeyPath:r}:{stakingKeyHash:s}}),pledge:e.poolParameters.pledge.toString(),poolId:n.PoolId.toKeyHash(e.poolParameters.id),relays:e.poolParameters.relays.map(e=>{switch(e.__typename){case"RelayByAddress":return{ipv4Address:e.ipv4,ipv6Address:e.ipv6,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_IP};case"RelayByName":return{hostName:e.hostname,port:e.port,type:s.PROTO.CardanoPoolRelayType.SINGLE_HOST_NAME};case"RelayByNameMultihost":return{hostName:e.dnsName,type:s.PROTO.CardanoPoolRelayType.MULTIPLE_HOST_NAME};default:throw new u.InvalidArgumentError("certificate","Unknown relay type.")}}),rewardAccount:e.poolParameters.rewardAccount,vrfKeyHash:e.poolParameters.vrf},scriptHash:void 0,type:s.PROTO.CardanoCertificateType.STAKE_POOL_REGISTRATION}};const toCert=(e,t)=>{switch(e.__typename){case o.CertificateType.StakeRegistration:return getStakeAddressCertificate(e,t);case o.CertificateType.StakeDeregistration:return getStakeAddressCertificate(e,t);case o.CertificateType.StakeDelegation:return getStakeDelegationCertificate(e,t);case o.CertificateType.PoolRegistration:return getPoolRegistrationCertificate(e,t);case o.CertificateType.Registration:return getNewStakeAddressCertificate(e,t);case o.CertificateType.Unregistration:return getNewStakeAddressCertificate(e,t);case o.CertificateType.VoteDelegation:return voteDelegationCertificate(e,t);default:throw new u.InvalidArgumentError("cert",`Certificate ${e.__typename} not supported.`)}};const mapCerts=(e,t)=>e.map(e=>toCert(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js":(e,t,r)=>{"use strict";r.d(t,{resolvePaymentKeyPathForTxIn:()=>resolvePaymentKeyPathForTxIn,resolveStakeKeyPath:()=>resolveStakeKeyPath});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const resolvePaymentKeyPathForTxIn=(e,t)=>{if(!t)return;const r=null==t?void 0:t.txInKeyPathMap[(0,s.TxInId)(e)];if(r){return i.accountKeyDerivationPathToBip32Path(t.accountIndex,r)}};const resolveStakeKeyPath=(e,t)=>{const r=t.find(({rewardAccount:t})=>t===e.toAddress().toBech32());return i.stakeKeyPathFromGroupedAddress(r)}},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/requiredSigners.js":(e,t,r)=>{"use strict";r.d(t,{mapRequiredSigners:()=>mapRequiredSigners,toRequiredSigner:()=>toRequiredSigner});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");const toRequiredSigner=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>{var r,i;const o=null===(i=null===(r=s.Address.fromBech32(t.address))||void 0===r?void 0:r.asBase())||void 0===i?void 0:i.getPaymentCredential().hash;return!!o&&(0,a.areStringsEqualInConstantTime)(o.toString(),e)});const n=null==t?void 0:t.knownAddresses.find(t=>{const r=i.RewardAccount.toHash(t.rewardAccount);return!!r&&(0,a.areStringsEqualInConstantTime)(r.toString(),e)});const d=r?o.paymentKeyPathFromGroupedAddress(r):null;const c=n?o.stakeKeyPathFromGroupedAddress(n):null;if(d){return{keyHash:void 0,keyPath:d}}if(c){return{keyHash:void 0,keyPath:c}}return{keyHash:e,keyPath:void 0}};const mapRequiredSigners=(e,t)=>e.map(e=>toRequiredSigner(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txIn.js":(e,t,r)=>{"use strict";r.d(t,{mapTxIns:()=>mapTxIns,toTrezorTxIn:()=>toTrezorTxIn});var s=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorTxIn=(e,t)=>{const r=(0,s.resolvePaymentKeyPathForTxIn)(e,t);return{path:r,prev_hash:e.txId,prev_index:e.index}};const mapTxIns=(e,t)=>e.map(e=>toTrezorTxIn(e,t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/txOut.js":(e,t,r)=>{"use strict";r.d(t,{mapTxOuts:()=>mapTxOuts,toTxOut:()=>toTxOut});var s=r("../../node_modules/@trezor/connect/lib/index-browser.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/isScriptAddress.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/assets.js");const toDestination=(e,t)=>{const r=null==t?void 0:t.knownAddresses.find(t=>t.address===e.address);const a=i.isScriptAddress(e.address);if(!r||a){return{address:e.address}}const o=n.paymentKeyPathFromGroupedAddress(r);const c=n.stakeKeyPathFromGroupedAddress(r);if(!c)throw new d.InvalidArgumentError("txOut","Missing staking key key path.");return{addressParameters:{addressType:s.PROTO.CardanoAddressType.BASE,path:o,stakingPath:c}}};const getScriptHex=e=>{const t=e.scriptRef();if(!t)return;return t.toCbor()};const getInlineDatum=e=>a.PlutusData.fromCore(e).toCbor();const toTxOut=(e,t)=>{var r;const{txOut:i,index:a,isCollateral:n}=e;const d=o.TransactionOutput.fromCore(i);const l=getScriptHex(d);const u=n?null==t?void 0:t.collateralReturnFormat:null==t?void 0:t.outputsFormat[a];const f=u===s.PROTO.CardanoTxOutputSerializationFormat.MAP_BABBAGE;return{...toDestination(i,t),amount:i.value.coins.toString(),datumHash:null===(r=i.datumHash)||void 0===r?void 0:r.toString(),format:u,inlineDatum:f&&i.datum?getInlineDatum(i.datum):void 0,referenceScript:f?l:void 0,tokenBundle:(0,c.mapTokenMap)(i.value.assets)}};const mapTxOuts=(e,t)=>e.map((e,r)=>toTxOut({index:r,isCollateral:false,txOut:e},t))},"../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/withdrawals.js":(e,t,r)=>{"use strict";r.d(t,{mapWithdrawals:()=>mapWithdrawals,toTrezorWithdrawal:()=>toTrezorWithdrawal});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var o=r("../../node_modules/@cardano-sdk/hardware-trezor/dist/esm/transformers/keyPaths.js");const toTrezorWithdrawal=(e,t)=>{const r=s.Address.fromString(e.stakeAddress);const n=null==r?void 0:r.asReward();if(!n)throw new i.InvalidArgumentError("withdrawal","Invalid withdrawal stake address");let d;if((0,a.areNumbersEqualInConstantTime)(n.getPaymentCredential().type,s.CredentialType.KeyHash)){const c=(null==t?void 0:t.knownAddresses)?(0,o.resolveStakeKeyPath)(n,t.knownAddresses):null;d=c?{amount:e.quantity.toString(),keyHash:void 0,path:c,scriptHash:void 0}:{amount:e.quantity.toString(),keyHash:n.getPaymentCredential().hash.toString(),path:void 0,scriptHash:void 0}}else{d={amount:e.quantity.toString(),keyHash:void 0,path:void 0,scriptHash:n.getPaymentCredential().hash.toString()}}return d};const mapWithdrawals=(e,t)=>e?e.map(e=>toTrezorWithdrawal(e,t)):void 0},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.StaticChangeAddressResolver=void 0;const o=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");class StaticChangeAddressResolver{async resolve(e){const t=await i(this,a,"f").call(this);if(0===t.length)throw new o.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){a.set(this,void 0);s(this,a,e,"f")}}t.StaticChangeAddressResolver=StaticChangeAddressResolver;a=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/ChangeAddressResolver.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/StaticChangeAddressResolver.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.GreedyInputSelector=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const d=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const c=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js");class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:l,outputs:u,constraints:f,implicitValue:h}=e;const m=new Set([...l,...s]);const p=(0,d.toValues)([...m]);const v=(0,d.toValues)([...u]);const _=(0,d.getCoinQuantity)(p);const w=(0,d.getCoinQuantity)(v);const y=(0,o.coalesceValueQuantities)(p).assets;const g=(0,o.coalesceValueQuantities)(v).assets;const b=(null==h?void 0:null===(t=h.coin)||void 0===t?void 0:t.input)||0n;const P=(null==h?void 0:null===(r=h.coin)||void 0===r?void 0:r.deposit)||0n;const S=(null==h?void 0:h.mint)||new Map;const C=_+b;const k=w+P;const j=(0,d.addTokenMaps)(y,S);const x=C-k;const T=(0,d.subtractTokenMaps)(j,g);if(0===m.size||k>C||(0,d.hasNegativeAssetValue)(T))throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);const E=await (0,c.splitChangeAndComputeFee)(m,u,x,T,f,i(this,a,"f").getChangeAddresses,0n);const A=E.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(x-E.fee<0n)throw new n.InputSelectionError(n.InputSelectionFailure.UtxoBalanceInsufficient);if(m.size>await f.computeSelectionLimit({change:A,fee:E.fee,inputs:m,outputs:u})){throw new n.InputSelectionError(n.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:A,fee:E.fee,inputs:new Set([...m].sort(d.sortUtxoByTxIn)),outputs:u}}}constructor(e){a.set(this,void 0);s(this,a,e,"f")}}t.GreedyInputSelector=GreedyInputSelector;a=new WeakMap},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/GreedyInputSelector.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.splitChangeAndComputeFee=t.adjustOutputsForFee=t.splitChange=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=.05;const distributeAssets=(e,t,r,s)=>{const n=[...e];if(0===n.length)return n;const d=(0,i.coalesceValueQuantities)(n.map(e=>e.value)).assets;if(!d||0===d.size)return n;for(const c of n)c.value.assets=void 0;let l=0;const u=n;const f=[];while(d.size>0){const h=new Map([...d.entries()].splice(0,1));const m=l%u.length;const p={...u[m].value};p.assets=(0,o.addTokenMaps)(p.assets,h);if((0,o.isValidValue)(p,t,r,s)){u[m].value=p;d.delete([...h.keys()][0])}else{f.push(...u.splice(m,1))}if(0===u.length)throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted);++l}return[...n,...f]};const getMinUtxoAmount=e=>{const t=new s.BigNumber(.03);let r=e.toString().length-1;let i="1";while(r>0){i+="0";--r}return BigInt(new s.BigNumber(i).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const i=e.value.coins;const a=getMinUtxoAmount(i);let o=i;let n=0n;const d=new Array;const c=new s.BigNumber(2);while(o>=a){const l=BigInt(new s.BigNumber(o.toString()).dividedBy(c).toFixed(0,0));const u=o-l;if(u<=a||u<=t({address:e.address,value:{assets:e.value.assets,coins:i-n}})+r){d.push(i-n);break}n+=l;d.push(l);o-=l}return d.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,i,d,c)=>{const l=await e();const u=[...l.values()].reduce((e,t)=>e+t,0);const f=new Map([...l.entries()].map(e=>[e[0],e[1]/u]));const h=[...f.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-h)>n)throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient);const m=[...f.entries()].map(e=>({address:e[0],value:{coins:0n}}));let p=0n;const v=new s.BigNumber(t.toString());for(const _ of m){const w=new s.BigNumber(f.get(_.address));const y=BigInt(v.multipliedBy(w).toFixed(0,0));p+=y;_.value.coins=p>t?y-(p-t):y}if(p<t){const g=t-p;m[m.length-1].value.coins+=g}const b=m.flatMap(e=>splitChangeOutput(e,i,c));const P=b.sort(o.sortByCoins).filter(e=>e.value.coins>0n);if(P&&P.length>0)P[0].value.assets=r;if(!r||0===r.size)return P;return distributeAssets(P,i,d,c)};t.splitChange=splitChange;const adjustOutputsForFee=async(e,t,r,s,i,n)=>{const d=new Set([...s,...i]);const{fee:c,redeemers:l}=await t.computeMinimumCost({change:[],fee:n,inputs:r,outputs:d});if(c===e)return{change:[],fee:c,feeAccountedFor:true,redeemers:l};if(e<c)throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient);const u=[...i];u.sort(o.sortByCoins);let f=false;for(const h of u){const m=h.value.coins-c;if(m>=t.computeMinimumCoinQuantity(h)){h.value.coins=m;f=true;break}}return{change:[...u],fee:c,feeAccountedFor:f,redeemers:l}};t.adjustOutputsForFee=adjustOutputsForFee;const splitChangeAndComputeFee=async(e,r,s,i,n,d,c)=>{const l=await (0,t.splitChange)(d,s,i,n.computeMinimumCoinQuantity,n.tokenBundleSizeExceedsLimit,c);let u=await (0,t.adjustOutputsForFee)(s,n,e,r,l,c);if(u.fee>=s){const f={change:[{address:o.stubMaxSizeAddress,value:{assets:i,coins:0n}}],fee:u.fee,feeAccountedFor:true};if(f.change[0].value.coins<n.computeMinimumCoinQuantity(f.change[0]))throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted);return f}if(c<u.fee){u=await (0,t.splitChangeAndComputeFee)(e,r,s,i,n,d,u.fee);if(0===u.change.length)throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)}for(const h of u.change)if(h.value.coins<n.computeMinimumCoinQuantity(h))throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted);if(!u.feeAccountedFor)throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted);return u};t.splitChangeAndComputeFee=splitChangeAndComputeFee},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InputSelectionError=t.InputSelectionFailure=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(i=t.InputSelectionFailure||(t.InputSelectionFailure={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}t.InputSelectionError=InputSelectionError},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/LargeFirstInputSelector.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o,n,d,c,l,u,f,h,m;Object.defineProperty(t,"__esModule",{value:true});t.LargeFirstSelector=void 0;const p=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const v=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const _=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const w=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js");const y=a(r("../../node_modules/lodash/uniq.js"));const pickAdditionalLargestUtxo=({utxoRemaining:e,utxoSelected:t})=>{if(0===e.length){return{utxoRemaining:e,utxoSelected:t}}const r=e.sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));const[s,...i]=r;return{utxoRemaining:i,utxoSelected:[...t,s]}};class LargeFirstSelector{async select(e){var t;const{utxo:r,preSelectedUtxo:s,outputs:a,constraints:d,implicitValue:c}=e;const p=[...s];const w=[...r].filter(([e])=>!p.some(([t])=>t.txId===e.txId&&t.index===e.index));const y=[...p,...w];const{totalLovelaceOutput:g,outputAssets:b}=i(this,o,"m",l).call(this,new Set(y),a,c);let P=new Set(p);P=i(this,o,"m",u).call(this,b,y,[...P]);var S;P=i(this,o,"m",f).call(this,g,y,P,null!==(S=null==c?void 0:null===(t=c.coin)||void 0===t?void 0:t.input)&&void 0!==S?S:0n);const{finalSelection:C,fee:k,change:j}=await i(this,o,"m",m).call(this,P,a,y,b,d,i(this,n,"f").changeAddressResolver,c);const x=await d.computeSelectionLimit({change:j,fee:k,inputs:C,outputs:a});if(C.size>x)throw new _.InputSelectionError(_.InputSelectionFailure.MaximumInputCountExceeded);return{remainingUTxO:i(this,o,"m",h).call(this,[...r],C),selection:{change:j,fee:k,inputs:new Set([...C].sort(v.sortUtxoByTxIn)),outputs:a}}}constructor(e){o.add(this);n.set(this,void 0);s(this,n,e,"f")}}t.LargeFirstSelector=LargeFirstSelector;n=new WeakMap,o=new WeakSet,d=function _LargeFirstSelector_aggregateLovelace(e,t,r){var s,i;const a=(0,v.getCoinQuantity)(e);const o=(0,v.getCoinQuantity)(t);var n;const d=null!==(n=null==r?void 0:null===(s=r.coin)||void 0===s?void 0:s.input)&&void 0!==n?n:0n;var c;const l=null!==(c=null==r?void 0:null===(i=r.coin)||void 0===i?void 0:i.deposit)&&void 0!==c?c:0n;return{totalIn:a+d,totalOut:o+l}},c=function _LargeFirstSelector_aggregateAssets(e,t,r){var s;const i=null!==(s=(0,p.coalesceValueQuantities)(t).assets)&&void 0!==s?s:new Map;const a=(0,p.coalesceValueQuantities)(e).assets;var o;const n=null!==(o=null==r?void 0:r.mint)&&void 0!==o?o:new Map;const d=new Map;const c=new Map;for(const[l,u]of n)(u>0n?d:c).set(l,u>0n?u:-u);let f=(0,v.addTokenMaps)(i,c);var h;f=null!==(h=(0,v.subtractTokenMaps)(f,d))&&void 0!==h?h:new Map;var m;const _=null!==(m=(0,v.addTokenMaps)(a,d))&&void 0!==m?m:new Map;return{available:_,required:f}},l=function _LargeFirstSelector_computeNetImplicitSelectionValues(e,t,r){const s=(0,v.toValues)([...e]);const a=(0,v.toValues)([...t]);const{totalIn:n,totalOut:l}=i(this,o,"m",d).call(this,s,a,r);const{required:u,available:f}=i(this,o,"m",c).call(this,s,a,r);const h=n-l;const m=(0,v.subtractTokenMaps)(f,u);if(0===e.size||h<0n||(0,v.hasNegativeAssetValue)(m))throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);return{outputAssets:u,totalLovelaceInput:n,totalLovelaceOutput:l}},u=function _LargeFirstSelector_selectAssets(e,t,r){const s=new Set(r);for(const[i,a]of e){var o;const n=t.filter(([e,t])=>{var r;return(null!==(o=null===(r=t.value.assets)||void 0===r?void 0:r.get(i))&&void 0!==o?o:0n)>0n}).sort(([,e],[,t])=>(0,v.sortByAssetQuantity)(i)(e,t));let d=0n;for(const c of n){var l;s.add(c);var u;d+=null!==(u=null===(l=c[1].value.assets)||void 0===l?void 0:l.get(i))&&void 0!==u?u:0n;if(d>=a)break}if(d<a)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient)}return s},f=function _LargeFirstSelector_selectLovelace(e,t,r,s){const i=new Set(r);const a=new Set([...r].map(([e])=>e));const o=t.filter(([e])=>!a.has(e)).sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));let n=(0,v.getCoinQuantity)((0,v.toValues)([...i]))+s;for(const d of o){if(n>=e)break;i.add(d);n+=d[1].value.coins}if(0===i.size){if(0===o.length)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);i.add(o[0])}if(n<e)throw new _.InputSelectionError(_.InputSelectionFailure.UtxoBalanceInsufficient);return i},h=function _LargeFirstSelector_computeRemainingUtxo(e,t){const r=new Set([...t].map(([e])=>e));return new Set(e.filter(([e])=>!r.has(e)))},m=async function _LargeFirstSelector_expandUtxosUntilFeeCovered(e,t,r,s,i,a,o){var n,d,c,l;const u=[...e];const f=r.filter(t=>!e.has(t)).sort(([,e],[,t])=>(0,v.sortByCoins)(e,t));const h=(0,v.toValues)([...t]);const m=v.stubMaxSizeAddress;const p={deposit:(null==o?void 0:null===(n=o.coin)||void 0===n?void 0:n.deposit)||0n,input:(null==o?void 0:null===(d=o.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==o?void 0:null===(c=o.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==o?void 0:null===(l=o.coin)||void 0===l?void 0:l.withdrawals)||0n};const _=(null==o?void 0:o.mint)||new Map;const g=(0,y.default)([...s.keys(),..._.keys()]);const{implicitTokensInput:b,implicitTokensSpend:P}=(0,v.mintToImplicitTokens)(_);const S={input:e=>b.get(e)||0n,spend:e=>P.get(e)||0n};const{change:C,fee:k,inputs:j}=await (0,w.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:i.computeMinimumCoinQuantity,estimateTxCosts:(e,r)=>i.computeMinimumCost({change:r.map(e=>({address:m,value:e})),fee:v.MAX_U64,inputs:new Set(e),outputs:t}),implicitValue:{implicitCoin:p,implicitTokens:S},outputValues:h,pickAdditionalUtxo:pickAdditionalLargestUtxo,tokenBundleSizeExceedsLimit:i.tokenBundleSizeExceedsLimit,uniqueTxAssetIDs:g,utxoSelection:{utxoRemaining:f,utxoSelected:u}});if(0===C.length){return{change:[],fee:k,finalSelection:new Set(j)}}const x=C.map(e=>({address:m,value:e}));const T=await a.resolve({change:x,fee:k,inputs:new Set(j),outputs:t});return{change:T,fee:k,finalSelection:new Set(j)}}},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/LargeFirstInputSelector.js"),t)},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinRandomImprove=t.createPickAdditionalRandomUtxo=void 0;const s=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js");const createPickAdditionalRandomUtxo=e=>({utxoRemaining:t,utxoSelected:r})=>{const s=t.filter(([e,{value:t}])=>!t.assets);const i=s.length>0?s:t;const a=Math.floor(e()*i.length);const o=[...r,i[a]];const n=t.indexOf(i[a]);const d=[...t.slice(0,n),...t.slice(n+1)];return{utxoRemaining:d,utxoSelected:o}};t.createPickAdditionalRandomUtxo=createPickAdditionalRandomUtxo;const roundRobinRandomImprove=({changeAddressResolver:e,random:r=Math.random})=>({select:async({preSelectedUtxo:n,utxo:d,outputs:c,constraints:{computeMinimumCost:l,computeSelectionLimit:u,computeMinimumCoinQuantity:f,tokenBundleSizeExceedsLimit:h},implicitValue:m={}})=>{const p=i.stubMaxSizeAddress;const{requiredUtxo:v,utxo:_,outputs:w,uniqueTxAssetIDs:y,implicitValue:g}=(0,i.preProcessArgs)(n,d,c,p,m);(0,i.assertIsBalanceSufficient)(y,v,_,w,g);const b=(0,o.roundRobinSelection)({changeAddress:p,implicitValue:g,outputs:w,random:r,requiredUtxo:v,uniqueTxAssetIDs:y,utxo:_});const P=await (0,a.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:f,estimateTxCosts:(e,t)=>l({change:t.map(e=>({address:p,value:e})),fee:i.MAX_U64,inputs:new Set(e),outputs:c}),implicitValue:g,outputValues:(0,i.toValues)(w),pickAdditionalUtxo:(0,t.createPickAdditionalRandomUtxo)(r),tokenBundleSizeExceedsLimit:h,uniqueTxAssetIDs:y,utxoSelection:b});const S=new Set(P.inputs);const C={change:P.change.map(e=>({address:p,value:e})),fee:P.fee,inputs:S,outputs:c};C.change=await e.resolve(C);if(P.inputs.length>await u({change:C.change,fee:C.fee,inputs:S,outputs:c})){throw new s.InputSelectionError(s.InputSelectionFailure.MaximumInputCountExceeded)}C.inputs=new Set([...C.inputs].sort(i.sortUtxoByTxIn));return{redeemers:P.redeemers,remainingUTxO:new Set(P.remainingUTxO),selection:C}}});t.roundRobinRandomImprove=roundRobinRandomImprove},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/roundRobin.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.roundRobinSelection=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const improvesSelection=(e,t,r,i)=>{const a=i(e);if(a<r)return true;const o=a+i([t]);const n=2n*r;const d=s.BigIntMath.abs(n-o);const c=s.BigIntMath.abs(n-a);if(d<c)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,i.assetQuantitySelector)(e);const a=s.input(e);const o=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,i.toValues)(e))+a,minimumTarget:r((0,i.toValues)(t))+o}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,i.getCoinQuantity)((0,i.toValues)(e))+r.input,minimumTarget:(0,i.getCoinQuantity)((0,i.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:i,implicitValue:a})=>{const o=e;const n=[...t];const d=listTokensWithin(s,r,a);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const h=l(n);if(h.length>0){const m=Math.floor(i()*h.length);const p=h[m];if(improvesSelection(o,p,u,f)){o.push(p);n.splice(n.indexOf(p),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===o.length){o.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:o}};t.roundRobinSelection=roundRobinSelection},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/change.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeChangeAndAdjustForFee=t.coalesceChangeBundlesForMinCoinRequirement=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");const n=s(r("../../node_modules/lodash/minBy.js"));const d=s(r("../../node_modules/lodash/orderBy.js"));const c=s(r("../../node_modules/lodash/pick.js"));const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:i}}]of e)if(i){const a=[...i.keys()].filter(e=>!t.includes(e));for(const o of a){const n=i.get(o);if(0n===n)continue;const d=r.get(o)||[];r.set(o,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const i=[...t];for(const a of s.keys()){const o=(0,d.default)(s.get(a),e=>e,"desc");if(0===i.length)i.push({coins:0n});while(o.length>i.length){const n=o.pop();o[o.length-1]+=n}for(const[c,l]of o.entries()){var u;const f=i[c];const h=(null===(u=f.assets)||void 0===u?void 0:u.entries())||[];i.splice(c,1,{assets:new Map([...h,[a,l]]),coins:f.coins})}}return i};const createBundlePerOutput=(e,t,r,s)=>{let i=0n;const a=new Map;const o=e.map(e=>{const o=t>0n?r*e.coins/t:0n;i+=o;if(!e.assets){return{coins:o}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const h=f*c/l;a.set(d,(a.get(d)||0n)+h);n.set(d,h)}return{assets:n,coins:o}});return{bundles:o,totalAssetsBundled:a,totalCoinBundled:i}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=(0,n.default)(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:i},a)=>{const n=new Map;const d=(0,o.toValues)(e);for(const c of r)n.set(c,{requested:(0,o.assetQuantitySelector)(c)(t)+i.spend(c),selected:(0,o.assetQuantitySelector)(c)(d)+i.input(c)});const l=(0,o.getCoinQuantity)(d)+s.input;const u=(0,o.getCoinQuantity)(t)+a+s.deposit;const f=l-u;const{totalCoinBundled:h,bundles:m,totalAssetsBundled:p}=createBundlePerOutput(t,u,f,n);const v=f-h;if(v>0)if(0===m.length)m.push({coins:v});else m[0].coins+=v;for(const _ of r){const w=n.get(_);const y=p.get(_)||0n;const g=w.selected-w.requested-y;if(g>0n){var b;const P=(null===(b=m.find(({assets:e})=>{return null==e?void 0:e.has(_)}))||void 0===b?void 0:b.assets)||smallestBundleTokenMap(m);const S=P.get(_)||0n;P.set(_,S+g)}}return m};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const s=r.splice(t,1)[0];if(0===r.length)return[s];const a=r.splice(-1,1)[0];const o=(0,i.coalesceValueQuantities)([s,a]);r=[...r,o];r=(0,d.default)(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=(0,d.default)(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:o.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let i=false;while(s.length>1&&!i){i=true;for(let a=s.length-1;a>=0;--a){const n=satisfiesMinCoinRequirement(s[a]);i=i&&n;if(!n){s=mergeWithSmallestBundle(s,a);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};t.coalesceChangeBundlesForMinCoinRequirement=coalesceChangeBundlesForMinCoinRequirement;const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const i of e){const{assets:n,coins:d}=i;if(!n||0===n.size||!r(n)){s.push({assets:n,coins:d});continue}const c=[];let l={assets:new Map,coins:0n};for(const[u,f]of n.entries()){l.assets.set(u,f);if(r(l.assets)&&l.assets.size>1){l.assets.delete(u);c.push(l);l={assets:new Map([[u,f]]),coins:0n}}}c.push(l);let h=0n;for(const m of c){const p=t({address:o.stubMaxSizeAddress,value:m});m.coins=p;h+=p}if(d<h){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)}c[0].coins+=d-h;s.push(...c)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:r,uniqueTxAssetIDs:s,implicitValue:i,computeMinimumCoinQuantity:a,tokenBundleSizeExceedsLimit:o,fee:n=0n})=>{const d=computeRequestedAssetChangeBundles(e.utxoSelected,r,s,i,n);const c=redistributeLeftoverAssets(e.utxoSelected,d,s);const l=(0,t.coalesceChangeBundlesForMinCoinRequirement)(c,a);if(!l){return false}const u=splitChangeIfTokenBundlesSizeExceedsLimit(l,a,o);return{changeBundles:u,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:r,estimateTxCosts:s,outputValues:i,uniqueTxAssetIDs:n,implicitValue:d,pickAdditionalUtxo:l,utxoSelection:u})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=o=>{if(o.utxoRemaining.length>0){return(0,t.computeChangeAndAdjustForFee)({computeMinimumCoinQuantity:e,estimateTxCosts:s,implicitValue:d,outputValues:i,pickAdditionalUtxo:l,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:l(o)})}throw new a.InputSelectionError(a.InputSelectionFailure.UtxoFullyDepleted)};const f=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:d,outputValues:i,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:u});if(!f)return recomputeChangeAndAdjustForFeeWithExtraUtxo(u);const h=await s(f.utxoSelected,validateChangeBundles(f.changeBundles,r));const m=(0,o.getCoinQuantity)(i)+h.fee+d.implicitCoin.deposit;const p=(0,o.getCoinQuantity)((0,o.toValues)(f.utxoSelected))+d.implicitCoin.input;if(m>p){if(0===f.utxoRemaining.length){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const v=computeChangeBundles({computeMinimumCoinQuantity:e,fee:h.fee,implicitValue:d,outputValues:i,tokenBundleSizeExceedsLimit:r,uniqueTxAssetIDs:n,utxoSelection:(0,c.default)(f,["utxoRemaining","utxoSelected"])});if(!v){return recomputeChangeAndAdjustForFeeWithExtraUtxo(f)}const{changeBundles:_,utxoSelected:w,utxoRemaining:y}=v;return{change:validateChangeBundles(_,r),fee:h.fee,inputs:w,redeemers:h.redeemers,remainingUTxO:y}};t.computeChangeAndAdjustForFee=computeChangeAndAdjustForFee},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.sortUtxoByTxIn=t.sortTxIn=void 0;i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/RoundRobinRandomImprove/index.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/GreedySelection/index.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/LargeFirstSelection/index.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js"),t);i(r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/ChangeAddress/index.js"),t);var a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js");Object.defineProperty(t,"sortTxIn",{enumerable:true,get:function(){return a.sortTxIn}});Object.defineProperty(t,"sortUtxoByTxIn",{enumerable:true,get:function(){return a.sortUtxoByTxIn}})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/input-selection/dist/cjs/util.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.sortByAssetQuantity=t.isValidValue=t.hasNegativeAssetValue=t.addTokenMaps=t.subtractTokenMaps=t.sortByCoins=t.assertIsBalanceSufficient=t.assertIsCoinBalanceSufficient=t.getCoinQuantity=t.assetQuantitySelector=t.toValues=t.preProcessArgs=t.mintToImplicitTokens=t.sortUtxoByTxIn=t.sortTxIn=t.stubMaxSizeAddress=t.MAX_U64=void 0;const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/InputSelectionError.js");const n=s(r("../../node_modules/lodash/uniq.js"));t.MAX_U64=0xffffffffffffffffn;t.stubMaxSizeAddress=a.Cardano.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};t.sortTxIn=sortTxIn;const sortUtxoByTxIn=(e,r)=>(0,t.sortTxIn)(e[0],r[0]);t.sortUtxoByTxIn=sortUtxoByTxIn;const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};t.mintToImplicitTokens=mintToImplicitTokens;const preProcessArgs=(e,r,s,i,a)=>{var o,d,c,l;const u=[...s];const f={deposit:(null==a?void 0:null===(o=a.coin)||void 0===o?void 0:o.deposit)||0n,input:(null==a?void 0:null===(d=a.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==a?void 0:null===(c=a.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==a?void 0:null===(l=a.coin)||void 0===l?void 0:l.withdrawals)||0n};const h=(null==a?void 0:a.mint)||new Map;const{implicitTokensInput:m,implicitTokensSpend:p}=(0,t.mintToImplicitTokens)(h);const v={input:e=>m.get(e)||0n,spend:e=>p.get(e)||0n};const _=(0,n.default)(u.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const w=(0,n.default)([..._,...h.keys()]);return{changeAddress:i,implicitValue:{implicitCoin:f,implicitTokens:v},outputs:u,requiredUtxo:[...e],uniqueTxAssetIDs:w,utxo:[...r]}};t.preProcessArgs=preProcessArgs;const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}t.toValues=toValues;const assetQuantitySelector=e=>{return t=>{return i.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};t.assetQuantitySelector=assetQuantitySelector;const getCoinQuantity=e=>i.BigIntMath.sum(e.map(({coins:e})=>e));t.getCoinQuantity=getCoinQuantity;const assertIsCoinBalanceSufficient=(e,r,s)=>{const i=(0,t.getCoinQuantity)(e);const a=(0,t.getCoinQuantity)(r);if(a+s.deposit>i+s.input){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}};t.assertIsCoinBalanceSufficient=assertIsCoinBalanceSufficient;const assertIsBalanceSufficient=(e,r,s,i,{implicitCoin:a,implicitTokens:n})=>{if(r.length+s.length===0){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}const d=[...toValues(s),...toValues(r)];const c=toValues(i);for(const l of e){const u=(0,t.assetQuantitySelector)(l);const f=u(d);const h=u(c);if(h+n.spend(l)>f+n.input(l)){throw new o.InputSelectionError(o.InputSelectionFailure.UtxoBalanceInsufficient)}}(0,t.assertIsCoinBalanceSufficient)(d,c,a)};t.assertIsBalanceSufficient=assertIsBalanceSufficient;const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};t.sortByCoins=sortByCoins;const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,i]of e.entries())if(0n!==i)r.set(s,i);return r}if(!e){const a=new Map;for(const[o,d]of t.entries())if(0n!==d)a.set(o,-d);return a}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=(0,n.default)(l);for(const v of p){const _=e.get(v);const w=t.get(v);const y=_-w;if(0n!==y)c.set(v,y)}return c};t.subtractTokenMaps=subtractTokenMaps;const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[i,a]of e.entries()){if(t.has(i)){s.push(i);continue}if(0n!==a)r.set(i,a)}for(const[o,d]of t.entries()){if(e.has(o)){s.push(o);continue}if(0n!==d)r.set(o,d)}const c=(0,n.default)(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};t.addTokenMaps=addTokenMaps;const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};t.hasNegativeAssetValue=hasNegativeAssetValue;const isValidValue=(e,r,s,i)=>{let a=e.coins-i>=r({address:t.stubMaxSizeAddress,value:e});if(e.assets)a=a&&!s(e.assets);return a};t.isValidValue=isValidValue;const sortByAssetQuantity=e=>{return(t,r)=>{var s,i;var a;const o=null!==(a=null===(s=t.value.assets)||void 0===s?void 0:s.get(e))&&void 0!==a?a:0n;var n;const d=null!==(n=null===(i=r.value.assets)||void 0===i?void 0:i.get(e))&&void 0!==n?n:0n;if(o>d)return -1;if(o<d)return 1;return 0}};t.sortByAssetQuantity=sortByAssetQuantity},"../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js":(e,t,r)=>{"use strict";r.d(t,{InputSelectionError:()=>InputSelectionError,InputSelectionFailure:()=>i});var s=r("../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs");var i;(function(e){e["UtxoBalanceInsufficient"]="UTxO Balance Insufficient";e["UtxoNotFragmentedEnough"]="UTxO Not Fragmented Enough";e["UtxoFullyDepleted"]="UTxO Fully Depleted";e["MaximumInputCountExceeded"]="Maximum Input Count Exceeded"})(i||(i={}));class InputSelectionError extends s.CustomError{constructor(e){super(e);this.failure=e}}},"../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js":(e,t,r)=>{"use strict";r.d(t,{MAX_U64:()=>n,addTokenMaps:()=>addTokenMaps,assertIsBalanceSufficient:()=>assertIsBalanceSufficient,assetQuantitySelector:()=>assetQuantitySelector,getCoinQuantity:()=>getCoinQuantity,hasNegativeAssetValue:()=>hasNegativeAssetValue,isValidValue:()=>isValidValue,mintToImplicitTokens:()=>mintToImplicitTokens,preProcessArgs:()=>preProcessArgs,sortByAssetQuantity:()=>sortByAssetQuantity,sortByCoins:()=>sortByCoins,sortTxIn:()=>sortTxIn,sortUtxoByTxIn:()=>sortUtxoByTxIn,stubMaxSizeAddress:()=>d,subtractTokenMaps:()=>subtractTokenMaps,toValues:()=>toValues});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var a=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var o=r("../../node_modules/lodash/uniq.js");const n=0xffffffffffffffffn;const d=i.PaymentAddress("addr_test1qqydn46r6mhge0kfpqmt36m6q43knzsd9ga32n96m89px3nuzcjqw982pcftgx53fu5527z2cj2tkx2h8ux2vxsg475qypp3m9");const sortTxIn=(e,t)=>{const r=e.txId.localeCompare(t.txId);if(0!==r)return r;return e.index-t.index};const sortUtxoByTxIn=(e,t)=>sortTxIn(e[0],t[0]);const mintToImplicitTokens=(e=new Map)=>{const t=[...e.entries()];const r=new Map(t.filter(([e,t])=>t>0));const s=new Map(t.filter(([e,t])=>t<0).map(([e,t])=>[e,-t]));return{implicitTokensInput:r,implicitTokensSpend:s}};const preProcessArgs=(e,t,r,s,i)=>{var a,n,d,c;const l=[...r];const u={deposit:(null==i?void 0:null===(a=i.coin)||void 0===a?void 0:a.deposit)||0n,input:(null==i?void 0:null===(n=i.coin)||void 0===n?void 0:n.input)||0n,reclaimDeposit:(null==i?void 0:null===(d=i.coin)||void 0===d?void 0:d.reclaimDeposit)||0n,withdrawals:(null==i?void 0:null===(c=i.coin)||void 0===c?void 0:c.withdrawals)||0n};const f=(null==i?void 0:i.mint)||new Map;const{implicitTokensInput:h,implicitTokensSpend:m}=mintToImplicitTokens(f);const p={input:e=>h.get(e)||0n,spend:e=>m.get(e)||0n};const v=o(l.flatMap(({value:{assets:e}})=>{return[...(null==e?void 0:e.keys())||[]]}));const _=o([...v,...f.keys()]);return{changeAddress:s,implicitValue:{implicitCoin:u,implicitTokens:p},outputs:l,requiredUtxo:[...e],uniqueTxAssetIDs:_,utxo:[...t]}};const isUtxoArray=e=>e.length>0&&Array.isArray(e[0]);function toValues(e){if(isUtxoArray(e)){return e.map(([e,{value:t}])=>t)}return e.map(({value:e})=>e)}const assetQuantitySelector=e=>{return t=>{return s.BigIntMath.sum(t.map(({assets:t})=>{return(null==t?void 0:t.get(e))||0n}))}};const getCoinQuantity=e=>s.BigIntMath.sum(e.map(({coins:e})=>e));const assertIsCoinBalanceSufficient=(e,t,r)=>{const s=getCoinQuantity(e);const i=getCoinQuantity(t);if(i+r.deposit>s+r.input){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient)}};const assertIsBalanceSufficient=(e,t,r,s,{implicitCoin:i,implicitTokens:o})=>{if(t.length+r.length===0){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient)}const n=[...toValues(r),...toValues(t)];const d=toValues(s);for(const c of e){const l=assetQuantitySelector(c);const u=l(n);const f=l(d);if(f+o.spend(c)>u+o.input(c)){throw new a.InputSelectionError(a.InputSelectionFailure.UtxoBalanceInsufficient)}}assertIsCoinBalanceSufficient(n,d,i)};const sortByCoins=(e,t)=>{if(e.value.coins>t.value.coins){return -1}if(e.value.coins<t.value.coins){return 1}return 0};const subtractTokenMaps=(e,t)=>{if(!t){if(!e)return;const r=new Map;for(const[s,i]of e.entries())if(0n!==i)r.set(s,i);return r}if(!e){const a=new Map;for(const[n,d]of t.entries())if(0n!==d)a.set(n,-d);return a}const c=new Map;const l=new Array;for(const[u,f]of e.entries()){if(t.has(u)){l.push(u);continue}if(0n!==f)c.set(u,f)}for(const[h,m]of t.entries()){if(e.has(h)){l.push(h);continue}if(0n!==m)c.set(h,-m)}const p=o(l);for(const v of p){const _=e.get(v);const w=t.get(v);const y=_-w;if(0n!==y)c.set(v,y)}return c};const addTokenMaps=(e,t)=>{if(!e)return t;if(!t)return e;const r=new Map;const s=new Array;for(const[i,a]of e.entries()){if(t.has(i)){s.push(i);continue}if(0n!==a)r.set(i,a)}for(const[n,d]of t.entries()){if(e.has(n)){s.push(n);continue}if(0n!==d)r.set(n,d)}const c=o(s);for(const l of c){const u=e.get(l);const f=t.get(l);if(u+f!==0n)r.set(l,u+f)}return r};const hasNegativeAssetValue=e=>{if(!e)return false;const t=[...e.values()];return t.some(e=>e<0n)};const isValidValue=(e,t,r,s)=>{let i=e.coins-s>=t({address:d,value:e});if(e.assets)i=i&&!r(e.assets);return i};const sortByAssetQuantity=e=>{return(t,r)=>{var s,i;var a;const o=null!==(a=null===(s=t.value.assets)||void 0===s?void 0:s.get(e))&&void 0!==a?a:0n;var n;const d=null!==(n=null===(i=r.value.assets)||void 0===i?void 0:i.get(e))&&void 0!==n?n:0n;if(o>d)return -1;if(o<d)return 1;return 0}}},"../../node_modules/@cardano-sdk/input-selection/node_modules/bignumber.js/bignumber.js":function(e,t,r){var s;(function(i){"use strict";var a,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,d=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,f=14,h=9007199254740991,m=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],p=1e7,v=1e9;function clone(e){var t,r,s,i=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},a=new BigNumber(1),_=20,w=4,y=-7,g=21,b=-1e7,P=1e7,S=false,C=1,k=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},x="0123456789abcdefghijklmnopqrstuvwxyz",T=true;function BigNumber(e,t){var i,a,n,c,u,m,p,v,y=this;if(!(y instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){y.s=e.s;if(!e.c||e.e>P)y.c=y.e=null;else if(e.e<b)y.c=[y.e=0];else{y.e=e.e;y.c=e.c.slice()}return}if((m="number"==typeof e)&&0*e==0){y.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,u=e;u>=10;u/=10,c++);if(c>P)y.c=y.e=null;else{y.e=c;y.c=[e]}return}v=String(e)}else{if(!o.test(v=String(e)))return s(y,v,m);y.s=45==v.charCodeAt(0)?(v=v.slice(1),-1):1}if((c=v.indexOf("."))>-1)v=v.replace(".","");if((u=v.search(/e/i))>0){if(c<0)c=u;c+=+v.slice(u+1);v=v.substring(0,u)}else if(c<0)c=v.length}else{intCheck(t,2,x.length,"Base");if(10==t&&T){y=new BigNumber(e);return round(y,_+y.e+1,w)}v=String(e);if(m="number"==typeof e){if(0*e!=0)return s(y,v,m,t);y.s=1/e<0?(v=v.slice(1),-1):1;if(BigNumber.DEBUG&&v.replace(/^0\.0*|\./,"").length>15){throw Error(l+e)}}else{y.s=45===v.charCodeAt(0)?(v=v.slice(1),-1):1}i=x.slice(0,t);c=u=0;for(p=v.length;u<p;u++)if(i.indexOf(a=v.charAt(u))<0){if("."==a){if(u>c){c=p;continue}}else if(!n){if(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase())){n=true;u=-1;c=0;continue}}return s(y,String(e),m,t)}m=false;v=r(v,t,10,y.s);if((c=v.indexOf("."))>-1)v=v.replace(".","");else c=v.length}for(u=0;48===v.charCodeAt(u);u++);for(p=v.length;48===v.charCodeAt(--p););if(v=v.slice(u,++p)){p-=u;if(m&&BigNumber.DEBUG&&p>15&&(e>h||e!==d(e))){throw Error(l+y.s*e)}if((c=c-u-1)>P)y.c=y.e=null;else if(c<b)y.c=[y.e=0];else{y.e=c;y.c=[];u=(c+1)%f;if(c<0)u+=f;if(u<p){if(u)y.c.push(+v.slice(0,u));for(p-=f;u<p;)y.c.push(+v.slice(u,u+=f));u=f-(v=v.slice(u)).length}else{u-=p}for(;u--;v+="0");y.c.push(+v)}}else{y.c=[y.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,v,t);_=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);w=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,0,t);intCheck(r[1],0,v,t);y=r[0];g=r[1]}else{intCheck(r,-v,v,t);y=-(g=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-v,-1,t);intCheck(r[1],1,v,t);b=r[0];P=r[1]}else{intCheck(r,-v,v,t);if(r)b=-(P=r<0?-r:r);else{throw Error(c+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))S=r;else{S=!r;throw Error(c+"crypto unavailable")}else S=r;else{throw Error(c+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);C=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,v,t);k=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)j=r;else throw Error(c+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(c+t+" invalid: "+r)}T="0123456789"==r.slice(0,10);x=r}}else{throw Error(c+"Object expected: "+e)}return{DECIMAL_PLACES:_,ROUNDING_MODE:w,EXPONENTIAL_AT:[y,g],RANGE:[b,P],CRYPTO:S,MODULO_MODE:C,POW_PRECISION:k,FORMAT:j,ALPHABET:x}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,i=e.e,a=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===a||-1===a)&&i>=-v&&i<=v&&i===d(i)){if(0===s[0]){if(0===i&&1===s.length)return true;break e}t=(i+1)%f;if(t<1)t+=f;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=u||r!==d(r))break e}if(0!==r)return true}}}else if(null===s&&null===i&&(null===a||1===a||-1===a)){return true}throw Error(c+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,i.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,i.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return d(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,i,o,l,u=0,h=[],p=new BigNumber(a);if(null==e)e=_;else intCheck(e,0,v);o=n(e/f);if(S)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(o*=2));for(;u<o;){l=131072*r[u]+(r[u+1]>>>11);if(l>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[u]=s[0];r[u+1]=s[1]}else{h.push(l%1e14);u+=2}}u=o/2}else if(crypto.randomBytes){r=crypto.randomBytes(o*=7);for(;u<o;){l=(31&r[u])*281474976710656+1099511627776*r[u+1]+4294967296*r[u+2]+16777216*r[u+3]+(r[u+4]<<16)+(r[u+5]<<8)+r[u+6];if(l>=9e15)crypto.randomBytes(7).copy(r,u);else{h.push(l%1e14);u+=7}}u=o/7}else{S=false;throw Error(c+"crypto unavailable")}if(!S){for(;u<o;){l=t();if(l<9e15)h[u++]=l%1e14}}o=h[--u];e%=f;if(o&&e){l=m[f-e];h[u]=d(o/l)*l}for(;0===h[u];h.pop(),u--);if(u<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=f);for(u=1,l=h[0];l>=10;l/=10,u++);if(u<f)i-=f-u}p.e=i;p.c=h;return p}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var i,a=[0],o,n=0,d=e.length;for(;n<d;){for(o=a.length;o--;a[o]*=t);a[0]+=s.indexOf(e.charAt(n++));for(i=0;i<a.length;i++)if(a[i]>r-1){if(null==a[i+1])a[i+1]=0;a[i+1]+=a[i]/r|0;a[i]%=r}}return a.reverse()}return function(r,s,i,a,o){var n,d,c,l,u,f,h,m,p=r.indexOf("."),v=_,y=w;if(p>=0){l=k;k=0;r=r.replace(".","");m=new BigNumber(s);f=m.pow(r.length-p);k=l;m.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,i,e);m.e=m.c.length}h=toBaseOut(r,s,i,o?(n=x,e):(n=e,x));c=l=h.length;for(;0==h[--l];h.pop());if(!h[0])return n.charAt(0);if(p<0)--c;else{f.c=h;f.e=c;f.s=a;f=t(f,m,v,y,i);h=f.c;u=f.r;c=f.e}d=c+v+1;p=h[d];l=i/2;u=u||d<0||null!=h[d+1];u=y<4?(null!=p||u)&&(0==y||y==(f.s<0?3:2)):p>l||p==l&&(4==y||u||6==y&&1&h[d-1]||y==(f.s<0?8:7));if(d<1||!h[0])r=u?toFixedPoint(n.charAt(1),-v,n.charAt(0)):n.charAt(0);else{h.length=d;if(u){for(--i;++h[--d]>i;){h[d]=0;if(!d){++c;h=[1].concat(h)}}}for(l=h.length;!h[--l];);for(p=0,r="";p<=l;r+=n.charAt(h[p++]));r=toFixedPoint(r,c,n.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,i,a,o,n=0,d=e.length,c=t%p,l=t/p|0;for(e=e.slice();d--;){a=e[d]%p;o=e[d]/p|0;s=l*a+o*c;i=c*a+s%p*p+n;n=(i/r|0)+(s/p|0)+l*o;e[d]=i%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var i,a;if(r!=s)a=r>s?1:-1;else{for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}}return a}function subtract(e,t,r,s){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,i){var a,o,n,c,l,h,m,p,v,_,w,y,g,b,P,S,C,k=e.s==t.s?1:-1,j=e.c,x=t.c;if(!j||!j[0]||!x||!x[0]){return new BigNumber(e.s&&t.s&&(j?!x||j[0]!=x[0]:x)?j&&0==j[0]||!x?0*k:k/0:NaN)}p=new BigNumber(k);v=p.c=[];o=e.e-t.e;k=r+o+1;if(!i){i=u;o=bitFloor(e.e/f)-bitFloor(t.e/f);k=k/f|0}for(n=0;x[n]==(j[n]||0);n++);if(x[n]>(j[n]||0))o--;if(k<0){v.push(1);c=true}else{b=j.length;S=x.length;n=0;k+=2;l=d(i/(x[0]+1));if(l>1){x=multiply(x,l,i);j=multiply(j,l,i);S=x.length;b=j.length}g=S;_=j.slice(0,S);w=_.length;for(;w<S;_[w++]=0);C=x.slice();C=[0].concat(C);P=x[0];if(x[1]>=i/2)P++;do{l=0;a=compare(x,_,S,w);if(a<0){y=_[0];if(S!=w)y=y*i+(_[1]||0);l=d(y/P);if(l>1){if(l>=i)l=i-1;h=multiply(x,l,i);m=h.length;w=_.length;while(1==compare(h,_,m,w)){l--;subtract(h,S<m?C:x,m,i);m=h.length;a=1}}else{if(0==l)a=l=1;h=x.slice();m=h.length}if(m<w)h=[0].concat(h);subtract(_,h,w,i);w=_.length;if(-1==a){while(compare(x,_,S,w)<1){l++;subtract(_,S<w?C:x,w,i);w=_.length}}}else if(0===a){l++;_=[0]}v[n++]=l;if(_[0])_[w++]=j[g]||0;else{_=[j[g]];w=1}}while((g++<b||null!=_[0])&&k--)c=null!=_[0];if(!v[0])v.splice(0,1)}if(i==u){for(n=1,k=v[0];k>=10;k/=10,n++);round(p,r+(p.e=n+o*f-1)+1,s,c)}else{p.e=o;p.r=+c}return p}}();function format(e,t,r,s){var i,a,o,n,d;if(null==r)r=w;else intCheck(r,0,8);if(!e.c)return e.toString();i=e.c[0];o=e.e;if(null==t){d=coeffToString(e.c);d=1==s||2==s&&(o<=y||o>=g)?toExponential(d,o):toFixedPoint(d,o,"0")}else{e=round(new BigNumber(e),t,r);a=e.e;d=coeffToString(e.c);n=d.length;if(1==s||2==s&&(t<=a||a<=y)){for(;n<t;d+="0",n++);d=toExponential(d,a)}else{t-=o;d=toFixedPoint(d,a,"0");if(a+1>n){if(--t>0)for(d+=".";t--;d+="0");}else{t+=a-n;if(t>0){if(a+1==n)d+=".";for(;t--;d+="0");}}}}return e.s<0&&i?"-"+d:d}function maxOrMin(e,t){var r,s=1,i=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(i,r))i=r}else{i=r;break}}return i}function normalise(e,t,r){var s=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,s++);if((r=s+r*f-1)>P)e.c=e.e=null;else if(r<b)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,o,n,d){var l,u=n?o:o.replace(i,"");if(s.test(u))a.s=isNaN(u)?null:u<0?-1:1;else{if(!n){u=u.replace(e,function(e,t,r){l="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=l?e:t});if(d){l=d;u=u.replace(t,"$1").replace(r,"0.$1")}if(o!=u)return new BigNumber(u,l)}if(BigNumber.DEBUG){throw Error(c+"Not a"+(d?" base "+d:"")+" number: "+o)}a.s=null}a.c=a.e=null}}();function round(e,t,r,s){var i,a,o,c,l,h,p,v=e.c,_=m;if(v){e:{for(i=1,c=v[0];c>=10;c/=10,i++);a=t-i;if(a<0){a+=f;o=t;l=v[h=0];p=l/_[i-o-1]%10|0}else{h=n((a+1)/f);if(h>=v.length)if(s){for(;v.length<=h;v.push(0));l=p=0;i=1;a%=f;o=a-f+1}else{break e}else{l=c=v[h];for(i=1;c>=10;c/=10,i++);a%=f;o=a-f+i;p=o<0?0:l/_[i-o-1]%10|0}}s=s||t<0||null!=v[h+1]||(o<0?l:l%_[i-o-1]);s=r<4?(p||s)&&(0==r||r==(e.s<0?3:2)):p>5||5==p&&(4==r||s||6==r&&(a>0?o>0?l/_[i-o]:0:v[h-1])%10&1||r==(e.s<0?8:7));if(t<1||!v[0]){v.length=0;if(s){t-=e.e+1;v[0]=_[(f-t%f)%f];e.e=-t||0}else{v[0]=e.e=0}return e}if(0==a){v.length=h;c=1;h--}else{v.length=h+1;c=_[f-a];v[h]=o>0?d(l/_[i-o]%_[o])*c:0}if(s){for(;;){if(0==h){for(a=1,o=v[0];o>=10;o/=10,a++);o=v[0]+=c;for(c=1;o>=10;o/=10,c++);if(a!=c){e.e++;if(v[0]==u)v[0]=1}break}v[h]+=c;if(v[h]!=u)break;v[h--]=0;c=1}}for(a=v.length;0===v[--a];v.pop());}if(e.e>P)e.c=e.e=null;else if(e.e<b)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=y||r>=g?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}i.absoluteValue=i.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};i.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};i.decimalPlaces=i.dp=function(e,t){var r,s,i,a=this;if(null!=e){intCheck(e,0,v);if(null==t)t=w;else intCheck(t,0,8);return round(new BigNumber(a),e+a.e+1,t)}if(!(r=a.c))return null;s=((i=r.length-1)-bitFloor(this.e/f))*f;if(i=r[i])for(;i%10==0;i/=10,s--);if(s<0)s=0;return s};i.dividedBy=i.div=function(e,r){return t(this,new BigNumber(e,r),_,w)};i.dividedToIntegerBy=i.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};i.exponentiatedBy=i.pow=function(e,t){var r,s,i,o,l,u,h,m,p,v=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(c+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);u=e.e>14;if(!v.c||!v.c[0]||1==v.c[0]&&!v.e&&1==v.c.length||!e.c||!e.c[0]){p=new BigNumber(Math.pow(+valueOf(v),u?e.s*(2-isOdd(e)):+valueOf(e)));return t?p.mod(t):p}h=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!h&&v.isInteger()&&t.isInteger();if(s)v=v.mod(t)}else if(e.e>9&&(v.e>0||v.e<-1||(0==v.e?v.c[0]>1||u&&v.c[1]>=24e7:v.c[0]<8e13||u&&v.c[0]<=9999975e7))){o=(v.s<0&&isOdd(e),-0);if(v.e>-1)o=1/o;return new BigNumber(h?1/o:o)}else if(k)o=n(k/f+2);if(u){r=new BigNumber(.5);if(h)e.s=1;m=isOdd(e)}else{i=Math.abs(+valueOf(e));m=i%2}p=new BigNumber(a);for(;;){if(m){p=p.times(v);if(!p.c)break;if(o){if(p.c.length>o)p.c.length=o}else if(s)p=p.mod(t)}if(i){i=d(i/2);if(0===i)break;m=i%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)m=isOdd(e);else{i=+valueOf(e);if(0===i)break;m=i%2}}v=v.times(v);if(o){if(v.c&&v.c.length>o)v.c.length=o}else if(s)v=v.mod(t)}if(s)return p;if(h)p=a.div(p);return t?p.mod(t):o?round(p,k,w,l):p};i.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=w;else intCheck(e,0,8);return round(t,t.e+1,e)};i.isEqualTo=i.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};i.isFinite=function(){return!!this.c};i.isGreaterThan=i.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};i.isGreaterThanOrEqualTo=i.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};i.isInteger=function(){return!!this.c&&bitFloor(this.e/f)>this.c.length-2};i.isLessThan=i.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};i.isLessThanOrEqualTo=i.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};i.isNaN=function(){return!this.s};i.isNegative=function(){return this.s<0};i.isPositive=function(){return this.s>0};i.isZero=function(){return!!this.c&&0==this.c[0]};i.minus=function(e,t){var r,s,i,a,o=this,n=o.s;e=new BigNumber(e,t);t=e.s;if(!n||!t)return new BigNumber(NaN);if(n!=t){e.s=-t;return o.plus(e)}var d=o.e/f,c=e.e/f,l=o.c,h=e.c;if(!d||!c){if(!l||!h)return l?(e.s=-t,e):new BigNumber(h?o:NaN);if(!l[0]||!h[0]){return h[0]?(e.s=-t,e):new BigNumber(l[0]?o:-0)}}d=bitFloor(d);c=bitFloor(c);l=l.slice();if(n=d-c){if(a=n<0){n=-n;i=l}else{c=d;i=h}i.reverse();for(t=n;t--;i.push(0));i.reverse()}else{s=(a=(n=l.length)<(t=h.length))?n:t;for(n=t=0;t<s;t++)if(l[t]!=h[t]){a=l[t]<h[t];break}}if(a){i=l;l=h;h=i;e.s=-e.s}t=(s=h.length)-(r=l.length);if(t>0)for(;t--;l[r++]=0);t=u-1;for(;s>n;){if(l[--s]<h[s]){for(r=s;r&&!l[--r];l[r]=t);--l[r];l[s]+=u}l[s]-=h[s]}for(;0==l[0];l.splice(0,1),--c);if(!l[0]){e.s=3==w?-1:1;e.c=[e.e=0];return e}return normalise(e,l,c)};i.modulo=i.mod=function(e,r){var s,i,a=this;e=new BigNumber(e,r);if(a.c&&e.s&&(!e.c||e.c[0])){if(!e.c||a.c&&!a.c[0]){return new BigNumber(a)}}else{return new BigNumber(NaN)}if(9==C){i=e.s;e.s=1;s=t(a,e,0,3);e.s=i;s.s*=i}else{s=t(a,e,0,C)}e=a.minus(s.times(e));if(!e.c[0]&&1==C)e.s=a.s;return e};i.multipliedBy=i.times=function(e,t){var r,s,i,a,o,n,d,c,l,h,m,v,_,w,y,g=this,b=g.c,P=(e=new BigNumber(e,t)).c;if(!b||!P||!b[0]||!P[0]){if(g.s&&e.s&&(!b||b[0]||P)&&(!P||P[0]||b)){e.s*=g.s;if(b&&P){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(g.e/f)+bitFloor(e.e/f);e.s*=g.s;d=b.length;h=P.length;if(d<h){_=b;b=P;P=_;i=d;d=h;h=i}for(i=d+h,_=[];i--;_.push(0));w=u;y=p;for(i=h;--i>=0;){r=0;m=P[i]%y;v=P[i]/y|0;for(o=d,a=i+o;a>i;){c=b[--o]%y;l=b[o]/y|0;n=v*c+l*m;c=m*c+n%y*y+_[a]+r;r=(c/w|0)+(n/y|0)+v*l;_[a--]=c%w}_[a]=r}if(r)++s;else _.splice(0,1);return normalise(e,_,s)};i.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};i.plus=function(e,t){var r,s=this,i=s.s;e=new BigNumber(e,t);t=e.s;if(!i||!t)return new BigNumber(NaN);if(i!=t){e.s=-t;return s.minus(e)}var a=s.e/f,o=e.e/f,n=s.c,d=e.c;if(!a||!o){if(!n||!d)return new BigNumber(i/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*i)}a=bitFloor(a);o=bitFloor(o);n=n.slice();if(i=a-o){if(i>0){o=a;r=d}else{i=-i;r=n}r.reverse();for(;i--;r.push(0));r.reverse()}i=n.length;t=d.length;if(i-t<0){r=d;d=n;n=r;t=i}for(i=0;t;){i=(n[--t]=n[t]+d[t]+i)/u|0;n[t]=u===n[t]?0:n[t]%u}if(i){n=[i].concat(n);++o}return normalise(e,n,o)};i.precision=i.sd=function(e,t){var r,s,i,a=this;if(null!=e&&!!e!==e){intCheck(e,1,v);if(null==t)t=w;else intCheck(t,0,8);return round(new BigNumber(a),e,t)}if(!(r=a.c))return null;i=r.length-1;s=i*f+1;if(i=r[i]){for(;i%10==0;i/=10,s--);for(i=r[0];i>=10;i/=10,s++);}if(e&&a.e+1>s)s=a.e+1;return s};i.shiftedBy=function(e){intCheck(e,-h,h);return this.times("1e"+e)};i.squareRoot=i.sqrt=function(){var e,r,s,i,a,o=this,n=o.c,d=o.s,c=o.e,l=_+4,u=new BigNumber("0.5");if(1!==d||!n||!n[0]){return new BigNumber(!d||d<0&&(!n||n[0])?NaN:n?o:1/0)}d=Math.sqrt(+valueOf(o));if(0==d||d==1/0){r=coeffToString(n);if((r.length+c)%2==0)r+="0";d=Math.sqrt(+r);c=bitFloor((c+1)/2)-(c<0||c%2);if(d==1/0)r="5e"+c;else{r=d.toExponential();r=r.slice(0,r.indexOf("e")+1)+c}s=new BigNumber(r)}else{s=new BigNumber(d+"")}if(s.c[0]){c=s.e;d=c+l;if(d<3)d=0;for(;;){a=s;s=u.times(a.plus(t(o,a,l,1)));if(coeffToString(a.c).slice(0,d)===(r=coeffToString(s.c)).slice(0,d)){if(s.e<c)--d;r=r.slice(d-3,d+1);if("9999"!=r&&(i||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+_+2,1);e=!s.times(s).eq(o)}break}if(!i){round(a,a.e+_+2,0);if(a.times(a).eq(o)){s=a;break}}l+=4;d+=4;i=1}}}return round(s,s.e+_+1,w,e)};i.toExponential=function(e,t){if(null!=e){intCheck(e,0,v);e++}return format(this,e,t,1)};i.toFixed=function(e,t){if(null!=e){intCheck(e,0,v);e=e+this.e+1}return format(this,e,t)};i.toFormat=function(e,t,r){var s,i=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=j}else if("object"!=typeof r){throw Error(c+"Argument not an object: "+r)}s=i.toFixed(e,t);if(i.c){var a,o=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,l=r.groupSeparator||"",u=o[0],f=o[1],h=i.s<0,m=h?u.slice(1):u,p=m.length;if(d){a=n;n=d;d=a;p-=a}if(n>0&&p>0){a=p%n||n;u=m.substr(0,a);for(;a<p;a+=n)u+=l+m.substr(a,n);if(d>0)u+=l+m.slice(a);if(h)u="-"+u}s=f?u+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):u}return(r.prefix||"")+s+(r.suffix||"")};i.toFraction=function(e){var r,s,i,o,n,d,l,u,h,p,v,_,y=this,g=y.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(a)){throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!g)return new BigNumber(y);r=new BigNumber(a);h=s=new BigNumber(a);i=u=new BigNumber(a);_=coeffToString(g);n=r.e=_.length-y.e-1;r.c[0]=m[(d=n%f)<0?f+d:d];e=!e||l.comparedTo(r)>0?n>0?r:h:l;d=P;P=1/0;l=new BigNumber(_);u.c[0]=0;for(;;){p=t(l,r,0,1);o=s.plus(p.times(i));if(1==o.comparedTo(e))break;s=i;i=o;h=u.plus(p.times(o=h));u=o;r=l.minus(p.times(o=r));l=o}o=t(e.minus(s),i,0,1);u=u.plus(o.times(h));s=s.plus(o.times(i));u.s=h.s=y.s;n*=2;v=t(h,i,n,w).minus(y).abs().comparedTo(t(u,s,n,w).minus(y).abs())<1?[h,i]:[u,s];P=d;return v};i.toNumber=function(){return+valueOf(this)};i.toPrecision=function(e,t){if(null!=e)intCheck(e,1,v);return format(this,e,t,2)};i.toString=function(e){var t,s=this,i=s.s,a=s.e;if(null===a)if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}else{if(null==e)t=a<=y||a>=g?toExponential(coeffToString(s.c),a):toFixedPoint(coeffToString(s.c),a,"0");else if(10===e&&T){s=round(new BigNumber(s),_+a+1,w);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,x.length,"Base");t=r(toFixedPoint(coeffToString(s.c),a,"0"),10,e,i,true)}if(i<0&&s.c[0])t="-"+t}return t};i.valueOf=i.toJSON=function(){return valueOf(this)};i._isBigNumber=true;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,i=e.length,a=e[0]+"";for(;s<i;){t=e[s++]+"";r=f-t.length;for(;r--;t="0"+t);a+=t}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function compare(e,t){var r,s,i=e.c,a=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=i&&!i[0];s=a&&!a[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!i||!a)return s?0:!i^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=i.length)<(c=a.length)?d:c;for(o=0;o<n;o++)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==d(e)){throw Error(c+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/f)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{s=e.length;if(++t>s){for(i=r,t-=s;--t;i+=r);e+=i}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}a=clone();a["default"]=a.BigNumber=a;if(true)s=(function(){return a}).call(t,r,t,e),void 0!==s&&(e.exports=s)})(this)},"../../node_modules/@cardano-sdk/input-selection/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>i,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.Bip32Account=void 0;const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const d=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");class Bip32Account{async derivePublicKey(e){const t=await i(this,a,"f").derivePublicKeyAsync(this.extendedAccountPublicKeyHex,[e.role,e.index]);return d.Ed25519PublicKeyHex.fromBip32PublicKey(t)}async deriveAddress(e,t){const r={index:t,role:n.KeyRole.Stake};const s=await this.derivePublicKey({index:e.index,role:Number(e.type)});const a=await i(this,o,"f").hashAsync(s,d.BIP32_PUBLIC_KEY_HASH_LENGTH);const l=await this.derivePublicKey(r);const u=await i(this,o,"f").hashAsync(l,d.BIP32_PUBLIC_KEY_HASH_LENGTH);const f={hash:u,type:c.Cardano.CredentialType.KeyHash};const h=c.Cardano.BaseAddress.fromCredentials(this.chainId.networkId,{hash:a,type:c.Cardano.CredentialType.KeyHash},f).toAddress();const m=c.Cardano.RewardAddress.fromCredentials(this.chainId.networkId,f).toAddress();return{accountIndex:this.accountIndex,address:c.Cardano.PaymentAddress(h.toBech32()),networkId:this.chainId.networkId,rewardAccount:c.Cardano.RewardAccount(m.toBech32()),stakeKeyDerivationPath:r,...e}}static async createDefaultDependencies(){return{bip32Ed25519:await d.SodiumBip32Ed25519.create(),blake2b:d.blake2b}}static async fromAsyncKeyAgent(e,t){t||(t=await Bip32Account.createDefaultDependencies());return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()},t)}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r},i){a.set(this,void 0);o.set(this,void 0);this.extendedAccountPublicKeyHex=e;s(this,a,i.bip32Ed25519,"f");s(this,o,i.blake2b,"f");this.chainId=t;this.accountIndex=r}}t.Bip32Account=Bip32Account;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};var n=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var d=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var l,u,f;Object.defineProperty(t,"__esModule",{value:true});t.InMemoryKeyAgent=void 0;const h=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const m=o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));const p=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const v=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js");const _=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");const w=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js");const y=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js");const g=c(r("../../node_modules/lodash/uniqBy.js"));const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new m.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends w.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await d(this,l,"m",f).call(this);const i=await (0,_.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const a=await this.bip32Ed25519.derivePrivateKey(i,[t,e]);const o=await this.bip32Ed25519.getRawPrivateKey(a);const n=await this.bip32Ed25519.sign(o,r);const c=await this.bip32Ed25519.getPublicKey(o);return{publicKey:c,signature:n}}async signCip8Data(e){return await (0,v.cip30signData)(this,e)}async exportRootPrivateKey(){return await d(this,l,"m",f).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:i="",accountIndex:a=0,purpose:o=p.KeyPurpose.STANDARD},n){const d=(0,_.joinMnemonicWords)(r);const c=(0,_.validateMnemonic)(d);if(!c)throw new m.InvalidMnemonicError;const l=s.from((0,_.mnemonicWordsToEntropy)(r),"hex");const u=n.bip32Ed25519.fromBip39Entropy(l,i);const f=await getPassphraseRethrowTypedError(t);const h=await (0,y.emip3encrypt)(s.from(u,"hex"),f);const v=await (0,_.deriveAccountPrivateKey)({accountIndex:a,bip32Ed25519:n.bip32Ed25519,purpose:o,rootPrivateKey:u});const w=await n.bip32Ed25519.getBip32PublicKey(v);return new InMemoryKeyAgent({accountIndex:a,chainId:e,encryptedRootPrivateKeyBytes:[...h],extendedAccountPublicKey:w,getPassphrase:t,purpose:o},n)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:s},{additionalKeyPaths:i=[]}={}){const a=e.hash();const o=e.toCore();const n=(await h.Ed25519PublicKey.fromHex(await this.derivePublicKey(_.DREP_KEY_DERIVATION_PATH)).hash()).hex();const d=(0,_.ownSignatureKeyPaths)(o,r,t,n,s);const c=(0,g.default)([...d,...i],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(c.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},a);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,_.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:p.KeyAgentType.InMemory},r);l.add(this);u.set(this,void 0);n(this,u,e,"f")}}t.InMemoryKeyAgent=InMemoryKeyAgent;u=new WeakMap,l=new WeakSet,f=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>d(this,u,"f").call(this,e));let r;try{r=await (0,y.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(i){throw new m.AuthenticationError("Failed to decrypt root private key",i)}return h.Bip32PrivateKeyHex(s.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentBase=void 0;const d=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js");const l=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");class KeyAgentBase{get serializableData(){return i(this,a,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return i(this,o,"f")}get purpose(){return this.serializableData.purpose||d.KeyPurpose.STANDARD}async deriveAddress(e,t){return i(this,n,"f").deriveAddress(e,t)}async derivePublicKey(e){return i(this,n,"f").derivePublicKey(e)}constructor(e,{bip32Ed25519:t}){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f");s(this,n,new c.Bip32Account(e,{bip32Ed25519:t,blake2b:l.blake2b}),"f")}}t.KeyAgentBase=KeyAgentBase;a=new WeakMap,o=new WeakMap,n=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.cip30signData=t.createCoseKey=t.getAddressBytes=t.Cip30DataSignError=t.Cip30DataSignErrorCode=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const u=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js");const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js");var h;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(h=t.Cip30DataSignErrorCode||(t.Cip30DataSignErrorCode={}));class Cip30DataSignError extends l.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}t.Cip30DataSignError=Cip30DataSignError;const getAddressBytes=e=>{const t=c.Cardano.Address.fromString(e);if(!t){throw new Cip30DataSignError(h.AddressNotPK,"Invalid address")}return s.from(t.toBytes(),"hex")};t.getAddressBytes=getAddressBytes;const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const s=e.startsWith("stake");if(s){const i=t.find(({rewardAccount:t})=>t===e);if(!i)throw new Cip30DataSignError(h.ProofGeneration,"Unknown reward address");return i.stakeKeyDerivationPath||f.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var a;const o=c.Cardano.Address.fromString(e);if((null==o?void 0:o.getType())===c.Cardano.AddressType.EnterpriseKey&&(null===(a=null==o?void 0:o.getProps().paymentPart)||void 0===a?void 0:a.hash)===r){return f.DREP_KEY_DERIVATION_PATH}}const n=t.find(({address:t})=>t===e);if(!n){throw new Cip30DataSignError(h.ProofGeneration,"Unknown address")}return{index:n.index,role:n.type}};const createSigStructureHeaders=e=>{const t=d.HeaderMap.new();t.set_key_id(e);t.set_header(u.CoseLabel.address,d.CBORValue.new_bytes(e));t.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,c.util.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(h.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=d.COSEKey.new(d.Label.from_key_type(d.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(d.Label.from_algorithm_id(d.AlgorithmId.EdDSA));r.set_header(u.CoseLabel.crv,d.CBORValue.from_label(d.Label.from_curve_type(d.CurveType.Ed25519)));r.set_header(u.CoseLabel.x,d.CBORValue.new_bytes(s.from(t,"hex")));return r};t.createCoseKey=createCoseKey;const cip30signData=async(e,{knownAddresses:r,signWith:i,payload:a})=>{const o=n.Ed25519PublicKey.fromHex(await e.derivePublicKey(f.DREP_KEY_DERIVATION_PATH)).hash().hex();const l=(0,t.getAddressBytes)(i);const u=await getDerivationPath(i,r,o);const h=d.COSESign1Builder.new(d.Headers.new(d.ProtectedHeaderMap.new(createSigStructureHeaders(l)),d.HeaderMap.new()),s.from(a,"hex"),false);const m=h.make_data_to_sign();const{signature:p,publicKey:v}=await signSigStructure(e,u,m);const _=h.build(s.from(p,"hex"));const w=(0,t.createCoseKey)(l,v);return{key:c.util.bytesToHex(w.to_bytes()),signature:c.util.bytesToHex(_.to_bytes())}};t.cip30signData=cip30signData},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/cip30signData.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/util.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CoseLabel=void 0;const s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing.js");t.CoseLabel={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.emip3decrypt=t.emip3encrypt=t.createPbkdf2Key=void 0;const a=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/browser.js");const o=i(r("../../node_modules/chacha/browser.js"));const n=i(r("../../node_modules/get-random-values/index.js"));const d=32;const c=12;const l=19162;const u=32;const f=16;const h=s.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,s)=>(0,a.pbkdf2)(e,t,l,d,"sha512",(e,t)=>{if(e)return s(e);r(t)}));t.createPbkdf2Key=createPbkdf2Key;const emip3encrypt=async(e,r)=>{const i=new Uint8Array(u);(0,n.default)(i);const a=await (0,t.createPbkdf2Key)(r,i);const d=new Uint8Array(c);(0,n.default)(d);const l=o.default.createCipher(a,s.from(d));l.setAAD(h,{plaintextLength:e.length});const f=l.update(e);const m=l.final();const p=l.getAuthTag();return s.concat([i,d,p,f,m])};t.emip3encrypt=emip3encrypt;const emip3decrypt=async(e,r)=>{const i=e.slice(0,u);const a=e.slice(u,u+c);const n=e.slice(u+c,u+c+f);const d=e.slice(u+c+f);const l=await (0,t.createPbkdf2Key)(r,i);const m=o.default.createDecipher(l,s.from(a));m.setAuthTag(s.from(n));m.setAAD(h);return s.concat([m.update(s.from(d)),m.final()])};t.emip3decrypt=emip3decrypt},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AuthenticationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.AuthenticationError=AuthenticationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HwMappingError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.HwMappingError=HwMappingError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidMnemonicError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}t.InvalidMnemonicError=InvalidMnemonicError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidSerializableDataError=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends s.CustomError{constructor(e){super(formatMessage(e))}}t.InvalidSerializableDataError=InvalidSerializableDataError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProofGenerationError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.ProofGenerationError=ProofGenerationError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TransportError=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}t.TransportError=TransportError},"../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/AuthenticationError.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidMnemonicError.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/InvalidSerializableDataError.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/TransportError.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/HwMappingError.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/ProofGenerationError.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.cip8=t.util=t.errors=void 0;t.errors=a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/KeyAgentBase.js"),t);o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/InMemoryKeyAgent.js"),t);t.util=a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/emip3.js"),t);o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js"),t);t.cip8=a(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/cip8/index.js"));o(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/Bip32Account.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TxInId=t.CommunicationType=t.DeviceType=t.AddressType=t.KeyPurpose=t.KeyRole=t.KeyAgentType=t.Cip1852PathLevelIndexes=t.CardanoKeyConst=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");var i;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(i=t.CardanoKeyConst||(t.CardanoKeyConst={}));var a;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(a=t.Cip1852PathLevelIndexes||(t.Cip1852PathLevelIndexes={}));var o;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(o=t.KeyAgentType||(t.KeyAgentType={}));var n;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(n=t.KeyRole||(t.KeyRole={}));var d;(function(e){e[e["STANDARD"]=s.HD_WALLET_CIP_ID]="STANDARD";e[e["MULTI_SIG"]=s.MULTISIG_CIP_ID]="MULTI_SIG"})(d=t.KeyPurpose||(t.KeyPurpose={}));var c;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(c=t.AddressType||(t.AddressType={}));var l;(function(e){e["Ledger"]="Ledger"})(l=t.DeviceType||(t.DeviceType={}));var u;(function(e){e["Web"]="web";e["Node"]="node"})(u=t.CommunicationType||(t.CommunicationType={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`;t.TxInId=TxInId},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;Object.defineProperty(t,"__esModule",{value:true});t.KeyAgentTransactionSigner=void 0;const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/errors/index.js");const d=1;class KeyAgentTransactionSigner{async sign(e){const t=await i(this,a,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[i(this,o,"f")]});if(t.size!==d)throw new n.ProofGenerationError(`Invalid number of signatures. Expected ${d} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){a.set(this,void 0);o.set(this,void 0);s(this,a,e,"f");s(this,o,t,"f")}}t.KeyAgentTransactionSigner=KeyAgentTransactionSigner;a=new WeakMap,o=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.validateMnemonic=t.mnemonicWordsToEntropy=t.entropyToMnemonicWords=t.joinMnemonicWords=t.generateMnemonicWords=t.mnemonicToWords=void 0;const o=a(r("../../node_modules/bip39/src/index.js"));const mnemonicToWords=e=>e.split(" ");t.mnemonicToWords=mnemonicToWords;const generateMnemonicWords=(e=256)=>(0,t.mnemonicToWords)(o.generateMnemonic(e));t.generateMnemonicWords=generateMnemonicWords;const joinMnemonicWords=e=>e.join(" ");t.joinMnemonicWords=joinMnemonicWords;const entropyToMnemonicWords=e=>(0,t.mnemonicToWords)(o.entropyToMnemonic(e));t.entropyToMnemonicWords=entropyToMnemonicWords;const mnemonicWordsToEntropy=e=>o.mnemonicToEntropy((0,t.joinMnemonicWords)(e));t.mnemonicWordsToEntropy=mnemonicWordsToEntropy;t.validateMnemonic=o.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createAsyncKeyAgent=void 0;const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}};t.createAsyncKeyAgent=createAsyncKeyAgent},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;Object.defineProperty(t,"__esModule",{value:true});t.createBip32Ed25519Witnesser=t.Bip32Ed25519Witnesser=void 0;const o=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const n=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js");class Bip32Ed25519Witnesser{async witness(e,t,r){var s,d;const c=e.toCore();const l=e.getId();const u=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,n.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:c.body}):await Bip32Ed25519Witnesser.getSignatures(i(this,a,"f"),e.body(),t,r);const f={auxiliaryData:c.auxiliaryData,body:c.body,id:l,isValid:e.isValid(),witness:{...c.witness,signatures:new Map([...u.entries(),...(null===(s=c.witness)||void 0===s?void 0:null===(d=s.signatures)||void 0===d?void 0:d.entries())||[]])}};var h;return{cbor:o.Serialization.TxCBOR.serialize(f),context:{handleResolutions:null!==(h=t.handleResolutions)&&void 0!==h?h:[]},tx:f}}async signData(e){return i(this,a,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const i=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const a of null==s?void 0:s.extraSigners){const o=await a.sign(t);i.set(o.pubKey,o.signature)}}return i}constructor(e){a.set(this,void 0);s(this,a,e,"f")}}t.Bip32Ed25519Witnesser=Bip32Ed25519Witnesser;a=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e);t.createBip32Ed25519Witnesser=createBip32Ed25519Witnesser},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureStakeKeys=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:i,paymentKeyIndex:a=0})=>{const o=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));i.debug(`Stake keys requested: ${r}; got ${o.size}`);const n=[];for(let d=0;o.size<r;d++)if(!o.has(d)){const c=await e.deriveAddress({index:a,type:s.AddressType.External},d);n.push(c);i.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);o.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...o.values()]}};t.ensureStakeKeys=ensureStakeKeys},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/bip39.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createAsyncKeyAgent.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/KeyAgentTransactionSigner.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ensureStakeKeys.js"),t);i(r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/createWitnesser.js"),t)},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.stakeKeyPathFromGroupedAddress=t.paymentKeyPathFromGroupedAddress=t.accountKeyDerivationPathToBip32Path=t.deriveAccountPrivateKey=t.toEd25519KeyPair=t.DREP_KEY_DERIVATION_PATH=t.STAKE_KEY_DERIVATION_PATH=t.harden=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const harden=e=>2147483648+e;t.harden=harden;t.STAKE_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.Stake};t.DREP_KEY_DERIVATION_PATH={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});t.toEd25519KeyPair=toEd25519KeyPair;const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:r,bip32Ed25519:i,purpose:a=s.KeyPurpose.STANDARD})=>await i.derivePrivateKey(e,[(0,t.harden)(a),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(r)]);t.deriveAccountPrivateKey=deriveAccountPrivateKey;const accountKeyDerivationPathToBip32Path=(e,{index:r,role:i},a=s.CardanoKeyConst.PURPOSE)=>[(0,t.harden)(a),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e),i,r];t.accountKeyDerivationPathToBip32Path=accountKeyDerivationPathToBip32Path;const paymentKeyPathFromGroupedAddress=e=>[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.type,e.index];t.paymentKeyPathFromGroupedAddress=paymentKeyPathFromGroupedAddress;const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[(0,t.harden)(s.CardanoKeyConst.PURPOSE),(0,t.harden)(s.CardanoKeyConst.COIN_TYPE),(0,t.harden)(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]};t.stakeKeyPathFromGroupedAddress=stakeKeyPathFromGroupedAddress},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js":function(e,t,r){"use strict";var s,i,a,o;var n=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))n(t,e,r)}d(t,e);return t};var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ownSignatureKeyPaths=t.createTxInKeyPathMap=t.getDRepCredentialKeyPaths=t.getVotingProcedureKeyPaths=t.checkStakeCredentialCertificates=void 0;const u=c(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const f=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/types.js");const h=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const m=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/key.js");const p=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const v=l(r("../../node_modules/lodash/isEqual.js"));const _=l(r("../../node_modules/lodash/uniqBy.js"));const w=l(r("../../node_modules/lodash/uniqWith.js"));const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const i=t.find(e=>e.rewardAccount===s.stakeAddress);if(i)r.derivationPaths.push(i.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case h.Cardano.CertificateType.VoteDelegation:case h.Cardano.CertificateType.StakeVoteDelegation:case h.Cardano.CertificateType.StakeRegistrationDelegation:case h.Cardano.CertificateType.VoteRegistrationDelegation:case h.Cardano.CertificateType.StakeVoteRegistrationDelegation:case h.Cardano.CertificateType.Registration:case h.Cardano.CertificateType.Unregistration:case h.Cardano.CertificateType.StakeDeregistration:case h.Cardano.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===h.Cardano.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const i=t.find(e=>e.rewardAccount===s);if(i)r.derivationPaths.push(i.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===h.Cardano.CertificateType.MIR)if(e.kind===h.Cardano.MirCertificateKind.ToStakeCreds){const s=t.find(t=>u.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const n of t){const d=checkStakeKeyHashCertificate(n,e);(s=r).requiresForeignSignatures||(s.requiresForeignSignatures=d.requiresForeignSignatures);r.derivationPaths.push(...d.derivationPaths);const c=checkPoolRegistrationCertificate(n,e);(i=r).requiresForeignSignatures||(i.requiresForeignSignatures=c.requiresForeignSignatures);r.derivationPaths.push(...c.derivationPaths);const l=checkPoolRetirementCertificate(n,e);(a=r).requiresForeignSignatures||(a.requiresForeignSignatures=l.requiresForeignSignatures);r.derivationPaths.push(...l.derivationPaths);const u=checkMirCertificate(n,e);(o=r).requiresForeignSignatures||(o.requiresForeignSignatures=u.requiresForeignSignatures);r.derivationPaths.push(...u.derivationPaths)}r.derivationPaths=(0,w.default)(r.derivationPaths,v.default);return r};t.checkStakeCredentialCertificates=checkStakeCredentialCertificates;const getSignersData=e=>(0,_.default)(e,"rewardAccount").map(e=>{const t=h.Cardano.RewardAccount.toHash(e.rewardAccount);const r=h.Cardano.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,r)=>{let s=false;const i=[];const a=getSignersData(e);const o=checkWithdrawals(r,a);s||(s=o.requiresForeignSignatures);i.push(...o.derivationPaths);const n=(0,t.checkStakeCredentialCertificates)(a,r);s||(s=n.requiresForeignSignatures);i.push(...n.derivationPaths);return{derivationPaths:new Set(i),requiresForeignSignatures:s}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const s={derivationPaths:[],requiresForeignSignatures:false};const i=getSignersData(e);for(const{voter:a}of r.votingProcedures||[]){switch(a.__typename){case h.Cardano.VoterType.dRepKeyHash:if(t&&a.credential.hash===t)s.derivationPaths.push(m.DREP_KEY_DERIVATION_PATH);else s.requiresForeignSignatures=true;break;case h.Cardano.VoterType.stakePoolKeyHash:{const o=i.find(e=>e.stakeKeyHash===a.credential.hash);if(o)s.derivationPaths.push(o.derivationPath);else s.requiresForeignSignatures=true;break}default:s.requiresForeignSignatures=true;break}}return s};t.getVotingProcedureKeyPaths=getVotingProcedureKeyPaths;const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const i of e){var a,o;const n=null===(o=null===(a=h.Cardano.Address.fromBech32(i.address))||void 0===a?void 0:a.asBase())||void 0===o?void 0:o.getPaymentCredential().hash;const d=h.Cardano.RewardAccount.toHash(i.rewardAccount);if(n&&n.toString()===s)r.push({index:i.index,role:Number(i.type)});if(d&&i.stakeKeyDerivationPath&&d.toString()===s)r.push(i.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&h.Cardano.RewardAccount.toHash(e.rewardAccount)===t?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,s;const i=null===(s=null===(r=h.Cardano.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential();if((null==i?void 0:i.hash)===t){return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=combineSignatureChecks(r,checkStakeCredential(s,e.keyHash));r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!h.Cardano.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case h.Cardano.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case h.Cardano.NativeScriptKind.RequireAllOf:case h.Cardano.NativeScriptKind.RequireAnyOf:case h.Cardano.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case h.Cardano.NativeScriptKind.RequireTimeBefore:case h.Cardano.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t.certificates||[])if(s.__typename===h.Cardano.CertificateType.UnregisterDelegateRepresentative||s.__typename===h.Cardano.CertificateType.UpdateDelegateRepresentative||s.__typename===h.Cardano.CertificateType.RegisterDelegateRepresentative)if(s.dRepCredential.type!==h.Cardano.CredentialType.ScriptHash&&e&&s.dRepCredential.hash===e)r.derivationPaths=[m.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};t.getDRepCredentialKeyPaths=getDRepCredentialKeyPaths;const createTxInKeyPathMap=async(e,t,r)=>{const s={};const i=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(i.map(async e=>{const i=await r.resolveInput(e);if(!i)return;const a=t.find(({address:e})=>e===i.address);if(!a)return;s[(0,f.TxInId)(e)]={index:a.index,role:Number(a.type)}}));return s};t.createTxInKeyPathMap=createTxInKeyPathMap;const ownSignatureKeyPaths=(e,r,s,i,a)=>{const o=Object.values(s).filter(p.isNotNil);return(0,w.default)([...o,...getStakeCredentialKeyPaths(r,e).derivationPaths,...(0,t.getDRepCredentialKeyPaths)({dRepKeyHash:i,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(r,e.requiredExtraSignatures),...(0,t.getVotingProcedureKeyPaths)({dRepKeyHash:i,groupedAddresses:r,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(r,a).derivationPaths],v.default)};t.ownSignatureKeyPaths=ownSignatureKeyPaths},"../../node_modules/@cardano-sdk/key-management/dist/cjs/util/stubSignTransaction.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.stubSignTransaction=void 0;const n=a(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/util/ownSignatureKeyPaths.js");const l=o(r("../../node_modules/lodash/uniqWith.js"));const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>n.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:s,scripts:i},signTransactionOptions:{extraSigners:a,additionalKeyPaths:o=[]}={}})=>{const u=n.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=(0,l.default)([...(0,c.ownSignatureKeyPaths)(e,t,r,s,i),...o],d.deepEquals);const h=f.length+((null==a?void 0:a.length)||0);const m=new Map;for(let p=0;p<h;++p)m.set(randomPublicKey(),u);return m};t.stubSignTransaction=stubSignTransaction},"../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Account:()=>Bip32Account});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/strategies/SodiumBip32Ed25519.js");var o=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h;class Bip32Account{async derivePublicKey(e){const t=await __classPrivateFieldGet(this,f,"f").derivePublicKeyAsync(this.extendedAccountPublicKeyHex,[e.role,e.index]);return i.Ed25519PublicKeyHex.fromBip32PublicKey(t)}async deriveAddress(e,t){const r={index:t,role:s.KeyRole.Stake};const a=await this.derivePublicKey({index:e.index,role:Number(e.type)});const o=await __classPrivateFieldGet(this,h,"f").hashAsync(a,i.BIP32_PUBLIC_KEY_HASH_LENGTH);const f=await this.derivePublicKey(r);const m=await __classPrivateFieldGet(this,h,"f").hashAsync(f,i.BIP32_PUBLIC_KEY_HASH_LENGTH);const p={hash:m,type:n.CredentialType.KeyHash};const v=d.BaseAddress.fromCredentials(this.chainId.networkId,{hash:o,type:n.CredentialType.KeyHash},p).toAddress();const _=c.RewardAddress.fromCredentials(this.chainId.networkId,p).toAddress();return{accountIndex:this.accountIndex,address:l.PaymentAddress(v.toBech32()),networkId:this.chainId.networkId,rewardAccount:u.RewardAccount(_.toBech32()),stakeKeyDerivationPath:r,...e}}static async createDefaultDependencies(){return{bip32Ed25519:await a.SodiumBip32Ed25519.create(),blake2b:o.blake2b}}static async fromAsyncKeyAgent(e,t){t||(t=await Bip32Account.createDefaultDependencies());return new Bip32Account({accountIndex:await e.getAccountIndex(),chainId:await e.getChainId(),extendedAccountPublicKey:await e.getExtendedAccountPublicKey()},t)}constructor({extendedAccountPublicKey:e,chainId:t,accountIndex:r},s){f.set(this,void 0);h.set(this,void 0);this.extendedAccountPublicKeyHex=e;__classPrivateFieldSet(this,f,s.bip32Ed25519,"f");__classPrivateFieldSet(this,h,s.blake2b,"f");this.chainId=t;this.accountIndex=r}}f=new WeakMap,h=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyAgent:()=>InMemoryKeyAgent});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var m=r("../../node_modules/lodash/uniqBy.js");var p=r("../../node_modules/buffer/index.js")["Buffer"];var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var v,_,w;const getPassphraseRethrowTypedError=async e=>{try{return await e()}catch(t){throw new a.AuthenticationError("Failed to enter passphrase",t)}};class InMemoryKeyAgent extends f.KeyAgentBase{async signBlob({index:e,role:t},r){const s=await __classPrivateFieldGet(this,v,"m",w).call(this);const i=await (0,c.deriveAccountPrivateKey)({accountIndex:this.accountIndex,bip32Ed25519:this.bip32Ed25519,purpose:this.purpose,rootPrivateKey:s});const a=await this.bip32Ed25519.derivePrivateKey(i,[t,e]);const o=await this.bip32Ed25519.getRawPrivateKey(a);const n=await this.bip32Ed25519.sign(o,r);const d=await this.bip32Ed25519.getPublicKey(o);return{publicKey:d,signature:n}}async signCip8Data(e){return await (0,d.cip30signData)(this,e)}async exportRootPrivateKey(){return await __classPrivateFieldGet(this,v,"m",w).call(this,true)}static async fromBip39MnemonicWords({chainId:e,getPassphrase:t,mnemonicWords:r,mnemonic2ndFactorPassphrase:s="",accountIndex:i=0,purpose:a=n.KeyPurpose.STANDARD},d){const u=(0,l.joinMnemonicWords)(r);const f=(0,l.validateMnemonic)(u);if(!f)throw new o.InvalidMnemonicError;const m=p.from((0,l.mnemonicWordsToEntropy)(r),"hex");const v=d.bip32Ed25519.fromBip39Entropy(m,s);const _=await getPassphraseRethrowTypedError(t);const w=await (0,h.emip3encrypt)(p.from(v,"hex"),_);const y=await (0,c.deriveAccountPrivateKey)({accountIndex:i,bip32Ed25519:d.bip32Ed25519,purpose:a,rootPrivateKey:v});const g=await d.bip32Ed25519.getBip32PublicKey(y);return new InMemoryKeyAgent({accountIndex:i,chainId:e,encryptedRootPrivateKeyBytes:[...w],extendedAccountPublicKey:g,getPassphrase:t,purpose:a},d)}async signTransaction(e,{txInKeyPathMap:t,knownAddresses:r,scripts:i},{additionalKeyPaths:a=[]}={}){const o=e.hash();const n=e.toCore();const d=(await s.Ed25519PublicKey.fromHex(await this.derivePublicKey(c.DREP_KEY_DERIVATION_PATH)).hash()).hex();const l=(0,u.ownSignatureKeyPaths)(n,r,t,d,i);const f=m([...l,...a],({role:e,index:t})=>`${e}.${t}`);return new Map(await Promise.all(f.map(async({role:e,index:t})=>{const{publicKey:r,signature:s}=await this.signBlob({index:t,role:e},o);return[r,s]})))}async exportExtendedKeyPair(e){const t=await this.exportRootPrivateKey();const r=e.map(e=>(0,c.harden)(e));const s=await this.bip32Ed25519.derivePrivateKey(t,r);return{skey:s,vkey:await this.bip32Ed25519.getBip32PublicKey(s)}}constructor({getPassphrase:e,...t},r){super({...t,__typename:n.KeyAgentType.InMemory},r);v.add(this);_.set(this,void 0);__classPrivateFieldSet(this,_,e,"f")}}_=new WeakMap,v=new WeakSet,w=async function _InMemoryKeyAgent_decryptRootPrivateKey(e){const t=await getPassphraseRethrowTypedError(()=>__classPrivateFieldGet(this,_,"f").call(this,e));let r;try{r=await (0,h.emip3decrypt)(new Uint8Array(this.serializableData.encryptedRootPrivateKeyBytes),t)}catch(s){throw new a.AuthenticationError("Failed to decrypt root private key",s)}return i.Bip32PrivateKeyHex(p.from(r).toString("hex"))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js":(e,t,r)=>{"use strict";r.d(t,{KeyAgentBase:()=>KeyAgentBase});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js");var a=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var o,n,d;class KeyAgentBase{get serializableData(){return __classPrivateFieldGet(this,o,"f")}get extendedAccountPublicKey(){return this.serializableData.extendedAccountPublicKey}get chainId(){return this.serializableData.chainId}get accountIndex(){return this.serializableData.accountIndex}get bip32Ed25519(){return __classPrivateFieldGet(this,n,"f")}get purpose(){return this.serializableData.purpose||s.KeyPurpose.STANDARD}async deriveAddress(e,t){return __classPrivateFieldGet(this,d,"f").deriveAddress(e,t)}async derivePublicKey(e){return __classPrivateFieldGet(this,d,"f").derivePublicKey(e)}constructor(e,{bip32Ed25519:t}){o.set(this,void 0);n.set(this,void 0);d.set(this,void 0);__classPrivateFieldSet(this,o,e,"f");__classPrivateFieldSet(this,n,t,"f");__classPrivateFieldSet(this,d,new i.Bip32Account(e,{bip32Ed25519:t,blake2b:a.blake2b}),"f")}}o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js":(e,t,r)=>{"use strict";r.d(t,{Cip30DataSignError:()=>Cip30DataSignError,Cip30DataSignErrorCode:()=>u,cip30signData:()=>cip30signData,createCoseKey:()=>createCoseKey,getAddressBytes:()=>getAddressBytes});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/util/misc/encoding.js");var n=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var d=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var l=r("../../node_modules/buffer/index.js")["Buffer"];var u;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined"})(u||(u={}));class Cip30DataSignError extends n.ComposableError{constructor(e,t,r){super(`DataSignError code: ${e}`,r);this.code=e;this.info=t}}const getAddressBytes=e=>{const t=a.Address.fromString(e);if(!t){throw new Cip30DataSignError(u.AddressNotPK,"Invalid address")}return l.from(t.toBytes(),"hex")};const isPaymentAddress=e=>e.startsWith("addr");const getDerivationPath=async(e,t,r)=>{const s=e.startsWith("stake");if(s){const i=t.find(({rewardAccount:t})=>t===e);if(!i)throw new Cip30DataSignError(u.ProofGeneration,"Unknown reward address");return i.stakeKeyDerivationPath||c.STAKE_KEY_DERIVATION_PATH}if(isPaymentAddress(e)){var o;const n=a.Address.fromString(e);if((null==n?void 0:n.getType())===a.AddressType.EnterpriseKey&&(null===(o=null==n?void 0:n.getProps().paymentPart)||void 0===o?void 0:o.hash)===r){return c.DREP_KEY_DERIVATION_PATH}}const d=t.find(({address:t})=>t===e);if(!d){throw new Cip30DataSignError(u.ProofGeneration,"Unknown address")}return{index:d.index,role:d.type}};const createSigStructureHeaders=e=>{const t=i.HeaderMap.new();t.set_key_id(e);t.set_header(d.CoseLabel.address,i.CBORValue.new_bytes(e));t.set_algorithm_id(i.Label.from_algorithm_id(i.AlgorithmId.EdDSA));return t};const signSigStructure=(e,t,r)=>{try{return e.signBlob(t,o.bytesToHex(r.to_bytes()))}catch(s){throw new Cip30DataSignError(u.UserDeclined,"Failed to sign",s)}};const createCoseKey=(e,t)=>{const r=i.COSEKey.new(i.Label.from_key_type(i.KeyType.OKP));r.set_key_id(e);r.set_algorithm_id(i.Label.from_algorithm_id(i.AlgorithmId.EdDSA));r.set_header(d.CoseLabel.crv,i.CBORValue.from_label(i.Label.from_curve_type(i.CurveType.Ed25519)));r.set_header(d.CoseLabel.x,i.CBORValue.new_bytes(l.from(t,"hex")));return r};const cip30signData=async(e,{knownAddresses:t,signWith:r,payload:a})=>{const n=s.Ed25519PublicKey.fromHex(await e.derivePublicKey(c.DREP_KEY_DERIVATION_PATH)).hash().hex();const d=getAddressBytes(r);const u=await getDerivationPath(r,t,n);const f=i.COSESign1Builder.new(i.Headers.new(i.ProtectedHeaderMap.new(createSigStructureHeaders(d)),i.HeaderMap.new()),l.from(a,"hex"),false);const h=f.make_data_to_sign();const{signature:m,publicKey:p}=await signSigStructure(e,u,h);const v=f.build(l.from(m,"hex"));const _=createCoseKey(d,p);return{key:o.bytesToHex(_.to_bytes()),signature:o.bytesToHex(v.to_bytes())}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js":(e,t,r)=>{"use strict";r.d(t,{CoseLabel:()=>i});var s=r("../../node_modules/@emurgo/cardano-message-signing-browser/cardano_message_signing_bg.js");const i={address:s.Label.new_text("address"),crv:s.Label.new_int(s.Int.new_i32(-1)),x:s.Label.new_int(s.Int.new_i32(-2))}},"../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js":(e,t,r)=>{"use strict";r.d(t,{createPbkdf2Key:()=>createPbkdf2Key,emip3decrypt:()=>emip3decrypt,emip3encrypt:()=>emip3encrypt});var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/browser.js");var i=r("../../node_modules/chacha/browser.js");var a=r("../../node_modules/get-random-values/index.js");var o=r("../../node_modules/buffer/index.js")["Buffer"];const n=32;const d=12;const c=19162;const l=32;const u=16;const f=o.from("","hex");const createPbkdf2Key=async(e,t)=>await new Promise((r,i)=>(0,s.pbkdf2)(e,t,c,n,"sha512",(e,t)=>{if(e)return i(e);r(t)}));const emip3encrypt=async(e,t)=>{const r=new Uint8Array(l);a(r);const s=await createPbkdf2Key(t,r);const n=new Uint8Array(d);a(n);const c=i.createCipher(s,o.from(n));c.setAAD(f,{plaintextLength:e.length});const u=c.update(e);const h=c.final();const m=c.getAuthTag();return o.concat([r,n,m,u,h])};const emip3decrypt=async(e,t)=>{const r=e.slice(0,l);const s=e.slice(l,l+d);const a=e.slice(l+d,l+d+u);const n=e.slice(l+d+u);const c=await createPbkdf2Key(t,r);const h=i.createDecipher(c,o.from(s));h.setAuthTag(o.from(a));h.setAAD(f);return o.concat([h.update(o.from(n)),h.final()])}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js":(e,t,r)=>{"use strict";r.d(t,{AuthenticationError:()=>AuthenticationError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Authentication failure${t}`};class AuthenticationError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js":(e,t,r)=>{"use strict";r.d(t,{HwMappingError:()=>HwMappingError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Hardware data mapping failure${t}`};class HwMappingError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js":(e,t,r)=>{"use strict";r.d(t,{InvalidMnemonicError:()=>InvalidMnemonicError});var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidMnemonicError extends s.CustomError{constructor(){super();this.message="Invalid Mnemonic";this.name="InvalidMnemonicError"}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js":(e,t,r)=>{"use strict";r.d(t,{TransportError:()=>TransportError});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Transport failure${t}`};class TransportError extends s.ComposableError{constructor(e,t){super(formatMessage(e),t)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{AddressType:()=>k.AddressType,Bip32Account:()=>T.Bip32Account,CardanoKeyConst:()=>k.CardanoKeyConst,Cip1852PathLevelIndexes:()=>k.Cip1852PathLevelIndexes,CommunicationType:()=>k.CommunicationType,DeviceType:()=>k.DeviceType,InMemoryKeyAgent:()=>h.InMemoryKeyAgent,KeyAgentBase:()=>f.KeyAgentBase,KeyAgentType:()=>k.KeyAgentType,KeyPurpose:()=>k.KeyPurpose,KeyRole:()=>k.KeyRole,TxInId:()=>k.TxInId,cip8:()=>a,createPbkdf2Key:()=>C.createPbkdf2Key,emip3decrypt:()=>C.emip3decrypt,emip3encrypt:()=>C.emip3encrypt,errors:()=>s,util:()=>i});var s={};r.r(s);r.d(s,{AuthenticationError:()=>o.AuthenticationError,HwMappingError:()=>l.HwMappingError,InvalidMnemonicError:()=>n.InvalidMnemonicError,InvalidSerializableDataError:()=>InvalidSerializableDataError,ProofGenerationError:()=>ProofGenerationError,TransportError:()=>c.TransportError});var i={};r.r(i);r.d(i,{Bip32Ed25519Witnesser:()=>S.Bip32Ed25519Witnesser,DREP_KEY_DERIVATION_PATH:()=>v.DREP_KEY_DERIVATION_PATH,KeyAgentTransactionSigner:()=>KeyAgentTransactionSigner,STAKE_KEY_DERIVATION_PATH:()=>v.STAKE_KEY_DERIVATION_PATH,accountKeyDerivationPathToBip32Path:()=>v.accountKeyDerivationPathToBip32Path,checkStakeCredentialCertificates:()=>_.checkStakeCredentialCertificates,createAsyncKeyAgent:()=>p.createAsyncKeyAgent,createBip32Ed25519Witnesser:()=>S.createBip32Ed25519Witnesser,createTxInKeyPathMap:()=>_.createTxInKeyPathMap,deriveAccountPrivateKey:()=>v.deriveAccountPrivateKey,ensureStakeKeys:()=>P.ensureStakeKeys,entropyToMnemonicWords:()=>m.entropyToMnemonicWords,generateMnemonicWords:()=>m.generateMnemonicWords,getDRepCredentialKeyPaths:()=>_.getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>_.getVotingProcedureKeyPaths,harden:()=>v.harden,joinMnemonicWords:()=>m.joinMnemonicWords,mnemonicToWords:()=>m.mnemonicToWords,mnemonicWordsToEntropy:()=>m.mnemonicWordsToEntropy,ownSignatureKeyPaths:()=>_.ownSignatureKeyPaths,paymentKeyPathFromGroupedAddress:()=>v.paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>v.stakeKeyPathFromGroupedAddress,stubSignTransaction:()=>w.stubSignTransaction,toEd25519KeyPair:()=>v.toEd25519KeyPair,validateMnemonic:()=>m.validateMnemonic});var a={};r.r(a);r.d(a,{Cip30DataSignError:()=>j.Cip30DataSignError,Cip30DataSignErrorCode:()=>j.Cip30DataSignErrorCode,CoseLabel:()=>x.CoseLabel,cip30signData:()=>j.cip30signData,createCoseKey:()=>j.createCoseKey,getAddressBytes:()=>j.getAddressBytes});var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/AuthenticationError.js");var n=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/InvalidMnemonicError.js");var d=r("../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs");const formatMessage=e=>{const t=e?`: ${e}`:"";return`Invalid serializable key agent data${t}`};class InvalidSerializableDataError extends d.CustomError{constructor(e){super(formatMessage(e))}}var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/TransportError.js");var l=r("../../node_modules/@cardano-sdk/key-management/dist/esm/errors/HwMappingError.js");var u=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const ProofGenerationError_formatMessage=e=>{const t=e?`: ${e}`:"";return`Proof generation failure${t}`};class ProofGenerationError extends u.ComposableError{constructor(e,t){super(ProofGenerationError_formatMessage(e),t)}}var f=r("../../node_modules/@cardano-sdk/key-management/dist/esm/KeyAgentBase.js");var h=r("../../node_modules/@cardano-sdk/key-management/dist/esm/InMemoryKeyAgent.js");var m=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js");var p=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js");var v=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var _=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var w=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var y,g;const b=1;class KeyAgentTransactionSigner{async sign(e){const t=await __classPrivateFieldGet(this,y,"f").signTransaction(e,{knownAddresses:[],txInKeyPathMap:{}},{additionalKeyPaths:[__classPrivateFieldGet(this,g,"f")]});if(t.size!==b)throw new ProofGenerationError(`Invalid number of signatures. Expected ${b} and got ${t.size}`);const[r]=t.keys();const[s]=t.values();return{pubKey:r,signature:s}}constructor(e,t){y.set(this,void 0);g.set(this,void 0);__classPrivateFieldSet(this,y,e,"f");__classPrivateFieldSet(this,g,t,"f")}}y=new WeakMap,g=new WeakMap;var P=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var S=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js");var C=r("../../node_modules/@cardano-sdk/key-management/dist/esm/emip3.js");var k=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var j=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/cip30signData.js");var x=r("../../node_modules/@cardano-sdk/key-management/dist/esm/cip8/util.js");var T=r("../../node_modules/@cardano-sdk/key-management/dist/esm/Bip32Account.js")},"../../node_modules/@cardano-sdk/key-management/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{AddressType:()=>l,CardanoKeyConst:()=>a,Cip1852PathLevelIndexes:()=>o,CommunicationType:()=>f,DeviceType:()=>u,KeyAgentType:()=>n,KeyPurpose:()=>c,KeyRole:()=>d,TxInId:()=>TxInId});const s=1854;const i=1852;var a;(function(e){e[e["PURPOSE"]=1852]="PURPOSE";e[e["COIN_TYPE"]=1815]="COIN_TYPE"})(a||(a={}));var o;(function(e){e[e["PURPOSE"]=0]="PURPOSE";e[e["COIN_TYPE"]=1]="COIN_TYPE";e[e["ACCOUNT"]=2]="ACCOUNT";e[e["ROLE"]=3]="ROLE";e[e["INDEX"]=4]="INDEX"})(o||(o={}));var n;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor"})(n||(n={}));var d;(function(e){e[e["External"]=0]="External";e[e["Internal"]=1]="Internal";e[e["Stake"]=2]="Stake";e[e["DRep"]=3]="DRep"})(d||(d={}));var c;(function(e){e[e["STANDARD"]=i]="STANDARD";e[e["MULTI_SIG"]=s]="MULTI_SIG"})(c||(c={}));var l;(function(e){e[e["Internal"]=1]="Internal";e[e["External"]=0]="External"})(l||(l={}));var u;(function(e){e["Ledger"]="Ledger"})(u||(u={}));var f;(function(e){e["Web"]="web";e["Node"]="node"})(f||(f={}));const TxInId=({txId:e,index:t})=>`${e}_${t}`},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/bip39.js":(e,t,r)=>{"use strict";r.d(t,{entropyToMnemonicWords:()=>entropyToMnemonicWords,generateMnemonicWords:()=>generateMnemonicWords,joinMnemonicWords:()=>joinMnemonicWords,mnemonicToWords:()=>mnemonicToWords,mnemonicWordsToEntropy:()=>mnemonicWordsToEntropy,validateMnemonic:()=>i});var s=r("../../node_modules/bip39/src/index.js");const mnemonicToWords=e=>e.split(" ");const generateMnemonicWords=(e=256)=>mnemonicToWords(s.generateMnemonic(e));const joinMnemonicWords=e=>e.join(" ");const entropyToMnemonicWords=e=>mnemonicToWords(s.entropyToMnemonic(e));const mnemonicWordsToEntropy=e=>s.mnemonicToEntropy(joinMnemonicWords(e));const i=s.validateMnemonic},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createAsyncKeyAgent.js":(e,t,r)=>{"use strict";r.d(t,{createAsyncKeyAgent:()=>createAsyncKeyAgent});const createAsyncKeyAgent=(e,t)=>{return{deriveAddress(t,r){return e.deriveAddress(t,r)},derivePublicKey:e.derivePublicKey.bind(e),getAccountIndex:()=>Promise.resolve(e.accountIndex),getBip32Ed25519:()=>Promise.resolve(e.bip32Ed25519),getChainId:()=>Promise.resolve(e.chainId),getExtendedAccountPublicKey:()=>Promise.resolve(e.extendedAccountPublicKey),shutdown(){null==t?void 0:t()},signBlob:e.signBlob.bind(e),signCip8Data:e.signCip8Data.bind(e),signTransaction:e.signTransaction.bind(e)}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/createWitnesser.js":(e,t,r)=>{"use strict";r.d(t,{Bip32Ed25519Witnesser:()=>Bip32Ed25519Witnesser,createBip32Ed25519Witnesser:()=>createBip32Ed25519Witnesser});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a;class Bip32Ed25519Witnesser{async witness(e,t,r){var o,n;const d=e.toCore();const c=e.getId();const l=(null==r?void 0:r.stubSign)!==void 0&&r.stubSign?await (0,i.stubSignTransaction)({context:t,signTransactionOptions:r,txBody:d.body}):await Bip32Ed25519Witnesser.getSignatures(__classPrivateFieldGet(this,a,"f"),e.body(),t,r);const u={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:e.isValid(),witness:{...d.witness,signatures:new Map([...l.entries(),...(null===(o=d.witness)||void 0===o?void 0:null===(n=o.signatures)||void 0===n?void 0:n.entries())||[]])}};var f;return{cbor:s.TxCBOR.serialize(u),context:{handleResolutions:null!==(f=t.handleResolutions)&&void 0!==f?f:[]},tx:u}}async signData(e){return __classPrivateFieldGet(this,a,"f").signCip8Data(e)}static async getSignatures(e,t,r,s){const i=await e.signTransaction(t,r,s);if(null==s?void 0:s.extraSigners){for(const a of null==s?void 0:s.extraSigners){const o=await a.sign(t);i.set(o.pubKey,o.signature)}}return i}constructor(e){a.set(this,void 0);__classPrivateFieldSet(this,a,e,"f")}}a=new WeakMap;const createBip32Ed25519Witnesser=e=>new Bip32Ed25519Witnesser(e)},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js":(e,t,r)=>{"use strict";r.d(t,{ensureStakeKeys:()=>ensureStakeKeys});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const ensureStakeKeys=async({bip32Account:e,knownAddresses:t,count:r,logger:i,paymentKeyIndex:a=0})=>{const o=new Map(t.filter(({stakeKeyDerivationPath:e})=>{return(null==e?void 0:e.role)===s.KeyRole.Stake&&(null==e?void 0:e.index)!==void 0}).map(({rewardAccount:e,stakeKeyDerivationPath:t})=>[t.index,e]));i.debug(`Stake keys requested: ${r}; got ${o.size}`);const n=[];for(let d=0;o.size<r;d++)if(!o.has(d)){const c=await e.deriveAddress({index:a,type:s.AddressType.External},d);n.push(c);i.debug(`No derivation with stake key index ${d} exists. Derived a new stake key ${c.rewardAccount}.`);o.set(d,c.rewardAccount)}return{newAddresses:n,rewardAccounts:[...o.values()]}}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js":(e,t,r)=>{"use strict";r.d(t,{DREP_KEY_DERIVATION_PATH:()=>a,STAKE_KEY_DERIVATION_PATH:()=>i,accountKeyDerivationPathToBip32Path:()=>accountKeyDerivationPathToBip32Path,deriveAccountPrivateKey:()=>deriveAccountPrivateKey,harden:()=>harden,paymentKeyPathFromGroupedAddress:()=>paymentKeyPathFromGroupedAddress,stakeKeyPathFromGroupedAddress:()=>stakeKeyPathFromGroupedAddress,toEd25519KeyPair:()=>toEd25519KeyPair});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");const harden=e=>2147483648+e;const i={index:0,role:s.KeyRole.Stake};const a={index:0,role:s.KeyRole.DRep};const toEd25519KeyPair=async(e,t)=>({skey:await t.getRawPrivateKey(e.skey),vkey:await t.getRawPublicKey(e.vkey)});const deriveAccountPrivateKey=async({rootPrivateKey:e,accountIndex:t,bip32Ed25519:r,purpose:i=s.KeyPurpose.STANDARD})=>await r.derivePrivateKey(e,[harden(i),harden(s.CardanoKeyConst.COIN_TYPE),harden(t)]);const accountKeyDerivationPathToBip32Path=(e,{index:t,role:r},i=s.CardanoKeyConst.PURPOSE)=>[harden(i),harden(s.CardanoKeyConst.COIN_TYPE),harden(e),r,t];const paymentKeyPathFromGroupedAddress=e=>[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.type,e.index];const stakeKeyPathFromGroupedAddress=e=>{if(!(null==e?void 0:e.stakeKeyDerivationPath))return null;return[harden(s.CardanoKeyConst.PURPOSE),harden(s.CardanoKeyConst.COIN_TYPE),harden(e.accountIndex),e.stakeKeyDerivationPath.role,e.stakeKeyDerivationPath.index]}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js":(e,t,r)=>{"use strict";r.d(t,{checkStakeCredentialCertificates:()=>checkStakeCredentialCertificates,createTxInKeyPathMap:()=>createTxInKeyPathMap,getDRepCredentialKeyPaths:()=>getDRepCredentialKeyPaths,getVotingProcedureKeyPaths:()=>getVotingProcedureKeyPaths,ownSignatureKeyPaths:()=>ownSignatureKeyPaths});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var u=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var f=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var h=r("../../node_modules/lodash/isEqual.js");var m=r("../../node_modules/lodash/uniqBy.js");var p=r("../../node_modules/lodash/uniqWith.js");var v,_,w,y;const checkWithdrawals=({withdrawals:e},t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e){for(const s of e){const i=t.find(e=>e.rewardAccount===s.stakeAddress);if(i)r.derivationPaths.push(i.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkStakeKeyHashCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};switch(e.__typename){case a.CertificateType.VoteDelegation:case a.CertificateType.StakeVoteDelegation:case a.CertificateType.StakeRegistrationDelegation:case a.CertificateType.VoteRegistrationDelegation:case a.CertificateType.StakeVoteRegistrationDelegation:case a.CertificateType.Registration:case a.CertificateType.Unregistration:case a.CertificateType.StakeDeregistration:case a.CertificateType.StakeDelegation:{const s=t.find(t=>e.stakeCredential.type===o.CredentialType.KeyHash&&t.stakeKeyHash===e.stakeCredential.hash);if(s)r.derivationPaths=[s.derivationPath];else r.requiresForeignSignatures=true}}return r};const checkPoolRegistrationCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===a.CertificateType.PoolRegistration){for(const s of e.poolParameters.owners){const i=t.find(e=>e.rewardAccount===s);if(i)r.derivationPaths.push(i.derivationPath);else r.requiresForeignSignatures=true}}return r};const checkPoolRetirementCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===a.CertificateType.PoolRetirement){const s=t.find(t=>t.poolId===e.poolId);if(s)r.derivationPaths.push(s.derivationPath);else r.requiresForeignSignatures=true}return r};const checkMirCertificate=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(e.__typename===a.CertificateType.MIR)if(e.kind===a.MirCertificateKind.ToStakeCreds){const i=t.find(t=>s.Hash28ByteBase16(t.stakeKeyHash)===e.stakeCredential.hash);if(i)r.derivationPaths.push(i.derivationPath);else r.requiresForeignSignatures=true}else{r.requiresForeignSignatures=true}return r};const checkStakeCredentialCertificates=(e,{certificates:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length)){return r}for(const s of t){const i=checkStakeKeyHashCertificate(s,e);(v=r).requiresForeignSignatures||(v.requiresForeignSignatures=i.requiresForeignSignatures);r.derivationPaths.push(...i.derivationPaths);const a=checkPoolRegistrationCertificate(s,e);(_=r).requiresForeignSignatures||(_.requiresForeignSignatures=a.requiresForeignSignatures);r.derivationPaths.push(...a.derivationPaths);const o=checkPoolRetirementCertificate(s,e);(w=r).requiresForeignSignatures||(w.requiresForeignSignatures=o.requiresForeignSignatures);r.derivationPaths.push(...o.derivationPaths);const n=checkMirCertificate(s,e);(y=r).requiresForeignSignatures||(y.requiresForeignSignatures=n.requiresForeignSignatures);r.derivationPaths.push(...n.derivationPaths)}r.derivationPaths=p(r.derivationPaths,h);return r};const getSignersData=e=>m(e,"rewardAccount").map(e=>{const t=n.RewardAccount.toHash(e.rewardAccount);const r=d.PoolId.fromKeyHash(t);return{derivationPath:e.stakeKeyDerivationPath,poolId:r,rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>void 0!==e.derivationPath);const getStakeCredentialKeyPaths=(e,t)=>{let r=false;const s=[];const i=getSignersData(e);const a=checkWithdrawals(t,i);r||(r=a.requiresForeignSignatures);s.push(...a.derivationPaths);const o=checkStakeCredentialCertificates(i,t);r||(r=o.requiresForeignSignatures);s.push(...o.derivationPaths);return{derivationPaths:new Set(s),requiresForeignSignatures:r}};const getVotingProcedureKeyPaths=({groupedAddresses:e,dRepKeyHash:t,txBody:r})=>{const s={derivationPaths:[],requiresForeignSignatures:false};const i=getSignersData(e);for(const{voter:a}of r.votingProcedures||[]){switch(a.__typename){case c.VoterType.dRepKeyHash:if(t&&a.credential.hash===t)s.derivationPaths.push(u.DREP_KEY_DERIVATION_PATH);else s.requiresForeignSignatures=true;break;case c.VoterType.stakePoolKeyHash:{const o=i.find(e=>e.stakeKeyHash===a.credential.hash);if(o)s.derivationPaths.push(o.derivationPath);else s.requiresForeignSignatures=true;break}default:s.requiresForeignSignatures=true;break}}return s};const getRequiredSignersKeyPaths=(e,t)=>{const r=[];if(!t)return r;for(const s of t){for(const i of e){var a,d;const c=null===(d=null===(a=o.Address.fromBech32(i.address))||void 0===a?void 0:a.asBase())||void 0===d?void 0:d.getPaymentCredential().hash;const l=n.RewardAccount.toHash(i.rewardAccount);if(c&&c.toString()===s)r.push({index:i.index,role:Number(i.type)});if(l&&i.stakeKeyDerivationPath&&l.toString()===s)r.push(i.stakeKeyDerivationPath)}}return r};const checkStakeCredential=(e,t)=>e.stakeKeyDerivationPath&&n.RewardAccount.toHash(e.rewardAccount)===t?{derivationPaths:[e.stakeKeyDerivationPath],requiresForeignSignatures:false}:{derivationPaths:[],requiresForeignSignatures:true};const checkPaymentCredential=(e,t)=>{var r,s;const i=null===(s=null===(r=o.Address.fromBech32(e.address))||void 0===r?void 0:r.asBase())||void 0===s?void 0:s.getPaymentCredential();if((null==i?void 0:i.hash)===t){return{derivationPaths:[{index:e.index,role:Number(e.type)}],requiresForeignSignatures:false}}return{derivationPaths:[],requiresForeignSignatures:true}};const combineSignatureChecks=(e,t)=>({derivationPaths:[...e.derivationPaths,...t.derivationPaths],requiresForeignSignatures:e.requiresForeignSignatures||t.requiresForeignSignatures});const processSignatureScript=(e,t)=>{let r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t){if(s.stakeKeyDerivationPath)r=combineSignatureChecks(r,checkStakeCredential(s,e.keyHash));r=combineSignatureChecks(r,checkPaymentCredential(s,e.keyHash))}return r};const getNativeScriptKeyPaths=(e,t)=>{const r={derivationPaths:[],requiresForeignSignatures:false};if(!(null==t?void 0:t.length))return r;const processScript=t=>{if(!l.isNativeScript(t)){return{derivationPaths:[],requiresForeignSignatures:false}}switch(t.kind){case l.NativeScriptKind.RequireSignature:return processSignatureScript(t,e);case l.NativeScriptKind.RequireAllOf:case l.NativeScriptKind.RequireAnyOf:case l.NativeScriptKind.RequireNOf:{const r=t;return r.scripts.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),{derivationPaths:[],requiresForeignSignatures:false})}case l.NativeScriptKind.RequireTimeBefore:case l.NativeScriptKind.RequireTimeAfter:return{derivationPaths:[],requiresForeignSignatures:false}}};return t.reduce((e,t)=>combineSignatureChecks(e,processScript(t)),r)};const getDRepCredentialKeyPaths=({dRepKeyHash:e,txBody:t})=>{const r={derivationPaths:[],requiresForeignSignatures:false};for(const s of t.certificates||[])if(s.__typename===a.CertificateType.UnregisterDelegateRepresentative||s.__typename===a.CertificateType.UpdateDelegateRepresentative||s.__typename===a.CertificateType.RegisterDelegateRepresentative)if(s.dRepCredential.type!==o.CredentialType.ScriptHash&&e&&s.dRepCredential.hash===e)r.derivationPaths=[u.DREP_KEY_DERIVATION_PATH];else r.requiresForeignSignatures=true;return r};const createTxInKeyPathMap=async(e,t,r)=>{const s={};const a=[...e.inputs,...e.collaterals?e.collaterals:[]];await Promise.all(a.map(async e=>{const a=await r.resolveInput(e);if(!a)return;const o=t.find(({address:e})=>e===a.address);if(!o)return;s[(0,i.TxInId)(e)]={index:o.index,role:Number(o.type)}}));return s};const ownSignatureKeyPaths=(e,t,r,s,i)=>{const a=Object.values(r).filter(f.isNotNil);return p([...a,...getStakeCredentialKeyPaths(t,e).derivationPaths,...getDRepCredentialKeyPaths({dRepKeyHash:s,txBody:e}).derivationPaths,...getRequiredSignersKeyPaths(t,e.requiredExtraSignatures),...getVotingProcedureKeyPaths({dRepKeyHash:s,groupedAddresses:t,txBody:e}).derivationPaths,...getNativeScriptKeyPaths(t,i).derivationPaths],h)}},"../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js":(e,t,r)=>{"use strict";r.d(t,{stubSignTransaction:()=>stubSignTransaction});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var o=r("../../node_modules/lodash/uniqWith.js");const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>s.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const stubSignTransaction=async({txBody:e,context:{knownAddresses:t,txInKeyPathMap:r,dRepKeyHashHex:n,scripts:d},signTransactionOptions:{extraSigners:c,additionalKeyPaths:l=[]}={}})=>{const u=s.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const f=o([...(0,a.ownSignatureKeyPaths)(e,t,r,n,d),...l],i.deepEquals);const h=f.length+((null==c?void 0:c.length)||0);const m=new Map;for(let p=0;p<h;++p)m.set(randomPublicKey(),u);return m}},"../../node_modules/@cardano-sdk/key-management/node_modules/create-hash/make-hash.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=4;var a=new s(i);a.fill(0);var o=8;var n=16;function toArray(e){if(e.length%i!==0){var t=e.length+(i-e.length%i);e=s.concat([e,a],t)}var r=new Array(e.length>>>2);for(var o=0,n=0;o<e.length;o+=i,n++)r[n]=e.readInt32LE(o);return r}e.exports=function hash(e,t){var r=t(toArray(e),e.length*o);e=new s(n);for(var i=0;i<r.length;i++)e.writeInt32LE(r[i],i<<2,true);return e}},"../../node_modules/@cardano-sdk/key-management/node_modules/create-hash/md5.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/create-hash/make-hash.js");function core_md5(e,t){e[t>>5]|=128<<t%32;e[(t+64>>>9<<4)+14]=t;var r=1732584193;var s=-271733879;var i=-1732584194;var a=271733878;for(var o=0;o<e.length;o+=16){var n=r;var d=s;var c=i;var l=a;r=md5_ff(r,s,i,a,e[o+0],7,-680876936);a=md5_ff(a,r,s,i,e[o+1],12,-389564586);i=md5_ff(i,a,r,s,e[o+2],17,606105819);s=md5_ff(s,i,a,r,e[o+3],22,-1044525330);r=md5_ff(r,s,i,a,e[o+4],7,-176418897);a=md5_ff(a,r,s,i,e[o+5],12,1200080426);i=md5_ff(i,a,r,s,e[o+6],17,-1473231341);s=md5_ff(s,i,a,r,e[o+7],22,-45705983);r=md5_ff(r,s,i,a,e[o+8],7,1770035416);a=md5_ff(a,r,s,i,e[o+9],12,-1958414417);i=md5_ff(i,a,r,s,e[o+10],17,-42063);s=md5_ff(s,i,a,r,e[o+11],22,-1990404162);r=md5_ff(r,s,i,a,e[o+12],7,1804603682);a=md5_ff(a,r,s,i,e[o+13],12,-40341101);i=md5_ff(i,a,r,s,e[o+14],17,-1502002290);s=md5_ff(s,i,a,r,e[o+15],22,1236535329);r=md5_gg(r,s,i,a,e[o+1],5,-165796510);a=md5_gg(a,r,s,i,e[o+6],9,-1069501632);i=md5_gg(i,a,r,s,e[o+11],14,643717713);s=md5_gg(s,i,a,r,e[o+0],20,-373897302);r=md5_gg(r,s,i,a,e[o+5],5,-701558691);a=md5_gg(a,r,s,i,e[o+10],9,38016083);i=md5_gg(i,a,r,s,e[o+15],14,-660478335);s=md5_gg(s,i,a,r,e[o+4],20,-405537848);r=md5_gg(r,s,i,a,e[o+9],5,568446438);a=md5_gg(a,r,s,i,e[o+14],9,-1019803690);i=md5_gg(i,a,r,s,e[o+3],14,-187363961);s=md5_gg(s,i,a,r,e[o+8],20,1163531501);r=md5_gg(r,s,i,a,e[o+13],5,-1444681467);a=md5_gg(a,r,s,i,e[o+2],9,-51403784);i=md5_gg(i,a,r,s,e[o+7],14,1735328473);s=md5_gg(s,i,a,r,e[o+12],20,-1926607734);r=md5_hh(r,s,i,a,e[o+5],4,-378558);a=md5_hh(a,r,s,i,e[o+8],11,-2022574463);i=md5_hh(i,a,r,s,e[o+11],16,1839030562);s=md5_hh(s,i,a,r,e[o+14],23,-35309556);r=md5_hh(r,s,i,a,e[o+1],4,-1530992060);a=md5_hh(a,r,s,i,e[o+4],11,1272893353);i=md5_hh(i,a,r,s,e[o+7],16,-155497632);s=md5_hh(s,i,a,r,e[o+10],23,-1094730640);r=md5_hh(r,s,i,a,e[o+13],4,681279174);a=md5_hh(a,r,s,i,e[o+0],11,-358537222);i=md5_hh(i,a,r,s,e[o+3],16,-722521979);s=md5_hh(s,i,a,r,e[o+6],23,76029189);r=md5_hh(r,s,i,a,e[o+9],4,-640364487);a=md5_hh(a,r,s,i,e[o+12],11,-421815835);i=md5_hh(i,a,r,s,e[o+15],16,530742520);s=md5_hh(s,i,a,r,e[o+2],23,-995338651);r=md5_ii(r,s,i,a,e[o+0],6,-198630844);a=md5_ii(a,r,s,i,e[o+7],10,1126891415);i=md5_ii(i,a,r,s,e[o+14],15,-1416354905);s=md5_ii(s,i,a,r,e[o+5],21,-57434055);r=md5_ii(r,s,i,a,e[o+12],6,1700485571);a=md5_ii(a,r,s,i,e[o+3],10,-1894986606);i=md5_ii(i,a,r,s,e[o+10],15,-1051523);s=md5_ii(s,i,a,r,e[o+1],21,-2054922799);r=md5_ii(r,s,i,a,e[o+8],6,1873313359);a=md5_ii(a,r,s,i,e[o+15],10,-30611744);i=md5_ii(i,a,r,s,e[o+6],15,-1560198380);s=md5_ii(s,i,a,r,e[o+13],21,1309151649);r=md5_ii(r,s,i,a,e[o+4],6,-145523070);a=md5_ii(a,r,s,i,e[o+11],10,-1120210379);i=md5_ii(i,a,r,s,e[o+2],15,718787259);s=md5_ii(s,i,a,r,e[o+9],21,-343485551);r=safe_add(r,n);s=safe_add(s,d);i=safe_add(i,c);a=safe_add(a,l)}return[r,s,i,a]}function md5_cmn(e,t,r,s,i,a){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(s,a)),i),r)}function md5_ff(e,t,r,s,i,a,o){return md5_cmn(t&r|~t&s,e,t,i,a,o)}function md5_gg(e,t,r,s,i,a,o){return md5_cmn(t&s|r&~s,e,t,i,a,o)}function md5_hh(e,t,r,s,i,a,o){return md5_cmn(t^r^s,e,t,i,a,o)}function md5_ii(e,t,r,s,i,a,o){return md5_cmn(r^(t|~s),e,t,i,a,o)}function safe_add(e,t){var r=(65535&e)+(65535&t);var s=(e>>16)+(t>>16)+(r>>16);return s<<16|65535&r}function bit_rol(e,t){return e<<t|e>>>32-t}e.exports=function md5(e){return s(e,core_md5)}},"../../node_modules/@cardano-sdk/key-management/node_modules/hash-base/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=r("../../node_modules/readable-stream/readable-browser.js").Transform;var a=r("../../node_modules/inherits/inherits_browser.js");function HashBase(e){i.call(this);this._block=new s(e);this._blockSize=e;this._blockOffset=0;this._length=[0,0,0,0];this._finalized=false}a(HashBase,i);HashBase.prototype._transform=function(e,t,r){var i=null;try{if("buffer"!==t)e=new s(e,t);this.update(e)}catch(a){i=a}r(i)};HashBase.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(r){t=r}e(t)};HashBase.prototype.update=function(e,t){if(!s.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");if(!s.isBuffer(e))e=new s(e,t||"binary");var r=this._block;var i=0;while(this._blockOffset+e.length-i>=this._blockSize){for(var a=this._blockOffset;a<this._blockSize;)r[a++]=e[i++];this._update();this._blockOffset=0}while(i<e.length)r[this._blockOffset++]=e[i++];for(var o=0,n=8*e.length;n>0;++o){this._length[o]+=n;n=this._length[o]/4294967296|0;if(n>0)this._length[o]-=4294967296*n}return this};HashBase.prototype._update=function(e){throw new Error("_update is not implemented")};HashBase.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=true;var t=this._digest();if(void 0!==e)t=t.toString(e);return t};HashBase.prototype._digest=function(){throw new Error("_digest is not implemented")};e.exports=HashBase},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/browser.js":(e,t,r)=>{"use strict";t.pbkdf2=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/async.js");t.pbkdf2Sync=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/sync-browser.js")},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/async.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/precondition.js");var a=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/default-encoding.js");var o=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/sync-browser.js");var n=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/to-buffer.js");var d;var c=r.g.crypto&&r.g.crypto.subtle;var l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"};var u=[];var f;function getNextTick(){if(f){return f}f=r.g.process&&r.g.process.nextTick?r.g.process.nextTick:r.g.queueMicrotask?r.g.queueMicrotask:r.g.setImmediate?r.g.setImmediate:r.g.setTimeout;return f}function browserPbkdf2(e,t,r,i,a){return c.importKey("raw",e,{name:"PBKDF2"},false,["deriveBits"]).then(function(e){return c.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:a}},e,i<<3)}).then(function(e){return s.from(e)})}function checkNative(e){if(r.g.process&&!r.g.process.browser){return Promise.resolve(false)}if(!c||!c.importKey||!c.deriveBits){return Promise.resolve(false)}if(void 0!==u[e]){return u[e]}d=d||s.alloc(8);var t=browserPbkdf2(d,d,10,128,e).then(function(){return true},function(){return false});u[e]=t;return t}function resolvePromise(e,t){e.then(function(e){getNextTick()(function(){t(null,e)})},function(e){getNextTick()(function(){t(e)})})}e.exports=function(e,t,s,d,c,u){if("function"==typeof c){u=c;c=void 0}c=c||"sha1";var f=l[c.toLowerCase()];if(!f||"function"!=typeof r.g.Promise){getNextTick()(function(){var r;try{r=o(e,t,s,d,c)}catch(i){u(i);return}u(null,r)});return}i(s,d);e=n(e,a,"Password");t=n(t,a,"Salt");if("function"!=typeof u){throw new Error("No callback provided to pbkdf2")}resolvePromise(checkNative(f).then(function(r){if(r){return browserPbkdf2(e,t,s,d,f)}return o(e,t,s,d,c)}),u)}},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/default-encoding.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/process/browser.js");var i;if(r.g.process&&r.g.process.browser)i="utf-8";else if(r.g.process&&r.g.process.version){var a=parseInt(s.version.split(".")[0].slice(1),10);i=a>=6?"utf-8":"binary"}else{i="utf-8"}e.exports=i},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/precondition.js":e=>{"use strict";var t=Math.pow(2,30)-1;e.exports=function(e,r){if("number"!=typeof e){throw new TypeError("Iterations not a number")}if(e<0){throw new TypeError("Bad iterations")}if("number"!=typeof r){throw new TypeError("Key length not a number")}if(r<0||r>t||r!==r){throw new TypeError("Bad key length")}}},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/sync-browser.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/@cardano-sdk/key-management/node_modules/create-hash/md5.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/ripemd160/index.js");var a=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/index.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/precondition.js");var d=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/default-encoding.js");var c=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/to-buffer.js");var l=o.alloc(128);var u={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20};var f={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function rmd160Func(e){return new i().update(e).digest()}function getDigest(e){function shaFunc(t){return a(e).update(t).digest()}if("rmd160"===e||"ripemd160"===e){return rmd160Func}if("md5"===e){return s}return shaFunc}function Hmac(e,t,r){var s=getDigest(e);var i="sha512"===e||"sha384"===e?128:64;if(t.length>i)t=s(t);else if(t.length<i)t=o.concat([t,l],i);var a=o.allocUnsafe(i+u[e]);var n=o.allocUnsafe(i+u[e]);for(var d=0;d<i;d++){a[d]=54^t[d];n[d]=92^t[d]}var c=o.allocUnsafe(i+r+4);a.copy(c,0,0,i);this.ipad1=c;this.ipad2=a;this.opad=n;this.alg=e;this.blocksize=i;this.hash=s;this.size=u[e]}Hmac.prototype.run=function(e,t){e.copy(t,this.blocksize);var r=this.hash(t);r.copy(this.opad,this.blocksize);return this.hash(this.opad)};function pbkdf2(e,t,r,s,i){n(r,s);e=c(e,d,"Password");t=c(t,d,"Salt");var a=(i||"sha1").toLowerCase();var l=f[a]||a;var h=u[l];if("number"!=typeof h||!h){throw new TypeError("Digest algorithm not supported: "+i)}var m=new Hmac(l,e,t.length);var p=o.allocUnsafe(s);var v=o.allocUnsafe(t.length+4);t.copy(v,0,0,t.length);var _=0;var w=h;var y=Math.ceil(s/w);for(var g=1;g<=y;g++){v.writeUInt32BE(g,t.length);var b=m.run(v,m.ipad1);var P=b;for(var S=1;S<r;S++){P=m.run(P,m.ipad2);for(var C=0;C<w;C++)b[C]^=P[C]}b.copy(p,_);_+=w}return p}e.exports=pbkdf2},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/lib/to-buffer.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/to-buffer/index.js");var a="undefined"!=typeof Uint8Array;var o=a&&"undefined"!=typeof ArrayBuffer;var n=o&&ArrayBuffer.isView;e.exports=function(e,t,r){if("string"==typeof e||s.isBuffer(e)||a&&e instanceof Uint8Array||n&&n(e)){return i(e,t)}throw new TypeError(r+" must be a string, a Buffer, a Uint8Array, or a DataView")}},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/ripemd160/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=r("../../node_modules/inherits/inherits_browser.js");var a=r("../../node_modules/@cardano-sdk/key-management/node_modules/hash-base/index.js");function RIPEMD160(){a.call(this,64);this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520}i(RIPEMD160,a);RIPEMD160.prototype._update=function(){var e=new Array(16);for(var t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a;var s=this._b;var i=this._c;var a=this._d;var o=this._e;r=fn1(r,s,i,a,o,e[0],0,11);i=rotl(i,10);o=fn1(o,r,s,i,a,e[1],0,14);s=rotl(s,10);a=fn1(a,o,r,s,i,e[2],0,15);r=rotl(r,10);i=fn1(i,a,o,r,s,e[3],0,12);o=rotl(o,10);s=fn1(s,i,a,o,r,e[4],0,5);a=rotl(a,10);r=fn1(r,s,i,a,o,e[5],0,8);i=rotl(i,10);o=fn1(o,r,s,i,a,e[6],0,7);s=rotl(s,10);a=fn1(a,o,r,s,i,e[7],0,9);r=rotl(r,10);i=fn1(i,a,o,r,s,e[8],0,11);o=rotl(o,10);s=fn1(s,i,a,o,r,e[9],0,13);a=rotl(a,10);r=fn1(r,s,i,a,o,e[10],0,14);i=rotl(i,10);o=fn1(o,r,s,i,a,e[11],0,15);s=rotl(s,10);a=fn1(a,o,r,s,i,e[12],0,6);r=rotl(r,10);i=fn1(i,a,o,r,s,e[13],0,7);o=rotl(o,10);s=fn1(s,i,a,o,r,e[14],0,9);a=rotl(a,10);r=fn1(r,s,i,a,o,e[15],0,8);i=rotl(i,10);o=fn2(o,r,s,i,a,e[7],1518500249,7);s=rotl(s,10);a=fn2(a,o,r,s,i,e[4],1518500249,6);r=rotl(r,10);i=fn2(i,a,o,r,s,e[13],1518500249,8);o=rotl(o,10);s=fn2(s,i,a,o,r,e[1],1518500249,13);a=rotl(a,10);r=fn2(r,s,i,a,o,e[10],1518500249,11);i=rotl(i,10);o=fn2(o,r,s,i,a,e[6],1518500249,9);s=rotl(s,10);a=fn2(a,o,r,s,i,e[15],1518500249,7);r=rotl(r,10);i=fn2(i,a,o,r,s,e[3],1518500249,15);o=rotl(o,10);s=fn2(s,i,a,o,r,e[12],1518500249,7);a=rotl(a,10);r=fn2(r,s,i,a,o,e[0],1518500249,12);i=rotl(i,10);o=fn2(o,r,s,i,a,e[9],1518500249,15);s=rotl(s,10);a=fn2(a,o,r,s,i,e[5],1518500249,9);r=rotl(r,10);i=fn2(i,a,o,r,s,e[2],1518500249,11);o=rotl(o,10);s=fn2(s,i,a,o,r,e[14],1518500249,7);a=rotl(a,10);r=fn2(r,s,i,a,o,e[11],1518500249,13);i=rotl(i,10);o=fn2(o,r,s,i,a,e[8],1518500249,12);s=rotl(s,10);a=fn3(a,o,r,s,i,e[3],1859775393,11);r=rotl(r,10);i=fn3(i,a,o,r,s,e[10],1859775393,13);o=rotl(o,10);s=fn3(s,i,a,o,r,e[14],1859775393,6);a=rotl(a,10);r=fn3(r,s,i,a,o,e[4],1859775393,7);i=rotl(i,10);o=fn3(o,r,s,i,a,e[9],1859775393,14);s=rotl(s,10);a=fn3(a,o,r,s,i,e[15],1859775393,9);r=rotl(r,10);i=fn3(i,a,o,r,s,e[8],1859775393,13);o=rotl(o,10);s=fn3(s,i,a,o,r,e[1],1859775393,15);a=rotl(a,10);r=fn3(r,s,i,a,o,e[2],1859775393,14);i=rotl(i,10);o=fn3(o,r,s,i,a,e[7],1859775393,8);s=rotl(s,10);a=fn3(a,o,r,s,i,e[0],1859775393,13);r=rotl(r,10);i=fn3(i,a,o,r,s,e[6],1859775393,6);o=rotl(o,10);s=fn3(s,i,a,o,r,e[13],1859775393,5);a=rotl(a,10);r=fn3(r,s,i,a,o,e[11],1859775393,12);i=rotl(i,10);o=fn3(o,r,s,i,a,e[5],1859775393,7);s=rotl(s,10);a=fn3(a,o,r,s,i,e[12],1859775393,5);r=rotl(r,10);i=fn4(i,a,o,r,s,e[1],2400959708,11);o=rotl(o,10);s=fn4(s,i,a,o,r,e[9],2400959708,12);a=rotl(a,10);r=fn4(r,s,i,a,o,e[11],2400959708,14);i=rotl(i,10);o=fn4(o,r,s,i,a,e[10],2400959708,15);s=rotl(s,10);a=fn4(a,o,r,s,i,e[0],2400959708,14);r=rotl(r,10);i=fn4(i,a,o,r,s,e[8],2400959708,15);o=rotl(o,10);s=fn4(s,i,a,o,r,e[12],2400959708,9);a=rotl(a,10);r=fn4(r,s,i,a,o,e[4],2400959708,8);i=rotl(i,10);o=fn4(o,r,s,i,a,e[13],2400959708,9);s=rotl(s,10);a=fn4(a,o,r,s,i,e[3],2400959708,14);r=rotl(r,10);i=fn4(i,a,o,r,s,e[7],2400959708,5);o=rotl(o,10);s=fn4(s,i,a,o,r,e[15],2400959708,6);a=rotl(a,10);r=fn4(r,s,i,a,o,e[14],2400959708,8);i=rotl(i,10);o=fn4(o,r,s,i,a,e[5],2400959708,6);s=rotl(s,10);a=fn4(a,o,r,s,i,e[6],2400959708,5);r=rotl(r,10);i=fn4(i,a,o,r,s,e[2],2400959708,12);o=rotl(o,10);s=fn5(s,i,a,o,r,e[4],2840853838,9);a=rotl(a,10);r=fn5(r,s,i,a,o,e[0],2840853838,15);i=rotl(i,10);o=fn5(o,r,s,i,a,e[5],2840853838,5);s=rotl(s,10);a=fn5(a,o,r,s,i,e[9],2840853838,11);r=rotl(r,10);i=fn5(i,a,o,r,s,e[7],2840853838,6);o=rotl(o,10);s=fn5(s,i,a,o,r,e[12],2840853838,8);a=rotl(a,10);r=fn5(r,s,i,a,o,e[2],2840853838,13);i=rotl(i,10);o=fn5(o,r,s,i,a,e[10],2840853838,12);s=rotl(s,10);a=fn5(a,o,r,s,i,e[14],2840853838,5);r=rotl(r,10);i=fn5(i,a,o,r,s,e[1],2840853838,12);o=rotl(o,10);s=fn5(s,i,a,o,r,e[3],2840853838,13);a=rotl(a,10);r=fn5(r,s,i,a,o,e[8],2840853838,14);i=rotl(i,10);o=fn5(o,r,s,i,a,e[11],2840853838,11);s=rotl(s,10);a=fn5(a,o,r,s,i,e[6],2840853838,8);r=rotl(r,10);i=fn5(i,a,o,r,s,e[15],2840853838,5);o=rotl(o,10);s=fn5(s,i,a,o,r,e[13],2840853838,6);a=rotl(a,10);var n=this._a;var d=this._b;var c=this._c;var l=this._d;var u=this._e;n=fn5(n,d,c,l,u,e[5],1352829926,8);c=rotl(c,10);u=fn5(u,n,d,c,l,e[14],1352829926,9);d=rotl(d,10);l=fn5(l,u,n,d,c,e[7],1352829926,9);n=rotl(n,10);c=fn5(c,l,u,n,d,e[0],1352829926,11);u=rotl(u,10);d=fn5(d,c,l,u,n,e[9],1352829926,13);l=rotl(l,10);n=fn5(n,d,c,l,u,e[2],1352829926,15);c=rotl(c,10);u=fn5(u,n,d,c,l,e[11],1352829926,15);d=rotl(d,10);l=fn5(l,u,n,d,c,e[4],1352829926,5);n=rotl(n,10);c=fn5(c,l,u,n,d,e[13],1352829926,7);u=rotl(u,10);d=fn5(d,c,l,u,n,e[6],1352829926,7);l=rotl(l,10);n=fn5(n,d,c,l,u,e[15],1352829926,8);c=rotl(c,10);u=fn5(u,n,d,c,l,e[8],1352829926,11);d=rotl(d,10);l=fn5(l,u,n,d,c,e[1],1352829926,14);n=rotl(n,10);c=fn5(c,l,u,n,d,e[10],1352829926,14);u=rotl(u,10);d=fn5(d,c,l,u,n,e[3],1352829926,12);l=rotl(l,10);n=fn5(n,d,c,l,u,e[12],1352829926,6);c=rotl(c,10);u=fn4(u,n,d,c,l,e[6],1548603684,9);d=rotl(d,10);l=fn4(l,u,n,d,c,e[11],1548603684,13);n=rotl(n,10);c=fn4(c,l,u,n,d,e[3],1548603684,15);u=rotl(u,10);d=fn4(d,c,l,u,n,e[7],1548603684,7);l=rotl(l,10);n=fn4(n,d,c,l,u,e[0],1548603684,12);c=rotl(c,10);u=fn4(u,n,d,c,l,e[13],1548603684,8);d=rotl(d,10);l=fn4(l,u,n,d,c,e[5],1548603684,9);n=rotl(n,10);c=fn4(c,l,u,n,d,e[10],1548603684,11);u=rotl(u,10);d=fn4(d,c,l,u,n,e[14],1548603684,7);l=rotl(l,10);n=fn4(n,d,c,l,u,e[15],1548603684,7);c=rotl(c,10);u=fn4(u,n,d,c,l,e[8],1548603684,12);d=rotl(d,10);l=fn4(l,u,n,d,c,e[12],1548603684,7);n=rotl(n,10);c=fn4(c,l,u,n,d,e[4],1548603684,6);u=rotl(u,10);d=fn4(d,c,l,u,n,e[9],1548603684,15);l=rotl(l,10);n=fn4(n,d,c,l,u,e[1],1548603684,13);c=rotl(c,10);u=fn4(u,n,d,c,l,e[2],1548603684,11);d=rotl(d,10);l=fn3(l,u,n,d,c,e[15],1836072691,9);n=rotl(n,10);c=fn3(c,l,u,n,d,e[5],1836072691,7);u=rotl(u,10);d=fn3(d,c,l,u,n,e[1],1836072691,15);l=rotl(l,10);n=fn3(n,d,c,l,u,e[3],1836072691,11);c=rotl(c,10);u=fn3(u,n,d,c,l,e[7],1836072691,8);d=rotl(d,10);l=fn3(l,u,n,d,c,e[14],1836072691,6);n=rotl(n,10);c=fn3(c,l,u,n,d,e[6],1836072691,6);u=rotl(u,10);d=fn3(d,c,l,u,n,e[9],1836072691,14);l=rotl(l,10);n=fn3(n,d,c,l,u,e[11],1836072691,12);c=rotl(c,10);u=fn3(u,n,d,c,l,e[8],1836072691,13);d=rotl(d,10);l=fn3(l,u,n,d,c,e[12],1836072691,5);n=rotl(n,10);c=fn3(c,l,u,n,d,e[2],1836072691,14);u=rotl(u,10);d=fn3(d,c,l,u,n,e[10],1836072691,13);l=rotl(l,10);n=fn3(n,d,c,l,u,e[0],1836072691,13);c=rotl(c,10);u=fn3(u,n,d,c,l,e[4],1836072691,7);d=rotl(d,10);l=fn3(l,u,n,d,c,e[13],1836072691,5);n=rotl(n,10);c=fn2(c,l,u,n,d,e[8],2053994217,15);u=rotl(u,10);d=fn2(d,c,l,u,n,e[6],2053994217,5);l=rotl(l,10);n=fn2(n,d,c,l,u,e[4],2053994217,8);c=rotl(c,10);u=fn2(u,n,d,c,l,e[1],2053994217,11);d=rotl(d,10);l=fn2(l,u,n,d,c,e[3],2053994217,14);n=rotl(n,10);c=fn2(c,l,u,n,d,e[11],2053994217,14);u=rotl(u,10);d=fn2(d,c,l,u,n,e[15],2053994217,6);l=rotl(l,10);n=fn2(n,d,c,l,u,e[0],2053994217,14);c=rotl(c,10);u=fn2(u,n,d,c,l,e[5],2053994217,6);d=rotl(d,10);l=fn2(l,u,n,d,c,e[12],2053994217,9);n=rotl(n,10);c=fn2(c,l,u,n,d,e[2],2053994217,12);u=rotl(u,10);d=fn2(d,c,l,u,n,e[13],2053994217,9);l=rotl(l,10);n=fn2(n,d,c,l,u,e[9],2053994217,12);c=rotl(c,10);u=fn2(u,n,d,c,l,e[7],2053994217,5);d=rotl(d,10);l=fn2(l,u,n,d,c,e[10],2053994217,15);n=rotl(n,10);c=fn2(c,l,u,n,d,e[14],2053994217,8);u=rotl(u,10);d=fn1(d,c,l,u,n,e[12],0,8);l=rotl(l,10);n=fn1(n,d,c,l,u,e[15],0,5);c=rotl(c,10);u=fn1(u,n,d,c,l,e[10],0,12);d=rotl(d,10);l=fn1(l,u,n,d,c,e[4],0,9);n=rotl(n,10);c=fn1(c,l,u,n,d,e[1],0,12);u=rotl(u,10);d=fn1(d,c,l,u,n,e[5],0,5);l=rotl(l,10);n=fn1(n,d,c,l,u,e[8],0,14);c=rotl(c,10);u=fn1(u,n,d,c,l,e[7],0,6);d=rotl(d,10);l=fn1(l,u,n,d,c,e[6],0,8);n=rotl(n,10);c=fn1(c,l,u,n,d,e[2],0,13);u=rotl(u,10);d=fn1(d,c,l,u,n,e[13],0,6);l=rotl(l,10);n=fn1(n,d,c,l,u,e[14],0,5);c=rotl(c,10);u=fn1(u,n,d,c,l,e[0],0,15);d=rotl(d,10);l=fn1(l,u,n,d,c,e[3],0,13);n=rotl(n,10);c=fn1(c,l,u,n,d,e[9],0,11);u=rotl(u,10);d=fn1(d,c,l,u,n,e[11],0,11);l=rotl(l,10);var f=this._b+i+l|0;this._b=this._c+a+u|0;this._c=this._d+o+n|0;this._d=this._e+r+d|0;this._e=this._a+s+c|0;this._a=f};RIPEMD160.prototype._digest=function(){this._block[this._blockOffset++]=128;if(this._blockOffset>56){this._block.fill(0,this._blockOffset,64);this._update();this._blockOffset=0}this._block.fill(0,this._blockOffset,56);this._block.writeUInt32LE(this._length[0],56);this._block.writeUInt32LE(this._length[1],60);this._update();var e=new s(20);e.writeInt32LE(this._a,0);e.writeInt32LE(this._b,4);e.writeInt32LE(this._c,8);e.writeInt32LE(this._d,12);e.writeInt32LE(this._e,16);return e};function rotl(e,t){return e<<t|e>>>32-t}function fn1(e,t,r,s,i,a,o,n){return rotl(e+(t^r^s)+a+o|0,n)+i|0}function fn2(e,t,r,s,i,a,o,n){return rotl(e+(t&r|~t&s)+a+o|0,n)+i|0}function fn3(e,t,r,s,i,a,o,n){return rotl(e+((t|~r)^s)+a+o|0,n)+i|0}function fn4(e,t,r,s,i,a,o,n){return rotl(e+(t&s|r&~s)+a+o|0,n)+i|0}function fn5(e,t,r,s,i,a,o,n){return rotl(e+(t^(r|~s))+a+o|0,n)+i|0}e.exports=RIPEMD160},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/safe-buffer/index.js").Buffer;var i=r("../../node_modules/to-buffer/index.js");function Hash(e,t){this._block=s.alloc(e);this._finalSize=t;this._blockSize=e;this._len=0}Hash.prototype.update=function(e,t){e=i(e,t||"utf8");var r=this._block;var s=this._blockSize;var a=e.length;var o=this._len;for(var n=0;n<a;){var d=o%s;var c=Math.min(a-n,s-d);for(var l=0;l<c;l++)r[d+l]=e[n+l];o+=c;n+=c;if(o%s===0)this._update(r)}this._len+=a;return this};Hash.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128;this._block.fill(0,t+1);if(t>=this._finalSize){this._update(this._block);this._block.fill(0)}var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var s=(4294967295&r)>>>0;var i=(r-s)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8);this._block.writeUInt32BE(s,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a};Hash.prototype._update=function(){throw new Error("_update must be implemented by subclass")};e.exports=Hash},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/index.js":(e,t,r)=>{"use strict";e.exports=function SHA(t){var r=t.toLowerCase();var s=e.exports[r];if(!s){throw new Error(r+" is not supported (we accept pull requests)")}return new s};e.exports.sha=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha.js");e.exports.sha1=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha1.js");e.exports.sha224=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha224.js");e.exports.sha256=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha256.js");e.exports.sha384=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha384.js");e.exports.sha512=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha512.js")},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1518500249,1859775393,-1894007588,-899497514];var n=new Array(80);function Sha(){this.init();this._w=n;i.call(this,64,56)}s(Sha,i);Sha.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,r,s){if(0===e){return t&r|~t&s}if(2===e){return t&r|t&s|r&s}return t^r^s}Sha.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;for(var d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var c=0;c<80;++c){var l=~~(c/20);var u=rotl5(r)+ft(l,s,i,a)+n+t[c]+o[l]|0;n=a;a=i;i=rotl30(s);s=r;r=u}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0};Sha.prototype._hash=function(){var e=a.allocUnsafe(20);e.writeInt32BE(0|this._a,0);e.writeInt32BE(0|this._b,4);e.writeInt32BE(0|this._c,8);e.writeInt32BE(0|this._d,12);e.writeInt32BE(0|this._e,16);return e};e.exports=Sha},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha1.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1518500249,1859775393,-1894007588,-899497514];var n=new Array(80);function Sha1(){this.init();this._w=n;i.call(this,64,56)}s(Sha1,i);Sha1.prototype.init=function(){this._a=1732584193;this._b=4023233417;this._c=2562383102;this._d=271733878;this._e=3285377520;return this};function rotl1(e){return e<<1|e>>>31}function rotl5(e){return e<<5|e>>>27}function rotl30(e){return e<<30|e>>>2}function ft(e,t,r,s){if(0===e){return t&r|~t&s}if(2===e){return t&r|t&s|r&s}return t^r^s}Sha1.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;for(var d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=rotl1(t[d-3]^t[d-8]^t[d-14]^t[d-16]);for(var c=0;c<80;++c){var l=~~(c/20);var u=rotl5(r)+ft(l,s,i,a)+n+t[c]+o[l]|0;n=a;a=i;i=rotl30(s);s=r;r=u}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0};Sha1.prototype._hash=function(){var e=a.allocUnsafe(20);e.writeInt32BE(0|this._a,0);e.writeInt32BE(0|this._b,4);e.writeInt32BE(0|this._c,8);e.writeInt32BE(0|this._d,12);e.writeInt32BE(0|this._e,16);return e};e.exports=Sha1},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha224.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha256.js");var a=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=new Array(64);function Sha224(){this.init();this._w=n;a.call(this,64,56)}s(Sha224,i);Sha224.prototype.init=function(){this._a=3238371032;this._b=914150663;this._c=812702999;this._d=4144912697;this._e=4290775857;this._f=1750603025;this._g=1694076839;this._h=3204075428;return this};Sha224.prototype._hash=function(){var e=o.allocUnsafe(28);e.writeInt32BE(this._a,0);e.writeInt32BE(this._b,4);e.writeInt32BE(this._c,8);e.writeInt32BE(this._d,12);e.writeInt32BE(this._e,16);e.writeInt32BE(this._f,20);e.writeInt32BE(this._g,24);return e};e.exports=Sha224},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha256.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];var n=new Array(64);function Sha256(){this.init();this._w=n;i.call(this,64,56)}s(Sha256,i);Sha256.prototype.init=function(){this._a=1779033703;this._b=3144134277;this._c=1013904242;this._d=2773480762;this._e=1359893119;this._f=2600822924;this._g=528734635;this._h=1541459225;return this};function ch(e,t,r){return r^e&(t^r)}function maj(e,t,r){return e&t|r&(e|t)}function sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function gamma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function gamma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}Sha256.prototype._update=function(e){var t=this._w;var r=0|this._a;var s=0|this._b;var i=0|this._c;var a=0|this._d;var n=0|this._e;var d=0|this._f;var c=0|this._g;var l=0|this._h;for(var u=0;u<16;++u)t[u]=e.readInt32BE(4*u);for(;u<64;++u)t[u]=gamma1(t[u-2])+t[u-7]+gamma0(t[u-15])+t[u-16]|0;for(var f=0;f<64;++f){var h=l+sigma1(n)+ch(n,d,c)+o[f]+t[f]|0;var m=sigma0(r)+maj(r,s,i)|0;l=c;c=d;d=n;n=a+h|0;a=i;i=s;s=r;r=h+m|0}this._a=r+this._a|0;this._b=s+this._b|0;this._c=i+this._c|0;this._d=a+this._d|0;this._e=n+this._e|0;this._f=d+this._f|0;this._g=c+this._g|0;this._h=l+this._h|0};Sha256.prototype._hash=function(){var e=a.allocUnsafe(32);e.writeInt32BE(this._a,0);e.writeInt32BE(this._b,4);e.writeInt32BE(this._c,8);e.writeInt32BE(this._d,12);e.writeInt32BE(this._e,16);e.writeInt32BE(this._f,20);e.writeInt32BE(this._g,24);e.writeInt32BE(this._h,28);return e};e.exports=Sha256},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha384.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha512.js");var a=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var o=r("../../node_modules/safe-buffer/index.js").Buffer;var n=new Array(160);function Sha384(){this.init();this._w=n;a.call(this,128,112)}s(Sha384,i);Sha384.prototype.init=function(){this._ah=3418070365;this._bh=1654270250;this._ch=2438529370;this._dh=355462360;this._eh=1731405415;this._fh=2394180231;this._gh=3675008525;this._hh=1203062813;this._al=3238371032;this._bl=914150663;this._cl=812702999;this._dl=4144912697;this._el=4290775857;this._fl=1750603025;this._gl=1694076839;this._hl=3204075428;return this};Sha384.prototype._hash=function(){var e=o.allocUnsafe(48);function writeInt64BE(t,r,s){e.writeInt32BE(t,s);e.writeInt32BE(r,s+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);return e};e.exports=Sha384},"../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/sha512.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/inherits/inherits_browser.js");var i=r("../../node_modules/@cardano-sdk/key-management/node_modules/pbkdf2/node_modules/sha.js/hash.js");var a=r("../../node_modules/safe-buffer/index.js").Buffer;var o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];var n=new Array(160);function Sha512(){this.init();this._w=n;i.call(this,128,112)}s(Sha512,i);Sha512.prototype.init=function(){this._ah=1779033703;this._bh=3144134277;this._ch=1013904242;this._dh=2773480762;this._eh=1359893119;this._fh=2600822924;this._gh=528734635;this._hh=1541459225;this._al=4089235720;this._bl=2227873595;this._cl=4271175723;this._dl=1595750129;this._el=2917565137;this._fl=725511199;this._gl=4215389547;this._hl=327033209;return this};function Ch(e,t,r){return r^e&(t^r)}function maj(e,t,r){return e&t|r&(e|t)}function sigma0(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function sigma1(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function Gamma0(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function Gamma0l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function Gamma1(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function Gamma1l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function getCarry(e,t){return e>>>0<t>>>0?1:0}Sha512.prototype._update=function(e){var t=this._w;var r=0|this._ah;var s=0|this._bh;var i=0|this._ch;var a=0|this._dh;var n=0|this._eh;var d=0|this._fh;var c=0|this._gh;var l=0|this._hh;var u=0|this._al;var f=0|this._bl;var h=0|this._cl;var m=0|this._dl;var p=0|this._el;var v=0|this._fl;var _=0|this._gl;var w=0|this._hl;for(var y=0;y<32;y+=2){t[y]=e.readInt32BE(4*y);t[y+1]=e.readInt32BE(4*y+4)}for(;y<160;y+=2){var g=t[y-30];var b=t[y-30+1];var P=Gamma0(g,b);var S=Gamma0l(b,g);g=t[y-4];b=t[y-4+1];var C=Gamma1(g,b);var k=Gamma1l(b,g);var j=t[y-14];var x=t[y-14+1];var T=t[y-32];var E=t[y-32+1];var A=S+x|0;var I=P+j+getCarry(A,S)|0;A=A+k|0;I=I+C+getCarry(A,k)|0;A=A+E|0;I=I+T+getCarry(A,E)|0;t[y]=I;t[y+1]=A}for(var B=0;B<160;B+=2){I=t[B];A=t[B+1];var F=maj(r,s,i);var M=maj(u,f,h);var R=sigma0(r,u);var D=sigma0(u,r);var O=sigma1(n,p);var G=sigma1(p,n);var N=o[B];var H=o[B+1];var K=Ch(n,d,c);var V=Ch(p,v,_);var W=w+G|0;var z=l+O+getCarry(W,w)|0;W=W+V|0;z=z+K+getCarry(W,V)|0;W=W+H|0;z=z+N+getCarry(W,H)|0;W=W+A|0;z=z+I+getCarry(W,A)|0;var U=D+M|0;var $=R+F+getCarry(U,D)|0;l=c;w=_;c=d;_=v;d=n;v=p;p=m+W|0;n=a+z+getCarry(p,m)|0;a=i;m=h;i=s;h=f;s=r;f=u;u=W+U|0;r=z+$+getCarry(u,W)|0}this._al=this._al+u|0;this._bl=this._bl+f|0;this._cl=this._cl+h|0;this._dl=this._dl+m|0;this._el=this._el+p|0;this._fl=this._fl+v|0;this._gl=this._gl+_|0;this._hl=this._hl+w|0;this._ah=this._ah+r+getCarry(this._al,u)|0;this._bh=this._bh+s+getCarry(this._bl,f)|0;this._ch=this._ch+i+getCarry(this._cl,h)|0;this._dh=this._dh+a+getCarry(this._dl,m)|0;this._eh=this._eh+n+getCarry(this._el,p)|0;this._fh=this._fh+d+getCarry(this._fl,v)|0;this._gh=this._gh+c+getCarry(this._gl,_)|0;this._hh=this._hh+l+getCarry(this._hl,w)|0};Sha512.prototype._hash=function(){var e=a.allocUnsafe(64);function writeInt64BE(t,r,s){e.writeInt32BE(t,s);e.writeInt32BE(r,s+4)}writeInt64BE(this._ah,this._al,0);writeInt64BE(this._bh,this._bl,8);writeInt64BE(this._ch,this._cl,16);writeInt64BE(this._dh,this._dl,24);writeInt64BE(this._eh,this._el,32);writeInt64BE(this._fh,this._fl,40);writeInt64BE(this._gh,this._gl,48);writeInt64BE(this._hh,this._hl,56);return e};e.exports=Sha512},"../../node_modules/@cardano-sdk/key-management/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>i,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))i(t,e,r)}a(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.computeScriptDataHash=void 0;const n=o(r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js"));const d=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const c=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new d.Serialization.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(s.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const i=new d.Serialization.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){i.writeEncodedValue(c);i.writeEncodedValue(getCborEncodedArray(r));i.writeEncodedValue(c)}else{if(!t||0===t.length)return;i.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)i.writeEncodedValue(getCborEncodedArray(r));i.writeEncodedValue(s.from(e.languageViewsEncoding(),"hex"))}return n.blake2b.hash(s.from(i.encode()).toString("hex"),32)};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const i=new d.Serialization.Costmdls;for(const a of t){const o=e.get(a);if(o)i.insert(new d.Serialization.CostModel(a,o))}return hashScriptData(i,null==r?void 0:r.map(e=>d.Serialization.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>d.Serialization.PlutusData.fromCore(e)))};t.computeScriptDataHash=computeScriptDataHash},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=t.includeChangeAndInputs=t.createPreInputSelectionTxBody=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js");const a=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js");const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:i,collaterals:a,collateralReturn:o,mint:n,scriptIntegrityHash:d,referenceInputs:c,requiredExtraSignatures:l,outputs:u})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?s.Cardano.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:n,outputs:u||[],referenceInputs:c?[...c]:void 0,requiredExtraSignatures:l,scriptIntegrityHash:d,validityInterval:i,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==a?void 0:a.size)&&{collaterals:[...a]},collateralReturn:o}}};t.createPreInputSelectionTxBody=createPreInputSelectionTxBody;const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:o})=>{const n={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&o){const d=(0,a.getDefaultCostModelsForVersions)([...r]);n.scriptIntegrityHash=(0,i.computeScriptDataHash)(d,[...r],o.redeemers,o.datums)}const c=s.Serialization.TransactionBody.fromCore(n);return{body:n,hash:c.hash()}};t.includeChangeAndInputs=includeChangeAndInputs;const createTransactionInternals=e=>{const{txBody:r}=(0,t.createPreInputSelectionTxBody)({...e});return(0,t.includeChangeAndInputs)({bodyPreInputSelection:r,inputSelection:e.inputSelection})};t.createTransactionInternals=createTransactionInternals},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureValidityInterval=t.calcTimeOffsetSlotNumber=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=(0,s.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>s.Cardano.Slot(e+t*r);t.calcTimeOffsetSlotNumber=calcTimeOffsetSlotNumber;const ensureValidityInterval=(e,{slotLength:r},s)=>({invalidHereafter:(0,t.calcTimeOffsetSlotNumber)(e,i,r),...s});t.ensureValidityInterval=ensureValidityInterval},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.minFee=t.minAdaRequired=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=160;const serializeBigInt=e=>{const t=new i.Serialization.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>i.Serialization.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>s.from(i.Serialization.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const a=25600;const o=1.2;let n=0;var d;const c=[...e.body.inputs,...null!==(d=e.body.referenceInputs)&&void 0!==d?d:[]];for(const l of c){const u=t.find(e=>e[0].txId===l.txId&&e[0].index===l.index);if(u&&u[1].scriptReference)n+=i.Serialization.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(n>0){f+=Math.ceil(Math.min(a,n)*s);n=Math.max(n-a,0);s*=o}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const i=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(i);const a=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(a.steps*t.steps+a.memory*t.memory))+i};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let i=false;while(!i){const o=s-r;const n=BigInt(serializeTxOutputSize(e)+a+o)*t;const d=serializeBigInt(n.toString()).length;i=s===d;s=d}const c=s-r;return BigInt(serializeTxOutputSize(e)+a+c)*t};t.minAdaRequired=minAdaRequired;const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);t.minFee=minFee},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/fees.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.createTransactionInternals=void 0;var a=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");Object.defineProperty(t,"createTransactionInternals",{enumerable:true,get:function(){return a.createTransactionInternals}});i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/computeScriptDataHash.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.defaultSelectionConstraints=t.computeSelectionLimit=t.tokenBundleSizeExceedsLimit=t.computeMinimumCoinQuantity=t.computeMinimumCost=t.MAX_U64=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/fees/index.js");t.MAX_U64=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const s=[];const a={[i.Cardano.RedeemerPurpose.spend]:t.spend,[i.Cardano.RedeemerPurpose.mint]:t.mint,[i.Cardano.RedeemerPurpose.certificate]:t.certificate,[i.Cardano.RedeemerPurpose.withdrawal]:t.withdrawal,[i.Cardano.RedeemerPurpose.propose]:t.propose,[i.Cardano.RedeemerPurpose.vote]:t.vote};for(const o of e){const n=a[o.purpose];if(!n)throw new Error(`No redeemers found for ${o.purpose} purpose`);let d;if(o.purpose===i.Cardano.RedeemerPurpose.spend){const c=r[o.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===o.index);if(!d)throw new Error(`Known Redeemer not found for index ${o.index}`)}s.push({...d,executionUnits:o.budget})}return s};const reorgRedeemers=(e,t,r)=>{let s=[];if(t.redeemers){s=t.redeemers.filter(e=>e.purpose!==i.Cardano.RedeemerPurpose.spend);if(e.spend){for(const[a,o]of e.spend){const n=r.findIndex(e=>a===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${a}`);o.index=n;s.push({...o})}}}return s};const computeMinimumCost=(e,t,r,s)=>async i=>{const n=await t(i);const d=[...i.inputs];const c=d.map(e=>e[0]).sort(a.sortTxIn);if(n.witness&&n.witness.redeemers&&n.witness.redeemers.length>0){n.witness.redeemers=reorgRedeemers(s,n.witness,c);n.witness.redeemers=updateRedeemers(await r.evaluate(n,d),s,c)}return{fee:(0,o.minFee)(n,d,e),redeemers:n.witness.redeemers}};t.computeMinimumCost=computeMinimumCost;const computeMinimumCoinQuantity=e=>t=>(0,o.minAdaRequired)(t,BigInt(e));t.computeMinimumCoinQuantity=computeMinimumCoinQuantity;const tokenBundleSizeExceedsLimit=e=>r=>{if(!r){return false}const s=new i.Serialization.Value(t.MAX_U64);s.setMultiasset(r);return s.toCbor().length/2>e};t.tokenBundleSizeExceedsLimit=tokenBundleSizeExceedsLimit;const getTxSize=e=>s.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const a=getTxSize(i.Serialization.Transaction.fromCore(s));if(a<=e){return r.inputs.size}return r.inputs.size-1};t.computeSelectionLimit=computeSelectionLimit;const defaultSelectionConstraints=({protocolParameters:e,buildTx:r,redeemersByType:s,txEvaluator:a})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new i.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:(0,t.computeMinimumCoinQuantity)(e.coinsPerUtxoByte),computeMinimumCost:(0,t.computeMinimumCost)(e,r,a,s),computeSelectionLimit:(0,t.computeSelectionLimit)(e.maxTxSize,r),tokenBundleSizeExceedsLimit:(0,t.tokenBundleSizeExceedsLimit)(e.maxValueSize)}};t.defaultSelectionConstraints=defaultSelectionConstraints},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/outputValidator.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createOutputValidator=void 0;const s=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const createOutputValidator=({protocolParameters:e})=>{const validateOutput=async({address:t,value:r},a)=>{const{coinsPerUtxoByte:o,maxValueSize:n}=a||await e();const d={address:t,value:r};const c=!!r.assets&&[...r.assets.values()].some(e=>e<=0);if(c){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:c,tokenBundleSizeExceedsLimit:false}}const l=BigInt((0,i.computeMinimumCoinQuantity)(o)(d));return{coinMissing:s.BigIntMath.max([l-r.coins,0n]),minimumCoin:l,negativeAssetQty:c,tokenBundleSizeExceedsLimit:(0,i.tokenBundleSizeExceedsLimit)(n)(r.assets)}};return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const i of t)s.set(i,await validateOutput(i,r));return s}}};t.createOutputValidator=createOutputValidator},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js":function(e,t){"use strict";var r=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i;Object.defineProperty(t,"__esModule",{value:true});t.GreedyTxEvaluator=void 0;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await s(this,i,"f").call(this);const{witness:a}=e;if(!a||!a.redeemers)return[];const o=[];for(const n of a.redeemers)o.push({budget:r,index:n.index,purpose:n.purpose});return o}constructor(e){i.set(this,void 0);r(this,i,e,"f")}}t.GreedyTxEvaluator=GreedyTxEvaluator;i=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TxOutputBuilder=void 0;const c=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new l.OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new l.OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new l.OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(i(this,a,"f"))){throw new l.OutputValidationMissingRequiredError(i(this,a,"f"))}i(this,n,"f").debug("toTxOut result:",i(this,a,"f"));return{...i(this,a,"f")}}async inspect(){return i(this,a,"f")}value(e){s(this,a,{...i(this,a,"f"),value:{...e}},"f");return this}coin(e){var t;s(this,a,{...i(this,a,"f"),value:{...null===(t=i(this,a,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;s(this,a,{...i(this,a,"f"),value:{...null===(t=i(this,a,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const o=new Map(null===(r=i(this,a,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?o.delete(e):o.set(e,t);return this.assets(o)}address(e){s(this,a,{...i(this,a,"f"),address:e},"f");return this}datum(e){c.Serialization.isDatumHash(e)?s(this,a,{...i(this,a,"f"),datumHash:e},"f"):s(this,a,{...i(this,a,"f"),datum:e},"f");return this}scriptReference(e){if(!c.Cardano.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");s(this,a,{...i(this,a,"f"),scriptReference:e},"f");return this}handle(e){if(!i(this,d,"f")){throw new l.InvalidConfigurationError(l.TxOutputFailure.MissingHandleProviderError)}s(this,a,{...i(this,a,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(i(this,a,"f").handle&&i(this,d,"f")){const t=await i(this,d,"f").resolveHandles({handles:[i(this,a,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new l.HandleNotFoundError(i(this,a,"f"))}}const r=toOutputValidationError(e,await i(this,o,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:i}){a.set(this,void 0);o.set(this,void 0);n.set(this,void 0);d.set(this,null);s(this,a,{...t},"f");s(this,o,e,"f");s(this,n,r,"f");if(i)s(this,d,i,"f")}}t.TxOutputBuilder=TxOutputBuilder;a=new WeakMap,o=new WeakMap,n=new WeakMap,d=new WeakMap},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T,E,A,I,B,F,M,R,D,O;Object.defineProperty(t,"__esModule",{value:true});t.GenericTxBuilder=void 0;const G=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const N=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const H=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const K=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const V=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const W=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js");const z=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js");const U=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const $=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/output-validation/index.js");const L=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js");const q=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js");const Y=r("../../node_modules/rxjs/dist/esm5/index.js");const Q=r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js");const J=a(r("../../node_modules/lodash/omit.js"));const X=a(r("../../node_modules/lodash/uniq.js"));const Z="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:a},inputSelection:n}=await i(this,o,"m",l).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:n,ownAddresses:t,witness:a}}async sign(){return i(this,d,"f").sign(await i(this,o,"m",l).call(this))}constructor({builder:e,signer:t}){o.add(this);n.set(this,void 0);d.set(this,void 0);c.set(this,void 0);s(this,c,e,"f");s(this,d,t,"f")}}n=new WeakMap,d=new WeakMap,c=new WeakMap,o=new WeakSet,l=async function _LazyTxSigner_build(){return s(this,n,i(this,n,"f")||await i(this,c,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;i(this,b,"f").set(t,e);return this}if(!i(this,T,"f").some(t=>t.txId===e.txId&&t.index===e.index))i(this,T,"f").push(e);return this}addInput(e,t){if(t){i(this,u,"m",O).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;i(this,g,"f").set(r,e);return this}if(!i(this,x,"f").some(t=>t.txId===e.txId&&t.index===e.index))i(this,x,"f").push(e);return this}addDatum(e){const t=N.Serialization.PlutusData.fromCore(e).hash();i(this,C,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)s(this,w,[...i(this,w,"f"),e.handleResolution],"f");const t=(0,J.default)(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;s(this,w,i(this,w,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,U.deepEquals)(t,e))};return this}buildOutput(e){return new W.TxOutputBuilder({handleProvider:i(this,_,"f"),logger:(0,U.contextLogger)(i(this,v,"f"),"outputBuilder"),outputValidator:i(this,h,"f"),txOut:e})}delegateFirstStakeCredential(e){s(this,y,e,"f");return this}delegatePortfolio(e){if(!i(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;s(this,m,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:N.Cardano.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(N.Cardano.DelegationMetadataLabel,N.metadatum.jsonToMetadatum(N.Cardano.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[N.Cardano.DelegationMetadataLabel,N.metadatum.jsonToMetadatum(N.Cardano.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){s(this,A,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{i(this,v,"f").debug("Building");try{const e=i(this,f,"f").bip32Account?await i(this,u,"m",M).call(this):await i(this,u,"m",F).call(this);await i(this,u,"m",I).call(this);(0,z.validateValidityInterval)(await i(this,f,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await i(this,f,"f").txBuilderProviders.addresses.get();const r=(await i(this,f,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===N.Cardano.StakeCredentialStatus.Registered||e.credentialStatus===N.Cardano.StakeCredentialStatus.Registering);const s=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const a=this.partialExtraSigners&&[...this.partialExtraSigners];const o=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:a};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=N.Cardano.computeAuxiliaryDataHash(this.partialAuxiliaryData);const n={...i(this,f,"f")};const d=void 0!==i(this,m,"f")||void 0!==i(this,y,"f");let c=false;if(i(this,f,"f").bip32Account&&d&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const l=await i(this,f,"f").bip32Account.deriveAddress({index:0,type:G.AddressType.External},0);e.set(l.rewardAccount,1)}n.inputSelector=(0,z.createGreedyInputSelector)(e,t);c=true}await Promise.all(i(this,x,"f").map(e=>i(this,u,"m",D).call(this,e,i(this,g,"f"))));await Promise.all(i(this,T,"f").map(e=>i(this,u,"m",D).call(this,e,i(this,b,"f"))));await Promise.all(i(this,E,"f").map(e=>i(this,u,"m",R).call(this,e)));const h=await (0,z.buildWitness)(i(this,P,"f"),i(this,S,"f"),i(this,C,"f"),i(this,k,"f"),i(this,j,"f"),i(this,f,"f").txBuilderProviders);const _=[...i(this,P,"f").values()].some(e=>N.Cardano.isPlutusScript(e));const{collaterals:B,collateralReturn:O}=_?await (0,z.computeCollateral)(i(this,f,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const H=new Set;for(const K of i(this,P,"f").values())if(N.Cardano.isPlutusScript(K))H.add(K.version);const W={auxiliaryData:s,certificates:this.partialTxBody.certificates,collateralReturn:O,collaterals:B,customizeCb:i(this,A,"f"),handleResolutions:i(this,w,"f"),inputs:new Set(i(this,g,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:i(this,j,"f"),referenceInputs:new Set([...i(this,b,"f").values()].map(e=>e[0])),scriptIntegrityHash:_?Z:void 0,scriptVersions:H,signingOptions:o,txEvaluator:i(this,p,"f"),witness:h};let U;try{U=await (0,q.initializeTx)(W,n)}catch($){if(c||!($ instanceof V.InputSelectionError)||$.failure===V.InputSelectionFailure.UtxoBalanceInsufficient){throw $}n.inputSelector=new V.LargeFirstSelector({changeAddressResolver:new V.StaticChangeAddressResolver(async()=>t)});i(this,v,"f").warn(`Building attempt failed with ${$.failure}, retrying with large first selector`);U=await (0,q.initializeTx)(W,n)}const{body:L,hash:Y,inputSelection:Q,redeemers:J}=U;h.redeemers=J;return{ctx:{auxiliaryData:s,ownAddresses:t,signingContext:{handleResolutions:i(this,w,"f"),knownAddresses:t,txInKeyPathMap:await G.util.createTxInKeyPathMap(L,t,i(this,f,"f").inputResolver)},signingOptions:{...o,extraSigners:a},witness:h},inputSelection:Q,tx:{body:L,hash:Y}}}catch(X){i(this,v,"f").debug("Transaction build error",X);if(Array.isArray(X))throw X[0];throw X}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new N.Serialization.Transaction(N.Serialization.TransactionBody.fromCore(e.body),N.Serialization.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?N.Serialization.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const a={...t.signingOptions,stubSign:false};const o=t.signingContext;return i(this,f,"f").witnesser.witness(s,o,a)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){u.add(this);this.partialTxBody={};f.set(this,void 0);h.set(this,void 0);m.set(this,void 0);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,new Map);b.set(this,new Map);P.set(this,new Map);S.set(this,new Set);C.set(this,new Map);k.set(this,new Set);j.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});x.set(this,new Array);T.set(this,new Array);E.set(this,new Array);A.set(this,void 0);s(this,h,e.outputValidator||(0,$.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");s(this,f,e,"f");s(this,v,e.logger,"f");s(this,_,e.handleProvider,"f");s(this,w,[],"f");var t;s(this,p,null!==(t=e.txEvaluator)&&void 0!==t?t:new K.GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}t.GenericTxBuilder=GenericTxBuilder;f=new WeakMap,h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,P=new WeakMap,S=new WeakMap,C=new WeakMap,k=new WeakMap,j=new WeakMap,x=new WeakMap,T=new WeakMap,E=new WeakMap,A=new WeakMap,u=new WeakSet,I=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},B=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(i(this,m,"f")){const r=await i(this,f,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await G.util.ensureStakeKeys({bip32Account:e,count:i(this,m,"f").length,knownAddresses:r,logger:(0,U.contextLogger)(i(this,v,"f"),"getOrCreateRewardAccounts")});await i(this,f,"f").txBuilderProviders.addresses.add(...s);t=(0,X.default)([...r,...s]).map(({rewardAccount:e})=>e)}const a=(0,Q.poll)({logger:(0,U.contextLogger)(i(this,v,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:i(this,f,"f").txBuilderProviders.rewardAccounts});try{return await (0,Y.lastValueFrom)(a)}catch{throw new H.OutOfSyncRewardAccounts(t)}},F=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===i(this,y,"f")){return Promise.resolve(t)}const r=await i(this,f,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const a=null===(e=N.Cardano.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!a){throw new Error(`Invalid credential ${a}.`)}if(null===i(this,y,"f"))if(s.credentialStatus===N.Cardano.StakeCredentialStatus.Unregistered)i(this,v,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeDeregistration,stakeCredential:a});else{if(s.credentialStatus!==N.Cardano.StakeCredentialStatus.Unregistered)i(this,v,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeRegistration,stakeCredential:a});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:N.Cardano.CertificateType.StakeDelegation,poolId:i(this,y,"f"),stakeCredential:a})}return t},M=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!i(this,m,"f")){return e}if(!i(this,f,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await i(this,u,"m",B).call(this,i(this,f,"f").bip32Account);const r=i(this,m,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();i(this,v,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===N.Cardano.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=i(this,m,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,i(this,m,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const a=t.filter(e=>{var t,r;return e.credentialStatus===N.Cardano.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=i(this,m,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(z.sortRewardAccountsDelegatedFirst).reverse();if(r.length>a.length){throw new H.InsufficientRewardAccounts(r.map(({id:e})=>e),a.map(({address:e})=>e))}const o=[];while(r.length>0&&a.length>0){const{id:n,weight:d}=r.pop();const c=a.pop();i(this,v,"f").debug(`Building delegation certificate for ${n} ${c}`);if(c.credentialStatus!==N.Cardano.StakeCredentialStatus.Registered&&c.credentialStatus!==N.Cardano.StakeCredentialStatus.Registering)o.push(N.Cardano.createStakeRegistrationCert(c.address));o.push(N.Cardano.createDelegationCert(c.address,n));e.set(c.address,d)}(0,L.ensureNoDeRegistrationsWithRewardsLocked)(a);i(this,v,"f").debug(`De-registering ${a.length} stake keys`);for(const l of a)if(l.credentialStatus===N.Cardano.StakeCredentialStatus.Registered)o.push(N.Cardano.createStakeDeregistrationCert(l.address,N.inConwayEra?l.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:o};return e},R=async function _GenericTxBuilder_resolveDatum(e){if(i(this,C,"f").has(e))return;if(!i(this,f,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await i(this,f,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);i(this,C,"f").set(e,t)},D=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await i(this,f,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const a=N.Serialization.Script.fromCore(s.scriptReference).hash();i(this,P,"f").set(a,s.scriptReference);i(this,S,"f").add(a)}const o=s.datum;if(o)if(N.Serialization.isDatumHash(o)){if(!i(this,C,"f").has(o))i(this,E,"f").push(o)}else{const n=N.Serialization.PlutusData.fromCore(o).hash();i(this,C,"f").set(n,o);i(this,k,"f").add(n)}t.set(r,[{...e,address:s.address},s])},O=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;i(this,g,"f").set(r,e);if(e[1].datum){const s=N.Serialization.PlutusData.fromCore(e[1].datum).hash();i(this,C,"f").set(s,e[1].datum);i(this,k,"f").add(s)}if(e[1].datumHash)i(this,E,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!i(this,x,"f").some(t=>t.txId===e.txId&&t.index===e.index))i(this,x,"f").push(e)}if(t.script){const a=N.Serialization.Script.fromCore(t.script).hash();i(this,P,"f").set(a,t.script)}if(t.redeemer){var o;null===(o=i(this,j,"f").spend)||void 0===o?void 0:o.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:N.Cardano.RedeemerPurpose.spend})}if(t.datum)if(N.Serialization.isDatumHash(t.datum)){if(!i(this,C,"f").has(t.datum))i(this,E,"f").push(t.datum)}else{const n=N.Serialization.PlutusData.fromCore(t.datum).hash();i(this,C,"f").set(n,t.datum)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/costModels.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDefaultCostModelsForVersions=t.buildCostModels=t.plutusV3CostModel=t.plutusV2CostModel=t.plutusV1CostModel=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");t.plutusV1CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:s.Cardano.PlutusLanguageVersion.V1};t.plutusV2CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:s.Cardano.PlutusLanguageVersion.V2};t.plutusV3CostModel={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:s.Cardano.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new s.Serialization.Costmdls;for(const r of e){const i=new s.Serialization.CostModel(r.version,r.prices);t.insert(i)}return t.toCore()};t.buildCostModels=buildCostModels;const getDefaultCostModelsForVersions=e=>{const r=[...new Set(e)];const i=r.map(e=>{switch(e){case s.Cardano.PlutusLanguageVersion.V1:return t.plutusV1CostModel;case s.Cardano.PlutusLanguageVersion.V2:return t.plutusV2CostModel;case s.Cardano.PlutusLanguageVersion.V3:return t.plutusV3CostModel;default:throw new Error("Invalid plutus language")}});return(0,t.buildCostModels)(i)};t.getDefaultCostModelsForVersions=getDefaultCostModelsForVersions},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/ensureNoDeRegistrationsWithRewardsLocked.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ensureNoDeRegistrationsWithRewardsLocked=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!(0,i.hasCorrectVoteDelegation)(e));if(t.length>0){throw new s.DeRegistrationsWithRewardsLocked(t)}};t.ensureNoDeRegistrationsWithRewardsLocked=ensureNoDeRegistrationsWithRewardsLocked},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.hasCorrectVoteDelegation=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!s.Cardano.isDrepInfo(t)||t.active)};t.hasCorrectVoteDelegation=hasCorrectVoteDelegation},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/OutputBuilder.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/TxBuilder.js"),t);i(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js"),t)},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/initializeTx.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.initializeTx=void 0;const s=r("../../node_modules/@cardano-sdk/key-management/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/crypto/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/GreedyTxEvaluator.js");const n=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const d=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const c=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/createTransactionInternals.js");const l=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/ensureValidityInterval.js");const u=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/hasCorrectVoteDelegation.js");const dRepPublicKeyHash=async e=>e&&a.Ed25519PublicKey.fromHex(await e.derivePublicKey(s.util.DREP_KEY_DERIVATION_PATH)).hash().hex();const f=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=f)||(0,u.hasCorrectVoteDelegation)(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:a,bip32Account:u,witnesser:f,logger:h})=>{var m;const[p,v,_,w,y,g]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var b;const P=null!==(b=e.txEvaluator)&&void 0!==b?b:new o.GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:(0,d.roundRobinRandomImprove)({changeAddressResolver:new d.StaticChangeAddressResolver(async()=>g)});const{txBody:S,auxiliaryData:C}=(0,c.createPreInputSelectionTxBody)({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:(0,l.ensureValidityInterval)(p.slot,v,null===(m=e.options)||void 0===m?void 0:m.validityInterval),withdrawals:getWithdrawals(w,_.protocolVersion)});const k=e.customizeCb?e.customizeCb({txBody:S}):S;var j;const x=(0,n.defaultSelectionConstraints)({buildTx:async t=>{var r;h.debug("Building TX for selection constraints",t);if(null===(r=k.withdrawals)||void 0===r?void 0:r.length)h.debug("Adding rewards withdrawal in the transaction",k.withdrawals);const o=(0,c.includeChangeAndInputs)({bodyPreInputSelection:k,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const n=await dRepPublicKeyHash(u);const d=new i.Serialization.Transaction(i.Serialization.TransactionBody.fromCore(o.body),i.Serialization.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),C?i.Serialization.AuxiliaryData.fromCore(C):void 0);var l;const m={...n&&{dRepKeyHashHex:n},handleResolutions:null!==(l=e.handleResolutions)&&void 0!==l?l:[],knownAddresses:g,txInKeyPathMap:await s.util.createTxInKeyPathMap(o.body,g,a)};const p={...e.signingOptions,stubSign:true};const{tx:v}=await f.witness(d,m,p);return v},protocolParameters:_,redeemersByType:null!==(j=e.redeemersByType)&&void 0!==j?j:{},txEvaluator:P});const T=i.Cardano.util.computeImplicitCoin(_,{certificates:k.certificates,proposalProcedures:k.proposalProcedures,withdrawals:k.withdrawals});const{selection:E,redeemers:A}=await r.select({constraints:x,implicitValue:{coin:T,mint:k.mint},outputs:new Set(k.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(y)});const I={...e.witness,redeemers:A};const{body:B,hash:F}=(0,c.includeChangeAndInputs)({bodyPreInputSelection:k,inputSelection:E,scriptVersions:e.scriptVersions,witness:I});return{body:B,hash:F,inputSelection:E,redeemers:A}};t.initializeTx=initializeTx},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidHereafterError=t.OutputValidationNegativeAssetQtyError=t.OutputValidationTokenBundleSizeError=t.OutputValidationMinimumCoinError=t.OutputValidationMissingRequiredError=t.OutOfSyncRewardAccounts=t.DeRegistrationsWithRewardsLocked=t.InsufficientRewardAccounts=t.HandleNotFoundError=t.InvalidConfigurationError=t.TxValidityIntervalFailure=t.TxOutputFailure=void 0;const s=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const i=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(a=t.TxOutputFailure||(t.TxOutputFailure={}));var o;(function(e){e["Expired"]="Transaction expired"})(o=t.TxValidityIntervalFailure||(t.TxValidityIntervalFailure={}));class InvalidConfigurationError extends i.CustomError{constructor(e){super(e);this.message=e}}t.InvalidConfigurationError=InvalidConfigurationError;class HandleNotFoundError extends i.CustomError{constructor(e){super(a.HandleNotFound);this.txOut=e}}t.HandleNotFoundError=HandleNotFoundError;class InsufficientRewardAccounts extends i.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}t.InsufficientRewardAccounts=InsufficientRewardAccounts;class DeRegistrationsWithRewardsLocked extends i.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=s.Cardano.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}t.DeRegistrationsWithRewardsLocked=DeRegistrationsWithRewardsLocked;class OutOfSyncRewardAccounts extends i.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}t.OutOfSyncRewardAccounts=OutOfSyncRewardAccounts;class OutputValidationMissingRequiredError extends i.CustomError{constructor(e){super(a.MissingRequiredFields);this.txOut=e}}t.OutputValidationMissingRequiredError=OutputValidationMissingRequiredError;class OutputValidationMinimumCoinError extends i.CustomError{constructor(e,t){super(a.MinimumCoin);this.txOut=e;this.outputValidation=t}}t.OutputValidationMinimumCoinError=OutputValidationMinimumCoinError;class OutputValidationTokenBundleSizeError extends i.CustomError{constructor(e,t){super(a.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}t.OutputValidationTokenBundleSizeError=OutputValidationTokenBundleSizeError;class OutputValidationNegativeAssetQtyError extends i.CustomError{constructor(e,t){super(a.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}t.OutputValidationNegativeAssetQtyError=OutputValidationNegativeAssetQtyError;class InvalidHereafterError extends i.CustomError{constructor(){super(o.Expired)}}t.InvalidHereafterError=InvalidHereafterError},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/utils.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.computeCollateral=t.buildWitness=t.validateValidityInterval=t.buildRedeemers=t.sortRewardAccountsDelegatedFirst=t.createGreedyInputSelector=void 0;const i=r("../../node_modules/@cardano-sdk/core/dist/cjs/index.js");const a=r("../../node_modules/@cardano-sdk/input-selection/dist/cjs/index.js");const o=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-builder/types.js");const n=r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/input-selection/index.js");const d=s(r("../../node_modules/lodash/minBy.js"));const c=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=(0,d.default)(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new a.GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};t.createGreedyInputSelector=createGreedyInputSelector;const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===i.Cardano.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};t.sortRewardAccountsDelegatedFirst=sortRewardAccountsDelegatedFirst;const buildRedeemers=(e,t)=>{const r=[];var s,i,a,o,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(i=e.vote)&&void 0!==i?i:[],...null!==(a=e.propose)&&void 0!==a?a:[],...null!==(o=e.certificate)&&void 0!==o?o:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};t.buildRedeemers=buildRedeemers;const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new o.InvalidHereafterError}};t.validateValidityInterval=validateValidityInterval;const buildWitness=async(e,r,s,i,a,o)=>{const n={signatures:new Map};if(s){n.datums=[];for(const[d,c]of s)if(!i.has(d))n.datums.push(c)}if(e){n.scripts=[];for(const[l,u]of e)if(!r.has(l))n.scripts.push(u)}const{maxExecutionUnitsPerTransaction:f}=await o.protocolParameters();if(a)n.redeemers=(0,t.buildRedeemers)(a,f);return n};t.buildWitness=buildWitness;const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:a}=await e.protocolParameters();let o=0n;for(const d of t){r.push(d);o+=d[1].value.coins;if(o>c){const l=r[0][1].address;const u=r.map(e=>e[1].value);const f=(0,i.coalesceValueQuantities)(u);const h={...f};h.coins-=c;const m={address:l,value:h};if(isValidValue(m,(0,n.computeMinimumCoinQuantity)(s),(0,n.tokenBundleSizeExceedsLimit)(a))){return{collateralReturn:m,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};t.computeCollateral=computeCollateral},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toTxMetadata=t.validateMessage=t.MessageValidationError=t.MessageValidationFailure=t.METADATUM_LABEL=void 0;const s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");t.METADATUM_LABEL=674n;const a=64;var o;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(o=t.MessageValidationFailure||(t.MessageValidationFailure={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,a+1))}`);super(`The provided message array contains validation errors | ${t}`)}}t.MessageValidationError=MessageValidationError;const validateMessage=e=>{if("string"!=typeof e)return{failure:o.wrongType,valid:false};if(i.StringUtils.byteSize(e)>a)return{failure:o.oversize,valid:false};return{valid:true}};t.validateMessage=validateMessage;const toTxMetadata=e=>{const r="string"==typeof e?i.StringUtils.chunkByBytes(e,a):e.messages;const s=new Map;for(const o of r){const n=(0,t.validateMessage)(o);if(!n.valid)s.set(o,n)}if(s.size>0)throw new MessageValidationError(s);return new Map([[t.METADATUM_LABEL,new Map([["msg",r]])]])};t.toTxMetadata=toTxMetadata},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e){for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r))s(t,e,r)}i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CIP20=void 0;t.CIP20=a(r("../../node_modules/@cardano-sdk/tx-construction/dist/cjs/tx-metadata/cip20.js"))},"../../node_modules/@cardano-sdk/tx-construction/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js":(e,t,r)=>{"use strict";r.d(t,{computeMinimumCoinQuantity:()=>computeMinimumCoinQuantity,defaultSelectionConstraints:()=>defaultSelectionConstraints,tokenBundleSizeExceedsLimit:()=>tokenBundleSizeExceedsLimit});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var n=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionOutput.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var u=r("../../node_modules/buffer/index.js")["Buffer"];const f=160;const serializeBigInt=e=>{const t=new d.CborWriter;t.writeInt(BigInt(e));return t.encode()};const serializeTxOutputSize=e=>c.TransactionOutput.fromCore(e).toCbor().length/2;const serializeTx=e=>u.from(a.Transaction.fromCore(e).toCbor(),"hex");const getTotalExUnits=e=>{const t={memory:0,steps:0};for(const r of e){t.memory+=r.executionUnits.memory;t.steps+=r.executionUnits.steps}return t};const minRefScriptFee=(e,t,r)=>{if(0===r)return BigInt(0);let s=r;const i=25600;const a=1.2;let o=0;var n;const d=[...e.body.inputs,...null!==(n=e.body.referenceInputs)&&void 0!==n?n:[]];for(const c of d){const u=t.find(e=>e[0].txId===c.txId&&e[0].index===c.index);if(u&&u[1].scriptReference)o+=l.Script.fromCore(u[1].scriptReference).toCbor().length/2}let f=0;while(o>0){f+=Math.ceil(Math.min(i,o)*s);o=Math.max(o-i,0);s*=a}return BigInt(f)};const minScriptFee=(e,t,r,s)=>{const i=minRefScriptFee(e,r,s);if(!e.witness.redeemers)return BigInt(i);const a=getTotalExUnits(e.witness.redeemers);return BigInt(Math.ceil(a.steps*t.steps+a.memory*t.memory))+i};const minNoScriptFee=(e,t,r)=>{const s=serializeTx(e).length;return BigInt(Math.ceil(s*r+t))};const minAdaRequired=(e,t)=>{const r=serializeBigInt(e.value.coins.toString()).length;let s=r;let i=false;while(!i){const a=s-r;const o=BigInt(serializeTxOutputSize(e)+f+a)*t;const n=serializeBigInt(o.toString()).length;i=s===n;s=n}const d=s-r;return BigInt(serializeTxOutputSize(e)+f+d)*t};const minFee=(e,t,r)=>minNoScriptFee(e,r.minFeeConstant,r.minFeeCoefficient)+minScriptFee(e,r.prices,t,r.minFeeRefScriptCostPerByte?Number(r.minFeeRefScriptCostPerByte):0);var h=r("../../node_modules/buffer/index.js")["Buffer"];const m=0xffffffffffffffffn;const updateRedeemers=(e,t,r)=>{const i=[];const a={[s.RedeemerPurpose.spend]:t.spend,[s.RedeemerPurpose.mint]:t.mint,[s.RedeemerPurpose.certificate]:t.certificate,[s.RedeemerPurpose.withdrawal]:t.withdrawal,[s.RedeemerPurpose.propose]:t.propose,[s.RedeemerPurpose.vote]:t.vote};for(const o of e){const n=a[o.purpose];if(!n)throw new Error(`No redeemers found for ${o.purpose} purpose`);let d;if(o.purpose===s.RedeemerPurpose.spend){const c=r[o.index];d=n.get(`${c.txId}#${c.index}`);if(!d)throw new Error(`Known Redeemer not found for tx id ${c.txId} and index ${c.index}`)}else{const l=n;d=l.find(e=>e.index===o.index);if(!d)throw new Error(`Known Redeemer not found for index ${o.index}`)}i.push({...d,executionUnits:o.budget})}return i};const reorgRedeemers=(e,t,r)=>{let i=[];if(t.redeemers){i=t.redeemers.filter(e=>e.purpose!==s.RedeemerPurpose.spend);if(e.spend){for(const[a,o]of e.spend){const n=r.findIndex(e=>a===`${e.txId}#${e.index}`);if(n<0)throw new Error(`Redeemer not found for tx id ${a}`);o.index=n;i.push({...o})}}}return i};const computeMinimumCost=(e,t,r,s)=>async i=>{const a=await t(i);const o=[...i.inputs];const d=o.map(e=>e[0]).sort(n.sortTxIn);if(a.witness&&a.witness.redeemers&&a.witness.redeemers.length>0){a.witness.redeemers=reorgRedeemers(s,a.witness,d);a.witness.redeemers=updateRedeemers(await r.evaluate(a,o),s,d)}return{fee:minFee(a,o,e),redeemers:a.witness.redeemers}};const computeMinimumCoinQuantity=e=>t=>minAdaRequired(t,BigInt(e));const tokenBundleSizeExceedsLimit=e=>t=>{if(!t){return false}const r=new i.Value(m);r.setMultiasset(t);return r.toCbor().length/2>e};const getTxSize=e=>h.from(e.toCbor(),"hex").length;const computeSelectionLimit=(e,t)=>async r=>{const s=await t(r);const i=getTxSize(a.Transaction.fromCore(s));if(i<=e){return r.inputs.size}return r.inputs.size-1};const defaultSelectionConstraints=({protocolParameters:e,buildTx:t,redeemersByType:r,txEvaluator:s})=>{if(!e.coinsPerUtxoByte||!e.maxTxSize||!e.maxValueSize||!e.minFeeCoefficient||!e.minFeeConstant||!e.prices){throw new o.InvalidProtocolParametersError("Missing one of: coinsPerUtxoByte, maxTxSize, maxValueSize, minFeeCoefficient, minFeeConstant, prices")}return{computeMinimumCoinQuantity:computeMinimumCoinQuantity(e.coinsPerUtxoByte),computeMinimumCost:computeMinimumCost(e,t,s,r),computeSelectionLimit:computeSelectionLimit(e.maxTxSize,t),tokenBundleSizeExceedsLimit:tokenBundleSizeExceedsLimit(e.maxValueSize)}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js":(e,t,r)=>{"use strict";r.d(t,{createOutputValidator:()=>createOutputValidator});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var i=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");const createOutputValidator=({protocolParameters:e})=>{const validateOutput=async({address:t,value:r},a)=>{const{coinsPerUtxoByte:o,maxValueSize:n}=a||await e();const d={address:t,value:r};const c=!!r.assets&&[...r.assets.values()].some(e=>e<=0);if(c){return{coinMissing:0n,minimumCoin:0n,negativeAssetQty:c,tokenBundleSizeExceedsLimit:false}}const l=BigInt((0,i.computeMinimumCoinQuantity)(o)(d));return{coinMissing:s.BigIntMath.max([l-r.coins,0n]),minimumCoin:l,negativeAssetQty:c,tokenBundleSizeExceedsLimit:(0,i.tokenBundleSizeExceedsLimit)(n)(r.assets)}};return{validateOutput,async validateOutputs(t){const r=await e();const s=new Map;for(const i of t)s.set(i,await validateOutput(i,r));return s}}}},"../../node_modules/@cardano-sdk/tx-construction/dist/esm/tx-metadata/cip20.js":(e,t,r)=>{"use strict";r.d(t,{toTxMetadata:()=>toTxMetadata});var s=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");const i={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,t)=>{let r=0;let s=0;const a=[];for(let o=0;o<e.length;o++){const n=o===e.length-1;const d=r+i.byteSize(e[o]);const c=n?t+1:d+i.byteSize(e[o+1]);const l=d===t||c>t||n;if(l){const u=e.slice(s,o+1);a.push(u);s=o+1;r=0}else{r=d}}return a}};const a=674n;const o=64;var n;(function(e){e["wrongType"]="WrongType";e["oversize"]="Oversize"})(n||(n={}));class MessageValidationError extends s.CustomError{constructor(e){const t=[e.entries()].map(([[e,t]])=>`${t.failure}: ${e.slice(0,Math.max(0,o+1))}`);super(`The provided message array contains validation errors | ${t}`)}}const validateMessage=e=>{if("string"!=typeof e)return{failure:n.wrongType,valid:false};if(i.byteSize(e)>o)return{failure:n.oversize,valid:false};return{valid:true}};const toTxMetadata=e=>{const t="string"==typeof e?i.chunkByBytes(e,o):e.messages;const r=new Map;for(const s of t){const n=validateMessage(s);if(!n.valid)r.set(s,n)}if(r.size>0)throw new MessageValidationError(r);return new Map([[a,new Map([["msg",t]])]])}},"../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>i,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/assetId.js":(e,t,r)=>{"use strict";r.d(t,{PXL:()=>a,TSLA:()=>i});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");const i=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8254534c41");const a=s.AssetId("1ec85dcee27f2d90ec1f9a1e4ce74a667dc9be8b184463223f9c960150584c");const o=s.AssetId("a5425bd7bc4182325188af2340415827a73f845846c165d9e14c5aed556e6974");const n=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8241");const d=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8242");const c=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8243");const l=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8244");const u=s.AssetId("659f2917fb63f12b33667463ee575eeac1845bbc736b9c0bbc40ba8245");const f=[i,a,o]},"../../node_modules/@cardano-sdk/util-dev/dist/esm/createStubStakePoolProvider.js":(e,t,r)=>{"use strict";r.d(t,{createStubStakePoolProvider:()=>createStubStakePoolProvider});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/StakePool.js");var a=r("../../node_modules/delay/index.js");const o=[{hexId:s.PoolIdHex("cf12a9dcaacdc09778616d60502011a88ed4542c482f2ddd08d8ac5a"),id:s.PoolId("pool1euf2nh92ehqfw7rpd4s9qgq34z8dg4pvfqhjmhggmzk95gcd402"),metadata:{description:"Keiths Pi test pool",homepage:"",name:"Keiths PiTest",ticker:"KPIT"}},{hexId:s.PoolIdHex("4a2e3b7f4a78ff1452b91329a7673c77c98ca96dece7b55c37869502"),id:s.PoolId("pool1fghrkl620rl3g54ezv56weeuwlyce2tdannm2hphs62syf3vyyh"),metadata:{description:"VEGAS TestNet(2) ADA Pool",homepage:"https://www.ada.vegas",name:"VEGASPool",ticker:"VEGA2"}}];const createStubStakePoolProvider=(e=o,t)=>{return{healthCheck:async()=>{if(t)await a(t);return{ok:true}},queryStakePools:async r=>{var s,i;if(t)await a(t);const o=null==r?void 0:null===(s=r.filters)||void 0===s?void 0:s.identifier;const n=null==r?void 0:null===(i=r.filters)||void 0===i?void 0:i.text;const d=o?o.values:[];const c=e.filter(({id:e,metadata:t})=>{return n&&(null==t?void 0:t.name.includes(n))||n&&(null==t?void 0:t.ticker.includes(n))||d.some(r=>{return r.id&&e.includes(r.id)||r.name&&(null==t?void 0:t.name.includes(r.name))||r.ticker&&(null==t?void 0:t.ticker.includes(r.ticker))})});return{pageResults:c,totalResultCount:c.length}},stakePoolStats:async()=>{if(t)await a(t);return{qty:{activating:0,active:e.filter(e=>e.status===i.StakePoolStatus.Active).length,retired:e.filter(e=>e.status===i.StakePoolStatus.Retired).length,retiring:e.filter(e=>e.status===i.StakePoolStatus.Retiring).length}}}}}},"../../node_modules/@cardano-sdk/util-dev/dist/esm/eraSummaries.js":(e,t,r)=>{"use strict";r.d(t,{testnetEraSummaries:()=>i});var s=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");const i=[{parameters:{epochLength:21600,slotLength:(0,s.Milliseconds)(2e4)},start:{slot:0,time:new Date(1563999616e3)}},{parameters:{epochLength:432e3,slotLength:(0,s.Milliseconds)(1e3)},start:{slot:1598400,time:new Date(1595967616e3)}}]},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.TrackerSubject=void 0;const c=r("../../node_modules/rxjs/dist/esm5/index.js");class TrackerSubject extends c.ReplaySubject{get value(){return i(this,n,"f")}next(e){s(this,n,e,"f");super.next(e)}complete(){i(this,a,"m",d).call(this);super.complete()}error(e){i(this,a,"m",d).call(this);super.error(e)}unsubscribe(){i(this,a,"m",d).call(this);super.unsubscribe()}constructor(e){super(1);a.add(this);o.set(this,void 0);n.set(this,"TRACKER_SUBJECT_NO_VALUE");s(this,o,e.subscribe(this),"f")}}t.TrackerSubject=TrackerSubject;o=new WeakMap,n=new WeakMap,a=new WeakSet,d=function _TrackerSubject_sourceUnsubscribe(){if(i(this,o,"f"))i(this,o,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.blockingWithLatestFrom=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const a=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return o=>{const n=o.pipe((0,s.share)());return(0,s.combineLatest)([n,e.pipe((0,s.startWith)(a),(0,s.takeUntil)(n.pipe((0,s.defaultIfEmpty)(null),(0,s.delay)(1),(0,s.last)())))]).pipe((0,s.mergeScan)(({buffer:e},t)=>{if(t[1]===a){return(0,s.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const i=r===t[0]?e:[...e,t[0]];return(0,s.from)(i.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,s.of)({buffer:[],output:t})},r,1),(0,s.map)(({output:e})=>e),(0,s.filter)(i.isNotNil),(0,s.distinctUntilKeyChanged)(0),(0,s.map)(([e,r])=>t(e,r)))}}t.blockingWithLatestFrom=blockingWithLatestFrom},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.concatAndCombineLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const startOnTrigger=(e,t)=>(0,s.concat)(e.pipe((0,s.take)(1),(0,s.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,s.of)([])}const t=[];let r=e[0].pipe((0,s.share)());t.push(r);for(const i of e.slice(1)){const a=startOnTrigger(r,i);r=a.pipe((0,s.share)());t.push(r)}return(0,s.combineLatest)(t)};t.concatAndCombineLatest=concatAndCombineLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.finalizeWithLatest=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const finalizeWithLatest=e=>t=>{let r=null;return t.pipe((0,s.tap)(e=>r=e),(0,s.finalize)(()=>e(r)))};t.finalizeWithLatest=finalizeWithLatest},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/TrackerSubject.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/blockingWithLatestFrom.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/finalizeWithLatest.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/concatAndCombineLatest.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js"),t);i(r("../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js"),t)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/passthrough.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.passthrough=void 0;const passthrough=()=>e=>e;t.passthrough=passthrough},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/poll.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.poll=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const i=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/index.js");const o=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:n=a.strictEquals,combinator:d=s.switchMap,cancel$:c=s.NEVER,pollUntil:l=()=>true,logger:u})=>r.pipe(d(()=>(0,s.defer)(()=>(0,s.from)(e()).pipe((0,s.mergeMap)(e=>l(e)?(0,s.of)(e):(0,s.concat)((0,s.of)(e),(0,s.throwError)(()=>o))))).pipe((0,i.retryBackoff)({...t,shouldRetry:e=>{if(e===o){u.warn('"pollUntil" condition not met, will retry');return true}u.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);u.debug(`Should retry: ${r}`);return r}return true}}))),(0,s.distinctUntilChanged)(n),(0,s.takeUntil)(c));t.poll=poll},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/shareRetryBackoff.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shareRetryBackoff=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");const i=r("../../node_modules/backoff-rxjs/dist/esm5/index.js");const a={initialInterval:10,maxInterval:5e3,resetOnSuccess:true};const shareRetryBackoff=(e,t)=>r=>{const o=new s.ReplaySubject(1);const n=r.subscribe(o);return new s.Observable(r=>o.pipe(t=>(0,s.defer)(()=>e(t)),(0,i.retryBackoff)({...a,...t}),(0,s.finalize)(()=>{n.unsubscribe()})).subscribe(r))};t.shareRetryBackoff=shareRetryBackoff},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/toEmpty.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toEmpty=void 0;const s=r("../../node_modules/rxjs/dist/esm5/index.js");t.toEmpty=(0,s.mergeMap)(()=>s.EMPTY)},"../../node_modules/@cardano-sdk/util-rxjs/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js":(e,t,r)=>{"use strict";r.d(t,{TrackerSubject:()=>TrackerSubject});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i,a,o,n;class TrackerSubject extends s.ReplaySubject{get value(){return __classPrivateFieldGet(this,o,"f")}next(e){__classPrivateFieldSet(this,o,e,"f");super.next(e)}complete(){__classPrivateFieldGet(this,i,"m",n).call(this);super.complete()}error(e){__classPrivateFieldGet(this,i,"m",n).call(this);super.error(e)}unsubscribe(){__classPrivateFieldGet(this,i,"m",n).call(this);super.unsubscribe()}constructor(e){super(1);i.add(this);a.set(this,void 0);o.set(this,"TRACKER_SUBJECT_NO_VALUE");__classPrivateFieldSet(this,a,e.subscribe(this),"f")}}a=new WeakMap,o=new WeakMap,i=new WeakSet,n=function _TrackerSubject_sourceUnsubscribe(){if(__classPrivateFieldGet(this,a,"f"))__classPrivateFieldGet(this,a,"f").unsubscribe()};TrackerSubject.NO_VALUE="TRACKER_SUBJECT_NO_VALUE"},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js":(e,t,r)=>{"use strict";r.d(t,{blockingWithLatestFrom:()=>blockingWithLatestFrom});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/last.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeScan.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilKeyChanged.js");var v=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const _=Symbol("EMPTY");function blockingWithLatestFrom(e,t=(e,t)=>[e,t]){const r={buffer:[],output:null};return w=>{const y=w.pipe((0,s.share)());return(0,i.combineLatest)([y,e.pipe((0,a.startWith)(_),(0,o.takeUntil)(y.pipe((0,n.defaultIfEmpty)(null),(0,d.delay)(1),(0,c.last)())))]).pipe((0,l.mergeScan)(({buffer:e},t)=>{if(t[1]===_){return(0,u.of)({buffer:[...e,t[0]],output:null})}if(e.length>0){const r=e[e.length-1];const s=r===t[0]?e:[...e,t[0]];return(0,f.from)(s.map(e=>({buffer:[],output:[e,t[1]]})))}return(0,u.of)({buffer:[],output:t})},r,1),(0,h.map)(({output:e})=>e),(0,m.filter)(v.isNotNil),(0,p.distinctUntilKeyChanged)(0),(0,h.map)(([e,r])=>t(e,r)))}}},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js":(e,t,r)=>{"use strict";r.d(t,{poll:()=>poll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var h=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var m=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const p=Symbol("POLL_UNTIL_RETRY");const poll=({sample:e,retryBackoffConfig:t,trigger$:r=(0,s.of)(true),equals:v=m.strictEquals,combinator:_=i.switchMap,cancel$:w=a.NEVER,pollUntil:y=()=>true,logger:g})=>r.pipe(_(()=>(0,o.defer)(()=>(0,n.from)(e()).pipe((0,d.mergeMap)(e=>y(e)?(0,s.of)(e):(0,c.concat)((0,s.of)(e),(0,l.throwError)(()=>p))))).pipe((0,h.retryBackoff)({...t,shouldRetry:e=>{if(e===p){g.warn('"pollUntil" condition not met, will retry');return true}g.error(e);if(t.shouldRetry){const r=t.shouldRetry(e);g.debug(`Should retry: ${r}`);return r}return true}}))),(0,u.distinctUntilChanged)(v),(0,f.takeUntil)(w))},"../../node_modules/@cardano-sdk/util-rxjs/dist/esm/toEmpty.js":(e,t,r)=>{"use strict";r.d(t,{toEmpty:()=>a});var s=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");const a=(0,s.mergeMap)(()=>i.EMPTY)},"../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BigIntMath=void 0;t.BigIntMath={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.calcPercentages=t.Percent=void 0;const i=s(r("../../node_modules/lodash/sum.js"));const Percent=e=>e;t.Percent=Percent;const calcPercentages=(e,r=(0,i.default)(e))=>{if(0===e.length){return[]}let s=(0,i.default)(e);if(r<s)r=s;if(0===r){e=e.map(()=>1);s=(0,i.default)(e);r=s}return e.map(e=>(0,t.Percent)(e/r))};t.calcPercentages=calcPercentages},"../../node_modules/@cardano-sdk/util/dist/cjs/Range.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.throwIfOutsideRange=t.inRange=t.throwIfInvalidRange=t.OutsideRangeError=t.InvalidRangeError=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");class InvalidRangeError extends s.CustomError{constructor(e){super();this.message=e}}t.InvalidRangeError=InvalidRangeError;class OutsideRangeError extends s.CustomError{constructor(e,{lowerBound:t,upperBound:r},s){super();this.message=`${s} - ${e} must be between ${t} and ${r}`}}t.OutsideRangeError=OutsideRangeError;const throwIfInvalidRange=({lowerBound:e,upperBound:t})=>{if(e||t){if(e===t){throw new InvalidRangeError(`Lower bound: ${e}, cannot equal upper bound ${t}`)}else if(e&&e>t){throw new InvalidRangeError(`Lower bound: ${e}, cannot be larger than upper bound: ${t}`)}}else{throw new InvalidRangeError("Must provide at least one bound")}};t.throwIfInvalidRange=throwIfInvalidRange;const inRange=(e,r)=>{(0,t.throwIfInvalidRange)(r);const{lowerBound:s,upperBound:i}=r;if(!s&&i){return e<=i}if(s&&!i){return e>=s}return e>=s&&e<=i};t.inRange=inRange;const throwIfOutsideRange=(e,r,s)=>{if(!(0,t.inRange)(e,r)){throw new OutsideRangeError(e,r,s)}};t.throwIfOutsideRange=throwIfOutsideRange},"../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RunnableModule=t.InvalidModuleState=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const i=r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js");class InvalidModuleState extends s.CustomError{constructor(e,t,r){super();this.message=`${t} cannot be called unless ${e} is ${r}`}}t.InvalidModuleState=InvalidModuleState;class RunnableModule{async initialize(){this.initializeBefore();await this.initializeImpl();this.initializeAfter()}async start(){this.startBefore();await this.startImpl();this.startAfter()}async shutdown(){this.shutdownBefore();await this.shutdownImpl();this.shutdownAfter()}initializeBefore(){if(null!==this.state){throw new InvalidModuleState(this.name,"initializeBefore",null)}this.state="initializing";this.logger.debug("Initializing...")}initializeAfter(){if("initializing"!==this.state){throw new InvalidModuleState(this.name,"initializeAfter","initializing")}this.state="initialized";this.logger.debug("Initialized")}startBefore(){if("initialized"!==this.state){throw new InvalidModuleState(this.name,"start","initialized")}this.state="starting";this.logger.debug("Starting...")}startAfter(){if("starting"!==this.state){throw new InvalidModuleState(this.name,"start","starting")}this.state="running";this.logger.debug("Started")}shutdownBefore(){if("running"!==this.state){throw new InvalidModuleState(this.name,"shutdown","running")}this.state="stopping";this.logger.debug("Stopping...")}shutdownAfter(){if("stopping"!==this.state){throw new InvalidModuleState(this.name,"shutdown","stopping")}this.state="initialized";this.logger.debug("Shutdown complete")}constructor(e,t){this.state=null;this.logger=(0,i.contextLogger)(t,e);this.name=e}}t.RunnableModule=RunnableModule},"../../node_modules/@cardano-sdk/util/dist/cjs/environment.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isBackgroundProcess=t.getEnvironmentConfiguration=t.isProductionEnvironment=t.Environment=void 0;var r;(function(e){e["Production"]="production";e["Development"]="development"})(r=t.Environment||(t.Environment={}));const isProductionEnvironment=()=>"production"===r.Production;t.isProductionEnvironment=isProductionEnvironment;const getEnvironmentConfiguration=()=>(0,t.isProductionEnvironment)()?r.Production:r.Development;t.getEnvironmentConfiguration=getEnvironmentConfiguration;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background");t.isBackgroundProcess=isBackgroundProcess},"../../node_modules/@cardano-sdk/util/dist/cjs/equals.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.areStringsEqualInConstantTime=t.areNumbersEqualInConstantTime=t.sameArrayItems=t.strictEquals=t.deepEquals=void 0;const i=s(r("../../node_modules/lodash/isEqual.js"));const deepEquals=(e,t)=>(0,i.default)(e,t);t.deepEquals=deepEquals;const strictEquals=(e,t)=>e===t;t.strictEquals=strictEquals;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));t.sameArrayItems=sameArrayItems;const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;t.areNumbersEqualInConstantTime=areNumbersEqualInConstantTime;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const i=s.reduce((e,t)=>e&t,1);return 1===i};t.areStringsEqualInConstantTime=areStringsEqualInConstantTime},"../../node_modules/@cardano-sdk/util/dist/cjs/errors.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InvalidStateError=t.InvalidArgumentError=t.InvalidStringError=t.ComposableError=t.stripStackTrace=t.formatErrorMessage=void 0;const s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");t.formatErrorMessage=formatErrorMessage;const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))(0,t.stripStackTrace)(e.innerError)};t.stripStackTrace=stripStackTrace;class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[i]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${i}${s.join(ComposableError.stackDelimiter)}`})}}t.ComposableError=ComposableError;ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}t.InvalidStringError=InvalidStringError;class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}t.InvalidArgumentError=InvalidArgumentError;class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}t.InvalidStateError=InvalidStateError},"../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js":function(e,t,r){"use strict";var s=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var i=this&&this.__classPrivateFieldSet||function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var a,o,n,d;Object.defineProperty(t,"__esModule",{value:true});t.usingAutoFree=t.ManagedFreeableScope=void 0;const c=r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js");class ManagedFreeableScope{manage(e){if(void 0===e)return e;if(s(this,o,"f"))throw new Error("This scope is already disposed.");s(this,a,"f").push(e);return e}dispose(){if(s(this,o,"f"))return;for(const e of s(this,a,"f")){if((null==e?void 0:e.ptr)===0||!(null==e?void 0:e.free)){continue}null==e?void 0:e.free()}i(this,o,true,"f")}constructor(){a.set(this,[]);o.set(this,false)}}t.ManagedFreeableScope=ManagedFreeableScope;a=new WeakMap,o=new WeakMap;class AutoFree{execute(){let e;try{e=s(this,d,"f").call(this,s(this,n,"f"));if((0,c.isPromise)(e)){return e.then(e=>{s(this,n,"f").dispose();return e}).catch(e=>{s(this,n,"f").dispose();throw e})}s(this,n,"f").dispose();return e}catch(t){s(this,n,"f").dispose();throw t}}constructor(e){n.set(this,void 0);d.set(this,void 0);i(this,d,e,"f");i(this,n,new ManagedFreeableScope,"f")}}n=new WeakMap,d=new WeakMap;const usingAutoFree=e=>new AutoFree(e).execute();t.usingAutoFree=usingAutoFree},"../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.bufferToHexString=t.hexStringToBuffer=void 0;const hexStringToBuffer=e=>s.from(e,"hex");t.hexStringToBuffer=hexStringToBuffer;const bufferToHexString=e=>e.toString("hex");t.bufferToHexString=bufferToHexString},"../../node_modules/@cardano-sdk/util/dist/cjs/index.js":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){if(void 0===s)s=r;var i=Object.getOwnPropertyDescriptor(t,r);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable))i={enumerable:true,get:function(){return t[r]}};Object.defineProperty(e,s,i)}:function(e,t,r,s){if(void 0===s)s=r;e[s]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if("default"!==r&&!Object.prototype.hasOwnProperty.call(t,r))s(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r("../../node_modules/@cardano-sdk/util/dist/cjs/equals.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/freeable.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/types.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/BigIntMath.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/hexString.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/network.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/logging.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/Range.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/RunnableModule.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/environment.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/string.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/Percent.js"),t);i(r("../../node_modules/@cardano-sdk/util/dist/cjs/util.js"),t)},"../../node_modules/@cardano-sdk/util/dist/cjs/isNotNil.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isNotNil=void 0;const isNotNil=e=>null!=e;t.isNotNil=isNotNil},"../../node_modules/@cardano-sdk/util/dist/cjs/isPromise.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPromise=void 0;const isPromise=e=>"object"==typeof e&&"function"==typeof e.then;t.isPromise=isPromise},"../../node_modules/@cardano-sdk/util/dist/cjs/logging.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.contextLogger=t.loggerMethodNames=void 0;t.loggerMethodNames=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,r,s=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const i={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],r],contextStringify:s};const a=s(i.contextArray);return{...i,...Object.fromEntries(t.loggerMethodNames.map(e=>[e,(t,...r)=>{i.baseLogger[e](a,t,...r)}]))}};t.contextLogger=contextLogger},"../../node_modules/@cardano-sdk/util/dist/cjs/network.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isConnectionError=void 0;const r=new Set(["ETIMEDOUT","ECONNRESET","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]);const s=new Set(["WebSocketClosed","ServerNotReady"]);const isConnectionError=e=>{if(!e||"object"!=typeof e)return false;if((null==e?void 0:e.name)&&s.has(e.name)||(null==e?void 0:e.code)&&r.has(e.code)){return true}return(0,t.isConnectionError)(e.innerError)};t.isConnectionError=isConnectionError},"../../node_modules/@cardano-sdk/util/dist/cjs/opaqueTypes.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/patchObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.patchObject=void 0;const patchObject=(e,t)=>new Proxy(e,{get(e,r,s){const i=r in t?t[r]:e[r];return"function"==typeof i?i.bind(s):i}});t.patchObject=patchObject},"../../node_modules/@cardano-sdk/util/dist/cjs/primitives.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];Object.defineProperty(t,"__esModule",{value:true});t.castHexBlob=t.HexBlob=t.Base64Blob=t.typedHex=t.assertIsHexString=t.typedBech32=t.assertIsBech32WithPrefix=void 0;const i=r("../../node_modules/bech32/dist/index.js");const a=r("../../node_modules/@cardano-sdk/util/dist/cjs/errors.js");const o=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let s;try{s=i.bech32.decode(e,o)}catch(n){throw new a.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(s.prefix,t)){throw new a.InvalidStringError(`expected bech32 prefix '${t}', got '${s.prefix}''`)}if(r&&!isOneOf(s.words.length,r)){throw new a.InvalidStringError(`expected decoded length of '${r}', got '${s.words.length}'`)}};t.assertIsBech32WithPrefix=assertIsBech32WithPrefix;const typedBech32=(e,r,s)=>{(0,t.assertIsBech32WithPrefix)(e,r,s);return e};t.typedBech32=typedBech32;const assertLength=(e,t)=>{if(e&&t.length!==e){throw new a.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new a.InvalidStringError("expected hex string")}};t.assertIsHexString=assertIsHexString;const typedHex=(e,r)=>{(0,t.assertIsHexString)(e,r);return e};t.typedHex=typedHex;const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new a.InvalidStringError("expected base64 string")};t.Base64Blob=Base64Blob;t.Base64Blob.fromBytes=e=>s.from(e).toString("base64");const HexBlob=e=>(0,t.typedHex)(e);t.HexBlob=HexBlob;t.HexBlob.fromBytes=e=>s.from(e).toString("hex");t.HexBlob.CHARS_PER_BYTE=2;t.HexBlob.fromBase64=e=>s.from(e,"base64").toString("hex");t.HexBlob.toTypedBech32=(e,t)=>i.bech32.encode(e,i.bech32.toWords(Uint8Array.from(s.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e};t.castHexBlob=castHexBlob},"../../node_modules/@cardano-sdk/util/dist/cjs/replaceNullsToUndefineds.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.replaceNullsWithUndefineds=void 0;const replaceNullsWithUndefineds=e=>{const r={};for(const s of Object.keys(e)){const i=e[s];r[s]=null===i?void 0:i&&"object"==typeof i&&i.__proto__.constructor===Object?(0,t.replaceNullsWithUndefineds)(i):i}return r};t.replaceNullsWithUndefineds=replaceNullsWithUndefineds},"../../node_modules/@cardano-sdk/util/dist/cjs/serializableObject.js":function(e,t,r){"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.fromSerializableObject=t.toSerializableObject=void 0;const a=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");const o=i(r("../../node_modules/lodash/transform.js"));const n=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const d="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const isNativeNonSerializableType=e=>{if(void 0===e||"bigint"==typeof e)return true;if("object"==typeof e&&null!==e){if(e instanceof Date)return true;if(e instanceof Error)return true;if(e instanceof Map)return true;if(e instanceof Set)return true;if(ArrayBuffer.isView(e))return true}return false};const toSerializableObject=(e,r={})=>{if(n.has(typeof e))return e;const{transformationTypeKey:i=d,serializeKey:c=defaultTransformKey}=r;if(void 0===e){return{[i]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>(0,t.toSerializableObject)(e,r))}if(ArrayBuffer.isView(e)){const l=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const u=s.from(l).toString("hex");return{[i]:"Buffer",value:u}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=(0,t.toSerializableObject)(e.innerError.data);return{[i]:"Error",value:(0,a.serializeError)(e)}}if(e instanceof Date){return{[i]:"Date",value:e.getTime()}}if(e instanceof Set){return{[i]:"Set",value:[...e].map(e=>(0,t.toSerializableObject)(e,r))}}if(e instanceof Map){return{[i]:"Map",value:[...e.entries()].map(([e,s])=>[(0,t.toSerializableObject)(e,r),(0,t.toSerializableObject)(s,r)])}}return(0,o.default)(e,(e,s,i)=>{e[c(i)]=(0,t.toSerializableObject)(s,r);return e},{})}if("bigint"==typeof e)return{[i]:"bigint",value:e.toString()}};t.toSerializableObject=toSerializableObject;const fromSerializableObjectUnknown=(e,t={})=>{if(n.has(typeof e))return e;if(isNativeNonSerializableType(e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=d,deserializeKey:i=defaultTransformKey,errorTypes:a=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(s.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(a,l))}default:return(0,o.default)(e,(e,r,s)=>{e[i(s)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t);t.fromSerializableObject=fromSerializableObject},"../../node_modules/@cardano-sdk/util/dist/cjs/string.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StringUtils=void 0;t.StringUtils={byteSize:e=>new Blob([e]).size,chunkByBytes:(e,r)=>{let s=0;let i=0;const a=[];for(let o=0;o<e.length;o++){const n=o===e.length-1;const d=s+t.StringUtils.byteSize(e[o]);const c=n?r+1:d+t.StringUtils.byteSize(e[o+1]);const l=d===r||c>r||n;if(l){const u=e.slice(i,o+1);a.push(u);i=o+1;s=0}else{s=d}}return a}}},"../../node_modules/@cardano-sdk/util/dist/cjs/transformer.js":function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.transformObj=void 0;const i=s(r("../../node_modules/lodash/isUndefined.js"));const a=s(r("../../node_modules/lodash/merge.js"));const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:(0,a.default)(e,{[t]:r}),{})}return e};const transformObj=async(e,r,s)=>{const a=Object.entries(r);const o=Object.create({});for(const[n,d]of a)o[n]=await ("function"==typeof d?d(e,s):(0,t.transformObj)(e,d,s));return deepOmitBy(o,i.default)};t.transformObj=transformObj},"../../node_modules/@cardano-sdk/util/dist/cjs/types.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},"../../node_modules/@cardano-sdk/util/dist/cjs/util.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.resolveObjectValues=void 0;const resolveObjectValues=async e=>Object.fromEntries(await Promise.all(Object.entries(e).map(([e,t])=>Promise.resolve(t).then(t=>[e,t]))));t.resolveObjectValues=resolveObjectValues},"../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js":(e,t,r)=>{"use strict";r.d(t,{BigIntMath:()=>s});const s={abs(e){return e<0n?-e:e},max(e){if(0===e.length)return null;let t=e[0];for(const r of e.slice(1))if(r>t)t=r;return t},subtract(e){if(0===e.length)return 0n;return e.reduce((e,t)=>e-t)},sum(e){return e.reduce((e,t)=>e+t,0n)}}},"../../node_modules/@cardano-sdk/util/dist/esm/Percent.js":(e,t,r)=>{"use strict";r.d(t,{Percent:()=>Percent,calcPercentages:()=>calcPercentages});var s=r("../../node_modules/lodash/sum.js");const Percent=e=>e;const calcPercentages=(e,t=s(e))=>{if(0===e.length){return[]}let r=s(e);if(t<r)t=r;if(0===t){e=e.map(()=>1);r=s(e);t=r}return e.map(e=>Percent(e/t))}},"../../node_modules/@cardano-sdk/util/dist/esm/environment.js":(e,t,r)=>{"use strict";r.d(t,{isBackgroundProcess:()=>isBackgroundProcess,isProductionEnvironment:()=>isProductionEnvironment});var s;(function(e){e["Production"]="production";e["Development"]="development"})(s||(s={}));const isProductionEnvironment=()=>"production"===s.Production;const getEnvironmentConfiguration=()=>isProductionEnvironment()?s.Production:s.Development;const isBackgroundProcess=()=>"undefined"==typeof window||window.location.href.includes("_generated_background")},"../../node_modules/@cardano-sdk/util/dist/esm/equals.js":(e,t,r)=>{"use strict";r.d(t,{areNumbersEqualInConstantTime:()=>areNumbersEqualInConstantTime,areStringsEqualInConstantTime:()=>areStringsEqualInConstantTime,deepEquals:()=>deepEquals,sameArrayItems:()=>sameArrayItems,strictEquals:()=>strictEquals});var s=r("../../node_modules/lodash/isEqual.js");const deepEquals=(e,t)=>s(e,t);const strictEquals=(e,t)=>e===t;const sameArrayItems=(e,t,r)=>e.length===t.length&&e.every(e=>t.some(t=>r(e,t)));const areNumbersEqualInConstantTime=(e,t)=>(e^t)===0;const areStringsEqualInConstantTime=(e,t)=>{const r=Math.max(e.length,t.length);const s=Array.from({length:r},(r,s)=>e.charCodeAt(s)===t.charCodeAt(s)?1:0);const i=s.reduce((e,t)=>e&t,1);return 1===i}},"../../node_modules/@cardano-sdk/util/dist/esm/errors.js":(e,t,r)=>{"use strict";r.d(t,{ComposableError:()=>ComposableError,InvalidArgumentError:()=>InvalidArgumentError,InvalidStateError:()=>InvalidStateError,InvalidStringError:()=>InvalidStringError,formatErrorMessage:()=>formatErrorMessage,stripStackTrace:()=>stripStackTrace});var s=r("../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs");const formatErrorMessage=(e,t)=>e+(t?` (${t})`:"");const isWithInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const isErrorLike=e=>{if(!e||"object"!=typeof e||!("message"in e&&"stack"in e))return false;const{message:t,stack:r}=e;return"string"==typeof t&&"string"==typeof r};const stripStackTrace=e=>{if(!e)return;if(isErrorLike(e))delete e.stack;if(isWithInnerError(e))stripStackTrace(e.innerError)};class ComposableError extends s.CustomError{constructor(e,t){let r="";let s=[];if(isErrorLike(t)&&t.stack){[r,...s]=t.stack.split(ComposableError.stackDelimiter);e=`${e} due to
 ${r}`}if("string"==typeof t)e=`${e} due to
 ${t}`;super(e);this.innerError=t;if(!this.stack||0===s.length)return;const[i]=this.stack.split(ComposableError.stackDelimiter);Object.defineProperty(this,"stack",{configurable:true,value:`${i}${s.join(ComposableError.stackDelimiter)}`})}}ComposableError.stackDelimiter="\n    at ";class InvalidStringError extends ComposableError{constructor(e,t){super(`Invalid string: "${e}"`,t)}}class InvalidArgumentError extends s.CustomError{constructor(e,t){super(`Invalid argument '${e}': ${t}`)}}class InvalidStateError extends s.CustomError{constructor(e){super(`Invalid state': ${e}`)}}},"../../node_modules/@cardano-sdk/util/dist/esm/hexString.js":(e,t,r)=>{"use strict";r.d(t,{hexStringToBuffer:()=>hexStringToBuffer});var s=r("../../node_modules/buffer/index.js")["Buffer"];const hexStringToBuffer=e=>s.from(e,"hex");const bufferToHexString=e=>e.toString("hex")},"../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js":(e,t,r)=>{"use strict";r.d(t,{isNotNil:()=>isNotNil});const isNotNil=e=>null!=e},"../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js":(e,t,r)=>{"use strict";r.d(t,{isPromise:()=>isPromise});const isPromise=e=>"object"==typeof e&&"function"==typeof e.then},"../../node_modules/@cardano-sdk/util/dist/esm/logging.js":(e,t,r)=>{"use strict";r.d(t,{contextLogger:()=>contextLogger});const s=["debug","error","fatal","info","trace","warn"];const contextLogger=(e,t,r=t=>e.contextStringify?e.contextStringify(t):`[${t.join("|")}]`)=>{const i={baseLogger:e.baseLogger||e,contextArray:[...e.contextArray||[],t],contextStringify:r};const a=r(i.contextArray);return{...i,...Object.fromEntries(s.map(e=>[e,(t,...r)=>{i.baseLogger[e](a,t,...r)}]))}}},"../../node_modules/@cardano-sdk/util/dist/esm/primitives.js":(e,t,r)=>{"use strict";r.d(t,{Base64Blob:()=>Base64Blob,HexBlob:()=>HexBlob,assertIsBech32WithPrefix:()=>assertIsBech32WithPrefix,assertIsHexString:()=>assertIsHexString,castHexBlob:()=>castHexBlob,typedBech32:()=>typedBech32,typedHex:()=>typedHex});var s=r("../../node_modules/bech32/dist/index.js");var i=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const o=1023;const isOneOf=(e,t)=>Array.isArray(t)&&t.includes(e)||e===t;const assertIsBech32WithPrefix=(e,t,r)=>{let a;try{a=s.bech32.decode(e,o)}catch(n){throw new i.InvalidStringError(`expected bech32-encoded string with '${t}' prefix`,n)}if(!isOneOf(a.prefix,t)){throw new i.InvalidStringError(`expected bech32 prefix '${t}', got '${a.prefix}''`)}if(r&&!isOneOf(a.words.length,r)){throw new i.InvalidStringError(`expected decoded length of '${r}', got '${a.words.length}'`)}};const typedBech32=(e,t,r)=>{assertIsBech32WithPrefix(e,t,r);return e};const assertLength=(e,t)=>{if(e&&t.length!==e){throw new i.InvalidStringError(`expected length '${e}', got ${t.length}`)}};const assertIsHexString=(e,t)=>{assertLength(t,e);if(e.length>0&&!/^[\da-f]+$/i.test(e)){throw new i.InvalidStringError("expected hex string")}};const typedHex=(e,t)=>{assertIsHexString(e,t);return e};const Base64Blob=e=>{if(/^(?:[\d+/a-z]{4})*(?:[\d+/a-z]{2}==|[\d+/a-z]{3}=)?$/i.test(e)){return e}throw new i.InvalidStringError("expected base64 string")};Base64Blob.fromBytes=e=>a.from(e).toString("base64");const HexBlob=e=>typedHex(e);HexBlob.fromBytes=e=>a.from(e).toString("hex");HexBlob.CHARS_PER_BYTE=2;HexBlob.fromBase64=e=>a.from(e,"base64").toString("hex");HexBlob.toTypedBech32=(e,t)=>s.bech32.encode(e,s.bech32.toWords(Uint8Array.from(a.from(t,"hex"))));const castHexBlob=(e,t)=>{assertLength(t,e);return e}},"../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js":(e,t,r)=>{"use strict";r.d(t,{fromSerializableObject:()=>fromSerializableObject,toSerializableObject:()=>toSerializableObject});var s=r("../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js");var i=r("../../node_modules/lodash/transform.js");var a=r("../../node_modules/buffer/index.js")["Buffer"];const o=new Set(["boolean","number","string"]);const matchPrototype=(e,t)=>{if("object"==typeof t&&null!==t){for(let r of e){var s;if(t.name===r.name){return r.prototype}r=null===(s=Object.getPrototypeOf(r.prototype))||void 0===s?void 0:s.constructor}}return Error.prototype};const defaultTransformKey=e=>e;const n="__type";const hasInnerError=e=>null!==e&&"object"==typeof e&&"innerError"in e;const innerErrorHasData=e=>"object"==typeof e&&null!==e&&"data"in e;const isNativeNonSerializableType=e=>{if(void 0===e||"bigint"==typeof e)return true;if("object"==typeof e&&null!==e){if(e instanceof Date)return true;if(e instanceof Error)return true;if(e instanceof Map)return true;if(e instanceof Set)return true;if(ArrayBuffer.isView(e))return true}return false};const toSerializableObject=(e,t={})=>{if(o.has(typeof e))return e;const{transformationTypeKey:r=n,serializeKey:d=defaultTransformKey}=t;if(void 0===e){return{[r]:"undefined"}}if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>toSerializableObject(e,t))}if(ArrayBuffer.isView(e)){const c=new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);const l=a.from(c).toString("hex");return{[r]:"Buffer",value:l}}if(e instanceof Error){if(hasInnerError(e)&&innerErrorHasData(e.innerError))e.innerError.data=toSerializableObject(e.innerError.data);return{[r]:"Error",value:(0,s.serializeError)(e)}}if(e instanceof Date){return{[r]:"Date",value:e.getTime()}}if(e instanceof Set){return{[r]:"Set",value:[...e].map(e=>toSerializableObject(e,t))}}if(e instanceof Map){return{[r]:"Map",value:[...e.entries()].map(([e,r])=>[toSerializableObject(e,t),toSerializableObject(r,t)])}}return i(e,(e,r,s)=>{e[d(s)]=toSerializableObject(r,t);return e},{})}if("bigint"==typeof e)return{[r]:"bigint",value:e.toString()}};const fromSerializableObjectUnknown=(e,t={})=>{if(o.has(typeof e))return e;if(isNativeNonSerializableType(e))return e;if("object"==typeof e){if(null===e)return null;if(Array.isArray(e)){return e.map(e=>fromSerializableObjectUnknown(e,t))}const{transformationTypeKey:r=n,deserializeKey:s=defaultTransformKey,errorTypes:d=[]}=t;const c=e;switch(c[r]){case"undefined":return;case"bigint":return BigInt(c.value);case"Buffer":return new Uint8Array(a.from(c.value,"hex"));case"Date":return new Date(c.value);case"Set":return new Set(c.value.map(e=>fromSerializableObjectUnknown(e,t)));case"Map":return new Map(c.value.map(e=>e.map(e=>fromSerializableObjectUnknown(e,t))));case"Error":{const l=fromSerializableObjectUnknown(c.value,t);return Object.setPrototypeOf(l,matchPrototype(d,l))}default:return i(e,(e,r,i)=>{e[s(i)]=fromSerializableObjectUnknown(r,t);return e},{})}}};const fromSerializableObject=(e,t)=>fromSerializableObjectUnknown(e,t)},"../../node_modules/@cardano-sdk/util/dist/esm/transformer.js":(e,t,r)=>{"use strict";r.d(t,{transformObj:()=>transformObj});var s=r("../../node_modules/lodash/isUndefined.js");var i=r("../../node_modules/lodash/merge.js");const deepOmitBy=(e,t)=>{if(Array.isArray(e))return e;if(e&&"object"==typeof e){return Object.entries(e).map(([e,r])=>[e,"object"==typeof r?deepOmitBy(r,t):r,t(r)]).reduce((e,[t,r,s])=>s?e:i(e,{[t]:r}),{})}return e};const transformObj=async(e,t,r)=>{const i=Object.entries(t);const a=Object.create({});for(const[o,n]of i)a[o]=await ("function"==typeof n?n(e,r):transformObj(e,n,r));return deepOmitBy(a,s)}},"../../node_modules/@cardano-sdk/util/node_modules/serialize-error/index.js":(e,t,r)=>{"use strict";var s=r("../../node_modules/buffer/index.js")["Buffer"];class NonError extends Error{constructor(e){super(NonError._prepareSuperMessage(e));Object.defineProperty(this,"name",{value:"NonError",configurable:true,writable:true});if(Error.captureStackTrace)Error.captureStackTrace(this,NonError)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const i=[{property:"name",enumerable:false},{property:"message",enumerable:false},{property:"stack",enumerable:false},{property:"code",enumerable:true}];const a=Symbol(".toJSON called");const toJSON=e=>{e[a]=true;const t=e.toJSON();delete e[a];return t};const destroyCircular=({from:e,seen:t,to_:r,forceEnumerable:o,maxDepth:n,depth:d})=>{const c=r||(Array.isArray(e)?[]:{});t.push(e);if(d>=n){return c}if("function"==typeof e.toJSON&&true!==e[a]){return toJSON(e)}for(const[l,u]of Object.entries(e)){if("function"==typeof s&&s.isBuffer(u)){c[l]="[object Buffer]";continue}if("function"==typeof u){continue}if(!u||"object"!=typeof u){c[l]=u;continue}if(!t.includes(e[l])){d++;c[l]=destroyCircular({from:e[l],seen:t.slice(),forceEnumerable:o,maxDepth:n,depth:d});continue}c[l]="[Circular]"}for(const{property:f,enumerable:h}of i)if("string"==typeof e[f])Object.defineProperty(c,f,{value:e[f],enumerable:!!o||h,configurable:true,writable:true});return c};const serializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if("object"==typeof e&&null!==e){return destroyCircular({from:e,seen:[],forceEnumerable:true,maxDepth:r,depth:0})}if("function"==typeof e){return`[Function: ${e.name||"anonymous"}]`}return e};const deserializeError=(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error){return e}if("object"==typeof e&&null!==e&&!Array.isArray(e)){const s=new Error;destroyCircular({from:e,seen:[],to_:s,maxDepth:r,depth:0});return s}return new NonError(e)};e.exports={serializeError,deserializeError}},"../../node_modules/@cardano-sdk/util/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.r(t);r.d(t,{CustomError:()=>i,customErrorFactory:()=>customErrorFactory});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/BaseWallet.js":(e,t,r)=>{"use strict";r.d(t,{BaseWallet:()=>BaseWallet,DEFAULT_POLLING_CONFIG:()=>sP,PublicCredentialsManagerType:()=>sb});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/types.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Asset.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/cip67.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Asset/util/getAssetNameAsText.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/concatMap.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/startWith.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/distinctUntilChanged.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var g=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var b=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");const passthrough=()=>e=>e;var P=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");var S=r("../../node_modules/lodash/uniqBy.js");const C=50;const k=5;const handleInfoEquals=(e,t)=>{var r,s;return e.assetId===t.assetId&&(null===(r=e.resolvedAt)||void 0===r?void 0:r.hash)===(null===(s=t.resolvedAt)||void 0===s?void 0:s.hash)&&(0,g.deepEquals)(e.tokenMetadata,t.tokenMetadata)&&(0,g.deepEquals)(e.nftMetadata,t.nftMetadata)};const isHydrated=e=>"image"in e&&"backgroundImage"in e&&"profilePic"in e;const hydrateHandleAsync=(e,t)=>{return async r=>{t.debug("hydrating handle",r.handle);try{const[s]=await e.resolveHandles({handles:[r.handle]});return{...r,backgroundImage:null==s?void 0:s.backgroundImage,image:null==s?void 0:s.image,profilePic:null==s?void 0:s.profilePic,resolvedAt:null==s?void 0:s.resolvedAt}}catch(i){t.error("Couldn't hydrate handle",i);throw i}}};const hydrateHandles=e=>t=>{const r={};return t.pipe((0,n.mergeMap)(t=>(0,d.from)(t).pipe((0,c.concatMap)(t=>t.handle in r?(0,l.of)(r[t.handle]):(0,u.defer)(()=>(0,d.from)(e(t))).pipe((0,P.retryBackoff)({initialInterval:C,maxRetries:k,resetOnSuccess:true}),(0,f.catchError)(()=>(0,l.of)(t)))),(0,h.tap)(e=>{if(isHydrated(e))r[e.handle]=e}),(0,m.toArray)(),t.length>0?(0,p.startWith)(t):passthrough())))};const createHandlesTracker=({assetInfo$:e,handlePolicyIds$:t,handleProvider:r,logger:s,utxo$:d},{hydrateHandle:c=hydrateHandleAsync}={})=>{return(0,v.combineLatest)([t,d,e]).pipe((0,n.mergeMap)(([e,t,r])=>{const n=t.flatMap(([t,r])=>{var s;return S([...(null===(s=r.value.assets)||void 0===s?void 0:s.keys())||[]].filter(t=>{const r=e.some(e=>t.startsWith(e));if(!r){return false}const s=i.AssetId.getAssetName(t);const o=a.AssetNameLabel.decode(s);return!o||o.label===a.AssetNameLabelNum.UserNFT}).map(e=>({handleAssetId:e,txOut:r})),({handleAssetId:e})=>e)});const d=n.map(({handleAssetId:e,txOut:t})=>{const i=r.get(e);if(!i){s.debug(`Asset info not (yet?) found for ${e}`);return null}return{...i,addresses:{cardano:t.address},cardanoAddress:t.address,handle:o.getAssetNameAsText(e),hasDatum:!!t.datum}}).filter(b.isNotNil);if(n.length>0&&0===d.length){return _.EMPTY}return(0,l.of)(d.filter(({handle:e,supply:t})=>{if(t>1n){s.warn(`Omitting handle with supply >1: ${e}`);return false}return true}))}),(0,w.distinctUntilChanged)((e,t)=>(0,g.sameArrayItems)(e,t,handleInfoEquals)),hydrateHandles(c(r,s)),(0,y.shareReplay)({bufferSize:1,refCount:true}))};var j=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var x=r("../../node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var E=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var A=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");var I;(function(e){e[e["down"]=0]="down";e[e["up"]=1]="up"})(I||(I={}));const createSimpleConnectionStatusTracker=({isNodeEnv:e=(0,A.isBackgroundProcess)(),online$:t=e?j.NEVER:(0,x.fromEvent)(window,"online"),offline$:r=e?j.NEVER:(0,x.fromEvent)(window,"offline"),initialStatus:s=!!e||navigator.onLine}={})=>(0,T.merge)(t.pipe((0,E.map)(()=>true)),r.pipe((0,E.map)(()=>false))).pipe((0,p.startWith)(s),(0,E.map)(e=>e?I.up:I.down),(0,w.distinctUntilChanged)(),(0,y.shareReplay)(1));var B=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");const F={numCalls:0,numFailures:0,numResponses:0};class ProviderTracker{async trackedCall(e,t){t.next({...t.value,numCalls:t.value.numCalls+1});try{const r=await e();const s=t.value.numResponses+1;t.next({...t.value,didLastRequestFail:false,initialized:true,numResponses:s});return r}catch(i){t.next({...t.value,didLastRequestFail:true,numFailures:t.value.numFailures+1});throw i}}setStatInitialized(e){e.next({...e.value,initialized:true})}}const M={...F,initialized:true};class TxSubmitProviderStats{shutdown(){this.submitTx$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(M);this.submitTx$.next(M)}constructor(){this.healthCheck$=new B.BehaviorSubject(M);this.submitTx$=new B.BehaviorSubject(M)}}class TrackedTxSubmitProvider extends ProviderTracker{constructor(e){super();this.stats=new TxSubmitProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.submitTx=t=>this.trackedCall(()=>e.submitTx(t),this.stats.submitTx$)}}class UtxoProviderStats{shutdown(){this.utxoByAddresses$.complete();this.healthCheck$.complete()}reset(){this.healthCheck$.next(F);this.utxoByAddresses$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.utxoByAddresses$=new B.BehaviorSubject(F)}}class TrackedUtxoProvider extends ProviderTracker{constructor(e){super();this.stats=new UtxoProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.utxoByAddresses=t=>this.trackedCall(()=>e.utxoByAddresses(t),this.stats.utxoByAddresses$)}}class WalletNetworkInfoProviderStats{shutdown(){this.eraSummaries$.complete();this.protocolParameters$.complete();this.genesisParameters$.complete();this.ledgerTip$.complete()}reset(){this.eraSummaries$.next(F);this.protocolParameters$.next(F);this.genesisParameters$.next(F);this.ledgerTip$.next(F)}constructor(){this.eraSummaries$=new B.BehaviorSubject(F);this.protocolParameters$=new B.BehaviorSubject(F);this.genesisParameters$=new B.BehaviorSubject(F);this.ledgerTip$=new B.BehaviorSubject(F)}}class TrackedWalletNetworkInfoProvider extends ProviderTracker{constructor(e){super();this.stats=new WalletNetworkInfoProviderStats;e=e;this.eraSummaries=()=>this.trackedCall(()=>e.eraSummaries(),this.stats.eraSummaries$);this.ledgerTip=()=>this.trackedCall(()=>e.ledgerTip(),this.stats.ledgerTip$);this.protocolParameters=()=>this.trackedCall(()=>e.protocolParameters(),this.stats.protocolParameters$);this.genesisParameters=()=>this.trackedCall(()=>e.genesisParameters(),this.stats.genesisParameters$)}}class AssetProviderStats{shutdown(){this.healthCheck$.complete();this.getAsset$.complete()}reset(){this.healthCheck$.next(F);this.getAsset$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.getAsset$=new B.BehaviorSubject(F)}}class TrackedAssetProvider extends ProviderTracker{constructor(e){super();this.stats=new AssetProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.getAsset=({assetId:t,extraData:r})=>this.trackedCall(()=>e.getAsset({assetId:t,extraData:r}),this.stats.getAsset$);this.getAssets=({assetIds:t,extraData:r})=>this.trackedCall(()=>e.getAssets({assetIds:t,extraData:r}),this.stats.getAsset$)}}class ChainHistoryProviderStats{shutdown(){this.healthCheck$.complete();this.blocksByHashes$.complete();this.transactionsByAddresses$.complete();this.transactionsByHashes$.complete()}reset(){this.healthCheck$.next(F);this.blocksByHashes$.next(F);this.transactionsByAddresses$.next(F);this.transactionsByHashes$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.blocksByHashes$=new B.BehaviorSubject(F);this.transactionsByAddresses$=new B.BehaviorSubject(F);this.transactionsByHashes$=new B.BehaviorSubject(F)}}class TrackedChainHistoryProvider extends ProviderTracker{constructor(e){super();this.stats=new ChainHistoryProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.transactionsByAddresses=({addresses:t,pagination:r,blockRange:s})=>this.trackedCall(()=>e.transactionsByAddresses({addresses:t,blockRange:s,pagination:r}),this.stats.transactionsByAddresses$);this.transactionsByHashes=t=>this.trackedCall(()=>e.transactionsByHashes(t),this.stats.transactionsByHashes$);this.blocksByHashes=t=>this.trackedCall(()=>e.blocksByHashes(t),this.stats.blocksByHashes$)}}class RewardAccountInfoProviderStats{shutdown(){this.healthCheck$.complete();this.rewardAccountInfo$.complete();this.delegationPortfolio$.complete()}reset(){this.healthCheck$.next(F);this.rewardAccountInfo$.next(F);this.delegationPortfolio$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.rewardAccountInfo$=new B.BehaviorSubject(F);this.delegationPortfolio$=new B.BehaviorSubject(F)}}class TrackedRewardAccountInfoProvider extends ProviderTracker{constructor(e){super();this.stats=new RewardAccountInfoProviderStats;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardAccountInfo=(t,r)=>this.trackedCall(()=>e.rewardAccountInfo(t,r),this.stats.rewardAccountInfo$);this.delegationPortfolio=t=>this.trackedCall(()=>e.delegationPortfolio(t),this.stats.delegationPortfolio$)}}class RewardsProviderStats{shutdown(){this.healthCheck$.complete();this.rewardsHistory$.complete();this.rewardAccountBalance$.complete()}reset(){this.healthCheck$.next(F);this.rewardsHistory$.next(F);this.rewardAccountBalance$.next(F)}constructor(){this.healthCheck$=new B.BehaviorSubject(F);this.rewardsHistory$=new B.BehaviorSubject(F);this.rewardAccountBalance$=new B.BehaviorSubject(F)}}class TrackedRewardsProvider extends ProviderTracker{constructor(e){super();this.stats=new RewardsProviderStats;e=e;this.healthCheck=()=>this.trackedCall(()=>e.healthCheck(),this.stats.healthCheck$);this.rewardsHistory=t=>this.trackedCall(()=>e.rewardsHistory(t),this.stats.rewardsHistory$);this.rewardAccountBalance=t=>this.trackedCall(()=>e.rewardAccountBalance(t),this.stats.rewardAccountBalance$)}}var R=r("../../node_modules/rxjs/dist/esm5/internal/operators/share.js");var D=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounce.js");var O=r("../../node_modules/rxjs/dist/esm5/internal/observable/interval.js");var G=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var N=r("../../node_modules/rxjs/dist/esm5/internal/operators/skipWhile.js");var H=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var K=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var V=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var W=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var z=r("../../node_modules/rxjs/dist/esm5/internal/observable/timer.js");var U=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");const getDefaultProviderSyncRelevantStats=({networkInfoProvider:e,assetProvider:t,utxoProvider:r,chainHistoryProvider:s,rewardAccountInfoProvider:i,rewardsProvider:a})=>(0,v.combineLatest)([e.stats.ledgerTip$,e.stats.protocolParameters$,e.stats.genesisParameters$,e.stats.eraSummaries$,t.stats.getAsset$,r.stats.utxoByAddresses$,s.stats.transactionsByAddresses$,a.stats.rewardsHistory$,i.stats.rewardAccountInfo$]);const createProviderStatusTracker=(e,{consideredOutOfSyncAfter:t},{getProviderSyncRelevantStats:r=getDefaultProviderSyncRelevantStats}={})=>{const s=e.logger;const i=r(e).pipe((0,R.share)());const a=new U.TrackerSubject(i.pipe((0,E.map)(e=>e.some(({numCalls:e,numFailures:t,numResponses:r,didLastRequestFail:s})=>s||e>r+t)),(0,D.debounce)(e=>e?(0,l.of)(true):(0,O.interval)(1)),(0,w.distinctUntilChanged)(),(0,h.tap)(e=>s.debug(`${e?"Some":"No"} requests are pending`))));const o=i.pipe((0,G.debounceTime)(1),(0,N.skipWhile)(e=>e.some(({initialized:e})=>!e)),(0,H.take)(1),(0,h.tap)(()=>s.debug("All stats are initialized")),(0,n.mergeMap)(()=>_.EMPTY));const d=new U.TrackerSubject((0,K.concat)((0,l.of)(false),o,a.pipe((0,E.map)(e=>!e))).pipe((0,w.distinctUntilChanged)(),(0,h.tap)(e=>s.debug("isSettled",e))));const c=new U.TrackerSubject((0,K.concat)((0,l.of)(false),d.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>(0,K.concat)((0,l.of)(true),(0,z.timer)(t).pipe((0,E.map)(()=>false)))),(0,w.distinctUntilChanged)())).pipe((0,h.tap)(e=>s.debug("isUpToDate",e))));return{isAnyRequestPending$:a,isSettled$:d,isUpToDate$:c,shutdown(){a.complete();d.complete();c.complete();s.debug("Shutdown")}}};var $=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var L=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var q=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");const sortAddresses=e=>[...e].sort((e,t)=>{if(e.index!==t.index){return e.index-t.index}if(e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index}if(e.stakeKeyDerivationPath&&!t.stakeKeyDerivationPath){return -1}if(!e.stakeKeyDerivationPath&&t.stakeKeyDerivationPath){return 1}return 0});const createAddressTracker=({addressDiscovery$:e,store:t,logger:r})=>{const storeAddresses=()=>e=>e.pipe((0,W.switchMap)(e=>t.set(e).pipe((0,E.map)(()=>e))));const s=new $.Subject;const i=t.get().pipe((0,L.defaultIfEmpty)([]),(0,n.mergeMap)(t=>{if(0===t.length){r.debug("No addresses available; initiating address discovery process");return e.pipe((0,h.tap)(e=>{if(0===e.length){throw new Error("Address discovery derived 0 addresses")}}),storeAddresses())}return(0,l.of)(t)}),(0,W.switchMap)(e=>{const t=[...e];return(0,T.merge)((0,l.of)(e),s.pipe((0,E.map)(e=>{for(const s of e){if(t.some(e=>e.address===s.address)){r.warn("Address already exists",s.address);continue}t.push(s)}return[...t]}),storeAddresses())).pipe((0,w.distinctUntilChanged)(q.groupedAddressesEquals))})).pipe((0,y.shareReplay)(1));return{addAddresses:e=>{s.next(e);return i.pipe((0,V.filter)(t=>e.every(({address:e})=>t.some(({address:t})=>t===e))),(0,H.take)(1))},addresses$:i.pipe((0,E.map)(sortAddresses)),shutdown:s.complete.bind(s)}};var Y=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js");class PersistentCollectionTrackerSubject extends U.TrackerSubject{next(e){this.store&&this.store.setAll(e);super.next(e)}constructor(e,t){const r=t.getAll().pipe((0,L.defaultIfEmpty)([]));super(r.pipe((0,W.switchMap)(t=>{const r=e(t);return t.length>0?(0,K.concat)((0,l.of)(t),r):r})));this.store=t}}class PersistentDocumentTrackerSubject extends U.TrackerSubject{constructor(e,t){super((0,K.concat)(t.get(),e.pipe((0,h.tap)(t.set.bind(t)))))}}var Q=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var J=r("../../node_modules/rxjs/dist/esm5/internal/operators/auditTime.js");var X=r("../../node_modules/rxjs/dist/esm5/internal/operators/exhaustMap.js");var Z=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var ee=r("../../node_modules/rxjs/dist/esm5/internal/operators/finalize.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var et,er;const triggerOrInterval$=(e,t)=>e.pipe((0,Q.timeout)({each:t,with:()=>(0,K.concat)((0,l.of)(true),triggerOrInterval$(e,t))}));class TipTracker extends PersistentDocumentTrackerSubject{sync(){__classPrivateFieldGet(this,er,"f").debug("Manual sync triggered");__classPrivateFieldGet(this,et,"f").next()}constructor({provider$:e,pollController$:t,minPollInterval:r,maxPollInterval:s,store:i,syncStatus:a,connectionStatus$:o,logger:n},{externalTrigger$:d=new $.Subject}={}){super((0,T.merge)((0,v.combineLatest)([triggerOrInterval$(a.isSettled$.pipe((0,V.filter)(e=>e)),s).pipe((0,J.auditTime)(r),(0,p.startWith)(null)),o,t]).pipe((0,h.tap)(([,e,t])=>{n.debug(e!==I.down&&t?"Fetching tip...":"Skipping fetch tip")}),(0,X.exhaustMap)(([,t,r])=>t!==I.down&&r?e.pipe((0,Z.takeUntil)(d.pipe((0,h.tap)(()=>n.debug("Tip fetch canceled"))))):_.EMPTY),(0,w.distinctUntilChanged)(q.tipEquals),(0,h.tap)(e=>n.debug("Fetched new tip",e))),d.pipe((0,W.switchMap)(()=>e),(0,h.tap)(e=>n.debug("External trigger fetched tip",e)))).pipe((0,ee.finalize)(()=>__classPrivateFieldGet(this,et,"f").complete())),i);et.set(this,new $.Subject);er.set(this,void 0);__classPrivateFieldSet(this,et,d,"f");__classPrivateFieldSet(this,er,n,"f")}}et=new WeakMap,er=new WeakMap;var es=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var ei=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var ea=r("../../node_modules/@cardano-sdk/core/dist/esm/CardanoNode/types/CardanoNodeErrors.js");var eo=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");const asSpecificCardanoNodeError=e=>t=>{if(Array.isArray(t)){for(const r of t)if(r instanceof e){if((0,A.isProductionEnvironment)())(0,eo.stripStackTrace)(r);return r}return null}if(t instanceof e){if((0,A.isProductionEnvironment)())(0,eo.stripStackTrace)(t);return t}return null};const en=asSpecificCardanoNodeError(ea.TxSubmissionError);const ed=asSpecificCardanoNodeError(ea.ChainSyncError);const ec=asSpecificCardanoNodeError(ea.StateQueryError);const el=asSpecificCardanoNodeError(ea.GeneralCardanoNodeError);const asCardanoNodeError=e=>el(e)||en(e)||ec(e)||ed(e)||new GeneralCardanoNodeError(GeneralCardanoNodeErrorCode.Unknown,e,'Unknown Cardano node error, see "data"');const eu=new Set(Object.values(ea.StateQueryErrorCode));const ef=new Set(Object.values(ea.GeneralCardanoNodeErrorCode));const eh=new Set(Object.values(ea.TxSubmissionErrorCode));const em=new Set(Object.values(ea.ChainSyncErrorCode));const isChainSyncErrorCode=e=>"number"==typeof e&&em.has(e);const isTxSubmissionErrorCode=e=>"number"==typeof e&&eh.has(e);const isStateQueryErrorCode=e=>"number"==typeof e&&eu.has(e);const isGeneralCardanoNodeErrorCode=e=>"number"==typeof e&&ef.has(e);const asChainSyncErrorCode=e=>isChainSyncErrorCode(e)?e:null;const asStateQueryErrorCode=e=>isStateQueryErrorCode(e)?e:null;const asGeneralCardanoNodeErrorCode=e=>isGeneralCardanoNodeErrorCode(e)?e:null;const asTxSubmissionErrorCode=e=>isTxSubmissionErrorCode(e)?e:null;const isProviderError=e=>e instanceof ei.ProviderError;const isOutsideOfValidityIntervalError=e=>e instanceof TxSubmissionError&&e.code===TxSubmissionErrorCode.OutsideOfValidityInterval;const isValueNotConservedError=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.ValueNotConserved;const isIncompleteWithdrawalsError=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.IncompleteWithdrawals;const isUnknownOutputReferences=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.UnknownOutputReferences;const isCredentialAlreadyRegistered=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.CredentialAlreadyRegistered;const isDrepAlreadyRegistered=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.DRepAlreadyRegistered;const isUnknownCredential=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.UnknownCredential;const isDrepNotRegistered=e=>e instanceof ea.TxSubmissionError&&e.code===ea.TxSubmissionErrorCode.DRepNotRegistered;var ep=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var SmartTxSubmitProvider_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var SmartTxSubmitProvider_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var ev,e_,ew,ey;class SmartTxSubmitProvider{submitTx(e){const{body:{validityInterval:t}}=es.deserializeTx(e.signedTransaction);const r=(0,v.combineLatest)([SmartTxSubmitProvider_classPrivateFieldGet(this,ey,"f"),SmartTxSubmitProvider_classPrivateFieldGet(this,e_,"f")]).pipe((0,h.tap)(([e,{slot:r}])=>{if(r>=((null==t?void 0:t.invalidHereafter)||Number.POSITIVE_INFINITY)){const s={currentSlot:r,validityInterval:{invalidBefore:null==t?void 0:t.invalidBefore,invalidHereafter:null==t?void 0:t.invalidHereafter}};throw new ei.ProviderError(ei.ProviderFailure.BadRequest,new ea.TxSubmissionError(ea.TxSubmissionErrorCode.OutsideOfValidityInterval,s,"Not submitting transaction due to validity interval"))}}),(0,V.filter)(([e,{slot:r}])=>{return e===I.up&&r>=((null==t?void 0:t.invalidBefore)||0)}),(0,H.take)(1));return(0,ep.firstValueFrom)(r.pipe((0,n.mergeMap)(()=>(0,d.from)(SmartTxSubmitProvider_classPrivateFieldGet(this,ev,"f").submitTx(e))),(0,P.retryBackoff)({...SmartTxSubmitProvider_classPrivateFieldGet(this,ew,"f"),shouldRetry:e=>isProviderError(e)&&[ei.ProviderFailure.Unhealthy,ei.ProviderFailure.ConnectionFailure].includes(e.reason)})))}healthCheck(){return SmartTxSubmitProvider_classPrivateFieldGet(this,ev,"f").healthCheck()}constructor({retryBackoffConfig:e},{connectionStatus$:t,tip$:r,txSubmitProvider:s}){ev.set(this,void 0);e_.set(this,void 0);ew.set(this,void 0);ey.set(this,void 0);SmartTxSubmitProvider_classPrivateFieldSet(this,ev,s,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,e_,r,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,ey,t,"f");SmartTxSubmitProvider_classPrivateFieldSet(this,ew,e,"f")}}ev=new WeakMap,e_=new WeakMap,ew=new WeakMap,ey=new WeakMap;var eg=r("../../node_modules/@cardano-sdk/core/dist/esm/util/slotCalc.js");const currentEpochTracker=(e,t)=>new U.TrackerSubject(t.pipe((0,W.switchMap)(t=>{const r=(0,eg.createSlotEpochInfoCalc)(t);return e.pipe((0,E.map)(({slot:e})=>r(e)))}),(0,w.distinctUntilChanged)(q.epochInfoEquals)));var eb=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/phase2Validation.js");var eP=r("../../node_modules/rxjs/dist/esm5/internal/observable/partition.js");var eS=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var eC=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeWith.js");var ek=r("../../node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");var ej=r("../../node_modules/rxjs/dist/esm5/internal/operators/scan.js");var ex;(function(e){e["InvalidTransaction"]="INVALID_TRANSACTION";e["FailedToSubmit"]="FAILED_TO_SUBMIT";e["Unknown"]="UNKNOWN";e["CannotTrack"]="CANNOT_TRACK";e["Timeout"]="TIMEOUT";e["Phase2Validation"]="PHASE_2_VALIDATION"})(ex||(ex={}));var eT=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");const distinctBlock=e=>e.pipe((0,E.map)(({blockNo:e})=>e),(0,w.distinctUntilChanged)());const distinctEraSummaries=e=>e.pipe(map(e=>e),distinctUntilChanged(eraSummariesEquals));var eE=r("../../node_modules/rxjs/dist/esm5/internal/operators/groupBy.js");const newAndStoredMulticast=({new$:e,stored$:t,logger:r,storedFilterfn:s=()=>true,logStringfn:i=()=>"",groupByFn:a})=>(0,T.merge)(e.pipe((0,E.map)(e=>e)),t.pipe((0,h.tap)(e=>r.debug(i(e))),(0,E.map)(e=>e.filter(s)),(0,n.mergeMap)(e=>(0,d.from)(e)))).pipe((0,eE.groupBy)(a),(0,E.map)(e=>e.pipe((0,R.share)())),(0,R.share)());var eA=r("../../node_modules/lodash/chunk.js");var eI=r("../../node_modules/lodash/sortBy.js");const eB=25;const compareTxOrder=(e,t)=>e.blockHeader.slot-t.blockHeader.slot||e.index-t.index;const deduplicateSortedArray=(e,t)=>{if(0===e.length){return[]}const r=[e[0]];for(let s=1;s<e.length;++s)if(!t(e[s],e[s-1]))r.push(e[s]);return r};const allTransactionsByAddresses=async(e,{addresses:t,filterBy:r})=>{const s=eA(t,eB);let i=[];for(const a of s)if("blockRange"===r.type){let o=0;let n=[];do{n=(await e.transactionsByAddresses({addresses:a,blockRange:r.blockRange,pagination:{limit:eB,startAt:o}})).pageResults;o+=eB;i=[...i,...n]}while(n.length>=eB)}else{const d=await e.transactionsByAddresses({addresses:a,pagination:{limit:r.limit,order:"desc",startAt:0}});i=[...i,...d.pageResults.reverse()]}return deduplicateSortedArray(i.sort(compareTxOrder),q.txEquals)};const getLastTransactionsAtBlock=(e,t)=>{const r=[];for(let s=e.length-1;s>=0;--s){const i=e[s];if(i.blockHeader.blockNo===t)r.push(i);else{break}}return r.reverse()};const revertLastBlock=(e,t,r,s,i)=>{const a=[...e];while(a.length>0){const o=a[a.length-1];if(o.blockHeader.blockNo===t){if(-1===s.findIndex(e=>e.id===o.id)){i.debug(`Transaction ${o.id} was rolled back`);r.next(o)}a.pop()}else{break}}return deduplicateSortedArray(a,q.txEquals)};const fetchInitialTransactions=async(e,t,r)=>{const s=await allTransactionsByAddresses(e,{addresses:t,filterBy:{limit:r,type:"tip"}});if(0===s.length){return[]}return s.slice(-1*r)};const findIntersectionAndUpdateTxStore=({chainHistoryProvider:e,historicalTransactionsFetchLimit:t,logger:r,store:s,retryBackoffConfig:i,tipBlockHeight$:a,rollback$:o,localTransactions:n,addresses:d})=>{return(0,Y.pollProvider)({combinator:X.exhaustMap,equals:q.transactionsEquals,logger:r,retryBackoffConfig:i,sample:async()=>{let i=false;while(true){const a=n[n.length-1];a&&r.debug(`Last stored tx: ${null==a?void 0:a.id} block:${null==a?void 0:a.blockHeader.blockNo}`);const c=null==a?void 0:a.blockHeader.blockNo;const l=await (void 0===c?fetchInitialTransactions(e,d,t):allTransactionsByAddresses(e,{addresses:d,filterBy:{blockRange:{lowerBound:c},type:"blockRange"}}));r.debug(`chainHistoryProvider returned ${l.length} transactions`,void 0!==c&&`since block ${c}`);if(void 0===c){if(l.length>0){n=l;s.setAll(l)}return l}if(0===l.length){n=revertLastBlock(n,c,o,l,r);i=true;continue}const u=getLastTransactionsAtBlock(n,c);const f=l.slice(0,u.length);const h=u.length===f.length;const m=h&&u.every((e,t)=>e.id===f[t].id);if(!m){n=revertLastBlock(n,c,o,l,r);i=true;continue}const p=l.length===u.length&&u.every((e,t)=>e.id===l[t].id&&e.blockHeader.slot===l[t].blockHeader.slot);if(p){if(i)s.setAll(n)}else{for(const v of u){const _=l.find(e=>e.id===v.id);if((null==_?void 0:_.blockHeader)&&_.blockHeader.slot!==v.blockHeader.slot)v.blockHeader=_.blockHeader}n=deduplicateSortedArray([...n,...l.slice(u.length)],q.txEquals).slice(-1*t);s.setAll(n)}return n}},trigger$:a})};const createAddressTransactionsProvider=e=>{const{addresses$:t,store:r,logger:s}=e;const i=new $.Subject;const a=r.getAll().pipe((0,R.share)());return{rollback$:i.asObservable(),transactionsSource$:(0,K.concat)(a.pipe((0,h.tap)(e=>{return s.debug(`Stored history transactions count: ${(null==e?void 0:e.length)||0}`)})),(0,v.combineLatest)([t,a.pipe((0,L.defaultIfEmpty)([]))]).pipe((0,W.switchMap)(([t,r])=>findIntersectionAndUpdateTxStore({addresses:t,localTransactions:deduplicateSortedArray([...r].sort(compareTxOrder),q.txEquals),rollback$:i,...e}))))}};const createHistoricalTransactionsTrackerSubject=e=>new U.TrackerSubject(e.pipe((0,E.map)(e=>eI(e,({blockHeader:{blockNo:e}})=>e,({index:e})=>e))));const newTransactions$=e=>e.pipe((0,H.take)(1),(0,E.map)(e=>e.map(({id:e})=>e)),(0,n.mergeMap)(t=>{const r=[...t];return e.pipe((0,E.map)(e=>e.filter(({id:e})=>!r.includes(e))),(0,h.tap)(e=>r.push(...e.map(({id:e})=>e))),(0,n.mergeMap)(e=>(0,K.concat)(...e.map(e=>(0,l.of)(e)))))}));const createTransactionsTracker=({tip$:e,chainHistoryProvider:t,addresses$:r,historicalTransactionsFetchLimit:s,newTransactions:{submitting$:i,pending$:a,signed$:o,failedToSubmit$:c},retryBackoffConfig:u,transactionsHistoryStore:f,inFlightTransactionsStore:m,signedTransactionsStore:v,logger:y,failedFromReemitter$:g},{transactionsSource$:b,rollback$:P}=createAddressTransactionsProvider({addresses$:r,chainHistoryProvider:t,historicalTransactionsFetchLimit:s,logger:(0,eT.contextLogger)(y,"AddressTransactionsProvider"),retryBackoffConfig:u,store:f,tipBlockHeight$:distinctBlock(e)}))=>{const S=i.pipe((0,h.tap)(e=>y.debug(`Got new submitting transaction: ${e.id}`)),(0,R.share)());const C=new U.TrackerSubject(b);const k=createHistoricalTransactionsTrackerSubject(C).pipe((0,h.tap)(e=>{return y.debug(`History transactions count: ${(null==e?void 0:e.length)||0}`)}));const x=newTransactions$(k).pipe((0,R.share)());const[A,I]=(0,eP.partition)(x,e=>eb.isPhase2ValidationErrTx(e));const txOnChain$=e=>(0,T.merge)(k.pipe((0,H.take)(1),(0,n.mergeMap)(e=>(0,d.from)(e))),I).pipe((0,V.filter)(t=>t.id===e.id),(0,H.take)(1),(0,E.map)(t=>({...e,slot:t.blockHeader.slot})),(0,h.tap)(({slot:t})=>y.debug(`Transaction ${e.id} is on-chain in slot ${t}`)));const B=newAndStoredMulticast({groupByFn:({id:e})=>e,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} in flight transactions`},logger:y,new$:S,stored$:m.get(),storedFilterfn:({submittedAt:e})=>!!e});const F=newAndStoredMulticast({groupByFn:({tx:e})=>e.id,logStringfn:e=>{return`Store contains ${null==e?void 0:e.length} signed transactions`},logger:y,new$:o,stored$:v.get()});const M=new $.Subject;const D=B.pipe((0,n.mergeMap)(t=>{return t.pipe((0,W.switchMap)(t=>{var r;const s=null===(r=t.body.validityInterval)||void 0===r?void 0:r.invalidHereafter;return(0,eS.race)(A.pipe((0,V.filter)(e=>e.id===t.id),(0,E.map)(()=>({reason:ex.Phase2Validation,...t}))),P.pipe((0,E.map)(e=>e.id),(0,V.filter)(e=>t.body.inputs.some(({txId:t})=>t===e)),(0,E.map)(e=>({error:new Error(`Invalid inputs due to rolled back tx (${e}}). Try to rebuild and resubmit.`),reason:ex.InvalidTransaction,...t}))),c.pipe((0,V.filter)(e=>e.id===t.id)),s?e.pipe((0,V.filter)(({slot:e})=>e>s),(0,E.map)(()=>({reason:ex.Timeout,...t}))):j.NEVER).pipe((0,H.take)(1),(0,Z.takeUntil)(txOnChain$(t)))}))}),(0,eC.mergeWith)(g||_.EMPTY),(0,h.tap)(({id:e,reason:t})=>y.debug(`Transaction ${e} failed`,t))).subscribe(M);const txFailed$=e=>M.pipe((0,V.filter)(t=>t.id===e.id),(0,H.take)(1));const txPending$=t=>a.pipe((0,V.filter)(e=>e.id===t.id),(0,ek.withLatestFrom)(e),(0,E.map)(([e,{slot:r}])=>({submittedAt:r,...t})));const O=new U.TrackerSubject(B.pipe((0,n.mergeMap)(e=>e.pipe((0,W.switchMap)(e=>{const t=(0,eS.race)(txOnChain$(e),txFailed$(e)).pipe((0,E.map)(()=>({op:"remove",tx:e})),(0,R.share)());return(0,T.merge)((0,l.of)({op:"add",tx:e}),t,e.submittedAt?_.EMPTY:txPending$(e).pipe((0,E.map)(e=>({op:"submitted",tx:e})),(0,Z.takeUntil)(t)))}))),(0,ej.scan)((e,t)=>{const r=e.findIndex(e=>e.id===t.tx.id);if("add"===t.op){if(r>=0){return[...e.slice(0,r),t.tx,...e.slice(r+1)]}return[...e,t.tx]}if("remove"===t.op){return[...e.slice(0,r),...e.slice(r+1)]}return[...e.slice(0,r),t.tx,...e.slice(r+1)]},[]),(0,h.tap)(e=>m.set(e)),(0,h.tap)(e=>y.debug(`${e.length} in flight transactions`)),(0,p.startWith)([])));const G=new U.TrackerSubject((0,T.merge)(F.pipe((0,n.mergeMap)(e=>e),(0,E.map)(e=>({op:"add",witnessedTx:e}))),O.pipe((0,n.mergeMap)(e=>e),(0,E.map)(e=>({id:e.id,op:"remove"}))),k.pipe((0,E.map)(e=>({inputs:e.flatMap(e=>e.body.inputs.map(e=>e)),op:"check_inputs"}))),e.pipe((0,E.map)(({slot:e})=>({op:"check_interval",slot:e})))).pipe((0,ej.scan)((e,t)=>{if("add"===t.op){return[...e,t.witnessedTx]}if("remove"===t.op){return e.filter(({tx:e})=>e.id!==t.id)}if("check_interval"===t.op){return e.filter(({tx:{body:{validityInterval:{invalidHereafter:e}={}}}})=>e&&e>t.slot)}if("check_inputs"===t.op){return e.filter(({tx:e})=>{const r=e.body.inputs.some(e=>t.inputs.some(t=>(0,q.txInEquals)(e,t)));return!r})}return e},[]),(0,h.tap)(e=>v.set(e)),(0,p.startWith)([]),(0,w.distinctUntilChanged)(q.signedTxsEquals)));const N=new $.Subject;const K=B.pipe((0,n.mergeMap)(e=>e.pipe((0,W.switchMap)(e=>txOnChain$(e).pipe((0,Z.takeUntil)(txFailed$(e))))))).subscribe(N);return{history$:k,new$:x,outgoing:{failed$:M,inFlight$:O,onChain$:N,pending$:a,signed$:G,submitting$:S},rollback$:P,shutdown:()=>{O.complete();K.unsubscribe();N.complete();D.unsubscribe();M.complete();y.debug("Shutdown")}}};const calculateStabilityWindowSlotsCount=({securityParameter:e,activeSlotsCoefficient:t})=>3*e/t;var eF=r("../../node_modules/lodash/pick.js");var eM;(function(e){e[e["store"]=0]="store";e[e["onChain"]=1]="onChain";e[e["submitting"]=2]="submitting"})(eM||(eM={}));const createTransactionReemitter=({transactions:{rollback$:e,outgoing:{onChain$:t,submitting$:r,inFlight$:s}},stores:i,tipSlot$:a,maxInterval:o,genesisParameters$:c,logger:l})=>{const u=(0,T.merge)(i.volatileTransactions.get().pipe((0,h.tap)(e=>l.debug(`Store contains ${e.length} volatile transactions`)),(0,n.mergeMap)(e=>(0,d.from)(e)),(0,E.map)(e=>({source:eM.store,tx:e}))),t.pipe((0,E.map)(e=>({onChain:e,source:eM.onChain}))),r.pipe((0,E.map)(e=>({source:eM.submitting,tx:e})))).pipe((0,n.mergeMap)(e=>c.pipe((0,E.map)(({securityParameter:e,activeSlotsCoefficient:t})=>calculateStabilityWindowSlotsCount({activeSlotsCoefficient:t,securityParameter:e})),(0,E.map)(t=>({sw:t,vt:e})))),(0,ej.scan)((e,{vt:t,sw:r})=>{switch(t.source){case eM.store:e=[...e,t.tx];break;case eM.submitting:e=e.filter(e=>{const r=e.id===t.tx.id;if(r)l.debug(`Transaction ${t.tx.id} is being resubmitted. Remove it from volatiles`);return!r});i.volatileTransactions.set(e);break;case eM.onChain:{const s=t.onChain.slot>r?t.onChain.slot-r:0;l.debug(`Removing stable transactions (slot <= ${s}), from volatiles`);l.debug(`Adding new volatile transaction ${t.onChain.id}`);e=[...e.filter(({slot:e})=>e>s),t.onChain];i.volatileTransactions.set(e);break}}return e},[]));const f=e.pipe((0,V.filter)(e=>!eb.isPhase2ValidationErrTx(e)),(0,ek.withLatestFrom)(u),(0,E.map)(([e,t])=>{const r=t.find(t=>t.id===e.id);if(!r){l.error(`Could not find onChain transaction with id ${e.id} that was rolled back`);return}return r}),(0,V.filter)(b.isNotNil),(0,ek.withLatestFrom)(a),(0,E.map)(([e,t])=>{var r,s;const i=null===(r=e.body)||void 0===r?void 0:null===(s=r.validityInterval)||void 0===s?void 0:s.invalidHereafter;if(i&&t>i){const a={reason:ex.Timeout,...e};l.error(`Rolled back transaction with id ${a.id} is no longer valid`,a.reason);return a}return e}),(0,R.share)());const[m,p]=(0,eP.partition)(f,e=>void 0!==e.reason);const _=i.inFlightTransactions.get().pipe((0,E.map)(e=>e.filter(({submittedAt:e})=>!e)),(0,n.mergeMap)(e=>(0,d.from)(e)),(0,h.tap)(e=>l.debug("Reemitting in-flight tx that was never submitted",e.id)));const w=a.pipe((0,ek.withLatestFrom)(c),(0,E.map)(([e,{slotLength:t}])=>e-o/(1e3*t)));const y=(0,v.combineLatest)([w,s]).pipe((0,n.mergeMap)(([e,t])=>(0,d.from)(t.filter(({submittedAt:t})=>t&&t<e))),(0,h.tap)(e=>l.debug("Reemitting unconfirmed in-flight tx",e.id,"submitted at slot",e.submittedAt)));return{failed$:m,reemit$:(0,T.merge)(p,_,y).pipe((0,E.map)(e=>eF(e,["cbor","body","id","context"])))}};var eR=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/util.js");var eD=r("../../node_modules/lodash/uniqWith.js");const eO=25;const createUtxoProvider=(e,t,r,s,i)=>t.pipe((0,W.switchMap)(t=>(0,Y.pollProvider)({equals:q.utxoEquals,logger:i,retryBackoffConfig:s,sample:async()=>{let r=new Array;const s=eA(t,eO);for(const i of s)r=[...r,...await e.utxoByAddresses({addresses:i})];return r.sort(eR.sortUtxoByTxIn)},trigger$:r})));const createUtxoTracker=({utxoProvider:e,addresses$:t,stores:r,transactionsInFlight$:s,retryBackoffConfig:i,history$:a,logger:o},{utxoSource$:n=new PersistentCollectionTrackerSubject(()=>createUtxoProvider(e,t,a,i,o),r.utxo),unspendableUtxoSource$:d=new PersistentCollectionTrackerSubject(e=>e.length>0?j.NEVER:(0,K.concat)((0,l.of)([]),j.NEVER),r.unspendableUtxo)}={})=>{const c=(0,v.combineLatest)([n,s,t]).pipe((0,E.map)(([e,t,r])=>[...e.filter(([e])=>{const r=t.some(({body:{inputs:t}})=>t.some(t=>t.txId===e.txId&&t.index===e.index));r&&o.debug("OnChain UTXO is already used in in-flight transaction. Excluding from total$.",e);return!r}),...t.flatMap(({body:{outputs:e},id:s},i)=>e.filter(({address:e},a)=>r.includes(e)&&!t.some(({body:{inputs:e}},t)=>i!==t&&e.some(e=>e.txId===s&&e.index===a))).map(t=>{const r={address:t.address,index:e.indexOf(t),txId:s};o.debug("New UTXO available from in-flight transactions. Including in total$.",r);return[r,t]}))]),(0,E.map)(e=>{const t=eD(e,([e],[t])=>e.txId===t.txId&&e.index===t.index);if(t.length!==e.length)o.debug("Found duplicate UTxO in",e);return t}),(0,w.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,y.shareReplay)(1));const u=(0,v.combineLatest)([c,d]).pipe((0,E.map)(([e,t])=>e.filter(([e])=>{const r=t.some(([t])=>(0,q.txInEquals)(e,t));r&&o.debug("Exclude unspendable UTXO from availble$",e);return!r})),(0,w.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,y.shareReplay)(1));return{available$:u,setUnspendable:async e=>{o.debug("setUnspendable",e);d.next(e)},shutdown:()=>{n.complete();d.complete();o.debug("Shutdown")},total$:c,unspendable$:(0,v.combineLatest)([d,c]).pipe((0,E.map)(([e,t])=>e.filter(([e])=>t.some(([t])=>(0,q.txInEquals)(t,e)))),(0,w.distinctUntilChanged)((e,t)=>(0,q.utxoEquals)(e,t)),(0,y.shareReplay)(1))}};var eG=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var eN=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var eH=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var eK=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js");var eV=r("../../node_modules/lodash/isEqual.js");const affectsRewardAccount=e=>{return t=>{var r,s;const i=eH.RewardAccount.toHash(e);const a=eG.stakeKeyCertificates(t.body.certificates).some(e=>e.stakeCredential.hash===i);const o=a||(null===(r=t.body.certificates)||void 0===r?void 0:r.some(t=>{var r;return(t.__typename===eG.CertificateType.MIR||t.__typename===eG.CertificateType.StakeDelegation||t.__typename===eG.CertificateType.StakeVoteDelegation||t.__typename===eG.CertificateType.VoteDelegation)&&(null===(r=t.stakeCredential)||void 0===r?void 0:r.hash)===i||t.__typename===eG.CertificateType.PoolRegistration&&t.poolParameters.rewardAccount===e||t.__typename===eG.CertificateType.PoolRetirement||(t.__typename===eG.CertificateType.RegisterDelegateRepresentative||t.__typename===eG.CertificateType.UnregisterDelegateRepresentative)&&t.dRepCredential.hash===i||t.__typename===eG.CertificateType.StakeVoteDelegation&&t.stakeCredential.hash===i}));return o||(null===(s=t.body.withdrawals)||void 0===s?void 0:s.some(t=>t.stakeAddress===e))||false}};const createRewardAccountInfoProvider=({epoch$:e,externalTrigger$:t,rewardAccountInfoProvider:r,retryBackoffConfig:s,logger:i})=>a=>(0,Y.pollProvider)({equals:eV,logger:i,retryBackoffConfig:s,sample:async()=>r.rewardAccountInfo(a,await (0,ep.firstValueFrom)(e)),trigger$:(0,T.merge)(e,t)});const nextRewardBalance=(e,t)=>{const r=t.some(t=>{var r;return null===(r=t.body.withdrawals)||void 0===r?void 0:r.some(t=>t.stakeAddress===e)});return r?0n:null};const nextDeposit=(e,t,r)=>{const s=eH.RewardAccount.toHash(e);for(let i=t.length-1;i>=0;i--){const a=t[i].body.certificates||[];for(let o=a.length-1;o>=0;o--){const n=a[o];if(n.__typename===eG.CertificateType.StakeDeregistration&&n.stakeCredential.hash===s){return 0n}if((n.__typename===eG.CertificateType.StakeRegistration||n.__typename===eG.CertificateType.StakeRegistrationDelegation||n.__typename===eG.CertificateType.StakeVoteRegistrationDelegation)&&n.stakeCredential.hash===s){return r}}}return null};const createRewardAccountsTracker=({rewardAccountAddresses$:e,rewardAccountInfoProvider:t,store:r,newTransaction$:s,protocolParameters$:i,transactionsInFlight$:a})=>e.pipe((0,W.switchMap)(e=>(0,v.combineLatest)(e.map(e=>(0,K.concat)(r.getValues([e]).pipe((0,n.mergeMap)(e=>e.length>0?(0,l.of)(e[0]):_.EMPTY)),s.pipe((0,V.filter)(affectsRewardAccount(e)),(0,p.startWith)(null)).pipe((0,W.switchMap)(()=>t(e).pipe((0,h.tap)(t=>r.setValue(e,t).subscribe()),(0,eK.blockingWithLatestFrom)(i),(0,W.switchMap)(([t,{stakeKeyDeposit:r}])=>a.pipe((0,E.map)(s=>{if(0===s.length)return t;const i=nextDeposit(e,s,BigInt(r));var a;return{...t,credentialStatus:"bigint"==typeof i?i>0n?eN.StakeCredentialStatus.Registering:eN.StakeCredentialStatus.Unregistering:t.credentialStatus,deposit:null!=i?i:t.deposit,rewardBalance:null!==(a=nextRewardBalance(e,s))&&void 0!==a?a:t.rewardBalance}}))))))).pipe((0,w.distinctUntilChanged)(eV))))));var eW=r("../../node_modules/@cardano-sdk/util/dist/esm/BigIntMath.js");var ez=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Block.js");var eU=r("../../node_modules/lodash/flatten.js");const sumRewards=e=>eW.BigIntMath.sum(e.map(({rewards:e})=>e));const avgReward=e=>sumRewards(e)/BigInt(e.length);const createRewardsHistoryProvider=(e,t)=>(r,s,i,a)=>{if(s){return(0,Y.pollProvider)({logger:a,retryBackoffConfig:t,sample:()=>e.rewardsHistory({epochs:{lowerBound:s},rewardAccounts:r}),trigger$:i})}e.setStatInitialized(e.stats.rewardsHistory$);return(0,l.of)(new Map)};const createRewardsHistoryTracker=(e,t,r,s,i)=>e.pipe((0,h.tap)(e=>i.debug(`Fetching rewards for ${e.length} accounts`)),(0,W.switchMap)(e=>(0,K.concat)(s.getValues(e).pipe((0,E.map)(t=>new Map(e.map((e,r)=>[e,t[r]])))),r(e,ez.EpochNo(1),t,i).pipe((0,h.tap)(e=>s.setAll([...e.entries()].map(([e,t])=>({key:e,value:t})))))))).pipe((0,E.map)(e=>{const t=eI(eU([...e.values()]),"epoch");if(0===t.length){i.debug("No rewards found");return{all:[],avgReward:null,lastReward:null,lifetimeRewards:0n}}const r={all:t,avgReward:avgReward(t),lastReward:t[t.length-1],lifetimeRewards:sumRewards(t)};i.debug(`Rewards between epochs ${r.all[0].epoch} and ${r.all[r.all.length-1].epoch}`,`average:${r.avgReward}`,`lastRewards:${r.lastReward}`,`lifetimeRewards:${r.lifetimeRewards}`);return r}));var e$=r("../../node_modules/@cardano-sdk/util/dist/esm/Percent.js");var eL=r("../../node_modules/rxjs/dist/esm5/internal/observable/iif.js");var eq=r("../../node_modules/rxjs/dist/esm5/internal/operators/combineLatestWith.js");var eY=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");const eQ=(0,E.map)(e=>(0,eY.coalesceValueQuantities)(e.map(([e,t])=>t.value)));const computeDepositCoin=(e,t)=>(0,v.combineLatest)([t,e]).pipe((0,E.map)(([e,{stakeKeyDeposit:t}])=>BigInt(e*t)),(0,w.distinctUntilChanged)());const numRewardAccountsWithKeyStatus=(e,t)=>e.rewardAccounts$.pipe((0,E.map)(e=>e.filter(e=>t.includes(e.credentialStatus)).length));const createBalanceTracker=(e,t,r)=>({rewardAccounts:{deposit$:computeDepositCoin(e,numRewardAccountsWithKeyStatus(r,[eN.StakeCredentialStatus.Registered,eN.StakeCredentialStatus.Registering])),rewards$:r.rewardAccounts$.pipe((0,E.map)(e=>e.reduce((e,{rewardBalance:t})=>e+t,0n)),(0,w.distinctUntilChanged)())},utxo:{available$:t.available$.pipe(eQ),total$:t.total$.pipe(eQ),unspendable$:t.unspendable$.pipe(eQ)}});const filterUtxosByAddress=e=>{return t=>{return t.pipe((0,E.map)(t=>{return t.filter(([,t])=>{return!(null==e?void 0:e.length)||e.includes(t.address)})}))}};const createUtxoBalanceByAddressTracker=(e,t)=>({utxo:{available$:e.available$.pipe(filterUtxosByAddress(t),(0,w.distinctUntilChanged)(q.utxoEquals),eQ),total$:e.total$.pipe(filterUtxosByAddress(t),(0,w.distinctUntilChanged)(q.utxoEquals),eQ),unspendable$:e.unspendable$.pipe(filterUtxosByAddress(t),(0,w.distinctUntilChanged)(q.utxoEquals),eQ)}});var eJ=r("../../node_modules/lodash/groupBy.js");var eX=r("../../node_modules/lodash/map.js");const createDelegationDistributionTracker=({rewardAccounts$:e,knownAddresses$:t,utxoTracker:r})=>{const s=createUtxoBalanceByAddressTracker(r);const i=e.pipe((0,E.map)(e=>{return e.filter(e=>{var t;return e.credentialStatus===eN.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)})}));const a=i.pipe((0,ek.withLatestFrom)(t),(0,E.map)(([e,t])=>e.map(e=>{const s=t.filter(t=>t.rewardAccount===e.address);return{balance:createUtxoBalanceByAddressTracker(r,s.map(({address:e})=>e)),delegatedAccount:e,groupedAddresses:s}})));return a.pipe((0,W.switchMap)(e=>(0,eL.iif)(()=>0===e.length,(0,l.of)([]),(0,v.combineLatest)(e.map(e=>e.balance.utxo.total$.pipe((0,E.map)(t=>({percentage:(0,e$.Percent)(0),pool:e.delegatedAccount.delegatee.nextNextEpoch,rewardAccounts:[e.delegatedAccount.address],stake:t.coins+e.delegatedAccount.rewardBalance}))))))),(0,E.map)(e=>eX(eJ(e,({pool:{id:e}})=>e),e=>e.reduce((e,t)=>({...t,rewardAccounts:[...new Set([...e.rewardAccounts,...t.rewardAccounts])],stake:t.stake+e.stake||0n})))),(0,eq.combineLatestWith)(s.utxo.total$,e.pipe((0,E.map)(e=>eW.BigIntMath.sum(e.map(({rewardBalance:e})=>e))))),(0,E.map)(([e,t,r])=>{const s=t.coins+r;const i=(0,e$.calcPercentages)(e.map(({stake:e})=>Number(e)),Number(s));return e.map((e,t)=>({...e,percentage:i[t]}))}),(0,w.distinctUntilChanged)((e,t)=>(0,g.sameArrayItems)(e,t,q.delegatedStakeEquals)),(0,E.map)(e=>new Map(e.map(e=>[e.pool.id,e]))))};const createDelegationPortfolioProvider=({rewardAccountInfoProvider:e,retryBackoffConfig:t,logger:r})=>s=>(0,Y.pollProvider)({logger:r,retryBackoffConfig:t,sample:()=>e.delegationPortfolio(s)});const hasDelegationCert=e=>!!e&&e.some(e=>eG.isCertType(e,[...eG.RegAndDeregCertificateTypes,...eG.StakeDelegationCertificateTypes]));const findDelegationPortfolioMetadata=()=>{return e=>{return e.pipe((0,E.map)(e=>{const t=[...e].reverse();let r;for(const s of t){var i,a;const o=null===(i=s.auxiliaryData)||void 0===i?void 0:null===(a=i.blob)||void 0===a?void 0:a.get(eN.DelegationMetadataLabel);const n=hasDelegationCert(s.body.certificates);if(!!o||!!n){if(n&&!o){r=null;break}if(o){r=eN.cip17FromMetadatum(o);break}}}return r}))}};const delegationTransactionFound=e=>void 0!==e;const createDelegationPortfolioTracker=(e,t,r,s,i)=>{const storageSet=e=>e?i.set(e).subscribe():i.delete().subscribe();return(0,v.combineLatest)([i.get().pipe((0,L.defaultIfEmpty)(null)),e]).pipe((0,W.switchMap)(([e,i])=>{if(i.length<=1){if(e)storageSet(null);return(0,l.of)(null)}const a=t.pipe(findDelegationPortfolioMetadata(),(0,H.take)(1));const o=r.pipe((0,E.map)(e=>[e]),findDelegationPortfolioMetadata(),(0,V.filter)(delegationTransactionFound),(0,h.tap)(storageSet));if(e){return(0,K.concat)((0,l.of)(e),a.pipe((0,V.filter)(delegationTransactionFound)),o)}return(0,K.concat)(a.pipe((0,n.mergeMap)(e=>{if(delegationTransactionFound(e)){return(0,l.of)(e)}return t.pipe((0,H.take)(1),(0,n.mergeMap)(e=>{if(0===e.length){return(0,l.of)(null)}return s(i[0]).pipe((0,H.take)(1))}))}),(0,h.tap)(storageSet)),o)}),(0,w.distinctUntilChanged)(g.deepEquals))};const createDelegationTracker=({rewardAccountAddresses$:e,epoch$:t,rewardsTracker:r,retryBackoffConfig:s,transactionsTracker:i,rewardAccountInfoProvider:a,knownAddresses$:o,refetchRewardAccountInfo$:n,protocolParameters$:d,utxoTracker:c,stores:l,logger:u,internals:{rewardsHistoryProvider:f=createRewardsHistoryProvider(r,s),observableRewardAccountInfoProvider:h=createRewardAccountInfoProvider({epoch$:t,externalTrigger$:n,logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:a}),delegationPortfolioProvider:m=createDelegationPortfolioProvider({logger:u,retryBackoffConfig:s,rewardAccountInfoProvider:a})}={}})=>{const p=new U.TrackerSubject(createRewardsHistoryTracker(e,t,f,l.rewardsHistory,(0,eT.contextLogger)(u,"rewardsHistory$")));const v=new U.TrackerSubject(createDelegationPortfolioTracker(e,i.history$,i.new$,m,l.delegationPortfolio));const _=new U.TrackerSubject(createRewardAccountsTracker({newTransaction$:i.new$,protocolParameters$:d,rewardAccountAddresses$:e,rewardAccountInfoProvider:h,store:l.rewardAccountInfo,transactionsInFlight$:i.outgoing.inFlight$}));const w=new U.TrackerSubject(createDelegationDistributionTracker({knownAddresses$:o,rewardAccounts$:_,utxoTracker:c}));return{distribution$:w,portfolio$:v,rewardAccounts$:_,rewardsHistory$:p,shutdown:()=>{_.complete();p.complete();v.complete();u.debug("Shutdown")}}};var eZ=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,e0=Math.ceil,e1=Math.floor,e2="[BigNumber Error] ",e3=e2+"Number primitive has more than 15 significant digits: ",e5=1e14,e4=14,e9=9007199254740991,e8=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],e6=1e7,e7=1e9;function clone(e){var t,r,s,i=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},a=new BigNumber(1),o=20,n=4,d=-7,c=21,l=-1e7,u=1e7,f=false,h=1,m=0,p={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",_=true;function BigNumber(e,t){var i,a,d,c,f,h,m,p,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>u)w.c=w.e=null;else if(e.e<l)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((h="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,f=e;f>=10;f/=10,c++);if(c>u)w.c=w.e=null;else{w.e=c;w.c=[e]}return}p=String(e)}else{if(!eZ.test(p=String(e)))return s(w,p,h);w.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}if((c=p.indexOf("."))>-1)p=p.replace(".","");if((f=p.search(/e/i))>0){if(c<0)c=f;c+=+p.slice(f+1);p=p.substring(0,f)}else if(c<0)c=p.length}else{intCheck(t,2,v.length,"Base");if(10==t&&_){w=new BigNumber(e);return round(w,o+w.e+1,n)}p=String(e);if(h="number"==typeof e){if(0*e!=0)return s(w,p,h,t);w.s=1/e<0?(p=p.slice(1),-1):1;if(BigNumber.DEBUG&&p.replace(/^0\.0*|\./,"").length>15){throw Error(e3+e)}}else{w.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1}i=v.slice(0,t);c=f=0;for(m=p.length;f<m;f++)if(i.indexOf(a=p.charAt(f))<0){if("."==a){if(f>c){c=m;continue}}else if(!d){if(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase())){d=true;f=-1;c=0;continue}}return s(w,String(e),h,t)}h=false;p=r(p,t,10,w.s);if((c=p.indexOf("."))>-1)p=p.replace(".","");else c=p.length}for(f=0;48===p.charCodeAt(f);f++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(f,++m)){m-=f;if(h&&BigNumber.DEBUG&&m>15&&(e>e9||e!==e1(e))){throw Error(e3+w.s*e)}if((c=c-f-1)>u)w.c=w.e=null;else if(c<l)w.c=[w.e=0];else{w.e=c;w.c=[];f=(c+1)%e4;if(c<0)f+=e4;if(f<m){if(f)w.c.push(+p.slice(0,f));for(m-=e4;f<m;)w.c.push(+p.slice(f,f+=e4));f=e4-(p=p.slice(f)).length}else{f-=m}for(;f--;p+="0");w.c.push(+p)}}else{w.c=[w.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];intCheck(r,0,e7,t);o=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];intCheck(r,0,8,t);n=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){intCheck(r[0],-e7,0,t);intCheck(r[1],0,e7,t);d=r[0];c=r[1]}else{intCheck(r,-e7,e7,t);d=-(c=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){intCheck(r[0],-e7,-1,t);intCheck(r[1],1,e7,t);l=r[0];u=r[1]}else{intCheck(r,-e7,e7,t);if(r)l=-(u=r<0?-r:r);else{throw Error(e2+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=r;else{f=!r;throw Error(e2+"crypto unavailable")}else f=r;else{throw Error(e2+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];intCheck(r,0,9,t);h=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];intCheck(r,0,e7,t);m=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)p=r;else throw Error(e2+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(e2+t+" invalid: "+r)}_="0123456789"==r.slice(0,10);v=r}}else{throw Error(e2+"Object expected: "+e)}return{DECIMAL_PLACES:o,ROUNDING_MODE:n,EXPONENTIAL_AT:[d,c],RANGE:[l,u],CRYPTO:f,MODULO_MODE:h,POW_PRECISION:m,FORMAT:p,ALPHABET:v}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,i=e.e,a=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===a||-1===a)&&i>=-e7&&i<=e7&&i===e1(i)){if(0===s[0]){if(0===i&&1===s.length)return true;break e}t=(i+1)%e4;if(t<1)t+=e4;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=e5||r!==e1(r))break e}if(0!==r)return true}}}else if(null===s&&null===i&&(null===a||1===a||-1===a)){return true}throw Error(e2+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,i.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,i.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return e1(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,i,n,d,c=0,l=[],u=new BigNumber(a);if(null==e)e=o;else intCheck(e,0,e7);n=e0(e/e4);if(f)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(n*=2));for(;c<n;){d=131072*r[c]+(r[c+1]>>>11);if(d>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[c]=s[0];r[c+1]=s[1]}else{l.push(d%1e14);c+=2}}c=n/2}else if(crypto.randomBytes){r=crypto.randomBytes(n*=7);for(;c<n;){d=(31&r[c])*281474976710656+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6];if(d>=9e15)crypto.randomBytes(7).copy(r,c);else{l.push(d%1e14);c+=7}}c=n/7}else{f=false;throw Error(e2+"crypto unavailable")}if(!f){for(;c<n;){d=t();if(d<9e15)l[c++]=d%1e14}}n=l[--c];e%=e4;if(n&&e){d=e8[e4-e];l[c]=e1(n/d)*d}for(;0===l[c];l.pop(),c--);if(c<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=e4);for(c=1,d=l[0];d>=10;d/=10,c++);if(c<e4)i-=e4-c}u.e=i;u.c=l;return u}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var i,a=[0],o,n=0,d=e.length;for(;n<d;){for(o=a.length;o--;a[o]*=t);a[0]+=s.indexOf(e.charAt(n++));for(i=0;i<a.length;i++)if(a[i]>r-1){if(null==a[i+1])a[i+1]=0;a[i+1]+=a[i]/r|0;a[i]%=r}}return a.reverse()}return function(r,s,i,a,d){var c,l,u,f,h,p,_,w,y=r.indexOf("."),g=o,b=n;if(y>=0){f=m;m=0;r=r.replace(".","");w=new BigNumber(s);p=w.pow(r.length-y);m=f;w.c=toBaseOut(toFixedPoint(coeffToString(p.c),p.e,"0"),10,i,e);w.e=w.c.length}_=toBaseOut(r,s,i,d?(c=v,e):(c=e,v));u=f=_.length;for(;0==_[--f];_.pop());if(!_[0])return c.charAt(0);if(y<0)--u;else{p.c=_;p.e=u;p.s=a;p=t(p,w,g,b,i);_=p.c;h=p.r;u=p.e}l=u+g+1;y=_[l];f=i/2;h=h||l<0||null!=_[l+1];h=b<4?(null!=y||h)&&(0==b||b==(p.s<0?3:2)):y>f||y==f&&(4==b||h||6==b&&1&_[l-1]||b==(p.s<0?8:7));if(l<1||!_[0])r=h?toFixedPoint(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{_.length=l;if(h){for(--i;++_[--l]>i;){_[l]=0;if(!l){++u;_=[1].concat(_)}}}for(f=_.length;!_[--f];);for(y=0,r="";y<=f;r+=c.charAt(_[y++]));r=toFixedPoint(r,u,c.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,i,a,o,n=0,d=e.length,c=t%e6,l=t/e6|0;for(e=e.slice();d--;){a=e[d]%e6;o=e[d]/e6|0;s=l*a+o*c;i=c*a+s%e6*e6+n;n=(i/r|0)+(s/e6|0)+l*o;e[d]=i%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var i,a;if(r!=s)a=r>s?1:-1;else{for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}}return a}function subtract(e,t,r,s){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,i){var a,o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P=e.s==t.s?1:-1,S=e.c,C=t.c;if(!S||!S[0]||!C||!C[0]){return new BigNumber(e.s&&t.s&&(S?!C||S[0]!=C[0]:C)?S&&0==S[0]||!C?0*P:P/0:NaN)}f=new BigNumber(P);h=f.c=[];o=e.e-t.e;P=r+o+1;if(!i){i=e5;o=bitFloor(e.e/e4)-bitFloor(t.e/e4);P=P/e4|0}for(n=0;C[n]==(S[n]||0);n++);if(C[n]>(S[n]||0))o--;if(P<0){h.push(1);d=true}else{w=S.length;g=C.length;n=0;P+=2;c=e1(i/(C[0]+1));if(c>1){C=multiply(C,c,i);S=multiply(S,c,i);g=C.length;w=S.length}_=g;m=S.slice(0,g);p=m.length;for(;p<g;m[p++]=0);b=C.slice();b=[0].concat(b);y=C[0];if(C[1]>=i/2)y++;do{c=0;a=compare(C,m,g,p);if(a<0){v=m[0];if(g!=p)v=v*i+(m[1]||0);c=e1(v/y);if(c>1){if(c>=i)c=i-1;l=multiply(C,c,i);u=l.length;p=m.length;while(1==compare(l,m,u,p)){c--;subtract(l,g<u?b:C,u,i);u=l.length;a=1}}else{if(0==c)a=c=1;l=C.slice();u=l.length}if(u<p)l=[0].concat(l);subtract(m,l,p,i);p=m.length;if(-1==a){while(compare(C,m,g,p)<1){c++;subtract(m,g<p?b:C,p,i);p=m.length}}}else if(0===a){c++;m=[0]}h[n++]=c;if(m[0])m[p++]=S[_]||0;else{m=[S[_]];p=1}}while((_++<w||null!=m[0])&&P--)d=null!=m[0];if(!h[0])h.splice(0,1)}if(i==e5){for(n=1,P=h[0];P>=10;P/=10,n++);round(f,r+(f.e=n+o*e4-1)+1,s,d)}else{f.e=o;f.r=+d}return f}}();function format(e,t,r,s){var i,a,o,l,u;if(null==r)r=n;else intCheck(r,0,8);if(!e.c)return e.toString();i=e.c[0];o=e.e;if(null==t){u=coeffToString(e.c);u=1==s||2==s&&(o<=d||o>=c)?toExponential(u,o):toFixedPoint(u,o,"0")}else{e=round(new BigNumber(e),t,r);a=e.e;u=coeffToString(e.c);l=u.length;if(1==s||2==s&&(t<=a||a<=d)){for(;l<t;u+="0",l++);u=toExponential(u,a)}else{t-=o;u=toFixedPoint(u,a,"0");if(a+1>l){if(--t>0)for(u+=".";t--;u+="0");}else{t+=a-l;if(t>0){if(a+1==l)u+=".";for(;t--;u+="0");}}}}return e.s<0&&i?"-"+u:u}function maxOrMin(e,t){var r,s=1,i=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(i,r))i=r}else{i=r;break}}return i}function normalise(e,t,r){var s=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,s++);if((r=s+r*e4-1)>u)e.c=e.e=null;else if(r<l)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,o,n,d){var c,l=n?o:o.replace(i,"");if(s.test(l))a.s=isNaN(l)?null:l<0?-1:1;else{if(!n){l=l.replace(e,function(e,t,r){c="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=c?e:t});if(d){c=d;l=l.replace(t,"$1").replace(r,"0.$1")}if(o!=l)return new BigNumber(l,c)}if(BigNumber.DEBUG){throw Error(e2+"Not a"+(d?" base "+d:"")+" number: "+o)}a.s=null}a.c=a.e=null}}();function round(e,t,r,s){var i,a,o,n,d,c,f,h=e.c,m=e8;if(h){e:{for(i=1,n=h[0];n>=10;n/=10,i++);a=t-i;if(a<0){a+=e4;o=t;d=h[c=0];f=d/m[i-o-1]%10|0}else{c=e0((a+1)/e4);if(c>=h.length)if(s){for(;h.length<=c;h.push(0));d=f=0;i=1;a%=e4;o=a-e4+1}else{break e}else{d=n=h[c];for(i=1;n>=10;n/=10,i++);a%=e4;o=a-e4+i;f=o<0?0:d/m[i-o-1]%10|0}}s=s||t<0||null!=h[c+1]||(o<0?d:d%m[i-o-1]);s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(a>0?o>0?d/m[i-o]:0:h[c-1])%10&1||r==(e.s<0?8:7));if(t<1||!h[0]){h.length=0;if(s){t-=e.e+1;h[0]=m[(e4-t%e4)%e4];e.e=-t||0}else{h[0]=e.e=0}return e}if(0==a){h.length=c;n=1;c--}else{h.length=c+1;n=m[e4-a];h[c]=o>0?e1(d/m[i-o]%m[o])*n:0}if(s){for(;;){if(0==c){for(a=1,o=h[0];o>=10;o/=10,a++);o=h[0]+=n;for(n=1;o>=10;o/=10,n++);if(a!=n){e.e++;if(h[0]==e5)h[0]=1}break}h[c]+=n;if(h[c]!=e5)break;h[c--]=0;n=1}}for(a=h.length;0===h[--a];h.pop());}if(e.e>u)e.c=e.e=null;else if(e.e<l)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=coeffToString(e.c);t=r<=d||r>=c?toExponential(t,r):toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}i.absoluteValue=i.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};i.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};i.decimalPlaces=i.dp=function(e,t){var r,s,i,a=this;if(null!=e){intCheck(e,0,e7);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(a),e+a.e+1,t)}if(!(r=a.c))return null;s=((i=r.length-1)-bitFloor(this.e/e4))*e4;if(i=r[i])for(;i%10==0;i/=10,s--);if(s<0)s=0;return s};i.dividedBy=i.div=function(e,r){return t(this,new BigNumber(e,r),o,n)};i.dividedToIntegerBy=i.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};i.exponentiatedBy=i.pow=function(e,t){var r,s,i,o,d,c,l,u,f,h=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(e2+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);c=e.e>14;if(!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0]){f=new BigNumber(Math.pow(+valueOf(h),c?e.s*(2-isOdd(e)):+valueOf(e)));return t?f.mod(t):f}l=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!l&&h.isInteger()&&t.isInteger();if(s)h=h.mod(t)}else if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||c&&h.c[1]>=24e7:h.c[0]<8e13||c&&h.c[0]<=9999975e7))){o=(h.s<0&&isOdd(e),-0);if(h.e>-1)o=1/o;return new BigNumber(l?1/o:o)}else if(m)o=e0(m/e4+2);if(c){r=new BigNumber(.5);if(l)e.s=1;u=isOdd(e)}else{i=Math.abs(+valueOf(e));u=i%2}f=new BigNumber(a);for(;;){if(u){f=f.times(h);if(!f.c)break;if(o){if(f.c.length>o)f.c.length=o}else if(s)f=f.mod(t)}if(i){i=e1(i/2);if(0===i)break;u=i%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)u=isOdd(e);else{i=+valueOf(e);if(0===i)break;u=i%2}}h=h.times(h);if(o){if(h.c&&h.c.length>o)h.c.length=o}else if(s)h=h.mod(t)}if(s)return f;if(l)f=a.div(f);return t?f.mod(t):o?round(f,m,n,d):f};i.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=n;else intCheck(e,0,8);return round(t,t.e+1,e)};i.isEqualTo=i.eq=function(e,t){return 0===compare(this,new BigNumber(e,t))};i.isFinite=function(){return!!this.c};i.isGreaterThan=i.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};i.isGreaterThanOrEqualTo=i.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};i.isInteger=function(){return!!this.c&&bitFloor(this.e/e4)>this.c.length-2};i.isLessThan=i.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};i.isLessThanOrEqualTo=i.lte=function(e,t){return -1===(t=compare(this,new BigNumber(e,t)))||0===t};i.isNaN=function(){return!this.s};i.isNegative=function(){return this.s<0};i.isPositive=function(){return this.s>0};i.isZero=function(){return!!this.c&&0==this.c[0]};i.minus=function(e,t){var r,s,i,a,o=this,d=o.s;e=new BigNumber(e,t);t=e.s;if(!d||!t)return new BigNumber(NaN);if(d!=t){e.s=-t;return o.plus(e)}var c=o.e/e4,l=e.e/e4,u=o.c,f=e.c;if(!c||!l){if(!u||!f)return u?(e.s=-t,e):new BigNumber(f?o:NaN);if(!u[0]||!f[0]){return f[0]?(e.s=-t,e):new BigNumber(u[0]?o:-0)}}c=bitFloor(c);l=bitFloor(l);u=u.slice();if(d=c-l){if(a=d<0){d=-d;i=u}else{l=c;i=f}i.reverse();for(t=d;t--;i.push(0));i.reverse()}else{s=(a=(d=u.length)<(t=f.length))?d:t;for(d=t=0;t<s;t++)if(u[t]!=f[t]){a=u[t]<f[t];break}}if(a)i=u,u=f,f=i,e.s=-e.s;t=(s=f.length)-(r=u.length);if(t>0)for(;t--;u[r++]=0);t=e5-1;for(;s>d;){if(u[--s]<f[s]){for(r=s;r&&!u[--r];u[r]=t);--u[r];u[s]+=e5}u[s]-=f[s]}for(;0==u[0];u.splice(0,1),--l);if(!u[0]){e.s=3==n?-1:1;e.c=[e.e=0];return e}return normalise(e,u,l)};i.modulo=i.mod=function(e,r){var s,i,a=this;e=new BigNumber(e,r);if(a.c&&e.s&&(!e.c||e.c[0])){if(!e.c||a.c&&!a.c[0]){return new BigNumber(a)}}else{return new BigNumber(NaN)}if(9==h){i=e.s;e.s=1;s=t(a,e,0,3);e.s=i;s.s*=i}else{s=t(a,e,0,h)}e=a.minus(s.times(e));if(!e.c[0]&&1==h)e.s=a.s;return e};i.multipliedBy=i.times=function(e,t){var r,s,i,a,o,n,d,c,l,u,f,h,m,p,v,_=this,w=_.c,y=(e=new BigNumber(e,t)).c;if(!w||!y||!w[0]||!y[0]){if(_.s&&e.s&&(!w||w[0]||y)&&(!y||y[0]||w)){e.s*=_.s;if(w&&y){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bitFloor(_.e/e4)+bitFloor(e.e/e4);e.s*=_.s;d=w.length;u=y.length;if(d<u)m=w,w=y,y=m,i=d,d=u,u=i;for(i=d+u,m=[];i--;m.push(0));p=e5;v=e6;for(i=u;--i>=0;){r=0;f=y[i]%v;h=y[i]/v|0;for(o=d,a=i+o;a>i;){c=w[--o]%v;l=w[o]/v|0;n=h*c+l*f;c=f*c+n%v*v+m[a]+r;r=(c/p|0)+(n/v|0)+h*l;m[a--]=c%p}m[a]=r}if(r)++s;else m.splice(0,1);return normalise(e,m,s)};i.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};i.plus=function(e,t){var r,s=this,i=s.s;e=new BigNumber(e,t);t=e.s;if(!i||!t)return new BigNumber(NaN);if(i!=t){e.s=-t;return s.minus(e)}var a=s.e/e4,o=e.e/e4,n=s.c,d=e.c;if(!a||!o){if(!n||!d)return new BigNumber(i/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*i)}a=bitFloor(a);o=bitFloor(o);n=n.slice();if(i=a-o){if(i>0){o=a;r=d}else{i=-i;r=n}r.reverse();for(;i--;r.push(0));r.reverse()}i=n.length;t=d.length;if(i-t<0)r=d,d=n,n=r,t=i;for(i=0;t;){i=(n[--t]=n[t]+d[t]+i)/e5|0;n[t]=e5===n[t]?0:n[t]%e5}if(i){n=[i].concat(n);++o}return normalise(e,n,o)};i.precision=i.sd=function(e,t){var r,s,i,a=this;if(null!=e&&!!e!==e){intCheck(e,1,e7);if(null==t)t=n;else intCheck(t,0,8);return round(new BigNumber(a),e,t)}if(!(r=a.c))return null;i=r.length-1;s=i*e4+1;if(i=r[i]){for(;i%10==0;i/=10,s--);for(i=r[0];i>=10;i/=10,s++);}if(e&&a.e+1>s)s=a.e+1;return s};i.shiftedBy=function(e){intCheck(e,-e9,e9);return this.times("1e"+e)};i.squareRoot=i.sqrt=function(){var e,r,s,i,a,d=this,c=d.c,l=d.s,u=d.e,f=o+4,h=new BigNumber("0.5");if(1!==l||!c||!c[0]){return new BigNumber(!l||l<0&&(!c||c[0])?NaN:c?d:1/0)}l=Math.sqrt(+valueOf(d));if(0==l||l==1/0){r=coeffToString(c);if((r.length+u)%2==0)r+="0";l=Math.sqrt(+r);u=bitFloor((u+1)/2)-(u<0||u%2);if(l==1/0)r="5e"+u;else{r=l.toExponential();r=r.slice(0,r.indexOf("e")+1)+u}s=new BigNumber(r)}else{s=new BigNumber(l+"")}if(s.c[0]){u=s.e;l=u+f;if(l<3)l=0;for(;;){a=s;s=h.times(a.plus(t(d,a,f,1)));if(coeffToString(a.c).slice(0,l)===(r=coeffToString(s.c)).slice(0,l)){if(s.e<u)--l;r=r.slice(l-3,l+1);if("9999"!=r&&(i||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+o+2,1);e=!s.times(s).eq(d)}break}if(!i){round(a,a.e+o+2,0);if(a.times(a).eq(d)){s=a;break}}f+=4;l+=4;i=1}}}return round(s,s.e+o+1,n,e)};i.toExponential=function(e,t){if(null!=e){intCheck(e,0,e7);e++}return format(this,e,t,1)};i.toFixed=function(e,t){if(null!=e){intCheck(e,0,e7);e=e+this.e+1}return format(this,e,t)};i.toFormat=function(e,t,r){var s,i=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=p}else if("object"!=typeof r){throw Error(e2+"Argument not an object: "+r)}s=i.toFixed(e,t);if(i.c){var a,o=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,c=r.groupSeparator||"",l=o[0],u=o[1],f=i.s<0,h=f?l.slice(1):l,m=h.length;if(d)a=n,n=d,d=a,m-=a;if(n>0&&m>0){a=m%n||n;l=h.substr(0,a);for(;a<m;a+=n)l+=c+h.substr(a,n);if(d>0)l+=c+h.slice(a);if(f)l="-"+l}s=u?l+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?u.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):u):l}return(r.prefix||"")+s+(r.suffix||"")};i.toFraction=function(e){var r,s,i,o,d,c,l,f,h,m,p,v,_=this,w=_.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(a)){throw Error(e2+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!w)return new BigNumber(_);r=new BigNumber(a);h=s=new BigNumber(a);i=f=new BigNumber(a);v=coeffToString(w);d=r.e=v.length-_.e-1;r.c[0]=e8[(c=d%e4)<0?e4+c:c];e=!e||l.comparedTo(r)>0?d>0?r:h:l;c=u;u=1/0;l=new BigNumber(v);f.c[0]=0;for(;;){m=t(l,r,0,1);o=s.plus(m.times(i));if(1==o.comparedTo(e))break;s=i;i=o;h=f.plus(m.times(o=h));f=o;r=l.minus(m.times(o=r));l=o}o=t(e.minus(s),i,0,1);f=f.plus(o.times(h));s=s.plus(o.times(i));f.s=h.s=_.s;d*=2;p=t(h,i,d,n).minus(_).abs().comparedTo(t(f,s,d,n).minus(_).abs())<1?[h,i]:[f,s];u=c;return p};i.toNumber=function(){return+valueOf(this)};i.toPrecision=function(e,t){if(null!=e)intCheck(e,1,e7);return format(this,e,t,2)};i.toString=function(e){var t,s=this,i=s.s,a=s.e;if(null===a)if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}else{if(null==e)t=a<=d||a>=c?toExponential(coeffToString(s.c),a):toFixedPoint(coeffToString(s.c),a,"0");else if(10===e&&_){s=round(new BigNumber(s),o+a+1,n);t=toFixedPoint(coeffToString(s.c),s.e,"0")}else{intCheck(e,2,v.length,"Base");t=r(toFixedPoint(coeffToString(s.c),a,"0"),10,e,i,true)}if(i<0&&s.c[0])t="-"+t}return t};i.valueOf=i.toJSON=function(){return valueOf(this)};i._isBigNumber=true;i[Symbol.toStringTag]="BigNumber";i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){var t,r,s=1,i=e.length,a=e[0]+"";for(;s<i;){t=e[s++]+"";r=e4-t.length;for(;r--;t="0"+t);a+=t}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function compare(e,t){var r,s,i=e.c,a=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=i&&!i[0];s=a&&!a[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!i||!a)return s?0:!i^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=i.length)<(c=a.length)?d:c;for(o=0;o<n;o++)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function intCheck(e,t,r,s){if(e<t||e>r||e!==e1(e)){throw Error(e2+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/e4)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var s,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{s=e.length;if(++t>s){for(i=r,t-=s;--t;i+=r);e+=i}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var te=clone();const tt=null;var tr=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var ts=r("../../node_modules/lodash/uniq.js");var DynamicChangeAddressResolver_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var DynamicChangeAddressResolver_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var ti,ta,to,tn;const getBalanceInTxOuts=e=>{let t=0n;for(const r of e)t+=r.value.coins;return t};const getSpentInInputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t[0].address)).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n);const getBalanceFromOutputs=(e,t)=>t.filter(t=>e.some(e=>e.address===t.address)).map(e=>e.value.coins).reduce((e,t)=>e+t,0n);const getSpentFromRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=tr.Address.fromString(t[0].address))||void 0===r?void 0:r.asBase();if(!s)return false;return eH.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e[1].value.coins).reduce((e,t)=>e+t,0n)};const getDepositToRewardAccount=(e,t)=>{return t.filter(t=>{var r;const s=null===(r=tr.Address.fromString(t.address))||void 0===r?void 0:r.asBase();if(!s)return false;return eH.RewardAccount.toHash(e)===s.getStakeCredential().hash}).map(e=>e.value.coins).reduce((e,t)=>e+t,0n)};const getAddressForRewardAccount=(e,t)=>e.find(e=>e.rewardAccount===t);const createBuckets=(e,t,r,s)=>{const i=new Array;const a=[...e.inputs];const o=[...e.outputs];const n=t.map(e=>e.stake).reduce((e,t)=>e+t,0n);const d=getBalanceInTxOuts(e.change);const c=getSpentInInputs(s,a)+e.fee;const l=getBalanceFromOutputs(s,o)+d;const u=n+l-c;const f=r.pools.map(e=>e.weight).reduce((e,t)=>e+t,0);const h=new Map(r.pools.map(e=>[e.id,e.weight/f]));for(const m of t){if(0===m.rewardAccounts.length)throw new eo.InvalidStateError(`No reward accounts delegating to pool '${m.pool.id}'.`);const p=m.rewardAccounts[0];const v=getAddressForRewardAccount(s,p);if(!v)throw new eo.InvalidStateError(`Reward account '${p}' unknown.`);const _=m.stake-getSpentFromRewardAccount(p,a)+getDepositToRewardAccount(p,o);const w=h.get(m.pool.hexId);if(void 0===w)throw new eo.InvalidStateError(`Pool '${m.pool.id}' not found in the portfolio.`);i.push({address:v.address,capacity:BigInt(new te(u.toString()).multipliedBy(w).toFixed(0,0)),change:new Array,filledAmount:_})}return i};const getBucketGap=e=>{if(0n===e.capacity)return new te("0");const t=new te(e.capacity.toString());const r=new te(e.filledAmount.toString());return t.minus(r).dividedBy(t)};const pickBucket=e=>e.sort((e,t)=>{const r=getBucketGap(e);const s=getBucketGap(t);if(s.isGreaterThan(r)){return 1}if(s.isLessThan(r)){return -1}return 0})[0];const distributeChange=(e,t)=>{const r=[...t];const s=e.sort((e,t)=>{if(e.value.coins>t.value.coins){return 1}if(e.value.coins<t.value.coins){return -1}return 0});while(s.length>0){const i=pickBucket(r);const a=s.splice(0,1)[0];i.change.push(a);i.filledAmount+=a.value.coins}for(const o of r)o.change=o.change.map(e=>{e.address=o.address;return e});return r};const delegationMatchesPortfolio=(e,t)=>{const r=ts(e.pools.map(e=>e.id)).sort();const s=ts(t.map(e=>e.pool.hexId)).sort();return eV(r,s)};class DynamicChangeAddressResolver{async resolve(e){const t=[...(await (0,ep.firstValueFrom)(DynamicChangeAddressResolver_classPrivateFieldGet(this,ta,"f"))).values()];let r=await DynamicChangeAddressResolver_classPrivateFieldGet(this,ti,"f").call(this);const s=sortAddresses(await (0,ep.firstValueFrom)(DynamicChangeAddressResolver_classPrivateFieldGet(this,to,"f")));let i=[...e.change];if(0===s.length)throw new eo.InvalidStateError("The wallet has no known addresses.");if(0===t.length){i=i.map(e=>{e.address=s[0].address;return e});return i}if(1===t.length){if(0===t[0].rewardAccounts.length)throw new eo.InvalidStateError(`No reward accounts delegating to pool '${t[0].pool.id}'.`);const a=s.find(e=>e.rewardAccount===t[0].rewardAccounts[0]);if(!a)throw new eo.InvalidStateError(`Reward account '${t[0].rewardAccounts[0]}' unknown.`);i=i.map(e=>{e.address=a.address;return e});return i}if(!r||!delegationMatchesPortfolio(r,t)){DynamicChangeAddressResolver_classPrivateFieldGet(this,tn,"f").warn("The portfolio doesnt match current wallet delegation.");DynamicChangeAddressResolver_classPrivateFieldGet(this,tn,"f").warn(`Portfolio: ${r}`);const o=t.map(e=>({id:e.pool.hexId,weight:1/t.length}));r={name:"Default Portfolio",pools:o}}const n=createBuckets(e,t,r,s);const d=distributeChange(e.change,n);i=new Array;for(const c of d)i=[...i,...c.change];return i}constructor(e,t,r,s){ti.set(this,void 0);ta.set(this,void 0);to.set(this,void 0);tn.set(this,void 0);DynamicChangeAddressResolver_classPrivateFieldSet(this,ti,r,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,ta,t,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,to,e,"f");DynamicChangeAddressResolver_classPrivateFieldSet(this,tn,s,"f")}}ti=new WeakMap,ta=new WeakMap,to=new WeakMap,tn=new WeakMap;var td=r("../../node_modules/rxjs/dist/esm5/internal/operators/connect.js");var tc=r("../../node_modules/rxjs/dist/esm5/internal/operators/buffer.js");var tl=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var tu=r("../../node_modules/rxjs/dist/esm5/internal/operators/ignoreElements.js");const startOnTrigger=(e,t)=>(0,K.concat)(e.pipe((0,H.take)(1),(0,tu.ignoreElements)()),t);const concatAndCombineLatest=e=>{if(0===e.length){return(0,l.of)([])}const t=[];let r=e[0].pipe((0,R.share)());t.push(r);for(const s of e.slice(1)){const i=startOnTrigger(r,s);r=i.pipe((0,R.share)());t.push(r)}return(0,v.combineLatest)(t)};const isAssetInfoComplete=e=>void 0!==e.nftMetadata&&void 0!==e.tokenMetadata;const isEveryAssetInfoComplete=e=>e.every(isAssetInfoComplete);const bufferTick=()=>e=>e.pipe((0,td.connect)(e=>e.pipe((0,tc.buffer)(e.pipe((0,G.debounceTime)(1))))));const tf=100;const th=864e5;const tm=7*th;var tp;const isInBalance=(e,t)=>{var r;return null!==(tp=null===(r=t.assets)||void 0===r?void 0:r.has(e))&&void 0!==tp&&tp};const splitCachedAndUncachedAssets=(e,t,r)=>{const s=new Map;const i=[];const a=new Date;for(const o of r){const n=e.get(o);if(!n){i.push(o);continue}const{staleAt:d}=n;const c=!d||new Date(d)<a;const l=!isAssetInfoComplete(n)||isInBalance(o,t)&&c;if(l)i.push(o);else s.set(o,n)}return{cachedAssets:s,uncachedAssetIds:i}};const getAssetsWithCache=async(e,t,r,s,i)=>{const[a,o]=await Promise.all([(0,ep.firstValueFrom)(t),(0,ep.firstValueFrom)(r)]);const{cachedAssets:n,uncachedAssetIds:d}=splitCachedAndUncachedAssets(a,o,e);if(0===d.length){if(!s.stats.getAsset$.value.initialized)s.setStatInitialized(s.stats.getAsset$);return[...n.values()]}const c=await s.getAssets({assetIds:d,extraData:{nftMetadata:true,tokenMetadata:true}});const l=Date.now();const u=c.map(e=>{const t=Math.floor(2*Math.random()*th);return{...e,staleAt:new Date(l+i+t)}});return[...n.values(),...u]};const createAssetService=(e,t,r,s,i,a=tm)=>o=>concatAndCombineLatest(eA(o,tf).map(o=>(0,Y.pollProvider)({logger:i,pollUntil:isEveryAssetInfoComplete,retryBackoffConfig:s,sample:()=>getAssetsWithCache(o,t,r,e,a),trigger$:(0,l.of)(true)}))).pipe((0,E.map)(e=>e.flat()));const uniqueAssetIds=({body:{outputs:e}})=>e.flatMap(({value:{assets:e}})=>e?[...e.keys()]:[]);const flatUniqueAssetIds=e=>ts(e.flatMap(uniqueAssetIds));const createAssetsTracker=({assetProvider:e,assetsCache$:t,transactionsTracker:{history$:r},balanceTracker:{utxo:{total$:s}},retryBackoffConfig:o,logger:n,maxAssetInfoCacheAge:d},{assetService:c=createAssetService(e,t,s,o,n,d)}={})=>{return new tl.Observable(t=>{let o=new Map;const d=new Set;const u=r.pipe((0,R.share)());return(0,K.concat)((0,v.combineLatest)([u.pipe((0,E.map)(e=>ts(e.flatMap(uniqueAssetIds)))),s.pipe((0,E.map)(e=>{var t;return[...(null===(t=e.assets)||void 0===t?void 0:t.keys())||[]]}))]).pipe((0,E.map)(([e,t])=>ts([...e,...t])),(0,h.tap)(e=>n.debug(e.length>0?`Total assets: ${e.length}`:"Setting assetProvider stats as initialized")),(0,h.tap)(t=>0===t.length&&e.setStatInitialized(e.stats.getAsset$)),(0,H.take)(1)),newTransactions$(u).pipe(bufferTick(),(0,E.map)(flatUniqueAssetIds),(0,E.map)(e=>{const t=e.filter(e=>!d.has(e));const r=[...d.values()].filter(e=>{const t=o.get(e);return!t||!isAssetInfoComplete(t)});const s=e.map(e=>{const t=i.AssetId.getAssetName(e);const r=a.AssetNameLabel.decode(t);if((null==r?void 0:r.label)===a.AssetNameLabelNum.ReferenceNFT){return i.AssetId.fromParts(i.AssetId.getPolicyId(e),a.AssetNameLabel.encode(r.content,a.AssetNameLabelNum.UserNFT))}}).filter(b.isNotNil);return ts([...t,...r,...s])}),(0,V.filter)(e=>e.length>0))).pipe((0,h.tap)(e=>{for(const t of e)d.add(t)}),(0,W.switchMap)(e=>e.length>0?c(e):(0,l.of)([])),(0,E.map)(e=>[...[...o.values()].filter(b.isNotNil),...e]),(0,w.distinctUntilChanged)(g.deepEquals),(0,h.tap)(e=>n.debug(`Got metadata for ${e.length} assets`)),(0,E.map)(e=>new Map(e.map(e=>[e.assetId,e]))),(0,h.tap)(e=>o=e)).subscribe(t)})};var tv=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js");const hasOwnDRepCredential=({certificate:e,dRepKeyHash:t})=>"dRepCredential"in e&&e.dRepCredential.type===tr.CredentialType.KeyHash&&e.dRepCredential.hash===t;const createDRepRegistrationTracker=({historyTransactions$:e,pubDRepKeyHash$:t})=>new U.TrackerSubject(t.pipe((0,W.switchMap)(t=>e.pipe((0,E.map)(e=>{if(!t)return false;const r=[...e].reverse();for(const{body:{certificates:s}}of r)if(s){for(const i of s)if(!!hasOwnDRepCredential({certificate:i,dRepKeyHash:t})){if(i.__typename===eG.CertificateType.UnregisterDelegateRepresentative)return false;if(i.__typename===eG.CertificateType.RegisterDelegateRepresentative)return true}}return false}))),(0,w.distinctUntilChanged)()));var t_=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var tw=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var ty=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/key.js");var tg=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var tb=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var tP=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/AuxiliaryData/AuxiliaryData.js");var tS=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/CborSet.js");var tC=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/VkeyWitness.js");var tk=r("../../node_modules/rxjs/dist/esm5/internal/Subscription.js");var tj=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var tx=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var tT=r("../../node_modules/lodash/minBy.js");var tE=r("../../node_modules/lodash/orderBy.js");const getLeftoverAssets=(e,t)=>{const r=new Map;for(const[s,{value:{assets:i}}]of e)if(i){const a=[...i.keys()].filter(e=>!t.includes(e));for(const o of a){const n=i.get(o);if(0n===n)continue;const d=r.get(o)||[];r.set(o,[...d,n])}}return r};const redistributeLeftoverAssets=(e,t,r)=>{const s=getLeftoverAssets(e,r);const i=[...t];for(const a of s.keys()){const o=tE(s.get(a),e=>e,"desc");if(0===i.length)i.push({coins:0n});while(o.length>i.length){const n=o.pop();o[o.length-1]+=n}for(const[d,c]of o.entries()){var l;const u=i[d];const f=(null===(l=u.assets)||void 0===l?void 0:l.entries())||[];i.splice(d,1,{assets:new Map([...f,[a,c]]),coins:u.coins})}}return i};const createBundlePerOutput=(e,t,r,s)=>{let i=0n;const a=new Map;const o=e.map(e=>{const o=t>0n?r*e.coins/t:0n;i+=o;if(!e.assets){return{coins:o}}const n=new Map;for(const[d,c]of e.assets.entries()){const{selected:l,requested:u}=s.get(d);const f=l-u;const h=f*c/l;a.set(d,(a.get(d)||0n)+h);n.set(d,h)}return{assets:n,coins:o}});return{bundles:o,totalAssetsBundled:a,totalCoinBundled:i}};const smallestBundleTokenMap=e=>{if(0===e.length){const t={assets:new Map,coins:0n};e.push(t);return t.assets}const r=tT(e,({assets:e})=>{return(null==e?void 0:e.size)||0});if(!r.assets)r.assets=new Map;return r.assets};const computeRequestedAssetChangeBundles=(e,t,r,{implicitCoin:s,implicitTokens:i},a)=>{const o=new Map;const n=(0,eR.toValues)(e);for(const d of r)o.set(d,{requested:(0,eR.assetQuantitySelector)(d)(t)+i.spend(d),selected:(0,eR.assetQuantitySelector)(d)(n)+i.input(d)});const c=(0,eR.getCoinQuantity)(n)+s.input;const l=(0,eR.getCoinQuantity)(t)+a+s.deposit;const u=c-l;const{totalCoinBundled:f,bundles:h,totalAssetsBundled:m}=createBundlePerOutput(t,l,u,o);const p=u-f;if(p>0)if(0===h.length)h.push({coins:p});else h[0].coins+=p;for(const v of r){const _=o.get(v);const w=m.get(v)||0n;const y=_.selected-_.requested-w;if(y>0n){var g;const b=(null===(g=h.find(({assets:e})=>{return null==e?void 0:e.has(v)}))||void 0===g?void 0:g.assets)||smallestBundleTokenMap(h);const P=b.get(v)||0n;b.set(v,P+y)}}return h};const mergeWithSmallestBundle=(e,t)=>{let r=[...e];const s=r.splice(t,1)[0];if(0===r.length)return[s];const i=r.splice(-1,1)[0];const a=(0,eY.coalesceValueQuantities)([s,i]);r=[...r,a];r=tE(r,({coins:e})=>e,"desc");return r};const coalesceChangeBundlesForMinCoinRequirement=(e,t)=>{if(0===e.length){return e}const r=e.map(({coins:e,assets:t})=>({assets:t?new Map([...t.entries()].filter(([e,t])=>t>0n)):void 0,coins:e}));let s=tE(r,({coins:e})=>e,"desc");const satisfiesMinCoinRequirement=e=>{const r={address:eR.stubMaxSizeAddress,value:e};return e.coins>=t(r)};let i=false;while(s.length>1&&!i){i=true;for(let a=s.length-1;a>=0;--a){const o=satisfiesMinCoinRequirement(s[a]);i=i&&o;if(!o){s=mergeWithSmallestBundle(s,a);break}}}if(!satisfiesMinCoinRequirement(s[0])){return}return s.filter(e=>{var t;return e.coins>0n||((null===(t=e.assets)||void 0===t?void 0:t.size)||0)>0})};const splitChangeIfTokenBundlesSizeExceedsLimit=(e,t,r)=>{const s=[];for(const i of e){const{assets:a,coins:o}=i;if(!a||0===a.size||!r(a)){s.push({assets:a,coins:o});continue}const n=[];let d={assets:new Map,coins:0n};for(const[c,l]of a.entries()){d.assets.set(c,l);if(r(d.assets)&&d.assets.size>1){d.assets.delete(c);n.push(d);d={assets:new Map([[c,l]]),coins:0n}}}n.push(d);let u=0n;for(const f of n){const h=t({address:eR.stubMaxSizeAddress,value:f});f.coins=h;u+=h}if(o<u){throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted)}n[0].coins+=o-u;s.push(...n)}return s};const computeChangeBundles=({utxoSelection:e,outputValues:t,uniqueTxAssetIDs:r,implicitValue:s,computeMinimumCoinQuantity:i,tokenBundleSizeExceedsLimit:a,fee:o=0n})=>{const n=computeRequestedAssetChangeBundles(e.utxoSelected,t,r,s,o);const d=redistributeLeftoverAssets(e.utxoSelected,n,r);const c=coalesceChangeBundlesForMinCoinRequirement(d,i);if(!c){return false}const l=splitChangeIfTokenBundlesSizeExceedsLimit(c,i,a);return{changeBundles:l,...e}};const validateChangeBundles=(e,t)=>{for(const{assets:r}of e)if(!!r){if(t(r)){throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted)}}return e};const computeChangeAndAdjustForFee=async({computeMinimumCoinQuantity:e,tokenBundleSizeExceedsLimit:t,estimateTxCosts:r,outputValues:s,uniqueTxAssetIDs:i,implicitValue:a,pickAdditionalUtxo:o,utxoSelection:n})=>{const recomputeChangeAndAdjustForFeeWithExtraUtxo=n=>{if(n.utxoRemaining.length>0){return computeChangeAndAdjustForFee({computeMinimumCoinQuantity:e,estimateTxCosts:r,implicitValue:a,outputValues:s,pickAdditionalUtxo:o,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:o(n)})}throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted)};const d=computeChangeBundles({computeMinimumCoinQuantity:e,implicitValue:a,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:n});if(!d)return recomputeChangeAndAdjustForFeeWithExtraUtxo(n);const c=await r(d.utxoSelected,validateChangeBundles(d.changeBundles,t));const l=(0,eR.getCoinQuantity)(s)+c.fee+a.implicitCoin.deposit;const u=(0,eR.getCoinQuantity)((0,eR.toValues)(d.utxoSelected))+a.implicitCoin.input;if(l>u){if(0===d.utxoRemaining.length){throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient)}return recomputeChangeAndAdjustForFeeWithExtraUtxo(d)}const f=computeChangeBundles({computeMinimumCoinQuantity:e,fee:c.fee,implicitValue:a,outputValues:s,tokenBundleSizeExceedsLimit:t,uniqueTxAssetIDs:i,utxoSelection:eF(d,["utxoRemaining","utxoSelected"])});if(!f){return recomputeChangeAndAdjustForFeeWithExtraUtxo(d)}const{changeBundles:h,utxoSelected:m,utxoRemaining:p}=f;return{change:validateChangeBundles(h,t),fee:c.fee,inputs:m,redeemers:c.redeemers,remainingUTxO:p}};const improvesSelection=(e,t,r,s)=>{const i=s(e);if(i<r)return true;const a=i+s([t]);const o=2n*r;const n=eW.BigIntMath.abs(o-a);const d=eW.BigIntMath.abs(o-i);if(n<d)return true;return false};const listTokensWithin=(e,t,{implicitCoin:r,implicitTokens:s})=>{return[...e.map(e=>{const r=(0,eR.assetQuantitySelector)(e);const i=s.input(e);const a=s.spend(e);return{filterUtxo:t=>{return t.filter(([t,{value:{assets:r}}])=>{return null==r?void 0:r.get(e)})},getTotalSelectedQuantity:e=>r((0,eR.toValues)(e))+i,minimumTarget:r((0,eR.toValues)(t))+a}}),{filterUtxo:e=>e,getTotalSelectedQuantity:e=>(0,eR.getCoinQuantity)((0,eR.toValues)(e))+r.input,minimumTarget:(0,eR.getCoinQuantity)((0,eR.toValues)(t))+r.deposit}]};const roundRobinSelection=({requiredUtxo:e,utxo:t,outputs:r,uniqueTxAssetIDs:s,random:i,implicitValue:a})=>{const o=e;const n=[...t];const d=listTokensWithin(s,r,a);while(d.length>0){for(const[c,{filterUtxo:l,minimumTarget:u,getTotalSelectedQuantity:f}]of d.entries()){const h=l(n);if(h.length>0){const m=Math.floor(i()*h.length);const p=h[m];if(improvesSelection(o,p,u,f)){o.push(p);n.splice(n.indexOf(p),1)}else{d.splice(c,1)}}else{d.splice(c,1)}}}if(0===o.length){o.push(n[0]);n.splice(0,1)}return{utxoRemaining:n,utxoSelected:o}};const createPickAdditionalRandomUtxo=e=>({utxoRemaining:t,utxoSelected:r})=>{const s=t.filter(([e,{value:t}])=>!t.assets);const i=s.length>0?s:t;const a=Math.floor(e()*i.length);const o=[...r,i[a]];const n=t.indexOf(i[a]);const d=[...t.slice(0,n),...t.slice(n+1)];return{utxoRemaining:d,utxoSelected:o}};const roundRobinRandomImprove=({changeAddressResolver:e,random:t=Math.random})=>({select:async({preSelectedUtxo:r,utxo:s,outputs:i,constraints:{computeMinimumCost:a,computeSelectionLimit:o,computeMinimumCoinQuantity:n,tokenBundleSizeExceedsLimit:d},implicitValue:c={}})=>{const l=eR.stubMaxSizeAddress;const{requiredUtxo:u,utxo:f,outputs:h,uniqueTxAssetIDs:m,implicitValue:p}=(0,eR.preProcessArgs)(r,s,i,l,c);(0,eR.assertIsBalanceSufficient)(m,u,f,h,p);const v=roundRobinSelection({changeAddress:l,implicitValue:p,outputs:h,random:t,requiredUtxo:u,uniqueTxAssetIDs:m,utxo:f});const _=await computeChangeAndAdjustForFee({computeMinimumCoinQuantity:n,estimateTxCosts:(e,t)=>a({change:t.map(e=>({address:l,value:e})),fee:eR.MAX_U64,inputs:new Set(e),outputs:i}),implicitValue:p,outputValues:(0,eR.toValues)(h),pickAdditionalUtxo:createPickAdditionalRandomUtxo(t),tokenBundleSizeExceedsLimit:d,uniqueTxAssetIDs:m,utxoSelection:v});const w=new Set(_.inputs);const y={change:_.change.map(e=>({address:l,value:e})),fee:_.fee,inputs:w,outputs:i};y.change=await e.resolve(y);if(_.inputs.length>await o({change:y.change,fee:y.fee,inputs:w,outputs:i})){throw new tx.InputSelectionError(tx.InputSelectionFailure.MaximumInputCountExceeded)}y.inputs=new Set([...y.inputs].sort(eR.sortUtxoByTxIn));return{redeemers:_.redeemers,remainingUTxO:new Set(_.remainingUTxO),selection:y}}});var tA=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var tI=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/util/computeImplicitCoin.js");var GreedyTxEvaluator_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var GreedyTxEvaluator_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var tB;class GreedyTxEvaluator{async evaluate(e,t){const{maxExecutionUnitsPerTransaction:r}=await GreedyTxEvaluator_classPrivateFieldGet(this,tB,"f").call(this);const{witness:s}=e;if(!s||!s.redeemers)return[];const i=[];for(const a of s.redeemers)i.push({budget:r,index:a.index,purpose:a.purpose});return i}constructor(e){tB.set(this,void 0);GreedyTxEvaluator_classPrivateFieldSet(this,tB,e,"f")}}tB=new WeakMap;var tF=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/input-selection/selectionConstraints.js");var StaticChangeAddressResolver_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var StaticChangeAddressResolver_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var tM;class StaticChangeAddressResolver{async resolve(e){const t=await StaticChangeAddressResolver_classPrivateFieldGet(this,tM,"f").call(this);if(0===t.length)throw new eo.InvalidStateError("The wallet has no known addresses.");const r=t[0].address;return e.change.map(e=>({...e,address:r}))}constructor(e){tM.set(this,void 0);StaticChangeAddressResolver_classPrivateFieldSet(this,tM,e,"f")}}tM=new WeakMap;var tR=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/AuxiliaryData.js");var tD=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var tO=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborWriter.js");var tG=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/Costmdls.js");var tN=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Update/Costmdls/CostModel.js");var tH=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var tK=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var tV=r("../../node_modules/buffer/index.js")["Buffer"];const tW=new Uint8Array([160]);const getCborEncodedArray=e=>{const t=new tO.CborWriter;t.writeStartArray(e.length);for(const r of e)t.writeEncodedValue(tV.from(r.toCbor(),"hex"));return t.encode()};const hashScriptData=(e,t,r)=>{const s=new tO.CborWriter;if(r&&r.length>0&&(!t||0===t.length)){s.writeEncodedValue(tW);s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(tW)}else{if(!t||0===t.length)return;s.writeEncodedValue(getCborEncodedArray(t));if(r&&r.length>0)s.writeEncodedValue(getCborEncodedArray(r));s.writeEncodedValue(tV.from(e.languageViewsEncoding(),"hex"))}return tD.blake2b.hash(tV.from(s.encode()).toString("hex"),32)};const computeScriptDataHash=(e,t,r,s)=>{if((!r||0===r.length)&&(!s||0===s.length))return;const i=new tG.Costmdls;for(const a of t){const o=e.get(a);if(o)i.insert(new tN.CostModel(a,o))}return hashScriptData(i,null==r?void 0:r.map(e=>tH.Redeemer.fromCore(e)),null==s?void 0:s.map(e=>tK.PlutusData.fromCore(e)))};var tz=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const tU={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,57996947,18975,10],version:tz.PlutusLanguageVersion.V1};const t$={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35892428,10,57996947,18975,10,38887044,32947,10],version:tz.PlutusLanguageVersion.V2};const tL={prices:[205665,812,1,1,1e3,571,0,1,1e3,24177,4,1,1e3,32,117366,10475,4,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,23e3,100,100,100,23e3,100,19537,32,175354,32,46417,4,221973,511,0,1,89141,32,497525,14068,4,2,196500,453240,220,0,1,1,1e3,28662,4,2,245e3,216773,62,1,1060367,12586,1,208512,421,1,187e3,1e3,52998,1,80436,32,43249,32,1e3,32,80556,1,57667,4,1e3,10,197145,156,1,197145,156,1,204924,473,1,208896,511,1,52467,32,64832,32,65493,32,22558,32,16563,32,76511,32,196500,453240,220,0,1,1,69522,11687,0,1,60091,32,196500,453240,220,0,1,1,196500,453240,220,0,1,1,1159724,392670,0,2,806990,30482,4,1927926,82523,4,265318,0,4,0,85931,32,205665,812,1,1,41182,32,212342,32,31220,32,32696,32,43357,32,32247,32,38314,32,35190005,10,57996947,18975,10,39121781,32260,10,100,23e3,100,832808,18,3209094,6,331451,1,65990684,23097,18,114242,18,94393407,87060,18,16420089,18,2145798,36,3795345,12,889023,1,204237282,23271,36,129165,36,189977790,85902,36,33012864,36,388443360,1,401885761,72,2331379,72,1927926,82523,4,117366,10475,4,1292075,24469,74,0,1,936157,49601,237,0,1],version:tz.PlutusLanguageVersion.V3};const buildCostModels=e=>{const t=new tG.Costmdls;for(const r of e){const s=new tN.CostModel(r.version,r.prices);t.insert(s)}return t.toCore()};const getDefaultCostModelsForVersions=e=>{const t=[...new Set(e)];const r=t.map(e=>{switch(e){case tz.PlutusLanguageVersion.V1:return tU;case tz.PlutusLanguageVersion.V2:return t$;case tz.PlutusLanguageVersion.V3:return tL;default:throw new Error("Invalid plutus language")}});return buildCostModels(r)};const createPreInputSelectionTxBody=({auxiliaryData:e,withdrawals:t,certificates:r,validityInterval:s,collaterals:i,collateralReturn:a,mint:o,scriptIntegrityHash:n,referenceInputs:d,requiredExtraSignatures:c,outputs:l})=>{return{auxiliaryData:e,txBody:{auxiliaryDataHash:e?tR.computeAuxiliaryDataHash(e):void 0,certificates:r,mint:o,outputs:l||[],referenceInputs:d?[...d]:void 0,requiredExtraSignatures:c,scriptIntegrityHash:n,validityInterval:s,...(null==t?void 0:t.length)&&{withdrawals:t},...(null==i?void 0:i.size)&&{collaterals:[...i]},collateralReturn:a}}};const includeChangeAndInputs=({bodyPreInputSelection:e,inputSelection:t,scriptVersions:r,witness:s})=>{const i={...e,fee:t.fee,inputs:[...t.inputs].map(([e])=>e),outputs:[...t.outputs,...t.change]};if(r&&s){const a=getDefaultCostModelsForVersions([...r]);i.scriptIntegrityHash=computeScriptDataHash(a,[...r],s.redeemers,s.datums)}const o=tg.TransactionBody.fromCore(i);return{body:i,hash:o.hash()}};const createTransactionInternals=e=>{const{txBody:t}=createPreInputSelectionTxBody({...e});return includeChangeAndInputs({bodyPreInputSelection:t,inputSelection:e.inputSelection})};var tq=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");const tY=(0,tq.Seconds)(7200);const calcTimeOffsetSlotNumber=(e,t,r)=>ez.Slot(e+t*r);const ensureValidityInterval=(e,{slotLength:t},r)=>({invalidHereafter:calcTimeOffsetSlotNumber(e,tY,t),...r});var tQ=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");const hasCorrectVoteDelegation=({dRepDelegatee:e})=>{const t=null==e?void 0:e.delegateRepresentative;return!!t&&(!tQ.isDrepInfo(t)||t.active)};const dRepPublicKeyHash=async e=>e&&tA.Ed25519PublicKey.fromHex(await e.derivePublicKey(ty.DREP_KEY_DERIVATION_PATH)).hash().hex();const tJ=10;const getWithdrawals=(e,t)=>e.filter(e=>(!(t.major>=tJ)||hasCorrectVoteDelegation(e))&&!!e.rewardBalance).map(({rewardBalance:e,address:t})=>({quantity:e,stakeAddress:t}));const initializeTx=async(e,{txBuilderProviders:t,inputSelector:r,inputResolver:s,bip32Account:i,witnesser:a,logger:o})=>{var n;const[d,c,l,u,f,h]=await Promise.all([t.tip(),t.genesisParameters(),t.protocolParameters(),t.rewardAccounts(),t.utxoAvailable(),t.addresses.get()]);var m;const p=null!==(m=e.txEvaluator)&&void 0!==m?m:new GreedyTxEvaluator(()=>t.protocolParameters());r=null!=r?r:roundRobinRandomImprove({changeAddressResolver:new StaticChangeAddressResolver(async()=>h)});const{txBody:v,auxiliaryData:_}=createPreInputSelectionTxBody({auxiliaryData:e.auxiliaryData,certificates:e.certificates,collateralReturn:e.collateralReturn,collaterals:e.collaterals,mint:e.mint,outputs:[...e.outputs||[]],referenceInputs:e.referenceInputs,requiredExtraSignatures:e.requiredExtraSignatures,scriptIntegrityHash:e.scriptIntegrityHash,validityInterval:ensureValidityInterval(d.slot,c,null===(n=e.options)||void 0===n?void 0:n.validityInterval),withdrawals:getWithdrawals(u,l.protocolVersion)});const w=e.customizeCb?e.customizeCb({txBody:v}):v;var y;const g=(0,tF.defaultSelectionConstraints)({buildTx:async t=>{var r;o.debug("Building TX for selection constraints",t);if(null===(r=w.withdrawals)||void 0===r?void 0:r.length)o.debug("Adding rewards withdrawal in the transaction",w.withdrawals);const n=includeChangeAndInputs({bodyPreInputSelection:w,inputSelection:t,scriptVersions:e.scriptVersions,witness:e.witness});const d=await dRepPublicKeyHash(i);const c=new es.Transaction(tg.TransactionBody.fromCore(n.body),tb.TransactionWitnessSet.fromCore(e.witness?e.witness:{signatures:new Map}),_?tP.AuxiliaryData.fromCore(_):void 0);var l;const u={...d&&{dRepKeyHashHex:d},handleResolutions:null!==(l=e.handleResolutions)&&void 0!==l?l:[],knownAddresses:h,txInKeyPathMap:await t_.createTxInKeyPathMap(n.body,h,s)};const f={...e.signingOptions,stubSign:true};const{tx:m}=await a.witness(c,u,f);return m},protocolParameters:l,redeemersByType:null!==(y=e.redeemersByType)&&void 0!==y?y:{},txEvaluator:p});const b=tI.computeImplicitCoin(l,{certificates:w.certificates,proposalProcedures:w.proposalProcedures,withdrawals:w.withdrawals});const{selection:P,redeemers:S}=await r.select({constraints:g,implicitValue:{coin:b,mint:w.mint},outputs:new Set(w.outputs),preSelectedUtxo:e.inputs||new Set,utxo:new Set(f)});const C={...e.witness,redeemers:S};const{body:k,hash:j}=includeChangeAndInputs({bodyPreInputSelection:w,inputSelection:P,scriptVersions:e.scriptVersions,witness:C});return{body:k,hash:j,inputSelection:P,redeemers:S}};var tX=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ensureStakeKeys.js");var tZ=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var t0=r("../../node_modules/@cardano-sdk/core/dist/esm/util/metadatum.js");var t1=r("../../node_modules/@cardano-sdk/core/dist/esm/util/conwayEra.js");var t2=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var t3=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Common/Datum.js");var t5=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Transaction.js");var t4=r("../../node_modules/@cardano-sdk/tx-construction/node_modules/ts-custom-error/dist/custom-error.mjs");var t9;(function(e){e["MinimumCoin"]="Minimum coin not met";e["TokenBundleSizeExceedsLimit"]="Token Bundle Exceeds Limit";e["MissingRequiredFields"]="Mandatory fields address or coin are missing";e["MissingHandleProviderError"]="Missing 'HandleProvider'";e["HandleNotFound"]="Handle not found";e["NegativeAssetQty"]="Negative or zero asset quantity"})(t9||(t9={}));var t8;(function(e){e["Expired"]="Transaction expired"})(t8||(t8={}));class InvalidConfigurationError extends t4.CustomError{constructor(e){super(e);this.message=e}}class HandleNotFoundError extends t4.CustomError{constructor(e){super(t9.HandleNotFound);this.txOut=e}}class InsufficientRewardAccounts extends t4.CustomError{constructor(e,t){const r=`Internal error: insufficient stake keys: ${t.length}. Required: ${e.length}.
    Pool ids: ${e.join(",")}; Reward accounts: ${t.length}`;super(r)}}class DeRegistrationsWithRewardsLocked extends t4.CustomError{constructor(e){super("Tried to de-register reward accounts that have not delegated vote but have rewards");this.keysWithLockedRewards=e.map(({address:e})=>{var t;return{cbor:null===(t=tr.Address.fromString(e))||void 0===t?void 0:t.toBytes(),key:e}})}}class OutOfSyncRewardAccounts extends t4.CustomError{constructor(e){const t=`Timeout while waiting for reward accounts provider to contain new reward accounts: ${e}`;super(t)}}class OutputValidationMissingRequiredError extends t4.CustomError{constructor(e){super(t9.MissingRequiredFields);this.txOut=e}}class OutputValidationMinimumCoinError extends t4.CustomError{constructor(e,t){super(t9.MinimumCoin);this.txOut=e;this.outputValidation=t}}class OutputValidationTokenBundleSizeError extends t4.CustomError{constructor(e,t){super(t9.TokenBundleSizeExceedsLimit);this.txOut=e;this.outputValidation=t}}class OutputValidationNegativeAssetQtyError extends t4.CustomError{constructor(e,t){super(t9.NegativeAssetQty);this.txOut=e;this.outputValidation=t}}class InvalidHereafterError extends t4.CustomError{constructor(){super(t8.Expired)}}var LargeFirstInputSelector_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var LargeFirstInputSelector_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var t6,t7,re,rt,rr,rs,ri,ra,ro;const pickAdditionalLargestUtxo=({utxoRemaining:e,utxoSelected:t})=>{if(0===e.length){return{utxoRemaining:e,utxoSelected:t}}const r=e.sort(([,e],[,t])=>(0,eR.sortByCoins)(e,t));const[s,...i]=r;return{utxoRemaining:i,utxoSelected:[...t,s]}};class LargeFirstSelector{async select(e){var t;const{utxo:r,preSelectedUtxo:s,outputs:i,constraints:a,implicitValue:o}=e;const n=[...s];const d=[...r].filter(([e])=>!n.some(([t])=>t.txId===e.txId&&t.index===e.index));const c=[...n,...d];const{totalLovelaceOutput:l,outputAssets:u}=LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",rr).call(this,new Set(c),i,o);let f=new Set(n);f=LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",rs).call(this,u,c,[...f]);var h;f=LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",ri).call(this,l,c,f,null!==(h=null==o?void 0:null===(t=o.coin)||void 0===t?void 0:t.input)&&void 0!==h?h:0n);const{finalSelection:m,fee:p,change:v}=await LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",ro).call(this,f,i,c,u,a,LargeFirstInputSelector_classPrivateFieldGet(this,t7,"f").changeAddressResolver,o);const _=await a.computeSelectionLimit({change:v,fee:p,inputs:m,outputs:i});if(m.size>_)throw new tx.InputSelectionError(tx.InputSelectionFailure.MaximumInputCountExceeded);return{remainingUTxO:LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",ra).call(this,[...r],m),selection:{change:v,fee:p,inputs:new Set([...m].sort(eR.sortUtxoByTxIn)),outputs:i}}}constructor(e){t6.add(this);t7.set(this,void 0);LargeFirstInputSelector_classPrivateFieldSet(this,t7,e,"f")}}t7=new WeakMap,t6=new WeakSet,re=function _LargeFirstSelector_aggregateLovelace(e,t,r){var s,i;const a=(0,eR.getCoinQuantity)(e);const o=(0,eR.getCoinQuantity)(t);var n;const d=null!==(n=null==r?void 0:null===(s=r.coin)||void 0===s?void 0:s.input)&&void 0!==n?n:0n;var c;const l=null!==(c=null==r?void 0:null===(i=r.coin)||void 0===i?void 0:i.deposit)&&void 0!==c?c:0n;return{totalIn:a+d,totalOut:o+l}},rt=function _LargeFirstSelector_aggregateAssets(e,t,r){var s;const i=null!==(s=(0,eY.coalesceValueQuantities)(t).assets)&&void 0!==s?s:new Map;const a=(0,eY.coalesceValueQuantities)(e).assets;var o;const n=null!==(o=null==r?void 0:r.mint)&&void 0!==o?o:new Map;const d=new Map;const c=new Map;for(const[l,u]of n)(u>0n?d:c).set(l,u>0n?u:-u);let f=(0,eR.addTokenMaps)(i,c);var h;f=null!==(h=(0,eR.subtractTokenMaps)(f,d))&&void 0!==h?h:new Map;var m;const p=null!==(m=(0,eR.addTokenMaps)(a,d))&&void 0!==m?m:new Map;return{available:p,required:f}},rr=function _LargeFirstSelector_computeNetImplicitSelectionValues(e,t,r){const s=(0,eR.toValues)([...e]);const i=(0,eR.toValues)([...t]);const{totalIn:a,totalOut:o}=LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",re).call(this,s,i,r);const{required:n,available:d}=LargeFirstInputSelector_classPrivateFieldGet(this,t6,"m",rt).call(this,s,i,r);const c=a-o;const l=(0,eR.subtractTokenMaps)(d,n);if(0===e.size||c<0n||(0,eR.hasNegativeAssetValue)(l))throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);return{outputAssets:n,totalLovelaceInput:a,totalLovelaceOutput:o}},rs=function _LargeFirstSelector_selectAssets(e,t,r){const s=new Set(r);for(const[i,a]of e){var o;const n=t.filter(([e,t])=>{var r;return(null!==(o=null===(r=t.value.assets)||void 0===r?void 0:r.get(i))&&void 0!==o?o:0n)>0n}).sort(([,e],[,t])=>(0,eR.sortByAssetQuantity)(i)(e,t));let d=0n;for(const c of n){var l;s.add(c);var u;d+=null!==(u=null===(l=c[1].value.assets)||void 0===l?void 0:l.get(i))&&void 0!==u?u:0n;if(d>=a)break}if(d<a)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient)}return s},ri=function _LargeFirstSelector_selectLovelace(e,t,r,s){const i=new Set(r);const a=new Set([...r].map(([e])=>e));const o=t.filter(([e])=>!a.has(e)).sort(([,e],[,t])=>(0,eR.sortByCoins)(e,t));let n=(0,eR.getCoinQuantity)((0,eR.toValues)([...i]))+s;for(const d of o){if(n>=e)break;i.add(d);n+=d[1].value.coins}if(0===i.size){if(0===o.length)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);i.add(o[0])}if(n<e)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);return i},ra=function _LargeFirstSelector_computeRemainingUtxo(e,t){const r=new Set([...t].map(([e])=>e));return new Set(e.filter(([e])=>!r.has(e)))},ro=async function _LargeFirstSelector_expandUtxosUntilFeeCovered(e,t,r,s,i,a,o){var n,d,c,l;const u=[...e];const f=r.filter(t=>!e.has(t)).sort(([,e],[,t])=>(0,eR.sortByCoins)(e,t));const h=(0,eR.toValues)([...t]);const m=eR.stubMaxSizeAddress;const p={deposit:(null==o?void 0:null===(n=o.coin)||void 0===n?void 0:n.deposit)||0n,input:(null==o?void 0:null===(d=o.coin)||void 0===d?void 0:d.input)||0n,reclaimDeposit:(null==o?void 0:null===(c=o.coin)||void 0===c?void 0:c.reclaimDeposit)||0n,withdrawals:(null==o?void 0:null===(l=o.coin)||void 0===l?void 0:l.withdrawals)||0n};const v=(null==o?void 0:o.mint)||new Map;const _=ts([...s.keys(),...v.keys()]);const{implicitTokensInput:w,implicitTokensSpend:y}=(0,eR.mintToImplicitTokens)(v);const g={input:e=>w.get(e)||0n,spend:e=>y.get(e)||0n};const{change:b,fee:P,inputs:S}=await computeChangeAndAdjustForFee({computeMinimumCoinQuantity:i.computeMinimumCoinQuantity,estimateTxCosts:(e,r)=>i.computeMinimumCost({change:r.map(e=>({address:m,value:e})),fee:eR.MAX_U64,inputs:new Set(e),outputs:t}),implicitValue:{implicitCoin:p,implicitTokens:g},outputValues:h,pickAdditionalUtxo:pickAdditionalLargestUtxo,tokenBundleSizeExceedsLimit:i.tokenBundleSizeExceedsLimit,uniqueTxAssetIDs:_,utxoSelection:{utxoRemaining:f,utxoSelected:u}});if(0===b.length){return{change:[],fee:P,finalSelection:new Set(S)}}const C=b.map(e=>({address:m,value:e}));const k=await a.resolve({change:C,fee:P,inputs:new Set(S),outputs:t});return{change:k,fee:P,finalSelection:new Set(S)}};var OutputBuilder_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var OutputBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rn,rd,rc,rl;const isViableTxOut=e=>{var t;return!!(((null==e?void 0:e.address)||(null==e?void 0:e.handle))&&(null==e?void 0:null===(t=e.value)||void 0===t?void 0:t.coins))};const toOutputValidationError=(e,t)=>{if(t.negativeAssetQty){return new OutputValidationNegativeAssetQtyError(e,t)}if(t.coinMissing){return new OutputValidationMinimumCoinError(e,t)}if(t.tokenBundleSizeExceedsLimit){return new OutputValidationTokenBundleSizeError(e,t)}};class TxOutputBuilder{toTxOut(){if(!isViableTxOut(OutputBuilder_classPrivateFieldGet(this,rn,"f"))){throw new OutputValidationMissingRequiredError(OutputBuilder_classPrivateFieldGet(this,rn,"f"))}OutputBuilder_classPrivateFieldGet(this,rc,"f").debug("toTxOut result:",OutputBuilder_classPrivateFieldGet(this,rn,"f"));return{...OutputBuilder_classPrivateFieldGet(this,rn,"f")}}async inspect(){return OutputBuilder_classPrivateFieldGet(this,rn,"f")}value(e){OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),value:{...e}},"f");return this}coin(e){var t;OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,rn,"f"))||void 0===t?void 0:t.value,coins:e}},"f");return this}assets(e){var t;OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),value:{...null===(t=OutputBuilder_classPrivateFieldGet(this,rn,"f"))||void 0===t?void 0:t.value,assets:e}},"f");return this}asset(e,t){var r,s;const i=new Map(null===(r=OutputBuilder_classPrivateFieldGet(this,rn,"f"))||void 0===r?void 0:null===(s=r.value)||void 0===s?void 0:s.assets);0n===t?i.delete(e):i.set(e,t);return this.assets(i)}address(e){OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),address:e},"f");return this}datum(e){t3.isDatumHash(e)?OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),datumHash:e},"f"):OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),datum:e},"f");return this}scriptReference(e){if(!tz.isPlutusScript(e))throw new Error("Only plutus scripts can be added as reference scripts.");OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),scriptReference:e},"f");return this}handle(e){if(!OutputBuilder_classPrivateFieldGet(this,rl,"f")){throw new InvalidConfigurationError(t9.MissingHandleProviderError)}OutputBuilder_classPrivateFieldSet(this,rn,{...OutputBuilder_classPrivateFieldGet(this,rn,"f"),handle:e},"f");return this}async build(){const e=this.toTxOut();if(OutputBuilder_classPrivateFieldGet(this,rn,"f").handle&&OutputBuilder_classPrivateFieldGet(this,rl,"f")){const t=await OutputBuilder_classPrivateFieldGet(this,rl,"f").resolveHandles({handles:[OutputBuilder_classPrivateFieldGet(this,rn,"f").handle]});if(null!==t[0]){e.handleResolution=t[0];e.address=t[0].cardanoAddress}else{throw new HandleNotFoundError(OutputBuilder_classPrivateFieldGet(this,rn,"f"))}}const r=toOutputValidationError(e,await OutputBuilder_classPrivateFieldGet(this,rd,"f").validateOutput(e));if(r){throw r}return e}constructor({outputValidator:e,txOut:t,logger:r,handleProvider:s}){rn.set(this,void 0);rd.set(this,void 0);rc.set(this,void 0);rl.set(this,null);OutputBuilder_classPrivateFieldSet(this,rn,{...t},"f");OutputBuilder_classPrivateFieldSet(this,rd,e,"f");OutputBuilder_classPrivateFieldSet(this,rc,r,"f");if(s)OutputBuilder_classPrivateFieldSet(this,rl,s,"f")}}rn=new WeakMap,rd=new WeakMap,rc=new WeakMap,rl=new WeakMap;var ru=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,rf=Math.ceil,rh=Math.floor,rm="[BigNumber Error] ",rp=rm+"Number primitive has more than 15 significant digits: ",rv=1e14,r_=14,rw=9007199254740991,ry=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],rg=1e7,rb=1e9;function bignumber_clone(e){var t,r,s,i=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},a=new BigNumber(1),o=20,n=4,d=-7,c=21,l=-1e7,u=1e7,f=false,h=1,m=0,p={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",_=true;function BigNumber(e,t){var i,a,d,c,f,h,m,p,w=this;if(!(w instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e&&true===e._isBigNumber){w.s=e.s;if(!e.c||e.e>u)w.c=w.e=null;else if(e.e<l)w.c=[w.e=0];else{w.e=e.e;w.c=e.c.slice()}return}if((h="number"==typeof e)&&0*e==0){w.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(c=0,f=e;f>=10;f/=10,c++);if(c>u)w.c=w.e=null;else{w.e=c;w.c=[e]}return}p=String(e)}else{if(!ru.test(p=String(e)))return s(w,p,h);w.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}if((c=p.indexOf("."))>-1)p=p.replace(".","");if((f=p.search(/e/i))>0){if(c<0)c=f;c+=+p.slice(f+1);p=p.substring(0,f)}else if(c<0)c=p.length}else{bignumber_intCheck(t,2,v.length,"Base");if(10==t&&_){w=new BigNumber(e);return round(w,o+w.e+1,n)}p=String(e);if(h="number"==typeof e){if(0*e!=0)return s(w,p,h,t);w.s=1/e<0?(p=p.slice(1),-1):1;if(BigNumber.DEBUG&&p.replace(/^0\.0*|\./,"").length>15){throw Error(rp+e)}}else{w.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1}i=v.slice(0,t);c=f=0;for(m=p.length;f<m;f++)if(i.indexOf(a=p.charAt(f))<0){if("."==a){if(f>c){c=m;continue}}else if(!d){if(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase())){d=true;f=-1;c=0;continue}}return s(w,String(e),h,t)}h=false;p=r(p,t,10,w.s);if((c=p.indexOf("."))>-1)p=p.replace(".","");else c=p.length}for(f=0;48===p.charCodeAt(f);f++);for(m=p.length;48===p.charCodeAt(--m););if(p=p.slice(f,++m)){m-=f;if(h&&BigNumber.DEBUG&&m>15&&(e>rw||e!==rh(e))){throw Error(rp+w.s*e)}if((c=c-f-1)>u)w.c=w.e=null;else if(c<l)w.c=[w.e=0];else{w.e=c;w.c=[];f=(c+1)%r_;if(c<0)f+=r_;if(f<m){if(f)w.c.push(+p.slice(0,f));for(m-=r_;f<m;)w.c.push(+p.slice(f,f+=r_));f=r_-(p=p.slice(f)).length}else{f-=m}for(;f--;p+="0");w.c.push(+p)}}else{w.c=[w.e=0]}}BigNumber.clone=bignumber_clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e)if("object"==typeof e){if(e.hasOwnProperty(t="DECIMAL_PLACES")){r=e[t];bignumber_intCheck(r,0,rb,t);o=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){r=e[t];bignumber_intCheck(r,0,8,t);n=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT")){r=e[t];if(r&&r.pop){bignumber_intCheck(r[0],-rb,0,t);bignumber_intCheck(r[1],0,rb,t);d=r[0];c=r[1]}else{bignumber_intCheck(r,-rb,rb,t);d=-(c=r<0?-r:r)}}if(e.hasOwnProperty(t="RANGE")){r=e[t];if(r&&r.pop){bignumber_intCheck(r[0],-rb,-1,t);bignumber_intCheck(r[1],1,rb,t);l=r[0];u=r[1]}else{bignumber_intCheck(r,-rb,rb,t);if(r)l=-(u=r<0?-r:r);else{throw Error(rm+t+" cannot be zero: "+r)}}}if(e.hasOwnProperty(t="CRYPTO")){r=e[t];if(!!r===r)if(r)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=r;else{f=!r;throw Error(rm+"crypto unavailable")}else f=r;else{throw Error(rm+t+" not true or false: "+r)}}if(e.hasOwnProperty(t="MODULO_MODE")){r=e[t];bignumber_intCheck(r,0,9,t);h=r}if(e.hasOwnProperty(t="POW_PRECISION")){r=e[t];bignumber_intCheck(r,0,rb,t);m=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"==typeof r)p=r;else throw Error(rm+t+" not an object: "+r)}if(e.hasOwnProperty(t="ALPHABET")){r=e[t];if("string"!=typeof r||/^.?$|[+\-.\s]|(.).*\1/.test(r)){throw Error(rm+t+" invalid: "+r)}_="0123456789"==r.slice(0,10);v=r}}else{throw Error(rm+"Object expected: "+e)}return{DECIMAL_PLACES:o,ROUNDING_MODE:n,EXPONENTIAL_AT:[d,c],RANGE:[l,u],CRYPTO:f,MODULO_MODE:h,POW_PRECISION:m,FORMAT:p,ALPHABET:v}};BigNumber.isBigNumber=function(e){if(!e||true!==e._isBigNumber)return false;if(!BigNumber.DEBUG)return true;var t,r,s=e.c,i=e.e,a=e.s;e:if("[object Array]"==({}).toString.call(s)){if((1===a||-1===a)&&i>=-rb&&i<=rb&&i===rh(i)){if(0===s[0]){if(0===i&&1===s.length)return true;break e}t=(i+1)%r_;if(t<1)t+=r_;if(String(s[0]).length==t){for(t=0;t<s.length;t++){r=s[t];if(r<0||r>=rv||r!==rh(r))break e}if(0!==r)return true}}}else if(null===s&&null===i&&(null===a||1===a||-1===a)){return true}throw Error(rm+"Invalid BigNumber: "+e)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,i.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,i.gt)};BigNumber.random=function(){var e=9007199254740992;var t=Math.random()*e&2097151?function(){return rh(Math.random()*e)}:function(){return(1073741824*Math.random()|0)*8388608+(8388608*Math.random()|0)};return function(e){var r,s,i,n,d,c=0,l=[],u=new BigNumber(a);if(null==e)e=o;else bignumber_intCheck(e,0,rb);n=rf(e/r_);if(f)if(crypto.getRandomValues){r=crypto.getRandomValues(new Uint32Array(n*=2));for(;c<n;){d=131072*r[c]+(r[c+1]>>>11);if(d>=9e15){s=crypto.getRandomValues(new Uint32Array(2));r[c]=s[0];r[c+1]=s[1]}else{l.push(d%1e14);c+=2}}c=n/2}else if(crypto.randomBytes){r=crypto.randomBytes(n*=7);for(;c<n;){d=(31&r[c])*281474976710656+1099511627776*r[c+1]+4294967296*r[c+2]+16777216*r[c+3]+(r[c+4]<<16)+(r[c+5]<<8)+r[c+6];if(d>=9e15)crypto.randomBytes(7).copy(r,c);else{l.push(d%1e14);c+=7}}c=n/7}else{f=false;throw Error(rm+"crypto unavailable")}if(!f){for(;c<n;){d=t();if(d<9e15)l[c++]=d%1e14}}n=l[--c];e%=r_;if(n&&e){d=ry[r_-e];l[c]=rh(n/d)*d}for(;0===l[c];l.pop(),c--);if(c<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=r_);for(c=1,d=l[0];d>=10;d/=10,c++);if(c<r_)i-=r_-c}u.e=i;u.c=l;return u}}();BigNumber.sum=function(){var e=1,t=arguments,r=new BigNumber(t[0]);for(;e<t.length;)r=r.plus(t[e++]);return r};r=function(){var e="0123456789";function toBaseOut(e,t,r,s){var i,a=[0],o,n=0,d=e.length;for(;n<d;){for(o=a.length;o--;a[o]*=t);a[0]+=s.indexOf(e.charAt(n++));for(i=0;i<a.length;i++)if(a[i]>r-1){if(null==a[i+1])a[i+1]=0;a[i+1]+=a[i]/r|0;a[i]%=r}}return a.reverse()}return function(r,s,i,a,d){var c,l,u,f,h,p,_,w,y=r.indexOf("."),g=o,b=n;if(y>=0){f=m;m=0;r=r.replace(".","");w=new BigNumber(s);p=w.pow(r.length-y);m=f;w.c=toBaseOut(bignumber_toFixedPoint(bignumber_coeffToString(p.c),p.e,"0"),10,i,e);w.e=w.c.length}_=toBaseOut(r,s,i,d?(c=v,e):(c=e,v));u=f=_.length;for(;0==_[--f];_.pop());if(!_[0])return c.charAt(0);if(y<0)--u;else{p.c=_;p.e=u;p.s=a;p=t(p,w,g,b,i);_=p.c;h=p.r;u=p.e}l=u+g+1;y=_[l];f=i/2;h=h||l<0||null!=_[l+1];h=b<4?(null!=y||h)&&(0==b||b==(p.s<0?3:2)):y>f||y==f&&(4==b||h||6==b&&1&_[l-1]||b==(p.s<0?8:7));if(l<1||!_[0])r=h?bignumber_toFixedPoint(c.charAt(1),-g,c.charAt(0)):c.charAt(0);else{_.length=l;if(h){for(--i;++_[--l]>i;){_[l]=0;if(!l){++u;_=[1].concat(_)}}}for(f=_.length;!_[--f];);for(y=0,r="";y<=f;r+=c.charAt(_[y++]));r=bignumber_toFixedPoint(r,u,c.charAt(0))}return r}}();t=function(){function multiply(e,t,r){var s,i,a,o,n=0,d=e.length,c=t%rg,l=t/rg|0;for(e=e.slice();d--;){a=e[d]%rg;o=e[d]/rg|0;s=l*a+o*c;i=c*a+s%rg*rg+n;n=(i/r|0)+(s/rg|0)+l*o;e[d]=i%r}if(n)e=[n].concat(e);return e}function compare(e,t,r,s){var i,a;if(r!=s)a=r>s?1:-1;else{for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}}return a}function subtract(e,t,r,s){var i=0;for(;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*s+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,s,i){var a,o,n,d,c,l,u,f,h,m,p,v,_,w,y,g,b,P=e.s==t.s?1:-1,S=e.c,C=t.c;if(!S||!S[0]||!C||!C[0]){return new BigNumber(e.s&&t.s&&(S?!C||S[0]!=C[0]:C)?S&&0==S[0]||!C?0*P:P/0:NaN)}f=new BigNumber(P);h=f.c=[];o=e.e-t.e;P=r+o+1;if(!i){i=rv;o=bignumber_bitFloor(e.e/r_)-bignumber_bitFloor(t.e/r_);P=P/r_|0}for(n=0;C[n]==(S[n]||0);n++);if(C[n]>(S[n]||0))o--;if(P<0){h.push(1);d=true}else{w=S.length;g=C.length;n=0;P+=2;c=rh(i/(C[0]+1));if(c>1){C=multiply(C,c,i);S=multiply(S,c,i);g=C.length;w=S.length}_=g;m=S.slice(0,g);p=m.length;for(;p<g;m[p++]=0);b=C.slice();b=[0].concat(b);y=C[0];if(C[1]>=i/2)y++;do{c=0;a=compare(C,m,g,p);if(a<0){v=m[0];if(g!=p)v=v*i+(m[1]||0);c=rh(v/y);if(c>1){if(c>=i)c=i-1;l=multiply(C,c,i);u=l.length;p=m.length;while(1==compare(l,m,u,p)){c--;subtract(l,g<u?b:C,u,i);u=l.length;a=1}}else{if(0==c)a=c=1;l=C.slice();u=l.length}if(u<p)l=[0].concat(l);subtract(m,l,p,i);p=m.length;if(-1==a){while(compare(C,m,g,p)<1){c++;subtract(m,g<p?b:C,p,i);p=m.length}}}else if(0===a){c++;m=[0]}h[n++]=c;if(m[0])m[p++]=S[_]||0;else{m=[S[_]];p=1}}while((_++<w||null!=m[0])&&P--)d=null!=m[0];if(!h[0])h.splice(0,1)}if(i==rv){for(n=1,P=h[0];P>=10;P/=10,n++);round(f,r+(f.e=n+o*r_-1)+1,s,d)}else{f.e=o;f.r=+d}return f}}();function format(e,t,r,s){var i,a,o,l,u;if(null==r)r=n;else bignumber_intCheck(r,0,8);if(!e.c)return e.toString();i=e.c[0];o=e.e;if(null==t){u=bignumber_coeffToString(e.c);u=1==s||2==s&&(o<=d||o>=c)?bignumber_toExponential(u,o):bignumber_toFixedPoint(u,o,"0")}else{e=round(new BigNumber(e),t,r);a=e.e;u=bignumber_coeffToString(e.c);l=u.length;if(1==s||2==s&&(t<=a||a<=d)){for(;l<t;u+="0",l++);u=bignumber_toExponential(u,a)}else{t-=o;u=bignumber_toFixedPoint(u,a,"0");if(a+1>l){if(--t>0)for(u+=".";t--;u+="0");}else{t+=a-l;if(t>0){if(a+1==l)u+=".";for(;t--;u+="0");}}}}return e.s<0&&i?"-"+u:u}function maxOrMin(e,t){var r,s=1,i=new BigNumber(e[0]);for(;s<e.length;s++){r=new BigNumber(e[s]);if(r.s){if(t.call(i,r))i=r}else{i=r;break}}return i}function normalise(e,t,r){var s=1,i=t.length;for(;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,s++);if((r=s+r*r_-1)>u)e.c=e.e=null;else if(r<l)e.c=[e.e=0];else{e.e=r;e.c=t}return e}s=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,s=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,o,n,d){var c,l=n?o:o.replace(i,"");if(s.test(l))a.s=isNaN(l)?null:l<0?-1:1;else{if(!n){l=l.replace(e,function(e,t,r){c="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return d&&d!=c?e:t});if(d){c=d;l=l.replace(t,"$1").replace(r,"0.$1")}if(o!=l)return new BigNumber(l,c)}if(BigNumber.DEBUG){throw Error(rm+"Not a"+(d?" base "+d:"")+" number: "+o)}a.s=null}a.c=a.e=null}}();function round(e,t,r,s){var i,a,o,n,d,c,f,h=e.c,m=ry;if(h){e:{for(i=1,n=h[0];n>=10;n/=10,i++);a=t-i;if(a<0){a+=r_;o=t;d=h[c=0];f=d/m[i-o-1]%10|0}else{c=rf((a+1)/r_);if(c>=h.length)if(s){for(;h.length<=c;h.push(0));d=f=0;i=1;a%=r_;o=a-r_+1}else{break e}else{d=n=h[c];for(i=1;n>=10;n/=10,i++);a%=r_;o=a-r_+i;f=o<0?0:d/m[i-o-1]%10|0}}s=s||t<0||null!=h[c+1]||(o<0?d:d%m[i-o-1]);s=r<4?(f||s)&&(0==r||r==(e.s<0?3:2)):f>5||5==f&&(4==r||s||6==r&&(a>0?o>0?d/m[i-o]:0:h[c-1])%10&1||r==(e.s<0?8:7));if(t<1||!h[0]){h.length=0;if(s){t-=e.e+1;h[0]=m[(r_-t%r_)%r_];e.e=-t||0}else{h[0]=e.e=0}return e}if(0==a){h.length=c;n=1;c--}else{h.length=c+1;n=m[r_-a];h[c]=o>0?rh(d/m[i-o]%m[o])*n:0}if(s){for(;;){if(0==c){for(a=1,o=h[0];o>=10;o/=10,a++);o=h[0]+=n;for(n=1;o>=10;o/=10,n++);if(a!=n){e.e++;if(h[0]==rv)h[0]=1}break}h[c]+=n;if(h[c]!=rv)break;h[c--]=0;n=1}}for(a=h.length;0===h[--a];h.pop());}if(e.e>u)e.c=e.e=null;else if(e.e<l)e.c=[e.e=0]}return e}function valueOf(e){var t,r=e.e;if(null===r)return e.toString();t=bignumber_coeffToString(e.c);t=r<=d||r>=c?bignumber_toExponential(t,r):bignumber_toFixedPoint(t,r,"0");return e.s<0?"-"+t:t}i.absoluteValue=i.abs=function(){var e=new BigNumber(this);if(e.s<0)e.s=1;return e};i.comparedTo=function(e,t){return bignumber_compare(this,new BigNumber(e,t))};i.decimalPlaces=i.dp=function(e,t){var r,s,i,a=this;if(null!=e){bignumber_intCheck(e,0,rb);if(null==t)t=n;else bignumber_intCheck(t,0,8);return round(new BigNumber(a),e+a.e+1,t)}if(!(r=a.c))return null;s=((i=r.length-1)-bignumber_bitFloor(this.e/r_))*r_;if(i=r[i])for(;i%10==0;i/=10,s--);if(s<0)s=0;return s};i.dividedBy=i.div=function(e,r){return t(this,new BigNumber(e,r),o,n)};i.dividedToIntegerBy=i.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};i.exponentiatedBy=i.pow=function(e,t){var r,s,i,o,d,c,l,u,f,h=this;e=new BigNumber(e);if(e.c&&!e.isInteger()){throw Error(rm+"Exponent not an integer: "+valueOf(e))}if(null!=t)t=new BigNumber(t);c=e.e>14;if(!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0]){f=new BigNumber(Math.pow(+valueOf(h),c?e.s*(2-bignumber_isOdd(e)):+valueOf(e)));return t?f.mod(t):f}l=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);s=!l&&h.isInteger()&&t.isInteger();if(s)h=h.mod(t)}else if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||c&&h.c[1]>=24e7:h.c[0]<8e13||c&&h.c[0]<=9999975e7))){o=(h.s<0&&bignumber_isOdd(e),-0);if(h.e>-1)o=1/o;return new BigNumber(l?1/o:o)}else if(m)o=rf(m/r_+2);if(c){r=new BigNumber(.5);if(l)e.s=1;u=bignumber_isOdd(e)}else{i=Math.abs(+valueOf(e));u=i%2}f=new BigNumber(a);for(;;){if(u){f=f.times(h);if(!f.c)break;if(o){if(f.c.length>o)f.c.length=o}else if(s)f=f.mod(t)}if(i){i=rh(i/2);if(0===i)break;u=i%2}else{e=e.times(r);round(e,e.e+1,1);if(e.e>14)u=bignumber_isOdd(e);else{i=+valueOf(e);if(0===i)break;u=i%2}}h=h.times(h);if(o){if(h.c&&h.c.length>o)h.c.length=o}else if(s)h=h.mod(t)}if(s)return f;if(l)f=a.div(f);return t?f.mod(t):o?round(f,m,n,d):f};i.integerValue=function(e){var t=new BigNumber(this);if(null==e)e=n;else bignumber_intCheck(e,0,8);return round(t,t.e+1,e)};i.isEqualTo=i.eq=function(e,t){return 0===bignumber_compare(this,new BigNumber(e,t))};i.isFinite=function(){return!!this.c};i.isGreaterThan=i.gt=function(e,t){return bignumber_compare(this,new BigNumber(e,t))>0};i.isGreaterThanOrEqualTo=i.gte=function(e,t){return 1===(t=bignumber_compare(this,new BigNumber(e,t)))||0===t};i.isInteger=function(){return!!this.c&&bignumber_bitFloor(this.e/r_)>this.c.length-2};i.isLessThan=i.lt=function(e,t){return bignumber_compare(this,new BigNumber(e,t))<0};i.isLessThanOrEqualTo=i.lte=function(e,t){return -1===(t=bignumber_compare(this,new BigNumber(e,t)))||0===t};i.isNaN=function(){return!this.s};i.isNegative=function(){return this.s<0};i.isPositive=function(){return this.s>0};i.isZero=function(){return!!this.c&&0==this.c[0]};i.minus=function(e,t){var r,s,i,a,o=this,d=o.s;e=new BigNumber(e,t);t=e.s;if(!d||!t)return new BigNumber(NaN);if(d!=t){e.s=-t;return o.plus(e)}var c=o.e/r_,l=e.e/r_,u=o.c,f=e.c;if(!c||!l){if(!u||!f)return u?(e.s=-t,e):new BigNumber(f?o:NaN);if(!u[0]||!f[0]){return f[0]?(e.s=-t,e):new BigNumber(u[0]?o:-0)}}c=bignumber_bitFloor(c);l=bignumber_bitFloor(l);u=u.slice();if(d=c-l){if(a=d<0){d=-d;i=u}else{l=c;i=f}i.reverse();for(t=d;t--;i.push(0));i.reverse()}else{s=(a=(d=u.length)<(t=f.length))?d:t;for(d=t=0;t<s;t++)if(u[t]!=f[t]){a=u[t]<f[t];break}}if(a)i=u,u=f,f=i,e.s=-e.s;t=(s=f.length)-(r=u.length);if(t>0)for(;t--;u[r++]=0);t=rv-1;for(;s>d;){if(u[--s]<f[s]){for(r=s;r&&!u[--r];u[r]=t);--u[r];u[s]+=rv}u[s]-=f[s]}for(;0==u[0];u.splice(0,1),--l);if(!u[0]){e.s=3==n?-1:1;e.c=[e.e=0];return e}return normalise(e,u,l)};i.modulo=i.mod=function(e,r){var s,i,a=this;e=new BigNumber(e,r);if(a.c&&e.s&&(!e.c||e.c[0])){if(!e.c||a.c&&!a.c[0]){return new BigNumber(a)}}else{return new BigNumber(NaN)}if(9==h){i=e.s;e.s=1;s=t(a,e,0,3);e.s=i;s.s*=i}else{s=t(a,e,0,h)}e=a.minus(s.times(e));if(!e.c[0]&&1==h)e.s=a.s;return e};i.multipliedBy=i.times=function(e,t){var r,s,i,a,o,n,d,c,l,u,f,h,m,p,v,_=this,w=_.c,y=(e=new BigNumber(e,t)).c;if(!w||!y||!w[0]||!y[0]){if(_.s&&e.s&&(!w||w[0]||y)&&(!y||y[0]||w)){e.s*=_.s;if(w&&y){e.c=[0];e.e=0}else{e.c=e.e=null}}else{e.c=e.e=e.s=null}return e}s=bignumber_bitFloor(_.e/r_)+bignumber_bitFloor(e.e/r_);e.s*=_.s;d=w.length;u=y.length;if(d<u)m=w,w=y,y=m,i=d,d=u,u=i;for(i=d+u,m=[];i--;m.push(0));p=rv;v=rg;for(i=u;--i>=0;){r=0;f=y[i]%v;h=y[i]/v|0;for(o=d,a=i+o;a>i;){c=w[--o]%v;l=w[o]/v|0;n=h*c+l*f;c=f*c+n%v*v+m[a]+r;r=(c/p|0)+(n/v|0)+h*l;m[a--]=c%p}m[a]=r}if(r)++s;else m.splice(0,1);return normalise(e,m,s)};i.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};i.plus=function(e,t){var r,s=this,i=s.s;e=new BigNumber(e,t);t=e.s;if(!i||!t)return new BigNumber(NaN);if(i!=t){e.s=-t;return s.minus(e)}var a=s.e/r_,o=e.e/r_,n=s.c,d=e.c;if(!a||!o){if(!n||!d)return new BigNumber(i/0);if(!n[0]||!d[0])return d[0]?e:new BigNumber(n[0]?s:0*i)}a=bignumber_bitFloor(a);o=bignumber_bitFloor(o);n=n.slice();if(i=a-o){if(i>0){o=a;r=d}else{i=-i;r=n}r.reverse();for(;i--;r.push(0));r.reverse()}i=n.length;t=d.length;if(i-t<0)r=d,d=n,n=r,t=i;for(i=0;t;){i=(n[--t]=n[t]+d[t]+i)/rv|0;n[t]=rv===n[t]?0:n[t]%rv}if(i){n=[i].concat(n);++o}return normalise(e,n,o)};i.precision=i.sd=function(e,t){var r,s,i,a=this;if(null!=e&&!!e!==e){bignumber_intCheck(e,1,rb);if(null==t)t=n;else bignumber_intCheck(t,0,8);return round(new BigNumber(a),e,t)}if(!(r=a.c))return null;i=r.length-1;s=i*r_+1;if(i=r[i]){for(;i%10==0;i/=10,s--);for(i=r[0];i>=10;i/=10,s++);}if(e&&a.e+1>s)s=a.e+1;return s};i.shiftedBy=function(e){bignumber_intCheck(e,-rw,rw);return this.times("1e"+e)};i.squareRoot=i.sqrt=function(){var e,r,s,i,a,d=this,c=d.c,l=d.s,u=d.e,f=o+4,h=new BigNumber("0.5");if(1!==l||!c||!c[0]){return new BigNumber(!l||l<0&&(!c||c[0])?NaN:c?d:1/0)}l=Math.sqrt(+valueOf(d));if(0==l||l==1/0){r=bignumber_coeffToString(c);if((r.length+u)%2==0)r+="0";l=Math.sqrt(+r);u=bignumber_bitFloor((u+1)/2)-(u<0||u%2);if(l==1/0)r="5e"+u;else{r=l.toExponential();r=r.slice(0,r.indexOf("e")+1)+u}s=new BigNumber(r)}else{s=new BigNumber(l+"")}if(s.c[0]){u=s.e;l=u+f;if(l<3)l=0;for(;;){a=s;s=h.times(a.plus(t(d,a,f,1)));if(bignumber_coeffToString(a.c).slice(0,l)===(r=bignumber_coeffToString(s.c)).slice(0,l)){if(s.e<u)--l;r=r.slice(l-3,l+1);if("9999"!=r&&(i||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(s,s.e+o+2,1);e=!s.times(s).eq(d)}break}if(!i){round(a,a.e+o+2,0);if(a.times(a).eq(d)){s=a;break}}f+=4;l+=4;i=1}}}return round(s,s.e+o+1,n,e)};i.toExponential=function(e,t){if(null!=e){bignumber_intCheck(e,0,rb);e++}return format(this,e,t,1)};i.toFixed=function(e,t){if(null!=e){bignumber_intCheck(e,0,rb);e=e+this.e+1}return format(this,e,t)};i.toFormat=function(e,t,r){var s,i=this;if(null==r)if(null!=e&&t&&"object"==typeof t){r=t;t=null}else if(e&&"object"==typeof e){r=e;e=t=null}else{r=p}else if("object"!=typeof r){throw Error(rm+"Argument not an object: "+r)}s=i.toFixed(e,t);if(i.c){var a,o=s.split("."),n=+r.groupSize,d=+r.secondaryGroupSize,c=r.groupSeparator||"",l=o[0],u=o[1],f=i.s<0,h=f?l.slice(1):l,m=h.length;if(d)a=n,n=d,d=a,m-=a;if(n>0&&m>0){a=m%n||n;l=h.substr(0,a);for(;a<m;a+=n)l+=c+h.substr(a,n);if(d>0)l+=c+h.slice(a);if(f)l="-"+l}s=u?l+(r.decimalSeparator||"")+((d=+r.fractionGroupSize)?u.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):u):l}return(r.prefix||"")+s+(r.suffix||"")};i.toFraction=function(e){var r,s,i,o,d,c,l,f,h,m,p,v,_=this,w=_.c;if(null!=e){l=new BigNumber(e);if(!l.isInteger()&&(l.c||1!==l.s)||l.lt(a)){throw Error(rm+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+valueOf(l))}}if(!w)return new BigNumber(_);r=new BigNumber(a);h=s=new BigNumber(a);i=f=new BigNumber(a);v=bignumber_coeffToString(w);d=r.e=v.length-_.e-1;r.c[0]=ry[(c=d%r_)<0?r_+c:c];e=!e||l.comparedTo(r)>0?d>0?r:h:l;c=u;u=1/0;l=new BigNumber(v);f.c[0]=0;for(;;){m=t(l,r,0,1);o=s.plus(m.times(i));if(1==o.comparedTo(e))break;s=i;i=o;h=f.plus(m.times(o=h));f=o;r=l.minus(m.times(o=r));l=o}o=t(e.minus(s),i,0,1);f=f.plus(o.times(h));s=s.plus(o.times(i));f.s=h.s=_.s;d*=2;p=t(h,i,d,n).minus(_).abs().comparedTo(t(f,s,d,n).minus(_).abs())<1?[h,i]:[f,s];u=c;return p};i.toNumber=function(){return+valueOf(this)};i.toPrecision=function(e,t){if(null!=e)bignumber_intCheck(e,1,rb);return format(this,e,t,2)};i.toString=function(e){var t,s=this,i=s.s,a=s.e;if(null===a)if(i){t="Infinity";if(i<0)t="-"+t}else{t="NaN"}else{if(null==e)t=a<=d||a>=c?bignumber_toExponential(bignumber_coeffToString(s.c),a):bignumber_toFixedPoint(bignumber_coeffToString(s.c),a,"0");else if(10===e&&_){s=round(new BigNumber(s),o+a+1,n);t=bignumber_toFixedPoint(bignumber_coeffToString(s.c),s.e,"0")}else{bignumber_intCheck(e,2,v.length,"Base");t=r(bignumber_toFixedPoint(bignumber_coeffToString(s.c),a,"0"),10,e,i,true)}if(i<0&&s.c[0])t="-"+t}return t};i.valueOf=i.toJSON=function(){return valueOf(this)};i._isBigNumber=true;i[Symbol.toStringTag]="BigNumber";i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf;if(null!=e)BigNumber.set(e);return BigNumber}function bignumber_bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function bignumber_coeffToString(e){var t,r,s=1,i=e.length,a=e[0]+"";for(;s<i;){t=e[s++]+"";r=r_-t.length;for(;r--;t="0"+t);a+=t}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function bignumber_compare(e,t){var r,s,i=e.c,a=t.c,o=e.s,n=t.s,d=e.e,c=t.e;if(!o||!n)return null;r=i&&!i[0];s=a&&!a[0];if(r||s)return r?s?0:-n:o;if(o!=n)return o;r=o<0;s=d==c;if(!i||!a)return s?0:!i^r?1:-1;if(!s)return d>c^r?1:-1;n=(d=i.length)<(c=a.length)?d:c;for(o=0;o<n;o++)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return d==c?0:d>c^r?1:-1}function bignumber_intCheck(e,t,r,s){if(e<t||e>r||e!==rh(e)){throw Error(rm+(s||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}}function bignumber_isOdd(e){var t=e.c.length-1;return bignumber_bitFloor(e.e/r_)==t&&e.c[t]%2!=0}function bignumber_toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function bignumber_toFixedPoint(e,t,r){var s,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else{s=e.length;if(++t>s){for(i=r,t-=s;--t;i+=r);e+=i}else if(t<s)e=e.slice(0,t)+"."+e.slice(t)}return e}var rP=bignumber_clone();const rS=null;const rC=.05;const distributeAssets=(e,t,r,s)=>{const i=[...e];if(0===i.length)return i;const a=(0,eY.coalesceValueQuantities)(i.map(e=>e.value)).assets;if(!a||0===a.size)return i;for(const o of i)o.value.assets=void 0;let n=0;const d=i;const c=[];while(a.size>0){const l=new Map([...a.entries()].splice(0,1));const u=n%d.length;const f={...d[u].value};f.assets=(0,eR.addTokenMaps)(f.assets,l);if((0,eR.isValidValue)(f,t,r,s)){d[u].value=f;a.delete([...l.keys()][0])}else{c.push(...d.splice(u,1))}if(0===d.length)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted);++n}return[...i,...c]};const getMinUtxoAmount=e=>{const t=new rP(.03);let r=e.toString().length-1;let s="1";while(r>0){s+="0";--r}return BigInt(new rP(s).multipliedBy(t).toFixed(0,0))};const splitChangeOutput=(e,t,r)=>{const s=e.value.coins;const i=getMinUtxoAmount(s);let a=s;let o=0n;const n=new Array;const d=new rP(2);while(a>=i){const c=BigInt(new rP(a.toString()).dividedBy(d).toFixed(0,0));const l=a-c;if(l<=i||l<=t({address:e.address,value:{assets:e.value.assets,coins:s-o}})+r){n.push(s-o);break}o+=c;n.push(c);a-=c}return n.map(t=>({address:e.address,value:{assets:e.value.assets,coins:t}}))};const splitChange=async(e,t,r,s,i,a)=>{const o=await e();const n=[...o.values()].reduce((e,t)=>e+t,0);const d=new Map([...o.entries()].map(e=>[e[0],e[1]/n]));const c=[...d.values()].reduce((e,t)=>e+t,0);if(Math.abs(1-c)>rC)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);const l=[...d.entries()].map(e=>({address:e[0],value:{coins:0n}}));let u=0n;const f=new rP(t.toString());for(const h of l){const m=new rP(d.get(h.address));const p=BigInt(f.multipliedBy(m).toFixed(0,0));u+=p;h.value.coins=u>t?p-(u-t):p}if(u<t){const v=t-u;l[l.length-1].value.coins+=v}const _=l.flatMap(e=>splitChangeOutput(e,s,a));const w=_.sort(eR.sortByCoins).filter(e=>e.value.coins>0n);if(w&&w.length>0)w[0].value.assets=r;if(!r||0===r.size)return w;return distributeAssets(w,s,i,a)};const adjustOutputsForFee=async(e,t,r,s,i,a)=>{const o=new Set([...s,...i]);const{fee:n,redeemers:d}=await t.computeMinimumCost({change:[],fee:a,inputs:r,outputs:o});if(n===e)return{change:[],fee:n,feeAccountedFor:true,redeemers:d};if(e<n)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);const c=[...i];c.sort(eR.sortByCoins);let l=false;for(const u of c){const f=u.value.coins-n;if(f>=t.computeMinimumCoinQuantity(u)){u.value.coins=f;l=true;break}}return{change:[...c],fee:n,feeAccountedFor:l,redeemers:d}};const splitChangeAndComputeFee=async(e,t,r,s,i,a,o)=>{const n=await splitChange(a,r,s,i.computeMinimumCoinQuantity,i.tokenBundleSizeExceedsLimit,o);let d=await adjustOutputsForFee(r,i,e,t,n,o);if(d.fee>=r){const c={change:[{address:eR.stubMaxSizeAddress,value:{assets:s,coins:0n}}],fee:d.fee,feeAccountedFor:true};if(c.change[0].value.coins<i.computeMinimumCoinQuantity(c.change[0]))throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted);return c}if(o<d.fee){d=await splitChangeAndComputeFee(e,t,r,s,i,a,d.fee);if(0===d.change.length)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted)}for(const l of d.change)if(l.value.coins<i.computeMinimumCoinQuantity(l))throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted);if(!d.feeAccountedFor)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoFullyDepleted);return d};var GreedyInputSelector_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var GreedyInputSelector_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rk;class GreedyInputSelector{async select(e){var t,r;const{preSelectedUtxo:s,utxo:i,outputs:a,constraints:o,implicitValue:n}=e;const d=new Set([...i,...s]);const c=(0,eR.toValues)([...d]);const l=(0,eR.toValues)([...a]);const u=(0,eR.getCoinQuantity)(c);const f=(0,eR.getCoinQuantity)(l);const h=(0,eY.coalesceValueQuantities)(c).assets;const m=(0,eY.coalesceValueQuantities)(l).assets;const p=(null==n?void 0:null===(t=n.coin)||void 0===t?void 0:t.input)||0n;const v=(null==n?void 0:null===(r=n.coin)||void 0===r?void 0:r.deposit)||0n;const _=(null==n?void 0:n.mint)||new Map;const w=u+p;const y=f+v;const g=(0,eR.addTokenMaps)(h,_);const b=w-y;const P=(0,eR.subtractTokenMaps)(g,m);if(0===d.size||y>w||(0,eR.hasNegativeAssetValue)(P))throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);const S=await splitChangeAndComputeFee(d,a,b,P,o,GreedyInputSelector_classPrivateFieldGet(this,rk,"f").getChangeAddresses,0n);const C=S.change.filter(e=>{var t;return e.value.coins>0n||((null===(t=e.value.assets)||void 0===t?void 0:t.size)||0)>0});if(b-S.fee<0n)throw new tx.InputSelectionError(tx.InputSelectionFailure.UtxoBalanceInsufficient);if(d.size>await o.computeSelectionLimit({change:C,fee:S.fee,inputs:d,outputs:a})){throw new tx.InputSelectionError(tx.InputSelectionFailure.MaximumInputCountExceeded)}return{remainingUTxO:new Set,selection:{change:C,fee:S.fee,inputs:new Set([...d].sort(eR.sortUtxoByTxIn)),outputs:a}}}constructor(e){rk.set(this,void 0);GreedyInputSelector_classPrivateFieldSet(this,rk,e,"f")}}rk=new WeakMap;const rj=5000000n;const sortByCoins=(e,t)=>{if(e[1].value.coins>t[1].value.coins){return -1}if(e[1].value.coins<t[1].value.coins){return 1}return 0};const isValidValue=(e,t,r)=>{let s=e.value.coins>=t(e);if(e.value.assets)s=s&&!r(e.value.assets);return s};const createGreedyInputSelector=(e,t)=>{const r=new Map([...e].map(([e,r])=>{const s=tT(t.filter(t=>t.rewardAccount===e),({index:e})=>e);if(!s){throw new Error(`Could not find any address associated with ${e}.`)}return[s.address,r]}));return new GreedyInputSelector({getChangeAddresses:()=>Promise.resolve(r)})};const sortRewardAccountsDelegatedFirst=(e,t)=>{const getScore=e=>{let t=2;if(e.credentialStatus===eN.StakeCredentialStatus.Registered){var r;t=1;if(null===(r=e.delegatee)||void 0===r?void 0:r.nextNextEpoch)t=0}return t};return getScore(e)-getScore(t)};const buildRedeemers=(e,t)=>{const r=[];var s,i,a,o,n;const d=[...null!==(s=e.mint)&&void 0!==s?s:[],...null!==(i=e.vote)&&void 0!==i?i:[],...null!==(a=e.propose)&&void 0!==a?a:[],...null!==(o=e.certificate)&&void 0!==o?o:[],...null!==(n=e.withdrawal)&&void 0!==n?n:[],...e.spend?[...e.spend.values()]:[]];for(const c of d){const l=Number.MAX_SAFE_INTEGER;r.push({data:c.data,executionUnits:0===c.executionUnits.memory&&0===c.executionUnits.steps?t:c.executionUnits,index:l,purpose:c.purpose})}return r};const validateValidityInterval=(e,t)=>{if(!(null==t?void 0:t.invalidHereafter)){return}if(e.slot>=t.invalidHereafter){throw new InvalidHereafterError}};const buildWitness=async(e,t,r,s,i,a)=>{const o={signatures:new Map};if(r){o.datums=[];for(const[n,d]of r)if(!s.has(n))o.datums.push(d)}if(e){o.scripts=[];for(const[c,l]of e)if(!t.has(c))o.scripts.push(l)}const{maxExecutionUnitsPerTransaction:u}=await a.protocolParameters();if(i)o.redeemers=buildRedeemers(i,u);return o};const computeCollateral=async e=>{const t=(await e.utxoAvailable()).sort(sortByCoins);const r=[];const{coinsPerUtxoByte:s,maxValueSize:i}=await e.protocolParameters();let a=0n;for(const o of t){r.push(o);a+=o[1].value.coins;if(a>rj){const n=r[0][1].address;const d=r.map(e=>e[1].value);const c=(0,eY.coalesceValueQuantities)(d);const l={...c};l.coins-=rj;const u={address:n,value:l};if(isValidValue(u,(0,tF.computeMinimumCoinQuantity)(s),(0,tF.tokenBundleSizeExceedsLimit)(i))){return{collateralReturn:u,collaterals:new Set(r.map(e=>e[0]))}}}}throw new Error("No suitable collateral found")};var rx=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");const ensureNoDeRegistrationsWithRewardsLocked=e=>{const t=e.filter(e=>e.rewardBalance>0n&&!hasCorrectVoteDelegation(e));if(t.length>0){throw new DeRegistrationsWithRewardsLocked(t)}};var rT=r("../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");var rE=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var rA=r("../../node_modules/lodash/omit.js");var TxBuilder_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var TxBuilder_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var rI,rB,rF,rM,rR,rD,rO,rG,rN,rH,rK,rV,rW,rz,rU,r$,rL,rq,rY,rQ,rJ,rX,rZ,r0,r1,r2,r3,r5,r4,r9,r8,r6;const r7="0".repeat(64);class LazyTxSigner{async inspect(){const{tx:e,ctx:{signingContext:{knownAddresses:t,handleResolutions:r},auxiliaryData:s,witness:i},inputSelection:a}=await TxBuilder_classPrivateFieldGet(this,rI,"m",rR).call(this);return{...e,auxiliaryData:s,handleResolutions:r,inputSelection:a,ownAddresses:t,witness:i}}async sign(){return TxBuilder_classPrivateFieldGet(this,rF,"f").sign(await TxBuilder_classPrivateFieldGet(this,rI,"m",rR).call(this))}constructor({builder:e,signer:t}){rI.add(this);rB.set(this,void 0);rF.set(this,void 0);rM.set(this,void 0);TxBuilder_classPrivateFieldSet(this,rM,e,"f");TxBuilder_classPrivateFieldSet(this,rF,t,"f")}}rB=new WeakMap,rF=new WeakMap,rM=new WeakMap,rI=new WeakSet,rR=async function _LazyTxSigner_build(){return TxBuilder_classPrivateFieldSet(this,rB,TxBuilder_classPrivateFieldGet(this,rB,"f")||await TxBuilder_classPrivateFieldGet(this,rM,"f").build(),"f")};class GenericTxBuilder{async inspect(){return{auxiliaryData:this.partialAuxiliaryData,body:this.partialTxBody,extraSigners:this.partialExtraSigners,signingOptions:this.partialSigningOptions}}addReferenceInput(e){if(Array.isArray(e)){const t=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,r$,"f").set(t,e);return this}if(!TxBuilder_classPrivateFieldGet(this,rZ,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rZ,"f").push(e);return this}addInput(e,t){if(t){TxBuilder_classPrivateFieldGet(this,rD,"m",r6).call(this,e,t);return this}if(Array.isArray(e)){const r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,rU,"f").set(r,e);return this}if(!TxBuilder_classPrivateFieldGet(this,rX,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rX,"f").push(e);return this}addDatum(e){const t=tK.PlutusData.fromCore(e).hash();TxBuilder_classPrivateFieldGet(this,rY,"f").set(t,e);return this}addOutput(e){if(e.handleResolution)TxBuilder_classPrivateFieldSet(this,rW,[...TxBuilder_classPrivateFieldGet(this,rW,"f"),e.handleResolution],"f");const t=rA(e,["handle","handleResolution"]);this.partialTxBody={...this.partialTxBody,outputs:[...this.partialTxBody.outputs||[],t]};return this}removeOutput(e){var t;TxBuilder_classPrivateFieldSet(this,rW,TxBuilder_classPrivateFieldGet(this,rW,"f").filter(t=>t.handle!==e.handle),"f");this.partialTxBody={...this.partialTxBody,outputs:null===(t=this.partialTxBody.outputs)||void 0===t?void 0:t.filter(t=>!(0,g.deepEquals)(t,e))};return this}buildOutput(e){return new TxOutputBuilder({handleProvider:TxBuilder_classPrivateFieldGet(this,rV,"f"),logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rK,"f"),"outputBuilder"),outputValidator:TxBuilder_classPrivateFieldGet(this,rG,"f"),txOut:e})}delegateFirstStakeCredential(e){TxBuilder_classPrivateFieldSet(this,rz,e,"f");return this}delegatePortfolio(e){if(!TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");if((null==e?void 0:e.pools.length)===0){throw new Error("Portfolio should define at least one delegation pool.")}var t;TxBuilder_classPrivateFieldSet(this,rN,(null!==(t=null==e?void 0:e.pools)&&void 0!==t?t:[]).map(e=>({...e,id:tZ.PoolId.fromKeyHash(e.id)})),"f");if(e){var r;if(null===(r=this.partialAuxiliaryData)||void 0===r?void 0:r.blob)this.partialAuxiliaryData.blob.set(eN.DelegationMetadataLabel,t0.jsonToMetadatum(eN.portfolioMetadataFromCip17(e)));else this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map([[eN.DelegationMetadataLabel,t0.jsonToMetadatum(eN.portfolioMetadataFromCip17(e))]])}}return this}metadata(e){this.partialAuxiliaryData={...this.partialAuxiliaryData,blob:new Map(e)};return this}extraSigners(e){this.partialExtraSigners=[...e];return this}signingOptions(e){this.partialSigningOptions={...e};return this}customize(e){TxBuilder_classPrivateFieldSet(this,r1,e,"f");return this}build(){return new LazyTxSigner({builder:{build:async()=>{TxBuilder_classPrivateFieldGet(this,rK,"f").debug("Building");try{const e=TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account?await TxBuilder_classPrivateFieldGet(this,rD,"m",r4).call(this):await TxBuilder_classPrivateFieldGet(this,rD,"m",r5).call(this);await TxBuilder_classPrivateFieldGet(this,rD,"m",r2).call(this);validateValidityInterval(await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.tip(),this.partialTxBody.validityInterval);const t=await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.addresses.get();const r=(await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.rewardAccounts()).filter(e=>e.credentialStatus===eN.StakeCredentialStatus.Registered||e.credentialStatus===eN.StakeCredentialStatus.Registering);const s=this.partialAuxiliaryData&&{...this.partialAuxiliaryData};const i=this.partialExtraSigners&&[...this.partialExtraSigners];const a=this.partialSigningOptions&&{...this.partialSigningOptions,extraSigners:i};if(this.partialAuxiliaryData)this.partialTxBody.auxiliaryDataHash=tR.computeAuxiliaryDataHash(this.partialAuxiliaryData);const o={...TxBuilder_classPrivateFieldGet(this,rO,"f")};const n=void 0!==TxBuilder_classPrivateFieldGet(this,rN,"f")||void 0!==TxBuilder_classPrivateFieldGet(this,rz,"f");let d=false;if(TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account&&n&&(e.size>1||r.length>1&&e.size<=1)){if(0===e.size){const c=await TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account.deriveAddress({index:0,type:tw.AddressType.External},0);e.set(c.rewardAccount,1)}o.inputSelector=createGreedyInputSelector(e,t);d=true}await Promise.all(TxBuilder_classPrivateFieldGet(this,rX,"f").map(e=>TxBuilder_classPrivateFieldGet(this,rD,"m",r8).call(this,e,TxBuilder_classPrivateFieldGet(this,rU,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,rZ,"f").map(e=>TxBuilder_classPrivateFieldGet(this,rD,"m",r8).call(this,e,TxBuilder_classPrivateFieldGet(this,r$,"f"))));await Promise.all(TxBuilder_classPrivateFieldGet(this,r0,"f").map(e=>TxBuilder_classPrivateFieldGet(this,rD,"m",r9).call(this,e)));const l=await buildWitness(TxBuilder_classPrivateFieldGet(this,rL,"f"),TxBuilder_classPrivateFieldGet(this,rq,"f"),TxBuilder_classPrivateFieldGet(this,rY,"f"),TxBuilder_classPrivateFieldGet(this,rQ,"f"),TxBuilder_classPrivateFieldGet(this,rJ,"f"),TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders);const u=[...TxBuilder_classPrivateFieldGet(this,rL,"f").values()].some(e=>tz.isPlutusScript(e));const{collaterals:f,collateralReturn:h}=u?await computeCollateral(TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders):{collateralReturn:void 0,collaterals:void 0};const m=new Set;for(const p of TxBuilder_classPrivateFieldGet(this,rL,"f").values())if(tz.isPlutusScript(p))m.add(p.version);const v={auxiliaryData:s,certificates:this.partialTxBody.certificates,collateralReturn:h,collaterals:f,customizeCb:TxBuilder_classPrivateFieldGet(this,r1,"f"),handleResolutions:TxBuilder_classPrivateFieldGet(this,rW,"f"),inputs:new Set(TxBuilder_classPrivateFieldGet(this,rU,"f").values()),options:{validityInterval:this.partialTxBody.validityInterval},outputs:new Set(this.partialTxBody.outputs||[]),proposalProcedures:this.partialTxBody.proposalProcedures,redeemersByType:TxBuilder_classPrivateFieldGet(this,rJ,"f"),referenceInputs:new Set([...TxBuilder_classPrivateFieldGet(this,r$,"f").values()].map(e=>e[0])),scriptIntegrityHash:u?r7:void 0,scriptVersions:m,signingOptions:a,txEvaluator:TxBuilder_classPrivateFieldGet(this,rH,"f"),witness:l};let _;try{_=await initializeTx(v,o)}catch(w){if(d||!(w instanceof tx.InputSelectionError)||w.failure===tx.InputSelectionFailure.UtxoBalanceInsufficient){throw w}o.inputSelector=new LargeFirstSelector({changeAddressResolver:new StaticChangeAddressResolver(async()=>t)});TxBuilder_classPrivateFieldGet(this,rK,"f").warn(`Building attempt failed with ${w.failure}, retrying with large first selector`);_=await initializeTx(v,o)}const{body:y,hash:g,inputSelection:b,redeemers:P}=_;l.redeemers=P;return{ctx:{auxiliaryData:s,ownAddresses:t,signingContext:{handleResolutions:TxBuilder_classPrivateFieldGet(this,rW,"f"),knownAddresses:t,txInKeyPathMap:await t_.createTxInKeyPathMap(y,t,TxBuilder_classPrivateFieldGet(this,rO,"f").inputResolver)},signingOptions:{...a,extraSigners:i},witness:l},inputSelection:b,tx:{body:y,hash:g}}}catch(S){TxBuilder_classPrivateFieldGet(this,rK,"f").debug("Transaction build error",S);if(Array.isArray(S))throw S[0];throw S}}},signer:{sign:({tx:e,ctx:t})=>{var r;const s=new es.Transaction(tg.TransactionBody.fromCore(e.body),tb.TransactionWitnessSet.fromCore(null!==(r=t.witness)&&void 0!==r?r:{signatures:new Map}),t.auxiliaryData?tP.AuxiliaryData.fromCore(t.auxiliaryData):void 0);if(void 0!==t.isValid)s.setIsValid(t.isValid);const i={...t.signingOptions,stubSign:false};const a=t.signingContext;return TxBuilder_classPrivateFieldGet(this,rO,"f").witnesser.witness(s,a,i)}}})}setValidityInterval(e){this.partialTxBody={...this.partialTxBody,validityInterval:e};return this}constructor(e){rD.add(this);this.partialTxBody={};rO.set(this,void 0);rG.set(this,void 0);rN.set(this,void 0);rH.set(this,void 0);rK.set(this,void 0);rV.set(this,void 0);rW.set(this,void 0);rz.set(this,void 0);rU.set(this,new Map);r$.set(this,new Map);rL.set(this,new Map);rq.set(this,new Set);rY.set(this,new Map);rQ.set(this,new Set);rJ.set(this,{certificate:new Array,mint:new Array,propose:new Array,spend:new Map,vote:new Array,withdrawal:new Array});rX.set(this,new Array);rZ.set(this,new Array);r0.set(this,new Array);r1.set(this,void 0);TxBuilder_classPrivateFieldSet(this,rG,e.outputValidator||(0,rx.createOutputValidator)({protocolParameters:e.txBuilderProviders.protocolParameters}),"f");TxBuilder_classPrivateFieldSet(this,rO,e,"f");TxBuilder_classPrivateFieldSet(this,rK,e.logger,"f");TxBuilder_classPrivateFieldSet(this,rV,e.handleProvider,"f");TxBuilder_classPrivateFieldSet(this,rW,[],"f");var t;TxBuilder_classPrivateFieldSet(this,rH,null!==(t=e.txEvaluator)&&void 0!==t?t:new GreedyTxEvaluator(e.txBuilderProviders.protocolParameters),"f")}}rO=new WeakMap,rG=new WeakMap,rN=new WeakMap,rH=new WeakMap,rK=new WeakMap,rV=new WeakMap,rW=new WeakMap,rz=new WeakMap,rU=new WeakMap,r$=new WeakMap,rL=new WeakMap,rq=new WeakMap,rY=new WeakMap,rQ=new WeakMap,rJ=new WeakMap,rX=new WeakMap,rZ=new WeakMap,r0=new WeakMap,r1=new WeakMap,rD=new WeakSet,r2=async function _GenericTxBuilder_validateOutputs(){if(this.partialTxBody.outputs){var e;const t=[];await Promise.all(null===(e=this.partialTxBody.outputs)||void 0===e?void 0:e.map(e=>this.buildOutput(e).build().catch(e=>t.push(e))));if(t.length>0){throw t}}},r3=async function _GenericTxBuilder_getOrCreateRewardAccounts(e){let t=[];if(TxBuilder_classPrivateFieldGet(this,rN,"f")){const r=await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.addresses.get();const{newAddresses:s}=await tX.ensureStakeKeys({bip32Account:e,count:TxBuilder_classPrivateFieldGet(this,rN,"f").length,knownAddresses:r,logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rK,"f"),"getOrCreateRewardAccounts")});await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.addresses.add(...s);t=ts([...r,...s]).map(({rewardAccount:e})=>e)}const i=(0,rE.poll)({logger:(0,eT.contextLogger)(TxBuilder_classPrivateFieldGet(this,rK,"f"),"getOrCreateRewardAccounts"),pollUntil:e=>t.every(t=>e.some(e=>e.address===t)),retryBackoffConfig:{initialInterval:10,maxInterval:100,maxRetries:10},sample:TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.rewardAccounts});try{return await (0,rT.lastValueFrom)(i)}catch{throw new OutOfSyncRewardAccounts(t)}},r5=async function _GenericTxBuilder_delegateFirstStakeCredential(){var e;const t=new Map;if(void 0===TxBuilder_classPrivateFieldGet(this,rz,"f")){return Promise.resolve(t)}const r=await TxBuilder_classPrivateFieldGet(this,rO,"f").txBuilderProviders.rewardAccounts();if(!(null==r?void 0:r.length)){throw new Error("Could not find any rewardAccount.")}const s=r[0];this.partialTxBody={...this.partialTxBody,certificates:[]};const i=null===(e=tr.Address.fromBech32(s.address).asReward())||void 0===e?void 0:e.getPaymentCredential();if(!i){throw new Error(`Invalid credential ${i}.`)}if(null===TxBuilder_classPrivateFieldGet(this,rz,"f"))if(s.credentialStatus===eN.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,rK,"f").warn("Stake key not registered.",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeDeregistration,stakeCredential:i});else{if(s.credentialStatus!==eN.StakeCredentialStatus.Unregistered)TxBuilder_classPrivateFieldGet(this,rK,"f").debug("Stake key already registered",s.address,s.credentialStatus);else this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeRegistration,stakeCredential:i});t.set(s.address,1);this.partialTxBody.certificates.push({__typename:eG.CertificateType.StakeDelegation,poolId:TxBuilder_classPrivateFieldGet(this,rz,"f"),stakeCredential:i})}return t},r4=async function _GenericTxBuilder_delegatePortfolio(){const e=new Map;if(!TxBuilder_classPrivateFieldGet(this,rN,"f")){return e}if(!TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account)throw new Error("BIP32 account is required to delegate portfolio.");const t=await TxBuilder_classPrivateFieldGet(this,rD,"m",r3).call(this,TxBuilder_classPrivateFieldGet(this,rO,"f").bip32Account);const r=TxBuilder_classPrivateFieldGet(this,rN,"f").filter(e=>{return t.every(t=>{var r,s;return(null===(r=t.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)!==e.id})}).reverse();TxBuilder_classPrivateFieldGet(this,rK,"f").debug("New poolIds requested in portfolio:",r.map(({id:e})=>e));for(const s of t.filter(e=>{var t,r;return e.credentialStatus===eN.StakeCredentialStatus.Registered&&(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)&&(null===(r=TxBuilder_classPrivateFieldGet(this,rN,"f"))||void 0===r?void 0:r.some(({id:t})=>{var r,s;return t===(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}))e.set(s.address,TxBuilder_classPrivateFieldGet(this,rN,"f").find(({id:e})=>{var t,r;return e===(null===(t=s.delegatee)||void 0===t?void 0:null===(r=t.nextNextEpoch)||void 0===r?void 0:r.id)}).weight);const i=t.filter(e=>{var t,r;return e.credentialStatus===eN.StakeCredentialStatus.Unregistered||!(null===(t=e.delegatee)||void 0===t?void 0:t.nextNextEpoch)||(null===(r=TxBuilder_classPrivateFieldGet(this,rN,"f"))||void 0===r?void 0:r.every(({id:t})=>{var r,s;return t!==(null===(r=e.delegatee)||void 0===r?void 0:null===(s=r.nextNextEpoch)||void 0===s?void 0:s.id)}))}).sort(sortRewardAccountsDelegatedFirst).reverse();if(r.length>i.length){throw new InsufficientRewardAccounts(r.map(({id:e})=>e),i.map(({address:e})=>e))}const a=[];while(r.length>0&&i.length>0){const{id:o,weight:n}=r.pop();const d=i.pop();TxBuilder_classPrivateFieldGet(this,rK,"f").debug(`Building delegation certificate for ${o} ${d}`);if(d.credentialStatus!==eN.StakeCredentialStatus.Registered&&d.credentialStatus!==eN.StakeCredentialStatus.Registering)a.push(eG.createStakeRegistrationCert(d.address));a.push(eG.createDelegationCert(d.address,o));e.set(d.address,n)}ensureNoDeRegistrationsWithRewardsLocked(i);TxBuilder_classPrivateFieldGet(this,rK,"f").debug(`De-registering ${i.length} stake keys`);for(const c of i)if(c.credentialStatus===eN.StakeCredentialStatus.Registered)a.push(eG.createStakeDeregistrationCert(c.address,t1.inConwayEra?c.deposit:void 0));this.partialTxBody={...this.partialTxBody,certificates:a};return e},r9=async function _GenericTxBuilder_resolveDatum(e){if(TxBuilder_classPrivateFieldGet(this,rY,"f").has(e))return;if(!TxBuilder_classPrivateFieldGet(this,rO,"f").datumResolver)throw new Error("Cant resolve unknown datums. Datum resolver not set.");const t=await TxBuilder_classPrivateFieldGet(this,rO,"f").datumResolver.resolve(e);if(!t)throw new Error(`Could not resolve datum with datum hash ${e}`);TxBuilder_classPrivateFieldGet(this,rY,"f").set(e,t)},r8=async function _GenericTxBuilder_resolveInput(e,t){const r=`${e.txId}#${e.index}`;const s=await TxBuilder_classPrivateFieldGet(this,rO,"f").inputResolver.resolveInput(e);if(!s)throw new Error(`Could not resolve input ${r}`);if(s.scriptReference){const i=t2.Script.fromCore(s.scriptReference).hash();TxBuilder_classPrivateFieldGet(this,rL,"f").set(i,s.scriptReference);TxBuilder_classPrivateFieldGet(this,rq,"f").add(i)}const a=s.datum;if(a)if(t3.isDatumHash(a)){if(!TxBuilder_classPrivateFieldGet(this,rY,"f").has(a))TxBuilder_classPrivateFieldGet(this,r0,"f").push(a)}else{const o=tK.PlutusData.fromCore(a).hash();TxBuilder_classPrivateFieldGet(this,rY,"f").set(o,a);TxBuilder_classPrivateFieldGet(this,rQ,"f").add(o)}t.set(r,[{...e,address:s.address},s])},r6=function _GenericTxBuilder_addScriptInput(e,t){let r;if(Array.isArray(e)){r=`${e[0].txId}#${e[0].index}`;TxBuilder_classPrivateFieldGet(this,rU,"f").set(r,e);if(e[1].datum){const s=tK.PlutusData.fromCore(e[1].datum).hash();TxBuilder_classPrivateFieldGet(this,rY,"f").set(s,e[1].datum);TxBuilder_classPrivateFieldGet(this,rQ,"f").add(s)}if(e[1].datumHash)TxBuilder_classPrivateFieldGet(this,r0,"f").push(e[1].datumHash)}else{r=`${e.txId}#${e.index}`;if(!TxBuilder_classPrivateFieldGet(this,rX,"f").some(t=>t.txId===e.txId&&t.index===e.index))TxBuilder_classPrivateFieldGet(this,rX,"f").push(e)}if(t.script){const i=t2.Script.fromCore(t.script).hash();TxBuilder_classPrivateFieldGet(this,rL,"f").set(i,t.script)}if(t.redeemer){var a;null===(a=TxBuilder_classPrivateFieldGet(this,rJ,"f").spend)||void 0===a?void 0:a.set(r,{data:t.redeemer,executionUnits:{memory:0,steps:0},index:0,purpose:t5.RedeemerPurpose.spend})}if(t.datum)if(t3.isDatumHash(t.datum)){if(!TxBuilder_classPrivateFieldGet(this,rY,"f").has(t.datum))TxBuilder_classPrivateFieldGet(this,r0,"f").push(t.datum)}else{const o=tK.PlutusData.fromCore(t.datum).hash();TxBuilder_classPrivateFieldGet(this,rY,"f").set(o,t.datum)}};var se=r("../../node_modules/rxjs/dist/esm5/internal/observable/forkJoin.js");const withStakeKeyDerivationPaths=e=>{return t=>{return t.pipe((0,W.switchMap)(t=>{return e.pipe((0,E.map)(e=>{return t.map(({credentialStatus:t,address:r})=>{var s;return{credentialStatus:t,stakeKeyDerivationPath:null===(s=e.find(e=>e.rewardAccount===r))||void 0===s?void 0:s.stakeKeyDerivationPath}}).filter(e=>!!e.stakeKeyDerivationPath)}))}))}};const createPublicStakeKeysTracker=({addresses$:e,rewardAccounts$:t,bip32Account:r})=>new U.TrackerSubject(t.pipe(withStakeKeyDerivationPaths(e),(0,n.mergeMap)(e=>(0,se.forkJoin)(e.map(({stakeKeyDerivationPath:e,credentialStatus:t})=>(0,d.from)(r.derivePublicKey(e)).pipe((0,E.map)(e=>({credentialStatus:t,publicStakeKey:e}))))).pipe((0,L.defaultIfEmpty)([]))),(0,w.distinctUntilChanged)(g.deepEquals)));var st=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js");var sr=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");const nativeScriptPolicyId=e=>(0,i.PolicyId)(sr.NativeScript.fromCore(e).hash());const jsonToNativeScript=e=>{let t;if(!e.type){throw new SerializationError(SerializationFailure.InvalidScript,"Invalid Native Script. Missing 'type' field.")}switch(e.type){case"sig":t={__type:ScriptType.Native,keyHash:Crypto.Ed25519KeyHashHex(e.keyHash),kind:NativeScriptKind.RequireSignature};break;case"all":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAllOf,scripts:new Array};for(let r=0;r<e.scripts.length;++r)t.scripts.push(jsonToNativeScript(e.scripts[r]));break;case"any":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireAnyOf,scripts:new Array};for(let s=0;s<e.scripts.length;++s)t.scripts.push(jsonToNativeScript(e.scripts[s]));break;case"atLeast":{const i=Number.parseInt(e.required);t={__type:ScriptType.Native,kind:NativeScriptKind.RequireNOf,required:i,scripts:new Array};for(let a=0;a<e.scripts.length;++a)t.scripts.push(jsonToNativeScript(e.scripts[a]));break}case"before":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeBefore,slot:Slot(Number.parseInt(e.slot))};break;case"after":t={__type:ScriptType.Native,kind:NativeScriptKind.RequireTimeAfter,slot:Slot(Number.parseInt(e.slot))};break;default:throw new SerializationError(SerializationFailure.InvalidNativeScriptKind,`Native Script value '${e.type}' is not supported.`)}return t};var ss=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/BaseAddress.js");var si=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAddress.js");const getScriptAddress=(e,t,r)=>{const s=nativeScriptPolicyId(e);const i=nativeScriptPolicyId(t);const a={hash:s,type:tr.CredentialType.ScriptHash};const o={hash:i,type:tr.CredentialType.ScriptHash};const n=ss.BaseAddress.fromCredentials(r,a,o);return{accountIndex:0,address:n.toAddress().toBech32(),index:0,networkId:r,rewardAccount:si.RewardAddress.fromCredentials(r,o).toAddress().toBech32(),type:tw.AddressType.External}};const createDrepInfoColdObservable=({drepProvider:e,retryBackoffConfig:t,refetchTrigger$:r,logger:s})=>i=>poll({logger:s,retryBackoffConfig:t,sample:()=>e.getDRepsInfo({ids:i}),trigger$:merge(of(true),r)});const drepsToDelegatees=e=>t=>e.map(e=>{if(!e){return}if(Cardano.isDRepCredential(e)){const r=t.find(t=>Cardano.DRepID.toCip129DRepID(t.id)===Cardano.DRepID.cip129FromCredential(e));if(!r){return}return{delegateRepresentative:r}}return{delegateRepresentative:e}});const drepsToDrepIds=e=>[...new Set(e.filter(isNotNil).filter(Cardano.isDRepCredential).map(e=>Cardano.DRepID.cip129FromCredential(e)))];const onlyDistinctBlockRefetch=(e,t)=>distinctBlock(e.pipe((0,ek.withLatestFrom)(t),(0,E.map)(([,e])=>e))).pipe((0,E.map)(()=>void 0));var BaseWallet_classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var BaseWallet_classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var sa,so,sn,sd,sc,sl,su,sf,sh,sm,sp,sv,s_,sw,sy,sg;var sb;(function(e){e["SCRIPT_CREDENTIALS_MANAGER"]="SCRIPT_CREDENTIALS_MANAGER";e["BIP32_CREDENTIALS_MANAGER"]="BIP32_CREDENTIALS_MANAGER"})(sb||(sb={}));const isScriptPublicCredentialsManager=e=>e.__type===sb.SCRIPT_CREDENTIALS_MANAGER;const isBip32PublicCredentialsManager=e=>!isScriptPublicCredentialsManager(e);const addressHasTx=async(e,t)=>{const r=await t.transactionsByAddresses({addresses:[e],pagination:{limit:1,startAt:0}});return r.totalResultCount>0};const sP={maxInterval:1e5,maxIntervalMultiplier:20,pollInterval:5e3};const sS=2.5;const isOutgoingTx=e=>"object"==typeof e&&"cbor"in e;const isTxCBOR=e=>"string"==typeof e;const isWitnessedTx=e=>"object"==typeof e&&"context"in e;const processOutgoingTx=e=>{if(isTxCBOR(e)){const t=es.Transaction.fromCbor(e);return{body:t.toCore().body,cbor:e,id:t.getId()}}if(isWitnessedTx(e)){return{body:e.tx.body,cbor:e.cbor,context:e.context,id:e.tx.id}}if(isOutgoingTx(e)){return e}return{body:e.body,cbor:es.TxCBOR.serialize(e),id:e.id}};const getDRepKeyHash=async e=>e?(await tA.Ed25519PublicKey.fromHex(e).hash()).hex():void 0;class BaseWallet{async getName(){return this.name}async initializeTx(e){return initializeTx(e,this.getTxBuilderDependencies())}async finalizeTx({tx:e,bodyCbor:t,signingOptions:r,signingContext:i,auxiliaryData:a,isValid:o,witness:n}){const d=await (0,ep.firstValueFrom)(this.addresses$);const c=await this.governance.getPubDRepKey();const l={signatures:new Map};let u;if((0,s.isTxBodyWithHash)(e)){u=new es.Transaction(t?tg.TransactionBody.fromCbor(t):tg.TransactionBody.fromCore(e.body),tb.TransactionWitnessSet.fromCore({...l,...n}),a?tP.AuxiliaryData.fromCore(a):void 0);if(void 0!==o)u.setIsValid(o)}else{u=es.Transaction.fromCbor(e)}const f=u.witnessSet().toCore();var h,m,p;const v={...i,dRepPublicKey:c,knownAddresses:d,scripts:[...null!==(h=null==i?void 0:i.scripts)&&void 0!==h?h:[],...null!==(m=null==n?void 0:n.scripts)&&void 0!==m?m:[],...null!==(p=null==f?void 0:f.scripts)&&void 0!==p?p:[]],txInKeyPathMap:isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))?await t_.createTxInKeyPathMap(u.body().toCore(),d,this.util):{}};const _=await this.witnesser.witness(u,v,r);BaseWallet_classPrivateFieldGet(this,sl,"f").signed$.next(_);return _.tx}initializeHandles(e){return createHandlesTracker({assetInfo$:this.assetInfo$,handlePolicyIds$:e,handleProvider:this.handleProvider,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"handles$"),utxo$:this.utxo.total$})}createTxBuilder(){return new GenericTxBuilder(this.getTxBuilderDependencies())}async submitTx(e,t={}){const r=processOutgoingTx(e);if(BaseWallet_classPrivateFieldGet(this,sv,"f")[r.id]){return BaseWallet_classPrivateFieldGet(this,sv,"f")[r.id]}return BaseWallet_classPrivateFieldGet(this,sv,"f")[r.id]=(async()=>{try{if(t.mightBeAlreadySubmitted||!await BaseWallet_classPrivateFieldGet(this,sa,"m",sy).call(this,r.id))await BaseWallet_classPrivateFieldGet(this,sa,"m",sw).call(this,r,t)}finally{delete BaseWallet_classPrivateFieldGet(this,sv,"f")[r.id]}return r.id})()}sync(){BaseWallet_classPrivateFieldGet(this,sc,"f").sync()}shutdown(){var e;this.utxo.shutdown();this.transactions.shutdown();this.eraSummaries$.complete();this.protocolParameters$.complete();this.genesisParameters$.complete();BaseWallet_classPrivateFieldGet(this,sc,"f").complete();null===(e=BaseWallet_classPrivateFieldGet(this,sm,"f"))||void 0===e?void 0:e.shutdown();this.assetProvider.stats.shutdown();BaseWallet_classPrivateFieldGet(this,sh,"f").stats.shutdown();this.networkInfoProvider.stats.shutdown();this.utxoProvider.stats.shutdown();this.rewardAccountInfoProvider.stats.shutdown();this.rewardsProvider.stats.shutdown();this.chainHistoryProvider.stats.shutdown();this.currentEpoch$.complete();this.delegation.shutdown();this.assetInfo$.complete();this.syncStatus.shutdown();BaseWallet_classPrivateFieldGet(this,sl,"f").failedToSubmit$.complete();BaseWallet_classPrivateFieldGet(this,sl,"f").pending$.complete();BaseWallet_classPrivateFieldGet(this,sl,"f").submitting$.complete();BaseWallet_classPrivateFieldGet(this,su,"f").unsubscribe();BaseWallet_classPrivateFieldGet(this,sf,"f").complete();this.publicStakeKeys$.complete();BaseWallet_classPrivateFieldGet(this,s_,"f").complete();BaseWallet_classPrivateFieldGet(this,sd,"f").debug("Shutdown")}setInputSelector(e){BaseWallet_classPrivateFieldSet(this,sn,e,"f")}getInputSelector(){return BaseWallet_classPrivateFieldGet(this,sn,"f")}getTxBuilderDependencies(){return{bip32Account:isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))?BaseWallet_classPrivateFieldGet(this,sp,"f").bip32Account:void 0,handleProvider:this.handleProvider,inputResolver:this.util,inputSelector:BaseWallet_classPrivateFieldGet(this,sn,"f"),logger:BaseWallet_classPrivateFieldGet(this,sd,"f"),outputValidator:this.util,txBuilderProviders:{addresses:{add:(...e)=>(0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,sm,"f").addAddresses(e)),get:()=>(0,ep.firstValueFrom)(this.addresses$)},genesisParameters:()=>BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.genesisParameters$),protocolParameters:()=>BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.protocolParameters$),rewardAccounts:()=>{BaseWallet_classPrivateFieldGet(this,s_,"f").next();return BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.delegation.rewardAccounts$)},tip:()=>BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.tip$),utxoAvailable:()=>BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.utxo.available$)},txEvaluator:new GreedyTxEvaluator(()=>BaseWallet_classPrivateFieldGet(this,sa,"m",sg).call(this,this.protocolParameters$)),witnesser:this.witnesser}}async signData(e){if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))){return await this.witnesser.signData({...e,knownAddresses:await (0,ep.firstValueFrom)(this.addresses$)})}throw new Error("signData is not supported by script wallets")}async discoverAddresses(){if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))){const e=await BaseWallet_classPrivateFieldGet(this,sp,"f").addressDiscovery.discover(BaseWallet_classPrivateFieldGet(this,sp,"f").bip32Account);const t=await (0,ep.firstValueFrom)(this.addresses$);const r=e.filter(({address:e})=>!t.some(t=>t.address===e));await (0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,sm,"f").addAddresses(r));return(0,ep.firstValueFrom)(this.addresses$)}return(0,ep.firstValueFrom)(this.addresses$)}async getNextUnusedAddress(){const e=await (0,ep.firstValueFrom)(this.addresses$);if(0===e.length){throw new Error("No known address found for this wallet")}if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))){e.sort((e,t)=>t.index-e.index);const t=e[0];let r=!await addressHasTx(t.address,this.chainHistoryProvider);if(r)return[t];const s=await BaseWallet_classPrivateFieldGet(this,sp,"f").bip32Account.deriveAddress({index:t.index+1,type:tw.AddressType.External},0);await (0,ep.firstValueFrom)(BaseWallet_classPrivateFieldGet(this,sm,"f").addAddresses([s]));r=!await addressHasTx(s.address,this.chainHistoryProvider);if(r)return[s];return await this.getNextUnusedAddress()}const i=!await addressHasTx(e[0].address,this.chainHistoryProvider);return i?[e[0]]:[]}async addSignatures({tx:e,sender:t}){var r;const s=es.Transaction.fromCbor(e);const i=null===(r=s.auxiliaryData())||void 0===r?void 0:r.toCore();const a=s.body().toCore();const o=s.getId();const n=s.witnessSet().toCore();const d=s.body().toCbor();const c=await this.finalizeTx({auxiliaryData:i,bodyCbor:d,signingContext:{sender:t},tx:{body:a,hash:o},witness:n});const l=c.witness;const u=s.witnessSet();u.setVkeys(tS.CborSet.fromCore([...l.signatures],tC.VkeyWitness.fromCore));s.setWitnessSet(u);return s.toCbor()}constructor({name:e,historicalTransactionsFetchLimit:t=10,maxAssetInfoCacheAge:r,polling:{interval:s=sP.pollInterval,maxInterval:i=s*sP.maxIntervalMultiplier,consideredOutOfSyncAfter:a=18e4}={},retryBackoffConfig:o={initialInterval:Math.min(s,1e3),maxInterval:i}},{txSubmitProvider:c,witnesser:m,assetProvider:p,handleProvider:v,networkInfoProvider:b,utxoProvider:P,chainHistoryProvider:S,rewardAccountInfoProvider:C,rewardsProvider:k,logger:j,inputSelector:x,publicCredentialsManager:T,stores:A=(0,st.createInMemoryWalletStores)(),connectionStatusTracker$:F=createSimpleConnectionStatusTracker(),inputResolver:M,pollController$:R=(0,l.of)(true)}){sa.add(this);so.set(this,void 0);sn.set(this,void 0);sd.set(this,void 0);sc.set(this,void 0);sl.set(this,{failedToSubmit$:new $.Subject,pending$:new $.Subject,signed$:new $.Subject,submitting$:new $.Subject});su.set(this,void 0);sf.set(this,void 0);sh.set(this,void 0);sm.set(this,void 0);sp.set(this,void 0);sv.set(this,{});s_.set(this,new $.Subject);BaseWallet_classPrivateFieldSet(this,sd,(0,eT.contextLogger)(j,e),"f");BaseWallet_classPrivateFieldSet(this,sp,T,"f");BaseWallet_classPrivateFieldSet(this,sh,new TrackedTxSubmitProvider(c),"f");this.utxoProvider=new TrackedUtxoProvider(P);this.networkInfoProvider=new TrackedWalletNetworkInfoProvider(b);this.assetProvider=new TrackedAssetProvider(p);this.handleProvider=v;this.chainHistoryProvider=new TrackedChainHistoryProvider(S);this.rewardAccountInfoProvider=new TrackedRewardAccountInfoProvider(C);this.rewardsProvider=new TrackedRewardsProvider(k);this.syncStatus=createProviderStatusTracker({assetProvider:this.assetProvider,chainHistoryProvider:this.chainHistoryProvider,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"syncStatus"),networkInfoProvider:this.networkInfoProvider,rewardAccountInfoProvider:this.rewardAccountInfoProvider,rewardsProvider:this.rewardsProvider,utxoProvider:this.utxoProvider},{consideredOutOfSyncAfter:a});this.witnesser=m;this.name=e;const D=F.pipe((0,h.tap)(e=>e===I.up?"Connection UP":"Connection DOWN"),(0,V.filter)(e=>e===I.down));if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))){BaseWallet_classPrivateFieldSet(this,sm,createAddressTracker({addressDiscovery$:(0,Y.pollProvider)({cancel$:D,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"addressDiscovery$"),retryBackoffConfig:o,sample:()=>{const e=BaseWallet_classPrivateFieldGet(this,sp,"f");return e.addressDiscovery.discover(e.bip32Account)}}).pipe((0,H.take)(1),(0,f.catchError)(e=>{BaseWallet_classPrivateFieldGet(this,sd,"f").error("Failed to complete the address discovery process",e);throw e})),logger:BaseWallet_classPrivateFieldGet(this,sd,"f"),store:A.addresses}),"f");this.addresses$=BaseWallet_classPrivateFieldGet(this,sm,"f").addresses$}else{const O=BaseWallet_classPrivateFieldGet(this,sp,"f");this.addresses$=(0,d.from)(this.networkInfoProvider.genesisParameters()).pipe((0,E.map)(({networkId:e})=>e),(0,w.distinctUntilChanged)(),(0,E.map)(e=>[getScriptAddress(O.paymentScript,O.stakingScript,e)]))}BaseWallet_classPrivateFieldSet(this,sc,this.tip$=new TipTracker({connectionStatus$:F,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"tip$"),maxPollInterval:i,minPollInterval:s,pollController$:R,provider$:(0,Y.pollProvider)({cancel$:D,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"tip$"),retryBackoffConfig:o,sample:this.networkInfoProvider.ledgerTip}),store:A.tip,syncStatus:this.syncStatus}),"f");this.txSubmitProvider=new SmartTxSubmitProvider({retryBackoffConfig:o},{connectionStatus$:F,tip$:this.tip$,txSubmitProvider:BaseWallet_classPrivateFieldGet(this,sh,"f")});const G=new B.BehaviorSubject(void 0);this.eraSummaries$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:g.deepEquals,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"eraSummaries$"),retryBackoffConfig:o,sample:this.networkInfoProvider.eraSummaries,trigger$:G.pipe((0,h.tap)(()=>"Trigger request era summaries"))}),A.eraSummaries);this.currentEpoch$=currentEpochTracker(this.tip$,this.eraSummaries$.pipe((0,h.tap)(e=>BaseWallet_classPrivateFieldGet(this,sd,"f").debug("Era summaries are",e))));this.currentEpoch$.pipe((0,E.map)(()=>void 0)).subscribe(G);const N=this.currentEpoch$.pipe((0,E.map)(e=>e.epochNo),(0,h.tap)(e=>BaseWallet_classPrivateFieldGet(this,sd,"f").debug(`Current epoch is ${e}`)));this.protocolParameters$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"protocolParameters$"),retryBackoffConfig:o,sample:this.networkInfoProvider.protocolParameters,trigger$:N}),A.protocolParameters);this.genesisParameters$=new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"genesisParameters$"),retryBackoffConfig:o,sample:this.networkInfoProvider.genesisParameters,trigger$:N}),A.genesisParameters);const K=this.addresses$.pipe((0,E.map)(e=>e.map(e=>e.address)),(0,w.distinctUntilChanged)(g.deepEquals),(0,y.shareReplay)(1));BaseWallet_classPrivateFieldSet(this,sf,new $.Subject,"f");this.transactions=createTransactionsTracker({addresses$:K,chainHistoryProvider:this.chainHistoryProvider,failedFromReemitter$:BaseWallet_classPrivateFieldGet(this,sf,"f"),historicalTransactionsFetchLimit:t,inFlightTransactionsStore:A.inFlightTransactions,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"transactions"),newTransactions:BaseWallet_classPrivateFieldGet(this,sl,"f"),retryBackoffConfig:o,signedTransactionsStore:A.signedTransactions,tip$:this.tip$,transactionsHistoryStore:A.transactions});const z=createTransactionReemitter({genesisParameters$:this.genesisParameters$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"transactionsReemitter"),maxInterval:i*sS,stores:A,tipSlot$:this.tip$.pipe((0,E.map)(e=>e.slot)),transactions:this.transactions});BaseWallet_classPrivateFieldSet(this,su,new tk.Subscription,"f");BaseWallet_classPrivateFieldGet(this,su,"f").add(z.failed$.subscribe(BaseWallet_classPrivateFieldGet(this,sf,"f")));BaseWallet_classPrivateFieldGet(this,su,"f").add(z.reemit$.pipe((0,n.mergeMap)(e=>(0,d.from)(this.submitTx(e,{mightBeAlreadySubmitted:true}))),(0,f.catchError)(e=>{BaseWallet_classPrivateFieldGet(this,sd,"f").error("Failed to resubmit transaction",e);return _.EMPTY})).subscribe());this.utxo=createUtxoTracker({addresses$:K,history$:this.transactions.history$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"utxo"),retryBackoffConfig:o,stores:A,transactionsInFlight$:this.transactions.outgoing.inFlight$,utxoProvider:this.utxoProvider});this.delegation=createDelegationTracker({epoch$:N,knownAddresses$:this.addresses$,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"delegation"),protocolParameters$:this.protocolParameters$,refetchRewardAccountInfo$:onlyDistinctBlockRefetch(BaseWallet_classPrivateFieldGet(this,s_,"f"),this.tip$),retryBackoffConfig:o,rewardAccountAddresses$:this.addresses$.pipe((0,E.map)(e=>ts(e.map(e=>e.rewardAccount)))),rewardAccountInfoProvider:this.rewardAccountInfoProvider,rewardsTracker:this.rewardsProvider,stores:A,transactionsTracker:this.transactions,utxoTracker:this.utxo});BaseWallet_classPrivateFieldSet(this,sn,x||roundRobinRandomImprove({changeAddressResolver:new DynamicChangeAddressResolver(this.syncStatus.isSettled$.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>this.addresses$)),this.delegation.distribution$,()=>(0,ep.firstValueFrom)(this.delegation.portfolio$),j)}),"f");this.publicStakeKeys$=isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))?createPublicStakeKeysTracker({addresses$:this.addresses$,bip32Account:BaseWallet_classPrivateFieldGet(this,sp,"f").bip32Account,rewardAccounts$:this.delegation.rewardAccounts$}):new U.TrackerSubject((0,l.of)(new Array));this.balance=createBalanceTracker(this.protocolParameters$,this.utxo,this.delegation);const q=(0,u.defer)(()=>A.assets.get().pipe((0,L.defaultIfEmpty)(new Map)));this.assetInfo$=new PersistentDocumentTrackerSubject(createAssetsTracker({assetProvider:this.assetProvider,assetsCache$:q,balanceTracker:this.balance,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"assets$"),maxAssetInfoCacheAge:r,retryBackoffConfig:o,transactionsTracker:this.transactions}),A.assets);this.handles$=this.handleProvider?this.initializeHandles(new PersistentDocumentTrackerSubject((0,Y.pollProvider)({cancel$:D,equals:eV,logger:(0,eT.contextLogger)(BaseWallet_classPrivateFieldGet(this,sd,"f"),"handles$"),retryBackoffConfig:o,sample:()=>this.handleProvider.getPolicyIds()}),A.policyIds)):(0,tj.throwError)(()=>new InvalidConfigurationError('BaseWallet is missing a "handleProvider"'));this.util=(0,tv.createWalletUtil)({chainHistoryProvider:this.chainHistoryProvider,protocolParameters$:this.protocolParameters$,transactions:this.transactions,utxo:this.utxo});if(M)this.util.resolveInput=M.resolveInput.bind(M);const getPubDRepKey=async()=>{if(isBip32PublicCredentialsManager(BaseWallet_classPrivateFieldGet(this,sp,"f"))){return BaseWallet_classPrivateFieldGet(this,sp,"f").bip32Account.derivePublicKey(ty.DREP_KEY_DERIVATION_PATH)}return};this.governance={getPubDRepKey,isRegisteredAsDRep$:createDRepRegistrationTracker({historyTransactions$:this.transactions.history$,pubDRepKeyHash$:(0,d.from)(getPubDRepKey().then(getDRepKeyHash))})};if(M){var Q;BaseWallet_classPrivateFieldSet(this,so,(0,tv.combineInputResolvers)((0,tv.createInputResolver)(this),M),"f");this.util.resolveInput=null===(Q=BaseWallet_classPrivateFieldGet(this,so,"f"))||void 0===Q?void 0:Q.resolveInput.bind(BaseWallet_classPrivateFieldGet(this,so,"f"))}BaseWallet_classPrivateFieldGet(this,sd,"f").debug("Created")}}so=new WeakMap,sn=new WeakMap,sd=new WeakMap,sc=new WeakMap,sl=new WeakMap,su=new WeakMap,sf=new WeakMap,sh=new WeakMap,sm=new WeakMap,sp=new WeakMap,sv=new WeakMap,s_=new WeakMap,sa=new WeakSet,sw=async function _BaseWallet_submitTx(e,{mightBeAlreadySubmitted:t}={}){BaseWallet_classPrivateFieldGet(this,sd,"f").debug(`Submitting transaction ${e.id}`);const{validityInterval:r}=e.body;if(null==r?void 0:r.invalidHereafter){const s=await (0,ep.firstValueFrom)(this.tip$.pipe((0,E.map)(e=>e.slot)));if(s>=(null==r?void 0:r.invalidHereafter)){const i={currentSlot:s,validityInterval:{invalidBefore:null==r?void 0:r.invalidBefore,invalidHereafter:null==r?void 0:r.invalidHereafter}};throw new ei.ProviderError(ei.ProviderFailure.BadRequest,new ea.TxSubmissionError(ea.TxSubmissionErrorCode.OutsideOfValidityInterval,i,"Not submitting transaction due to validity interval"))}}BaseWallet_classPrivateFieldGet(this,sl,"f").submitting$.next(e);try{await this.txSubmitProvider.submitTx({context:e.context,signedTransaction:e.cbor});const{slot:a}=await (0,ep.firstValueFrom)(this.tip$);BaseWallet_classPrivateFieldGet(this,sd,"f").debug(`Submitted transaction ${e.id} at slot ${a}`);BaseWallet_classPrivateFieldGet(this,sl,"f").pending$.next(e);return e.id}catch(n){var o;if(t&&isProviderError(n)&&(isValueNotConservedError(n.innerError)&&(!(null===(o=n.innerError)||void 0===o?void 0:o.data)||0n===n.innerError.data.produced.coins)||isIncompleteWithdrawalsError(n.innerError)||isUnknownOutputReferences(n.innerError)||isCredentialAlreadyRegistered(n.innerError)||isDrepAlreadyRegistered(n.innerError)||isUnknownCredential(n.innerError)||isDrepNotRegistered(n.innerError))){BaseWallet_classPrivateFieldGet(this,sd,"f").debug(`Transaction ${e.id} failed with ${n.innerError}, but it appears to be already submitted...`);BaseWallet_classPrivateFieldGet(this,sl,"f").pending$.next(e);return e.id}BaseWallet_classPrivateFieldGet(this,sl,"f").failedToSubmit$.next({error:n,reason:ex.FailedToSubmit,...e});throw n}},sy=async function _BaseWallet_isTxInFlight(e){const t=await (0,ep.firstValueFrom)(this.transactions.outgoing.inFlight$);return t.some(t=>t.id===e)},sg=function _BaseWallet_firstValueFromSettled(e){return(0,ep.firstValueFrom)(this.syncStatus.isSettled$.pipe((0,V.filter)(e=>e),(0,W.switchMap)(()=>e)))}},"../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/util.js":(e,t,r)=>{"use strict";r.d(t,{createPersonalWallet:()=>createPersonalWallet,createSharedWallet:()=>createSharedWallet,isValidSharedWalletScript:()=>isValidSharedWalletScript});var s=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var i=r("../../node_modules/lodash/uniqBy.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var a,o;const n=5;const addressHasTx=async(e,t)=>{const r=await t.transactionsByAddresses({addresses:[e.address],pagination:{limit:1,startAt:0}});return r.totalResultCount>0};const discoverAddresses=async(e,t,r,i)=>{let a=0;let o=0;const n=new Array;while(a<=r){const d=i(o,s.AddressType.External);const c=i(o,s.AddressType.Internal);const l=await e.deriveAddress(d.paymentKeyDerivationPath,d.stakeKeyDerivationIndex);const u=await e.deriveAddress(c.paymentKeyDerivationPath,c.stakeKeyDerivationIndex);const f=await addressHasTx(l,t);const h=await addressHasTx(u,t);if(f)n.push(l);if(h)n.push(u);if(f||h)a=0;else++a;++o}return n};class HDSequentialDiscovery{async discover(e){const t=[await e.deriveAddress({index:0,type:s.AddressType.External},0)];const r=await e.deriveAddress({index:0,type:s.AddressType.Internal},0);if(await addressHasTx(r,__classPrivateFieldGet(this,a,"f")))t.push(r);const d=await discoverAddresses(e,__classPrivateFieldGet(this,a,"f"),n,(e,t)=>({paymentKeyDerivationPath:{index:0,type:t},stakeKeyDerivationIndex:e+1}));const c=await discoverAddresses(e,__classPrivateFieldGet(this,a,"f"),__classPrivateFieldGet(this,o,"f"),(e,t)=>({paymentKeyDerivationPath:{index:e+1,type:t},stakeKeyDerivationIndex:0}));const l=i([...t,...d,...c],"address");return l.sort((e,t)=>e.index-t.index||e.stakeKeyDerivationPath.index-t.stakeKeyDerivationPath.index)}constructor(e,t){a.set(this,void 0);o.set(this,void 0);__classPrivateFieldSet(this,a,e,"f");__classPrivateFieldSet(this,o,t,"f")}}a=new WeakMap,o=new WeakMap;var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/Wallets/BaseWallet.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");const l=20;const isValidSharedWalletScript=e=>{switch(e.kind){case c.NativeScriptKind.RequireAllOf:case c.NativeScriptKind.RequireAnyOf:case c.NativeScriptKind.RequireNOf:return e.scripts.every(e=>e.kind===c.NativeScriptKind.RequireSignature);default:return false}};const createPersonalWallet=(e,t)=>{const r={__type:d.PublicCredentialsManagerType.BIP32_CREDENTIALS_MANAGER,addressDiscovery:t.addressDiscovery?t.addressDiscovery:new HDSequentialDiscovery(t.chainHistoryProvider,l),bip32Account:t.bip32Account};return new d.BaseWallet(e,{...t,publicCredentialsManager:r})};const createSharedWallet=(e,t)=>{if(!isValidSharedWalletScript(t.paymentScript)||!isValidSharedWalletScript(t.stakingScript))throw new Error('SharedWallet requires the scripts to be of type "RequireAllOfScript" or "RequireAnyOfScript" or "RequireAtLeastScript"');const r={__type:d.PublicCredentialsManagerType.SCRIPT_CREDENTIALS_MANAGER,paymentScript:t.paymentScript,stakingScript:t.stakingScript};return new d.BaseWallet(e,{...t,publicCredentialsManager:r})}},"../../node_modules/@cardano-sdk/wallet/dist/esm/cip30.js":(e,t,r)=>{"use strict";r.d(t,{createWalletApi:()=>createWalletApi});var s=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js");var i=r("../../node_modules/@cardano-sdk/dapp-connector/node_modules/ts-custom-error/dist/custom-error.mjs");var a;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["AddressNotPK"]=2]="AddressNotPK";e[e["UserDeclined"]=3]="UserDeclined";e[e["InvalidFormat"]=4]="InvalidFormat"})(a||(a={}));class DataSignError extends i.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var o;(function(e){e[e["ProofGeneration"]=1]="ProofGeneration";e[e["UserDeclined"]=2]="UserDeclined"})(o||(o={}));class TxSignError extends i.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var n;(function(e){e[e["Refused"]=1]="Refused";e[e["Failure"]=2]="Failure"})(n||(n={}));class TxSendError extends i.CustomError{constructor(e,t){super();this.code=e;this.info=t}}var d=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/Value.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/util/coalesceValueQuantities.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReader.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborReaderState.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/CBOR/CborTag.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/PaymentAddress.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/DRepID.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionUnspentOutput.js");var g=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var b=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/DelegationsAndRewards.js");var P=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var S=r("../../node_modules/@cardano-sdk/util/dist/esm/primitives.js");var C=r("../../node_modules/@cardano-sdk/input-selection/dist/esm/InputSelectionError.js");var k=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var j=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var x=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var T=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var E=r("../../node_modules/rxjs/dist/esm5/internal/observable/throwError.js");var A=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var I=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var B=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var F=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js");var M=r("../../node_modules/lodash/uniq.js");var R;(function(e){e["SignData"]="sign_data";e["SignTx"]="sign_tx";e["SubmitTx"]="submit_tx"})(R||(R={}));const signOrCancel=(e,{cancel$:t},r)=>(0,k.firstValueFrom)((0,j.race)((0,x.from)(e),t.pipe((0,T.mergeMap)(()=>(0,E.throwError)(r)))));const firstValueFromTimed=(e,t)=>(0,k.firstValueFrom)(e.pipe((0,A.timeout)({each:t,with:()=>(0,E.throwError)(()=>new s.ApiError(s.APIErrorCode.InternalError,"Timeout"))})));const waitForWalletStateSettle=(e,t=(0,d.Milliseconds)(12e4))=>firstValueFromTimed(e.syncStatus.isSettled$.pipe((0,I.filter)(e=>e)),t);const mapCallbackFailure=(e,t)=>{t.error(e);return false};const processTxInput=e=>{try{const t=c.TxCBOR(e);const r=c.TxCBOR.deserialize(t);return{cbor:t,tx:r}}catch{throw new s.ApiError(s.APIErrorCode.InvalidRequest,"Couldn't parse transaction. Expecting hex-encoded CBOR string.")}};const D=5000000n;const compareUtxos=(e,t)=>{const r=e[1].value.coins;const s=t[1].value.coins;if(r<s)return -1;if(r>s)return 1;return 0};const cardanoAddressToCbor=e=>{const t=l.Address.fromString(e);if(!t){throw new s.ApiError(s.APIErrorCode.InternalError,`could not transform address ${e} to CBOR`)}return t.toBytes()};const formatUnknownError=e=>{return(null==e?void 0:e.message)||"Unknown error"};const parseValueCbor=e=>{try{return u.Value.fromCbor(e)}catch{throw new s.ApiError(s.APIErrorCode.InvalidRequest,"could not parse Value")}};const dumbSelection=(e,t)=>{var r;const s=[];const i=[...(null===(r=t.assets)||void 0===r?void 0:r.entries())||[]];let a=false;for(const o of e){s.push(o);const n=(0,f.coalesceValueQuantities)(s.map(([e,{value:t}])=>t));a=n.coins>=t.coins&&i.every(([e,t])=>{var r;return((null===(r=n.assets)||void 0===r?void 0:r.get(e))||0n)>=t});if(a){break}}if(!a){return null}return s};const walletSelection=async(e,t)=>{try{const r=await (0,k.firstValueFrom)(t.addresses$);const{inputSelection:i}=await t.initializeTx({outputs:new Set([{address:r[0].address,value:e}])});return[...i.inputs]}catch(o){if(o instanceof C.InputSelectionError&&o.failure===C.InputSelectionFailure.UtxoBalanceInsufficient){return null}const a=formatUnknownError(o);throw new s.ApiError(s.APIErrorCode.InternalError,a)}};const selectUtxo=async(e,t,r)=>r?dumbSelection(await (0,k.firstValueFrom)(e.utxo.available$),t):await walletSelection(t,e);const getFilterAsBigNum=e=>{const t=new h.CborReader((0,S.HexBlob)(e));if(t.peekState()===m.CborReaderState.Tag&&t.peekTag()===p.CborTag.UnsignedBigNum){t.readTag();return BigInt(`0x${S.HexBlob.fromBytes(t.readByteString())}`).valueOf()}return t.readInt()};const getFilterAmount=e=>{try{const t=getFilterAsBigNum(e);if(t>D){throw new s.ApiError(s.APIErrorCode.InvalidRequest,"requested amount is too big")}return t}catch(r){throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}};const getSortedUtxos=async e=>{const t=await (0,k.firstValueFrom)(e);return t.sort(compareUtxos)};const addrToSignWith=e=>{try{return v.isRewardAccount(e)?_.RewardAccount(e):v.PaymentAddress(e)}catch{var t;const r=(0,P.Ed25519KeyHashHex)(e);const s=w.DRepID.cip129FromCredential({hash:r,type:l.CredentialType.KeyHash});const i=null===(t=w.DRepID.toAddress(s))||void 0===t?void 0:t.toAddress();if(!i){throw new DataSignError(a.AddressNotPK,"Invalid address")}return i.toBech32()}};const baseCip30WalletApi=(e,t,{logger:r})=>({getBalance:async()=>{r.debug("getting balance");try{const t=await (0,k.firstValueFrom)(e);await waitForWalletStateSettle(t);const s=await (0,k.firstValueFrom)(t.balance.utxo.available$);return u.Value.fromCore(s).toCbor()}catch(i){r.error(i);throw i}},getChangeAddress:async()=>{r.debug("getting changeAddress");try{const t=await (0,k.firstValueFrom)(e);const i=await (0,k.firstValueFrom)(t.addresses$);const a=i[0].address;if(a){return cardanoAddressToCbor(a)}r.error("could not get change address");throw new s.ApiError(s.APIErrorCode.InternalError,"could not get change address")}catch(o){r.error(o);if(o instanceof s.ApiError){throw o}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(o))}},getCollateral:async(t,{amount:i=new u.Value(D).toCbor()}={})=>{r.debug("getting collateral");const a=await (0,k.firstValueFrom)(e);await waitForWalletStateSettle(a);let o=await getSortedUtxos(a.utxo.unspendable$);if(0===o.length){return null}if(o.some(e=>e[1].value.assets&&e[1].value.assets.size>0)){throw new s.ApiError(s.APIErrorCode.Refused,"unspendable UTxOs must not contain assets when used as collateral")}if(i){const n=getFilterAmount(i);try{const d=[];let c=0n;for(const l of o){const f=l[1].value.coins;c+=f;d.push(l);if(c>=n)break}if(c<n){throw new s.ApiError(s.APIErrorCode.Refused,"not enough coins in configured collateral UTxOs")}o=d}catch(h){r.error(h);if(h instanceof s.ApiError){throw h}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(h))}}return o.map(e=>y.TransactionUnspentOutput.fromCore(e).toCbor())},getExtensions:async()=>{r.debug("getting enabled extensions");return Promise.resolve([{cip:95}])},getNetworkId:async()=>{r.debug("getting networkId");const t=await (0,k.firstValueFrom)(e);const s=await (0,k.firstValueFrom)(t.genesisParameters$);return s.networkId},getRewardAddresses:async()=>{r.debug("getting reward addresses");try{const t=await (0,k.firstValueFrom)(e);const i=await (0,k.firstValueFrom)(t.addresses$);const a=M(i.map(e=>e.rewardAccount));if(a&&0!==a.length){return a.map(e=>cardanoAddressToCbor(e))}throw new s.ApiError(s.APIErrorCode.InternalError,"could not get reward address")}catch(o){r.error(o);if(o instanceof s.ApiError){throw o}throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(o))}},getUnusedAddresses:async()=>{r.debug("getting unused addresses");const t=await (0,k.firstValueFrom)(e);const s=await t.getNextUnusedAddress();return s.map(e=>cardanoAddressToCbor(e.address))},getUsedAddresses:async()=>{r.debug("getting used addresses");const t=await (0,k.firstValueFrom)(e);const s=await (0,k.firstValueFrom)(t.addresses$);const i=await t.getNextUnusedAddress();const a=s.filter(e=>!i.includes(e));return a.map(e=>cardanoAddressToCbor(e.address))},getUtxos:async(t,r,s)=>{const i=await (0,k.firstValueFrom)(e);await waitForWalletStateSettle(i);let a=r?await selectUtxo(i,parseValueCbor(r).toCore(),!!s):await (0,k.firstValueFrom)(i.utxo.available$);if(!a)return null;if(s)a=a.slice(s.page*s.limit,s.page*s.limit+s.limit);return a.map(e=>y.TransactionUnspentOutput.fromCore(e).toCbor())},signData:async({sender:s},i,o)=>{r.debug("signData");const n=addrToSignWith(i);const d=(0,S.HexBlob)(o);const c=await t.signData({data:{addr:n,payload:d},sender:s,type:R.SignData}).catch(e=>mapCallbackFailure(e,r));if(c){const l=await (0,k.firstValueFrom)(e);return signOrCancel(l.signData({payload:d,sender:s,signWith:n}),c,()=>new DataSignError(a.UserDeclined,"user declined signing"))}r.debug("sign data declined");throw new DataSignError(a.UserDeclined,"user declined signing")},signTx:async({sender:s},i,a)=>{r.debug("signTx",i);const n=c.TxCBOR(i);const d=c.Transaction.fromCbor(n);const l=await (0,k.firstValueFrom)(e);const u=d.toCore();const f=await (0,F.requiresForeignSignatures)(u,l);if(!a&&f)throw new TxSignError(o.ProofGeneration,"The wallet does not have the secret key associated with some of the inputs or certificates.");const h=await t.signTx({data:u,sender:s,type:R.SignTx}).catch(e=>mapCallbackFailure(e,r));if(h){try{const{witness:{signatures:m}}=await signOrCancel(l.finalizeTx({signingContext:{sender:s},tx:n}),h,()=>new TxSignError(o.UserDeclined,"user declined signing tx"));if(a&&0===m.size){throw new TxSignError(o.ProofGeneration,"The wallet does not have the secret key associated with any of the inputs and certificates.")}const p=new Map([...m.entries()].filter(([e])=>!u.witness.signatures.has(e)));const v=g.TransactionWitnessSet.fromCore({signatures:p}).toCbor();return Promise.resolve(v)}catch(w){if(w instanceof TxSignError){throw w}{r.error(w);const _=formatUnknownError(w);throw new TxSignError(o.UserDeclined,_)}}}else{throw new TxSignError(o.UserDeclined,"user declined signing tx")}},submitTx:async(s,i)=>{r.debug("submitting tx");const{cbor:a,tx:o}=processTxInput(i);const d=await t.submitTx({data:o,type:R.SubmitTx}).catch(e=>mapCallbackFailure(e,r));if(d){try{const c=await (0,k.firstValueFrom)(e);await c.submitTx(a);return o.id}catch(u){r.error(u);const l=u instanceof Error?u.message:"unknown";throw new TxSendError(n.Failure,l)}}else{r.debug("transaction refused");throw new TxSendError(n.Refused,"transaction refused")}}});const getPubStakeKeys=async(e,t)=>{const r=await (0,k.firstValueFrom)(e);return(0,k.firstValueFrom)(r.publicStakeKeys$.pipe((0,B.map)(e=>e.filter(({credentialStatus:e})=>{const r=e===b.StakeCredentialStatus.Registered||e===b.StakeCredentialStatus.Registering?b.StakeCredentialStatus.Registered:b.StakeCredentialStatus.Unregistered;return t===r})),(0,B.map)(e=>e.map(({publicStakeKey:e})=>e))))};const extendedCip95WalletApi=(e,{logger:t})=>({getPubDRepKey:async()=>{t.debug("getting public DRep key");try{const r=await (0,k.firstValueFrom)(e);const i=await r.governance.getPubDRepKey();if(!i)throw new Error("Shared wallet does not support DRep key");return i}catch(a){t.error(a);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(a))}},getRegisteredPubStakeKeys:async()=>{t.debug("getting registered public stake keys");try{return await getPubStakeKeys(e,b.StakeCredentialStatus.Registered)}catch(r){t.error(r);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}},getUnregisteredPubStakeKeys:async()=>{t.debug("getting unregistered public stake keys");try{return await getPubStakeKeys(e,b.StakeCredentialStatus.Unregistered)}catch(r){t.error(r);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(r))}}});const extendedCip142WalletApi=(e,{logger:t})=>({getNetworkMagic:async()=>{try{const r=await (0,k.firstValueFrom)(e);const i=await (0,k.firstValueFrom)(r.genesisParameters$);return i.networkMagic}catch(a){t.error(a);throw new s.ApiError(s.APIErrorCode.InternalError,formatUnknownError(a))}}});const createWalletApi=(e,t,{logger:r})=>({...baseCip30WalletApi(e,t,{logger:r}),...extendedCip95WalletApi(e,{logger:r}),...extendedCip142WalletApi(e,{logger:r})})},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryCollectionStore:()=>InMemoryCollectionStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/delay.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var c=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var l;class InMemoryCollectionStore extends d.InMemoryStore{getAll(){if(0===this.docs.length||this.destroyed)return s.EMPTY;return(0,i.of)(this.docs)}setAll(e){if(!this.destroyed){this.docs=e;return(0,i.of)(void 0).pipe((0,a.delay)(1),(0,o.tap)(()=>__classPrivateFieldGet(this,l,"f").next(this.docs)))}return s.EMPTY}destroy(){__classPrivateFieldGet(this,l,"f").complete();return super.destroy()}constructor(){super();l.set(this,new n.Subject);this.docs=[];this.observeAll=(0,c.observeAll)(this,__classPrivateFieldGet(this,l,"f"))}}l=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryDocumentStore:()=>InMemoryDocumentStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var o;class InMemoryDocumentStore extends a.InMemoryStore{get(){if(!__classPrivateFieldGet(this,o,"f")||this.destroyed)return s.EMPTY;return(0,i.of)(__classPrivateFieldGet(this,o,"f"))}set(e){if(!this.destroyed){__classPrivateFieldSet(this,o,e,"f");return(0,i.of)(void 0)}return s.EMPTY}delete(){if(this.destroyed)return s.EMPTY;__classPrivateFieldSet(this,o,null,"f");return(0,i.of)(void 0)}constructor(){super(...arguments);o.set(this,null)}}o=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryKeyValueStore:()=>InMemoryKeyValueStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");class InMemoryKeyValueStore extends a.InMemoryCollectionStore{getValues(e){if(this.destroyed||0===e.length)return s.EMPTY;const t=[];for(const r of e){var a;const o=null===(a=this.docs.find(e=>e.key===r))||void 0===a?void 0:a.value;if(!o)return s.EMPTY;t.push(o)}return(0,i.of)(t)}setValue(e,t){if(this.destroyed)return s.EMPTY;const r=this.docs.findIndex(t=>t.key===e);if(r>=0)this.docs.splice(r,1);this.docs.push({key:e,value:t});return(0,i.of)(void 0)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryStore.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryStore:()=>InMemoryStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");class InMemoryStore{destroy(){this.destroyed=true;return(0,s.of)(void 0)}constructor(){this.destroyed=false}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js":(e,t,r)=>{"use strict";r.d(t,{InMemoryAddressesStore:()=>InMemoryAddressesStore,InMemoryAssetsStore:()=>InMemoryAssetsStore,InMemoryDelegationPortfolioStore:()=>InMemoryDelegationPortfolioStore,InMemoryEraSummariesStore:()=>InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>InMemoryInFlightTransactionsStore,InMemoryPolicyIdsStore:()=>InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>InMemoryStakePoolsStore,InMemoryTipStore:()=>InMemoryTipStore,InMemoryTransactionsStore:()=>InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>InMemoryVolatileTransactionsStore,createInMemoryWalletStores:()=>createInMemoryWalletStores});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");class InMemoryTipStore extends n.InMemoryDocumentStore{}class InMemoryPolicyIdsStore extends n.InMemoryDocumentStore{}class InMemoryProtocolParametersStore extends n.InMemoryDocumentStore{}class InMemoryGenesisParametersStore extends n.InMemoryDocumentStore{}class InMemoryEraSummariesStore extends n.InMemoryDocumentStore{}class InMemoryDelegationPortfolioStore extends n.InMemoryDocumentStore{}class InMemoryAssetsStore extends n.InMemoryDocumentStore{}class InMemoryAddressesStore extends n.InMemoryDocumentStore{}class InMemoryInFlightTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryVolatileTransactionsStore extends n.InMemoryDocumentStore{}class InMemorySignedTransactionsStore extends n.InMemoryDocumentStore{}class InMemoryTransactionsStore extends o.InMemoryCollectionStore{}class InMemoryUtxoStore extends o.InMemoryCollectionStore{}class InMemoryUnspendableUtxoStore extends o.InMemoryCollectionStore{}class InMemoryRewardsHistoryStore extends d.InMemoryKeyValueStore{}class InMemoryRewardAccountInfoStore extends d.InMemoryKeyValueStore{}class InMemoryStakePoolsStore extends d.InMemoryKeyValueStore{}const createInMemoryWalletStores=()=>({addresses:new InMemoryAddressesStore,assets:new InMemoryAssetsStore,delegationPortfolio:new InMemoryDelegationPortfolioStore,destroy(){if(!this.destroyed){this.destroyed=true;return(0,s.combineLatest)([this.addresses.destroy(),this.assets.destroy(),this.genesisParameters.destroy(),this.protocolParameters.destroy(),this.eraSummaries.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy(),this.tip.destroy(),this.transactions.destroy(),this.inFlightTransactions.destroy(),this.volatileTransactions.destroy(),this.utxo.destroy(),this.policyIds.destroy()]).pipe((0,i.map)(()=>void 0))}return a.EMPTY},destroyed:false,eraSummaries:new InMemoryEraSummariesStore,genesisParameters:new InMemoryGenesisParametersStore,inFlightTransactions:new InMemoryInFlightTransactionsStore,policyIds:new InMemoryPolicyIdsStore,protocolParameters:new InMemoryProtocolParametersStore,rewardAccountInfo:new InMemoryRewardAccountInfoStore,rewardsHistory:new InMemoryRewardsHistoryStore,signedTransactions:new InMemorySignedTransactionsStore,stakePools:new InMemoryStakePoolsStore,tip:new InMemoryTipStore,transactions:new InMemoryTransactionsStore,unspendableUtxo:new InMemoryUnspendableUtxoStore,utxo:new InMemoryUtxoStore,volatileTransactions:new InMemoryVolatileTransactionsStore})},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/index.js":(e,t,r)=>{"use strict";r.r(t);r.d(t,{InMemoryAddressesStore:()=>o.InMemoryAddressesStore,InMemoryAssetsStore:()=>o.InMemoryAssetsStore,InMemoryCollectionStore:()=>i.InMemoryCollectionStore,InMemoryDelegationPortfolioStore:()=>o.InMemoryDelegationPortfolioStore,InMemoryDocumentStore:()=>s.InMemoryDocumentStore,InMemoryEraSummariesStore:()=>o.InMemoryEraSummariesStore,InMemoryGenesisParametersStore:()=>o.InMemoryGenesisParametersStore,InMemoryInFlightTransactionsStore:()=>o.InMemoryInFlightTransactionsStore,InMemoryKeyValueStore:()=>a.InMemoryKeyValueStore,InMemoryPolicyIdsStore:()=>o.InMemoryPolicyIdsStore,InMemoryProtocolParametersStore:()=>o.InMemoryProtocolParametersStore,InMemoryRewardAccountInfoStore:()=>o.InMemoryRewardAccountInfoStore,InMemoryRewardsHistoryStore:()=>o.InMemoryRewardsHistoryStore,InMemorySignedTransactionsStore:()=>o.InMemorySignedTransactionsStore,InMemoryStakePoolsStore:()=>o.InMemoryStakePoolsStore,InMemoryStakeSummaryStore:()=>InMemoryStakeSummaryStore,InMemorySupplySummaryStore:()=>InMemorySupplySummaryStore,InMemoryTipStore:()=>o.InMemoryTipStore,InMemoryTransactionsStore:()=>o.InMemoryTransactionsStore,InMemoryUnspendableUtxoStore:()=>o.InMemoryUnspendableUtxoStore,InMemoryUtxoStore:()=>o.InMemoryUtxoStore,InMemoryVolatileTransactionsStore:()=>o.InMemoryVolatileTransactionsStore,PouchDbAddressesStore:()=>h.PouchDbAddressesStore,PouchDbAssetsStore:()=>h.PouchDbAssetsStore,PouchDbCollectionStore:()=>l.PouchDbCollectionStore,PouchDbDelegationPortfolioStore:()=>h.PouchDbDelegationPortfolioStore,PouchDbDocumentStore:()=>u.PouchDbDocumentStore,PouchDbEraSummariesStore:()=>h.PouchDbEraSummariesStore,PouchDbGenesisParametersStore:()=>h.PouchDbGenesisParametersStore,PouchDbInFlightTransactionsStore:()=>h.PouchDbInFlightTransactionsStore,PouchDbKeyValueStore:()=>f.PouchDbKeyValueStore,PouchDbPolicyIdsStore:()=>h.PouchDbPolicyIdsStore,PouchDbProtocolParametersStore:()=>h.PouchDbProtocolParametersStore,PouchDbRewardAccountInfoStore:()=>h.PouchDbRewardAccountInfoStore,PouchDbRewardsHistoryStore:()=>h.PouchDbRewardsHistoryStore,PouchDbSignedTransactionsStore:()=>h.PouchDbSignedTransactionsStore,PouchDbStakePoolsStore:()=>h.PouchDbStakePoolsStore,PouchDbStakeSummaryStore:()=>PouchDbStakeSummaryStore,PouchDbSupplySummaryStore:()=>PouchDbSupplySummaryStore,PouchDbTipStore:()=>h.PouchDbTipStore,PouchDbTransactionsStore:()=>h.PouchDbTransactionsStore,PouchDbUtxoStore:()=>h.PouchDbUtxoStore,PouchDbVolatileTransactionsStore:()=>h.PouchDbVolatileTransactionsStore,createInMemorySupplyDistributionStores:()=>createInMemorySupplyDistributionStores,createInMemoryWalletStores:()=>o.createInMemoryWalletStores,createPouchDbSupplyDistributionStores:()=>createPouchDbSupplyDistributionStores,createPouchDbWalletStores:()=>h.createPouchDbWalletStores});var s=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryDocumentStore.js");var i=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryCollectionStore.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/InMemoryKeyValueStore.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/inMemoryStores/inMemoryWalletStores.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");class InMemoryStakeSummaryStore extends s.InMemoryDocumentStore{}class InMemorySupplySummaryStore extends s.InMemoryDocumentStore{}const createInMemorySupplyDistributionStores=()=>({destroy(){if(!this.destroyed){this.destroyed=true;return(0,n.combineLatest)([this.stake.destroy(),this.lovelaceSupply.destroy()]).pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new InMemorySupplySummaryStore,stake:new InMemoryStakeSummaryStore});var l=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js");var u=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js");var f=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js");var h=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/pouchDbWalletStores.js");class PouchDbStakeSummaryStore extends u.PouchDbDocumentStore{}class PouchDbSupplySummaryStore extends u.PouchDbDocumentStore{}const createPouchDbSupplyDistributionStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const s=`${r}SupplyDistribution`;return{destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb SupplyDistributionStores...");return this.lovelaceSupply.destroy().pipe((0,d.map)(()=>void 0))}return c.EMPTY},destroyed:false,lovelaceSupply:new PouchDbSupplySummaryStore(s,"lovelaceSupply",t),stake:new PouchDbStakeSummaryStore(s,"stake",t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbCollectionStore:()=>PouchDbCollectionStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js");var c=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var l=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var u,f;class PouchDbCollectionStore extends n.PouchDbStore{getAll(){if(this.destroyed)return s.EMPTY;return new i.Observable(e=>{this.fetchAllDocs({include_docs:true}).then(t=>{const r=t.map(({doc:e})=>(0,c.sanitizePouchDbDoc)(e));if(r.length>0)e.next(r);e.complete()}).catch(e.complete.bind(e))})}setAll(e){if(this.destroyed)return s.EMPTY;return(0,a.from)(this.idle=this.idle.then(async()=>{try{const t=e.map(e=>({...this.toPouchDbDoc(e),_id:__classPrivateFieldGet(this,u,"f").call(this,e)}));const r=await this.fetchAllDocs();const s=t.map(e=>{const t=r.find(t=>t.id===e._id);if(!t)return e;return{...e,_rev:t.value.rev}});const i=r.filter(e=>!t.some(t=>t._id===e.id));await this.db.bulkDocs(i.map(({id:e,value:{rev:t}})=>({_deleted:true,_id:e,_rev:t})));await this.db.bulkDocs(s);__classPrivateFieldGet(this,f,"f").next(e)}catch(a){this.logger.error(`PouchDbCollectionStore(${this.dbName}): failed to setAll`,e,a)}}))}destroy(){__classPrivateFieldGet(this,f,"f").complete();return super.destroy()}constructor({dbName:e,computeDocId:t},r){super(e,r);u.set(this,void 0);f.set(this,new o.Subject);this.observeAll=(0,d.observeAll)(this,__classPrivateFieldGet(this,f,"f"));__classPrivateFieldSet(this,u,null!=t?t:()=>(0,l["default"])(),"f")}}u=new WeakMap,f=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbDocumentStore:()=>PouchDbDocumentStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d;class PouchDbDocumentStore extends o.PouchDbStore{get(){if(this.destroyed)return s.EMPTY;return new i.Observable(e=>{this.db.get(__classPrivateFieldGet(this,d,"f")).then(t=>{e.next((0,n.sanitizePouchDbDoc)(t));e.complete()}).catch(e.complete.bind(e))})}set(e){return this.forcePut(__classPrivateFieldGet(this,d,"f"),e)}delete(){if(this.destroyed)return s.EMPTY;return(0,a.from)((async()=>{const e=await this.getRev(__classPrivateFieldGet(this,d,"f"));if(!e){return}await this.db.remove({_id:__classPrivateFieldGet(this,d,"f"),_rev:e})})())}constructor(e,t,r){super(e,r);d.set(this,void 0);__classPrivateFieldSet(this,d,t,"f")}}d=new WeakMap},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbKeyValueStore:()=>PouchDbKeyValueStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/Observable.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");class PouchDbKeyValueStore extends o.PouchDbStore{setAll(e){if(this.destroyed)return s.EMPTY;return(0,i.from)(this.idle=this.idle.then(async()=>{try{await this.clearDB();await this.db.bulkDocs(e.map(({key:e,value:t})=>({...this.toPouchDbDoc(t),_id:e})))}catch(t){this.logger.error(`PouchDbDocumentStore(${this.dbName}): failed to setAll`,e,t)}}))}getValues(e){if(this.destroyed)return s.EMPTY;return new a.Observable(t=>{this.db.bulkGet({docs:e.map(e=>({id:e}))}).then(({results:e})=>{const r=[];for(const{docs:s}of e){if(1!==s.length||"error"in s[0]){return t.complete()}r.push((0,n.sanitizePouchDbDoc)(s[0].ok))}t.next(r);t.complete()}).catch(t.complete.bind(t))})}setValue(e,t){return this.forcePut(e,t)}constructor(e,t){super(e,t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbStore.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbStore:()=>PouchDbStore});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var a=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js");var o=r("../../node_modules/pouchdb/lib/index-browser.es.js");const n=100;class PouchDbStore{async clearDB(){const e=await this.fetchAllDocs();await this.db.bulkDocs(e.map(e=>({_deleted:true,_id:e.id,_rev:e.value.rev})))}destroy(){if(!this.destroyed){this.destroyed=true;return(0,s.from)(this.db.destroy())}return i.EMPTY}toPouchDbDoc(e){return(0,a.toPouchDbDoc)(e)}async getRev(e){const t=await this.db.get(e).catch(()=>void 0);return null==t?void 0:t._rev}async fetchAllDocs(e){const t=await this.db.allDocs({...e,limit:n});if(t&&t.rows.length>0){return[...t.rows,...await this.fetchAllDocs({...e,skip:1,startkey:t.rows[t.rows.length-1].id})]}return t.rows||[]}forcePut(e,t){if(this.destroyed)return i.EMPTY;const r=this.toPouchDbDoc(t);return(0,s.from)(this.idle=this.idle.then(async()=>{const t={_id:e,_rev:await this.getRev(e),...r};try{await this.db.put(t,{force:true})}catch(s){this.logger.warn(`PouchDbStore(${this.dbName}): failed to forcePut`,t,s)}}).catch(()=>void 0))}constructor(e,t){this.dbName=e;this.destroyed=false;this.idle=Promise.resolve();this.logger=t;this.db=new o["default"](e,{auto_compaction:true})}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/pouchDbWalletStores.js":(e,t,r)=>{"use strict";r.d(t,{PouchDbAddressesStore:()=>PouchDbAddressesStore,PouchDbAssetsStore:()=>PouchDbAssetsStore,PouchDbDelegationPortfolioStore:()=>PouchDbDelegationPortfolioStore,PouchDbEraSummariesStore:()=>PouchDbEraSummariesStore,PouchDbGenesisParametersStore:()=>PouchDbGenesisParametersStore,PouchDbInFlightTransactionsStore:()=>PouchDbInFlightTransactionsStore,PouchDbPolicyIdsStore:()=>PouchDbPolicyIdsStore,PouchDbProtocolParametersStore:()=>PouchDbProtocolParametersStore,PouchDbRewardAccountInfoStore:()=>PouchDbRewardAccountInfoStore,PouchDbRewardsHistoryStore:()=>PouchDbRewardsHistoryStore,PouchDbSignedTransactionsStore:()=>PouchDbSignedTransactionsStore,PouchDbStakePoolsStore:()=>PouchDbStakePoolsStore,PouchDbTipStore:()=>PouchDbTipStore,PouchDbTransactionsStore:()=>PouchDbTransactionsStore,PouchDbUtxoStore:()=>PouchDbUtxoStore,PouchDbVolatileTransactionsStore:()=>PouchDbVolatileTransactionsStore,createPouchDbWalletStores:()=>createPouchDbWalletStores});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var o=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbCollectionStore.js");var n=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbDocumentStore.js");var d=r("../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/PouchDbKeyValueStore.js");class PouchDbTipStore extends n.PouchDbDocumentStore{}class PouchDbProtocolParametersStore extends n.PouchDbDocumentStore{}class PouchDbGenesisParametersStore extends n.PouchDbDocumentStore{}class PouchDbEraSummariesStore extends n.PouchDbDocumentStore{}class PouchDbDelegationPortfolioStore extends n.PouchDbDocumentStore{}class PouchDbAssetsStore extends n.PouchDbDocumentStore{}class PouchDbAddressesStore extends n.PouchDbDocumentStore{}class PouchDbInFlightTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbVolatileTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbPolicyIdsStore extends n.PouchDbDocumentStore{}class PouchDbSignedTransactionsStore extends n.PouchDbDocumentStore{}class PouchDbTransactionsStore extends o.PouchDbCollectionStore{}class PouchDbUtxoStore extends o.PouchDbCollectionStore{}class PouchDbRewardsHistoryStore extends d.PouchDbKeyValueStore{}class PouchDbRewardAccountInfoStore extends d.PouchDbKeyValueStore{}class PouchDbStakePoolsStore extends d.PouchDbKeyValueStore{}const createPouchDbWalletStores=(e,{logger:t})=>{const r=e.replace(/[^\da-z]/gi,"");const o=`${r}Docs`;return{addresses:new PouchDbAddressesStore(o,"addresses",t),assets:new PouchDbAssetsStore(o,"assets",t),delegationPortfolio:new PouchDbDelegationPortfolioStore(o,"delegationPortfolio",t),destroy(){if(!this.destroyed){this.destroyed=true;t.debug("Destroying PouchDb WalletStores...");const e=this.tip.destroy();return(0,s.combineLatest)([e,this.transactions.destroy(),this.utxo.destroy(),this.unspendableUtxo.destroy(),this.rewardsHistory.destroy(),this.rewardAccountInfo.destroy(),this.stakePools.destroy()]).pipe((0,i.map)(()=>void 0))}return a.EMPTY},destroyed:false,eraSummaries:new PouchDbEraSummariesStore(o,"EraSummaries",t),genesisParameters:new PouchDbGenesisParametersStore(o,"genesisParameters",t),inFlightTransactions:new PouchDbInFlightTransactionsStore(o,"transactionsInFlight_v2",t),policyIds:new PouchDbPolicyIdsStore(o,"policyIds",t),protocolParameters:new PouchDbProtocolParametersStore(o,"protocolParameters",t),rewardAccountInfo:new PouchDbRewardAccountInfoStore(`${r}RewardAccountInfo`,t),rewardsHistory:new PouchDbRewardsHistoryStore(`${r}RewardsHistory`,t),signedTransactions:new PouchDbSignedTransactionsStore(o,"signedTransactions",t),stakePools:new PouchDbStakePoolsStore(`${r}StakePools`,t),tip:new PouchDbTipStore(o,"tip",t),transactions:new PouchDbTransactionsStore({computeDocId:({blockHeader:{blockNo:e},index:t})=>(1e5*e+t).toString(),dbName:`${r}Transactions_v2`},t),unspendableUtxo:new PouchDbUtxoStore({dbName:`${r}UnspendableUtxo`},t),utxo:new PouchDbUtxoStore({dbName:`${r}Utxo_v2`},t),volatileTransactions:new PouchDbVolatileTransactionsStore(o,"volatileTransactions_v3",t)}}},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/pouchDbStores/util.js":(e,t,r)=>{"use strict";r.d(t,{sanitizePouchDbDoc:()=>sanitizePouchDbDoc,toPouchDbDoc:()=>toPouchDbDoc});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var i=r("../../node_modules/lodash/omit.js");const a=["_id","_rev","_attachments","_conflicts","_revisions","_revs_info"];const o="transformed_type_";const n="transformed_key_";const d={serializeKey:e=>{if(e.startsWith("_")){return`${n}${e}`}return e},transformationTypeKey:o};const c={deserializeKey:e=>{if(e.startsWith(n)){return e.slice(n.length)}return e},transformationTypeKey:o};const toPouchDbDoc=e=>{if(Array.isArray(e)){const t=e.map(e=>(0,s.toSerializableObject)(e,d));return{[o]:"Array",value:t}}return(0,s.toSerializableObject)(e,d)};const fromPouchDbDoc=e=>{if("object"==typeof e){const t=e;if("Array"===t[o])return t.value.map(e=>(0,s.fromSerializableObject)(e,c))}return(0,s.fromSerializableObject)(e,c)};const sanitizePouchDbDoc=e=>fromPouchDbDoc(i(e,a))},"../../node_modules/@cardano-sdk/wallet/dist/esm/persistence/util.js":(e,t,r)=>{"use strict";r.d(t,{observeAll:()=>observeAll});var s=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/observable/race.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");const observeAll=(e,t)=>()=>{if(e.destroyed)return s.EMPTY;return(0,i.race)((0,a.concat)(e.getAll().pipe((0,o.defaultIfEmpty)([])),t),t)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/WalletUtil.js":(e,t,r)=>{"use strict";r.d(t,{combineInputResolvers:()=>combineInputResolvers,createInputResolver:()=>createInputResolver,createWalletUtil:()=>createWalletUtil,requiresForeignSignatures:()=>requiresForeignSignatures});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/Ed25519e/Ed25519PublicKey.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var a=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var o=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var n=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/StakePool/primitives.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Governance.js");var c=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/ownSignatureKeyPaths.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var u=r("../../node_modules/@cardano-sdk/wallet/dist/esm/types.js");var f=r("../../node_modules/@cardano-sdk/tx-construction/dist/esm/output-validation/outputValidator.js");var h=r("../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js");var m=r("../../node_modules/lodash/uniqBy.js");const createInputResolver=({utxo:e,transactions:t})=>{return{async resolveInput(r,s){const i=await (0,l.firstValueFrom)(t.history$);const a=await (0,l.firstValueFrom)(e.available$,{defaultValue:[]});const o=await (0,l.firstValueFrom)(t.outgoing.signed$,{defaultValue:[]});const n=o.flatMap(({tx:e},t)=>e.body.outputs.filter((r,s)=>{const i=o.some(({tx:{body:r}},i)=>t!==i&&r.inputs.some(t=>(0,h.txInEquals)(t,{index:s,txId:e.id})));return!i}).map(t=>{const r={address:t.address,index:e.body.outputs.indexOf(t),txId:e.id};return[r,t]}));const d=[...a,...n].find(([e])=>(0,h.txInEquals)(e,r));if(d)return d[1];if(null==s?void 0:s.hints){var c,u;const f=null==s?void 0:null===(c=s.hints)||void 0===c?void 0:null===(u=c.transactions)||void 0===u?void 0:u.find(e=>e.id===r.txId);if(f&&f.body.outputs.length>r.index){return f.body.outputs[r.index]}}const m=i.findLast(e=>e.id===r.txId);if(m&&m.body.outputs.length>r.index){return m.body.outputs[r.index]}return null}}};const createBackendInputResolver=e=>{const t=new Map;const fetchAndCacheTransaction=async r=>{if(t.has(r)){return t.get(r)}const s=await e.transactionsByHashes({ids:[r]});if(s.length>0){t.set(r,s[0]);return s[0]}return null};return{async resolveInput(e,r){var s;if((null==r?void 0:r.hints)&&(null===(s=r.hints)||void 0===s?void 0:s.transactions)){for(const i of r.hints.transactions)t.set(i.id,i)}const a=await fetchAndCacheTransaction(e.txId);if(!a)return null;return a.body.outputs.length>e.index?a.body.outputs[e.index]:null}}};const combineInputResolvers=(...e)=>({async resolveInput(t,r){for(const s of e){const i=await s.resolveInput(t,r);if(i)return i}return null}});const createWalletUtil=e=>({...(0,f.createOutputValidator)({protocolParameters:()=>(0,l.firstValueFrom)(e.protocolParameters$)}),...e.chainHistoryProvider?combineInputResolvers(createInputResolver(e),createBackendInputResolver(e.chainHistoryProvider)):createInputResolver(e)});const hasForeignInputs=({body:{inputs:e,collaterals:t=[]}},r)=>[...e,...t].some(e=>r.every(t=>!(0,h.txInEquals)(e,t[0])));const hasCommitteeCertificates=({certificates:e})=>(e||[]).some(e=>e.__typename===i.CertificateType.AuthorizeCommitteeHot||e.__typename===i.CertificateType.ResignCommitteeCold);const scriptWalletHasForeignCertificates=(e,t)=>{if(!t){return false}const r=a.RewardAccount.toHash(e);for(const s of t){switch(s.__typename){case i.CertificateType.Registration:case i.CertificateType.StakeRegistration:case i.CertificateType.GenesisKeyDelegation:continue;case i.CertificateType.StakeDeregistration:case i.CertificateType.StakeDelegation:case i.CertificateType.Unregistration:case i.CertificateType.VoteDelegation:case i.CertificateType.StakeVoteDelegation:case i.CertificateType.StakeRegistrationDelegation:case i.CertificateType.VoteRegistrationDelegation:case i.CertificateType.MIR:case i.CertificateType.StakeVoteRegistrationDelegation:if(!s.stakeCredential||s.stakeCredential.type!==o.CredentialType.ScriptHash||s.stakeCredential.hash!==r){return true}break;case i.CertificateType.PoolRegistration:{const d=s.poolParameters.owners.find(t=>t===e);if(!d){return true}break}case i.CertificateType.PoolRetirement:{const c=n.PoolId.fromKeyHash(a.RewardAccount.toHash(e));if(s.poolId!==c){return true}}break;case i.CertificateType.RegisterDelegateRepresentative:case i.CertificateType.UnregisterDelegateRepresentative:case i.CertificateType.UpdateDelegateRepresentative:if(!s.dRepCredential||s.dRepCredential.type!==o.CredentialType.ScriptHash||s.dRepCredential.hash!==r){return true}break;case i.CertificateType.AuthorizeCommitteeHot:case i.CertificateType.ResignCommitteeCold:return true}}return false};const scriptWalletHasForeignVotingProcedures=(e,t)=>{if(!t){return false}for(const r of t){switch(r.voter.__typename){case d.VoterType.ccHotKeyHash:case d.VoterType.ccHotScriptHash:case d.VoterType.stakePoolKeyHash:case d.VoterType.dRepKeyHash:return true;case d.VoterType.dRepScriptHash:{const s=a.RewardAccount.toHash(e);if(r.voter.credential.hash!==s){return true}}}}return false};const requiresForeignSignatures=async(e,t)=>{const r=await (0,l.firstValueFrom)(t.utxo.total$);const i=await (0,l.firstValueFrom)(t.addresses$);const o=i.some(e=>(0,u.isScriptAddress)(e));if(o){const d=i.map(e=>e);return hasForeignInputs(e,r)||scriptWalletHasForeignCertificates(d[0].rewardAccount,e.body.certificates)||scriptWalletHasForeignVotingProcedures(d[0].rewardAccount,e.body.votingProcedures)}const f=i.map(e=>e);const h=m(f,"rewardAccount").map(e=>{const t=a.RewardAccount.toHash(e.rewardAccount);return{derivationPath:e.stakeKeyDerivationPath,poolId:n.PoolId.fromKeyHash(t),rewardAccount:e.rewardAccount,stakeKeyHash:t}}).filter(e=>null!==e.derivationPath);const p=await t.governance.getPubDRepKey();const v=p?(await s.Ed25519PublicKey.fromHex(p).hash()).hex():void 0;return hasForeignInputs(e,r)||c.checkStakeCredentialCertificates(h,e.body).requiresForeignSignatures||v&&c.getDRepCredentialKeyPaths({dRepKeyHash:v,txBody:e.body}).requiresForeignSignatures||v&&c.getVotingProcedureKeyPaths({dRepKeyHash:v,groupedAddresses:f,txBody:e.body}).requiresForeignSignatures||hasCommitteeCertificates(e.body)}},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/equals.js":(e,t,r)=>{"use strict";r.d(t,{delegatedStakeEquals:()=>delegatedStakeEquals,epochInfoEquals:()=>epochInfoEquals,groupedAddressesEquals:()=>groupedAddressesEquals,signedTxsEquals:()=>signedTxsEquals,tipEquals:()=>tipEquals,transactionsEquals:()=>transactionsEquals,txEquals:()=>txEquals,txInEquals:()=>txInEquals,utxoEquals:()=>utxoEquals});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");const tipEquals=(e,t)=>e.hash===t.hash;const txEquals=(e,t)=>e.id===t.id;const sameSortedArrayItems=(e,t,r)=>{if(e.length!==t.length)return false;for(const[s,i]of e.entries())if(!r(i,t[s])){return false}return true};const transactionsEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,txEquals)};const txInEquals=(e,t)=>e.txId===t.txId&&e.index===t.index;const utxoEquals=(e,t)=>{if(e===t)return true;return sameSortedArrayItems(e,t,([e],[t])=>txInEquals(e,t))};const eraSummariesEquals=(e,t)=>sameArrayItems(e,t,(e,t)=>e.start.slot===t.start.slot);const groupedAddressEquals=(e,t)=>e.address===t.address;const groupedAddressesEquals=(e,t)=>(0,s.sameArrayItems)(e,t,groupedAddressEquals);const epochInfoEquals=(e,t)=>e.epochNo===t.epochNo;const delegatedStakeEquals=(e,t)=>e.pool.id===t.pool.id&&e.stake===t.stake&&e.percentage===t.percentage;const signedTxEquals=(e,t)=>e.tx.id===t.tx.id;const signedTxsEquals=(e,t)=>(0,s.sameArrayItems)(e,t,signedTxEquals)},"../../node_modules/@cardano-sdk/wallet/dist/esm/services/util/pollProvider.js":(e,t,r)=>{"use strict";r.d(t,{pollProvider:()=>pollProvider});var s=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/poll.js");var i=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");const pollProvider=e=>(0,s.poll)({...e,retryBackoffConfig:{...e.retryBackoffConfig,shouldRetry:e=>{if(e instanceof i.ProviderError){return![i.ProviderFailure.NotImplemented,i.ProviderFailure.BadRequest].includes(e.reason)}return false}}}).pipe((0,a.catchError)(e=>{if(e instanceof i.ProviderError){throw e}throw new i.ProviderError(i.ProviderFailure.Unknown,e)}))},"../../node_modules/@cardano-sdk/wallet/dist/esm/types.js":(e,t,r)=>{"use strict";r.d(t,{isKeyHashAddress:()=>isKeyHashAddress,isScriptAddress:()=>isScriptAddress,isTxBodyWithHash:()=>isTxBodyWithHash});const isScriptAddress=e=>"scripts"in e;const isKeyHashAddress=e=>!isScriptAddress(e);const isTxBodyWithHash=e=>"object"==typeof e&&"hash"in e&&"body"in e},"../../node_modules/@cardano-sdk/web-extension/dist/esm/cip30/initializeBackgroundScript.js":(e,t,r)=>{"use strict";r.d(t,{initializeBackgroundScript:()=>initializeBackgroundScript});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js");var i=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const a=["haveAccess","requestAccess","revokeAccess"];const consumeRemoteAuthenticatorApi=({walletName:e},t)=>consumeRemoteApi({baseChannel:authenticatorChannel(e),properties:Object.fromEntries(a.map(e=>[e,RemoteApiPropertyType.MethodReturningPromise]))},t);const walletApiChannel=e=>`wallet-api-${e}`;const util_authenticatorChannel=e=>`authenticator-${e}`;const cloneSender=({frameId:e,id:t,tab:r,url:s})=>({frameId:e,id:t,tab:r?{active:r.active,attention:r.attention,audible:r.audible,autoDiscardable:r.autoDiscardable,cookieStoreId:r.cookieStoreId,discarded:r.discarded,favIconUrl:r.favIconUrl,height:r.height,hidden:r.hidden,highlighted:r.highlighted,id:r.id,incognito:r.incognito,index:r.index,isArticle:r.isArticle,isInReaderMode:r.isInReaderMode,lastAccessed:r.lastAccessed,mutedInfo:r.mutedInfo?{...r.mutedInfo}:void 0,openerTabId:r.openerTabId,pendingUrl:r.pendingUrl,pinned:r.pinned,sessionId:r.sessionId,sharingState:r.sharingState?{...r.sharingState}:void 0,status:r.status,successorTabId:r.successorTabId,title:r.title,url:r.url,width:r.width,windowId:r.windowId}:void 0,url:s});var o=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");const exposeAuthenticatorApi_authenticatorChannel=e=>`authenticator-${e}`;const exposeAuthenticatorApi=({walletName:e},t)=>(0,s.exposeApi)({api$:(0,o.of)(t.authenticator),baseChannel:exposeAuthenticatorApi_authenticatorChannel(e),properties:Object.fromEntries(a.map(e=>[e,{propType:i.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e},t)=>{if(!t)throw new Error("Unknown sender");return{args:[cloneSender(t)],method:e}}}}]))},t);var n=r("../../node_modules/@cardano-sdk/dapp-connector/dist/esm/errors/ApiError.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var d,c,l,u,f,h,m,p;const v={30:["getNetworkId","getUtxos","getCollateral","getBalance","getExtensions","getUsedAddresses","getUnusedAddresses","getChangeAddress","getRewardAddresses","signTx","signData","submitTx"],95:["getRegisteredPubStakeKeys","getUnregisteredPubStakeKeys","getPubDRepKey","signData"],142:["getNetworkMagic"]};const _=Object.values(v).flat();class Cip30Wallet{async isEnabled(){return __classPrivateFieldGet(this,u,"f").haveAccess()}async enable(e){__classPrivateFieldGet(this,d,"m",h).call(this,null==e?void 0:e.extensions);if(await __classPrivateFieldGet(this,u,"f").requestAccess()){var t;__classPrivateFieldGet(this,c,"f").debug(`${location.origin} has been granted access to wallet api`);const r=null==e?void 0:null===(t=e.extensions)||void 0===t?void 0:t.filter(({cip:e})=>this.supportedExtensions.some(({cip:t})=>t===e));return __classPrivateFieldGet(this,d,"m",p).call(this,r)}__classPrivateFieldGet(this,c,"f").debug(`${location.origin} not authorized to access wallet api`);throw new ApiError(APIErrorCode.Refused,"wallet not authorized.")}constructor(e,{api:t,authenticator:r,logger:s}){d.add(this);this.apiVersion="0.1.0";this.supportedExtensions=[{cip:95},{cip:142}];c.set(this,void 0);l.set(this,void 0);u.set(this,void 0);f.set(this,void 0);this.icon=e.icon;this.name=e.walletName;__classPrivateFieldSet(this,l,t,"f");__classPrivateFieldSet(this,c,s,"f");__classPrivateFieldSet(this,u,r,"f");__classPrivateFieldSet(this,f,e.cip30ApiDeviations,"f");this.enable=this.enable.bind(this);this.isEnabled=this.isEnabled.bind(this);if(e.supportedExtensions)this.supportedExtensions=e.supportedExtensions}}c=new WeakMap,l=new WeakMap,u=new WeakMap,f=new WeakMap,d=new WeakSet,h=function _Cip30Wallet_validateExtensions(e=[]){if(!Array.isArray(e)||e.some(e=>!e||"object"!=typeof e||!e.cip||Number.isNaN(Number(e.cip)))){__classPrivateFieldGet(this,c,"f").debug(`Invalid extensions: ${e}`);throw new n.ApiError(n.APIErrorCode.InvalidRequest,`invalid extensions ${e}`)}},m=async function _Cip30Wallet_wrapGetCollateral(e){var t;const r=await __classPrivateFieldGet(this,l,"f").getCollateral(e);return(null===(t=__classPrivateFieldGet(this,f,"f"))||void 0===t?void 0:t.getCollateralEmptyArray)?null!=r?r:[]:r},p=function _Cip30Wallet_wrapAndEnableApi(e){var t;const r=__classPrivateFieldGet(this,l,"f");const s={experimental:{getCollateral:async e=>__classPrivateFieldGet(this,d,"m",m).call(this,e),...(null===(t=__classPrivateFieldGet(this,f,"f"))||void 0===t?void 0:t.onOffDummyMethods)&&{off:()=>void 0,on:()=>void 0}},getBalance:()=>r.getBalance(),getChangeAddress:()=>r.getChangeAddress(),getCollateral:e=>__classPrivateFieldGet(this,d,"m",m).call(this,e),getExtensions:()=>Promise.resolve(e||[]),getNetworkId:()=>r.getNetworkId(),getRewardAddresses:()=>r.getRewardAddresses(),getUnusedAddresses:()=>r.getUnusedAddresses(),getUsedAddresses:e=>r.getUsedAddresses(e),getUtxos:(e,t)=>r.getUtxos(e,t),signData:(e,t)=>r.signData(e,t),signTx:(e,t)=>r.signTx(e,t),submitTx:e=>r.submitTx(e)};const i={cip95:{getPubDRepKey:()=>r.getPubDRepKey(),getRegisteredPubStakeKeys:()=>r.getRegisteredPubStakeKeys(),getUnregisteredPubStakeKeys:()=>r.getUnregisteredPubStakeKeys(),signData:(e,t)=>r.signData(e,t)},cip142:{getNetworkMagic:()=>r.getNetworkMagic()}};if(e){for(const a of e){const o=`cip${a.cip}`;if(i[o])s[o]=i[o]}}return s};const exposeWalletApi=({walletName:e},t)=>(0,s.exposeApi)({api$:(0,o.of)(t.walletApi),baseChannel:walletApiChannel(e),properties:Object.fromEntries(_.map(e=>[e,{propType:i.RemoteApiPropertyType.MethodReturningPromise,requestOptions:{transform:({method:e,args:t},r)=>{if(!r)throw new Error('"sender" is undefined');return{args:[{sender:cloneSender(r)},...t],method:e}},validate:async(e,r)=>{const s=r&&await t.authenticator.haveAccess(cloneSender(r));if(!s){throw new n.ApiError(n.APIErrorCode.Refused,"Call cardano.{walletName}.enable() first")}}}}]))},t);const initializeBackgroundScript=(e,t)=>{const r=exposeAuthenticatorApi(e,t);const s=exposeWalletApi(e,t);return()=>{s.shutdown();r.shutdown()}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js":(e,t,r)=>{"use strict";r.d(t,{createBackgroundMessenger:()=>createBackgroundMessenger,generalizeBackgroundMessenger:()=>generalizeBackgroundMessenger});var s=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/operators/bufferCount.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/pairwise.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var v=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var _=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createBackgroundMessenger=({logger:e,runtime:t})=>{const r=new Map;const getChannel=e=>{let t=r.get(e);if(!t)r.set(e,t={message$:new s.ReplaySubject(1),ports$:new i.BehaviorSubject(new Set)});return t};const onPortMessage=(t,s)=>{e.debug(`[BackgroundMessenger(${s.name})] message`,t);const{message$:i}=r.get(s.name);i.next({data:t,port:s})};const onPortDisconnected=s=>{if(t.lastError)e.warn(`[BackgroundMessenger(${s.name})] Last runtime error`,t.lastError);s.onMessage.removeListener(onPortMessage);s.onDisconnect.removeListener(onPortDisconnected);const{ports$:i}=r.get(s.name);const a=new Set(i.value);a.delete(s);i.next(a);e.debug(`[BackgroundMessenger(${s.name})] disconnected`,s)};const onConnect=t=>{const{ports$:r}=getChannel(t.name);const s=new Set(r.value);s.add(t);t.onMessage.addListener(onPortMessage);t.onDisconnect.addListener(onPortDisconnected);r.next(s);e.debug(`[BackgroundMessenger(${t.name})] connected`)};t.onConnect.addListener(onConnect);return{getChannel,shutdown(){for(const s of[...r.keys()])this.shutdownChannel(s);t.onConnect.removeListener(onConnect);e.warn("[BackgroundMessenger] shutdown")},shutdownChannel(e){const t=r.get(e);if(!t)return;t.message$.complete();for(const s of t.ports$.value)s.disconnect();r.delete(e)}}};const generalizeBackgroundMessenger=(e,t,r)=>({channel:e,connect$:t.getChannel(e).ports$.pipe((0,a.bufferCount)(2,1),(0,o.mergeMap)(([e,t])=>{const r=[...t].filter(t=>!e.has(t));return(0,n.from)(r)})),deriveChannel(s){return generalizeBackgroundMessenger((0,v.deriveChannelName)(e,s),t,r)},disconnect$:t.getChannel(e).ports$.pipe((0,d.pairwise)(),(0,c.filter)(([e,t])=>e.size>t.size),(0,l.map)(([e,t])=>({disconnected:[...e].find(e=>!t.has(e)),remaining:[...t]}))),isShutdown:false,message$:t.getChannel(e).message$,postMessage:s=>{const{ports$:i}=t.getChannel(e);return i.pipe((0,c.filter)(e=>e.size>0),(0,u.first)(),(0,f.tap)(e=>{for(const t of e)t.postMessage(s)}),(0,_.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof h.EmptyError)}),(0,l.map)(()=>void 0),(0,m.catchError)(()=>{r.warn("Couldn't postMessage: messenger shutdown");return(0,p.of)(void 0)}))},shutdown(){t.shutdownChannel(e);this.isShutdown=true}})},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js":(e,t,r)=>{"use strict";r.d(t,{consumeRemoteApi:()=>z,exposeApi:()=>W});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/BackgroundMessenger.js");var i=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js");var a=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var o=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");var n=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/observable/merge.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/empty.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/filter.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/tap.js");var m=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var p=r("../../node_modules/rxjs/dist/esm5/internal/operators/timeout.js");var v=r("../../node_modules/rxjs/dist/esm5/internal/observable/of.js");var _=r("../../node_modules/rxjs/dist/esm5/internal/operators/defaultIfEmpty.js");var w=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeUntil.js");var y=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var g=r("../../node_modules/rxjs/dist/esm5/internal/util/isObservable.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var P=r("../../node_modules/rxjs/dist/esm5/internal/observable/from.js");var S=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var C=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");var k=r("../../node_modules/@cardano-sdk/util/dist/esm/isPromise.js");var j=r("../../node_modules/@cardano-sdk/core/dist/esm/util/time.js");var x=r("../../node_modules/@cardano-sdk/core/dist/esm/errors.js");var T=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");class WrongTargetError extends o.CustomError{}var E=r("../../node_modules/uuid/dist/esm-browser/v4.js");class RemoteApiShutdownError extends o.CustomError{constructor(e){super(`Remote API with channel '${e}' was shutdown: object can no longer be used.`)}}const consumeMethod=({propName:e,errorTypes:t},{messenger:{message$:r,channel:s,postMessage:a,disconnect$:o,connect$:w},logger:y})=>async(...g)=>{const b={messageId:(0,i.newMessageId)(),request:{args:g.map(e=>(0,C.toSerializableObject)(e)),method:e}};const P=await (0,n.firstValueFrom)((0,d.merge)(a(b).pipe((0,c.mergeMap)(()=>l.EMPTY)),r.pipe((0,u.map)(({data:e})=>(0,C.fromSerializableObject)(e,{errorTypes:[...t||[],WrongTargetError]})),(0,f.filter)(i.isResponseMessage),(0,f.filter)(({messageId:e})=>e===b.messageId),(0,u.map)(({response:e})=>e),(0,f.filter)(e=>!(e instanceof WrongTargetError))),o.pipe((0,f.filter)(e=>0===e.remaining.length),(0,h.tap)(()=>y.warn(`API disconnected before "${e}" resolved. Expecting reconnect.`)),(0,m.switchMap)(()=>w.pipe((0,h.tap)(()=>y.warn(`Reconnected. Waiting for "${e}" response...`)),(0,p.timeout)({first:(0,j.Milliseconds)(1e4),with:()=>(0,v.of)(new RemoteApiShutdownError(s))}),(0,c.mergeMap)(e=>e instanceof RemoteApiShutdownError?(0,v.of)(e):l.EMPTY))))).pipe((0,_.defaultIfEmpty)(new RemoteApiShutdownError(s))));if(P instanceof Error){throw P}return P};const consumeFactory=({method:e,apiProperties:t,errorTypes:r},{logger:s,messenger:a,destructor:o})=>(...n)=>{const d=(0,E["default"])();const c=`${e}-${d}`;const l=a.postMessage({factoryCall:{args:(0,C.toSerializableObject)(n),channel:c,method:e},messageId:(0,i.newMessageId)()}).subscribe();const u=a.deriveChannel(c,{detached:true});const f=consumeMessengerRemoteApi({errorTypes:r,properties:t},{destructor:o,logger:s,messenger:u});o.onGarbageCollected(f,d,()=>{if(u.isShutdown){return}u.postMessage({messageId:(0,i.newMessageId)(),subscribe:false}).subscribe(()=>{l.unsubscribe();u.shutdown()})});return f};const consumeMessengerRemoteApi=({properties:e,errorTypes:t},{logger:r,messenger:s,destructor:o})=>new Proxy({shutdown:s.shutdown},{get(n,d,c){if(d in n)return n[d];const l=e[d];const m=d.toString();if("object"==typeof l)if("propType"in l){switch(l.propType){case a.RemoteApiPropertyType.MethodReturningPromise:return c[d]=consumeMethod({errorTypes:t,options:l.requestOptions,propName:m},{logger:r,messenger:s});case a.RemoteApiPropertyType.ApiFactory:return c[d]=consumeFactory({apiProperties:l.getApiProperties(),errorTypes:t,method:m},{destructor:o,logger:r,messenger:s})}}else{return c[d]=consumeMessengerRemoteApi({errorTypes:t,properties:l},{destructor:o,logger:r,messenger:s.deriveChannel(m)})}else if(l===a.RemoteApiPropertyType.MethodReturningPromise){return c[d]=consumeMethod({errorTypes:t,propName:m},{logger:r,messenger:s})}else if(l===a.RemoteApiPropertyType.HotObservable){const p=s.deriveChannel(m);const v=p.message$.pipe((0,u.map)(({data:e})=>(0,C.fromSerializableObject)(e)));const _=v.pipe((0,f.filter)(i.isCompletionMessage),(0,f.filter)(({subscribe:e})=>!e),(0,h.tap)(({error:e})=>{if(e)throw e}));return c[d]=v.pipe((0,w.takeUntil)(_),(0,f.filter)(i.isEmitMessage),(0,u.map)(({emit:e})=>e),(0,y.shareReplay)(1),(0,f.filter)(i.isNotDisabledApiMsg))}},has(t,r){return r in e}});const bindMessengerRequestHandler=({handler:e},{logger:t,messenger:{message$:r,postMessage:s}})=>{const a=r.subscribe(async({data:r,port:a})=>{if(!(0,i.isRequestMessage)(r))return;let o;try{const n=(0,C.fromSerializableObject)(r.request);o=await e(n,a.sender)}catch(d){t.debug("[MessengerRequestHandler] Error processing message",r,d);o=d instanceof Error?d:new Error("Unknown error")}const c={messageId:r.messageId,response:(0,C.toSerializableObject)(o)};s(c).subscribe()});return{shutdown:()=>a.unsubscribe()}};const isObject=e=>"object"==typeof e&&null!==e;const hasPropType=(e,t)=>isObject(e)&&e.propType===t;const hasAnyPropType=e=>isObject(e)&&"number"==typeof e.propType;const isRemoteApiMethod=e=>hasPropType(e,a.RemoteApiPropertyType.MethodReturningPromise);const isRemoteApiFactory=e=>hasPropType(e,a.RemoteApiPropertyType.ApiFactory);const bindNestedObjChannels=({api$:e,properties:t},{messenger:r,logger:s})=>{const i=Object.entries(t).filter(([e,t])=>"object"==typeof t&&!hasAnyPropType(t)).map(([i])=>exposeMessengerApi({api$:e.pipe((0,h.tap)(e=>{if(e&&("object"!=typeof e[i]||(0,g.isObservable)(e[i]))){throw new x.NotImplementedError(`Trying to expose non-implemented nested object ${i}`)}}),(0,u.map)(e=>e?e[i]:e)),properties:t[i]},{logger:s,messenger:r.deriveChannel(i)}));return{shutdown:()=>{for(const e of i)e.shutdown()}}};const bindFactoryMethods=({api$:e,properties:t},{messenger:r,logger:s})=>{const a=r.message$.subscribe(async({data:a})=>{if(!(0,i.isFactoryCallMessage)(a))return;const o=t[a.factoryCall.method];if(!isRemoteApiFactory(o)){s.warn(`Invalid or missing property definition for api factory method '${a.factoryCall.method}'`);return}try{const n=(0,C.fromSerializableObject)(a.factoryCall.args);const{method:d,channel:c}=a.factoryCall;const u=r.deriveChannel(c,{detached:true});const f=exposeMessengerApi({api$:e.pipe((0,m.switchMap)(e=>{if(!e)return b.NEVER;const t=e[d];if("function"!=typeof t){s.warn("No api method",d);return l.EMPTY}const r=t.apply(e,n);if((0,k.isPromise)(r)){return(0,P.from)(r)}return(0,v.of)(r)})),properties:o.getApiProperties()},{logger:s,messenger:u});let h=null;const teardown=()=>{null==h?void 0:h.unsubscribe();f.shutdown()};h=u.message$.subscribe(e=>{if((0,i.isCompletionMessage)(e.data))teardown()})}catch(p){s.debug("[bindFactoryMethods] error exposing api",a,p)}});return{shutdown:()=>{a.unsubscribe()}}};const bindObservableChannels=({api$:e,properties:t},{messenger:r,logger:s})=>{const o=Object.entries(t).filter(([,e])=>e===a.RemoteApiPropertyType.HotObservable).map(([t])=>{const a=new T.TrackerSubject(e.pipe((0,h.tap)(e=>{if(e&&!(0,g.isObservable)(e[t])){throw new x.NotImplementedError(`Trying to expose non-implemented observable ${t}`)}}),(0,m.switchMap)(e=>e?e[t]:(0,v.of)(i.disabledApiMsg))));const o=r.deriveChannel(t);const n=o.connect$.subscribe(e=>{if(a.value!==T.TrackerSubject.NO_VALUE){try{e.postMessage((0,C.toSerializableObject)({emit:a.value,messageId:(0,i.newMessageId)()}))}catch(t){s.warn("Failed to emit initial value, port immediatelly disconnected?",t)}}});const broadcastMessage=e=>o.postMessage({messageId:(0,i.newMessageId)(),...(0,C.toSerializableObject)(e)}).subscribe();const d=a.subscribe({complete:()=>broadcastMessage({subscribe:false}),error:e=>broadcastMessage({error:e,subscribe:false}),next:e=>broadcastMessage({emit:e})});return()=>{a.complete();n.unsubscribe();d.unsubscribe()}});return{shutdown:()=>{for(const e of o)e()}}};const exposeMessengerApi=({api$:e,properties:t},r)=>{const s=new T.TrackerSubject((0,S.concat)(e,b.NEVER));const i=bindObservableChannels({api$:s,properties:t},r);const o=bindNestedObjChannels({api$:s,properties:t},r);const d=bindFactoryMethods({api$:s,properties:t},r);const c=bindMessengerRequestHandler({handler:async(e,r)=>{const i=t[e.method];if(void 0===i||i!==a.RemoteApiPropertyType.MethodReturningPromise&&!isRemoteApiMethod(i)){throw new Error(`Attempted to call a method that was not explicitly exposed: ${e.method}`)}const{validate:o=async()=>void 0,transform:d=e=>e}=isRemoteApiMethod(i)?i.requestOptions:{};await o(e,r);const{args:c,method:l}=d(e,r);const u=await (0,n.firstValueFrom)(s.pipe((0,f.filter)(e=>!!e)));const h=l in u&&u[l];if("function"!=typeof h){throw new TypeError(`No such API method: ${l}`)}return h.apply(u,c)}},r);return{shutdown:()=>{s.complete();o.shutdown();d.shutdown();i.shutdown();c.shutdown();r.messenger.shutdown()}}};var A=r("../../node_modules/rxjs/dist/esm5/internal/Subject.js");var I=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var B=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var F=r("../../node_modules/rxjs/dist/esm5/internal/operators/debounceTime.js");var M=r("../../node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js");var R=r("../../node_modules/rxjs/dist/esm5/internal/operators/first.js");var D=r("../../node_modules/rxjs/dist/esm5/internal/util/EmptyError.js");var O=r("../../node_modules/rxjs/dist/esm5/internal/operators/catchError.js");var G=r("../../node_modules/@cardano-sdk/util/dist/esm/isNotNil.js");var N=r("../../node_modules/backoff-rxjs/dist/esm5/operators/retryBackoff.js");const createNonBackgroundMessenger=({baseChannel:e,reconnectConfig:{initialDelay:t,maxDelay:r}={initialDelay:10,maxDelay:1e3}},{logger:s,runtime:a})=>{let o;let n=t;let d=false;const c=new A.Subject;const l=new I.BehaviorSubject(null);const m=new B.ReplaySubject(1);const connect=()=>{if("string"==typeof l.value||l.value)return;const t=a.connect({name:e});l.next(t);t.onDisconnect.addListener(onDisconnect);t.onMessage.addListener(onMessage)};const reconnect=()=>{clearTimeout(o);n=Math.min(Math.pow(n,2),r);o=setTimeout(connect,n)};const onMessage=(r,i)=>{s.debug(`[NonBackgroundMessenger(${e})] message`,r);n=t;m.next({data:r,port:i})};const onDisconnect=t=>{if(a.lastError)s.warn(`[NonBackgroundMessenger(${e})] Last runtime error`,a.lastError);c.next({disconnected:t,remaining:[]});s.debug(`[NonBackgroundMessenger(${e})] disconnected`);t.onMessage.removeListener(onMessage);t.onDisconnect.removeListener(onDisconnect);l.next(d?"shutdown":null);if(!d)reconnect()};connect();const p=l.pipe((0,F.debounceTime)(10),(0,f.filter)(G.isNotNil),(0,M.takeWhile)(e=>"string"!=typeof e));const _=new Set;return{channel:e,connect$:p,deriveChannel(o,{detached:n}={}){const d=createNonBackgroundMessenger({baseChannel:(0,i.deriveChannelName)(e,o),reconnectConfig:{initialDelay:t,maxDelay:r}},{logger:s,runtime:a});if(!n)_.add(d);return d},disconnect$:c,get isShutdown(){return d},message$:m,postMessage(e){return p.pipe((0,R.first)(),(0,h.tap)(t=>t.postMessage(e)),(0,N.retryBackoff)({initialInterval:10,maxInterval:1e3,shouldRetry:e=>!(e instanceof D.EmptyError)}),(0,u.map)(()=>void 0),(0,O.catchError)(()=>{s.warn("Couldn't postMessage: messenger shutdown");return(0,v.of)(void 0)}))},shutdown(){d=true;const t=l.value;if("string"!=typeof t)null==t?void 0:t.disconnect();clearTimeout(o);for(const r of _.values()){r.shutdown();_.delete(r)}l.complete();c.complete();s.debug(`[NonBackgroundMessenger(${e})] shutdown`)}}};var H=r("../../node_modules/@cardano-sdk/util/dist/esm/environment.js");const K=(0,H.isBackgroundProcess)();const V=(()=>{let e=null;return t=>e||(e=(0,s.createBackgroundMessenger)(t))})();const _backgroundExposeApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,V(t),t.logger);return exposeMessengerApi(e,{messenger:r,...t})};const _nonBackgroundExposeApi=(e,t)=>exposeMessengerApi(e,{messenger:createNonBackgroundMessenger(e,t),...t});const _nonBackgroundConsumeRemoteApi=(e,t)=>consumeMessengerRemoteApi(e,{destructor:new i.FinalizationRegistryDestructor(t.logger),messenger:createNonBackgroundMessenger(e,t),...t});const _backgroundConsumeRemoteApi=(e,t)=>{const r=(0,s.generalizeBackgroundMessenger)(e.baseChannel,V(t),t.logger);return consumeMessengerRemoteApi(e,{destructor:new i.FinalizationRegistryDestructor(t.logger),messenger:r,...t})};const W=K?_backgroundExposeApi:_nonBackgroundExposeApi;const z=K?_backgroundConsumeRemoteApi:_nonBackgroundConsumeRemoteApi},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js":(e,t,r)=>{"use strict";r.d(t,{RemoteApiPropertyType:()=>s});var s;(function(e){e[e["MethodReturningPromise"]=0]="MethodReturningPromise";e[e["HotObservable"]=1]="HotObservable";e[e["ApiFactory"]=2]="ApiFactory"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/util.js":(e,t,r)=>{"use strict";r.d(t,{FinalizationRegistryDestructor:()=>FinalizationRegistryDestructor,deriveChannelName:()=>deriveChannelName,disabledApiMsg:()=>c,isCompletionMessage:()=>isCompletionMessage,isEmitMessage:()=>isEmitMessage,isFactoryCallMessage:()=>isFactoryCallMessage,isNotDisabledApiMsg:()=>isNotDisabledApiMsg,isRequestMessage:()=>isRequestMessage,isResponseMessage:()=>isResponseMessage,newMessageId:()=>d});var s=r("../../node_modules/uuid/dist/esm-browser/v4.js");var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var i,a,o,n;const isRequestLike=e=>"object"==typeof e&&null!==e&&Array.isArray(e.args)&&"string"==typeof e.method;const isRequest=e=>isRequestLike(e)&&void 0===e.channel;const isFactoryCall=e=>isRequestLike(e)&&"string"==typeof e.channel;const looksLikeMessage=e=>"object"==typeof e&&null!==e&&"string"==typeof e.messageId;const isRequestMessage=e=>looksLikeMessage(e)&&isRequest(e.request);const isFactoryCallMessage=e=>looksLikeMessage(e)&&isFactoryCall(e.factoryCall);const isResponseMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("response");const isCompletionMessage=e=>looksLikeMessage(e)&&"boolean"==typeof e.subscribe;const isEmitMessage=e=>looksLikeMessage(e)&&e.hasOwnProperty("emit");const d=s["default"];const deriveChannelName=(e,t)=>`${e}-${t}`;const isInternalMsg=e=>{return(null==e?void 0:e.remoteApiInternalMsg)!==void 0};const c={remoteApiInternalMsg:"apiObjDisabled"};const isNotDisabledApiMsg=e=>!isInternalMsg(e)||e.remoteApiInternalMsg!==c.remoteApiInternalMsg;class FinalizationRegistryDestructor{onGarbageCollected(e,t,r){this.callbacks.set(t,r);__classPrivateFieldGet(this,a,"f").register(e,t)}constructor(e){i.add(this);a.set(this,void 0);o.set(this,void 0);this.callbacks=new Map;__classPrivateFieldSet(this,a,new FinalizationRegistry(e=>__classPrivateFieldGet(this,i,"m",n).call(this,e)),"f");__classPrivateFieldSet(this,o,e,"f")}}a=new WeakMap,o=new WeakMap,i=new WeakSet,n=function _FinalizationRegistryDestructor_callback(e){const t=this.callbacks.get(e);if(!t){return __classPrivateFieldGet(this,o,"f").error("heldValue not found in FinalizationRegistryDestructor")}this.callbacks.delete(e);t()}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/observableWallet/util.js":(e,t,r)=>{"use strict";r.d(t,{observableWalletProperties:()=>o,walletRepositoryProperties:()=>n});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const observableWalletChannel=e=>`${e}$`;const i={address:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},asset:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},assets:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},build:s.RemoteApiPropertyType.MethodReturningPromise,coin:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},datum:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},handle:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,value:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory}};const a={addDatum:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},addInput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},addOutput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},addReferenceInput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},build:{getApiProperties:()=>({inspect:s.RemoteApiPropertyType.MethodReturningPromise,sign:s.RemoteApiPropertyType.MethodReturningPromise}),propType:s.RemoteApiPropertyType.ApiFactory},buildOutput:{getApiProperties:()=>i,propType:s.RemoteApiPropertyType.ApiFactory},delegateFirstStakeCredential:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},delegatePortfolio:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},extraSigners:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},inspect:s.RemoteApiPropertyType.MethodReturningPromise,metadata:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},removeOutput:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},setValidityInterval:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},signingOptions:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory}};const o={addSignatures:s.RemoteApiPropertyType.MethodReturningPromise,addresses$:s.RemoteApiPropertyType.HotObservable,assetInfo$:s.RemoteApiPropertyType.HotObservable,balance:{rewardAccounts:{deposit$:s.RemoteApiPropertyType.HotObservable,rewards$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}},createTxBuilder:{getApiProperties:()=>a,propType:s.RemoteApiPropertyType.ApiFactory},currentEpoch$:s.RemoteApiPropertyType.HotObservable,delegation:{distribution$:s.RemoteApiPropertyType.HotObservable,portfolio$:s.RemoteApiPropertyType.HotObservable,rewardAccounts$:s.RemoteApiPropertyType.HotObservable,rewardsHistory$:s.RemoteApiPropertyType.HotObservable},discoverAddresses:s.RemoteApiPropertyType.MethodReturningPromise,eraSummaries$:s.RemoteApiPropertyType.HotObservable,finalizeTx:s.RemoteApiPropertyType.MethodReturningPromise,genesisParameters$:s.RemoteApiPropertyType.HotObservable,getName:s.RemoteApiPropertyType.MethodReturningPromise,getNextUnusedAddress:s.RemoteApiPropertyType.MethodReturningPromise,governance:{getPubDRepKey:s.RemoteApiPropertyType.MethodReturningPromise,isRegisteredAsDRep$:s.RemoteApiPropertyType.HotObservable},handles$:s.RemoteApiPropertyType.HotObservable,initializeTx:s.RemoteApiPropertyType.MethodReturningPromise,protocolParameters$:s.RemoteApiPropertyType.HotObservable,publicStakeKeys$:s.RemoteApiPropertyType.HotObservable,signData:s.RemoteApiPropertyType.MethodReturningPromise,submitTx:s.RemoteApiPropertyType.MethodReturningPromise,syncStatus:{isAnyRequestPending$:s.RemoteApiPropertyType.HotObservable,isSettled$:s.RemoteApiPropertyType.HotObservable,isUpToDate$:s.RemoteApiPropertyType.HotObservable},tip$:s.RemoteApiPropertyType.HotObservable,transactions:{history$:s.RemoteApiPropertyType.HotObservable,new$:s.RemoteApiPropertyType.HotObservable,outgoing:{failed$:s.RemoteApiPropertyType.HotObservable,inFlight$:s.RemoteApiPropertyType.HotObservable,onChain$:s.RemoteApiPropertyType.HotObservable,pending$:s.RemoteApiPropertyType.HotObservable,signed$:s.RemoteApiPropertyType.HotObservable,submitting$:s.RemoteApiPropertyType.HotObservable},rollback$:s.RemoteApiPropertyType.HotObservable},utxo:{available$:s.RemoteApiPropertyType.HotObservable,setUnspendable:s.RemoteApiPropertyType.MethodReturningPromise,total$:s.RemoteApiPropertyType.HotObservable,unspendable$:s.RemoteApiPropertyType.HotObservable}};const n={addAccount:s.RemoteApiPropertyType.MethodReturningPromise,addWallet:s.RemoteApiPropertyType.MethodReturningPromise,removeAccount:s.RemoteApiPropertyType.MethodReturningPromise,removeWallet:s.RemoteApiPropertyType.MethodReturningPromise,updateAccountMetadata:s.RemoteApiPropertyType.MethodReturningPromise,updateWalletMetadata:s.RemoteApiPropertyType.MethodReturningPromise,wallets$:s.RemoteApiPropertyType.HotObservable}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/storage/persistentCacheStorage/persistentCacheStorage.js":(e,t,r)=>{"use strict";r.d(t,{createPersistentCacheStorage:()=>a});var s=r("../../node_modules/@cardano-sdk/util/dist/esm/serializableObject.js");const i=.1;const makeMetadataKey=e=>`${e}-metadata`;const makeItemKey=(e,t)=>`${e}-item-${t}`;const isGetBytesInUsePresent=e=>"getBytesInUse"in e;const makePersistentCacheStorageFactory=e=>({extensionLocalStorage:t,fallbackMaxCollectionItemsGuard:r,resourceName:a,quotaInBytes:o})=>{let n=Promise.resolve();const d=e();const c=makeMetadataKey(a);const getItemKey=e=>makeItemKey(a,e);const getMetadata=async()=>{const e=await t.get(c);return e[c]};const updateMetadata=async e=>{n=n.then(async()=>{const r=await getMetadata();const s=e(r);await t.set({[c]:s})});return n};const updateAccessTime=async e=>{await updateMetadata(t=>({...t,[e]:{accessTime:Date.now()}}))};const isQuotaExceeded=async()=>{const e=await getMetadata();const s=[c,...Object.keys(e)];if(isGetBytesInUsePresent(t)){const i=await t.getBytesInUse(s);return i>o}return s.length>r};const evict=async()=>{const e=await getMetadata();const r=Object.entries(e).map(([e,{accessTime:t}])=>({accessTime:t,key:e})).sort((e,t)=>e.accessTime-t.accessTime).filter((e,t,r)=>{const s=Math.abs(r.length*i);return t<s}).map(e=>e.key);await t.remove(r);await updateMetadata(e=>{for(const t of r)delete e[t];return e})};return{async get(e){const r=getItemKey(e);let i=d.get(r);if(!i){const a=await t.get(r);i=(0,s.fromSerializableObject)(a[r])}if(i)void updateAccessTime(r);return i},async set(e,r){const i=getItemKey(e);d.set(i,r);await t.set({[i]:(0,s.toSerializableObject)(r)});void(async()=>{await updateAccessTime(i);if(await isQuotaExceeded())await evict()})()}}};const a=makePersistentCacheStorageFactory(()=>new Map)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/SigningCoordinator/consumeSigningCoordinatorApi.js":(e,t,r)=>{"use strict";r.d(t,{consumeSigningCoordinatorApi:()=>consumeSigningCoordinatorApi});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/index.js");var i=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");const a="signingCoordinator";const o={signData:i.RemoteApiPropertyType.MethodReturningPromise,signTransaction:i.RemoteApiPropertyType.MethodReturningPromise};const consumeSigningCoordinatorApi=e=>(0,s.consumeRemoteApi)({baseChannel:a,properties:o},e)},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/WalletRepository/WalletRepository.js":(e,t,r)=>{"use strict";r.d(t,{WalletRepository:()=>WalletRepository});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var i=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/operators/switchMap.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/operators/map.js");var d=r("../../node_modules/rxjs/dist/esm5/internal/operators/take.js");var c=r("../../node_modules/rxjs/dist/esm5/internal/observable/concat.js");var l=r("../../node_modules/rxjs/dist/esm5/internal/observable/never.js");var u=r("../../node_modules/rxjs/dist/esm5/internal/observable/defer.js");var f=r("../../node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js");var h=r("../../node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js");var m=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/blockingWithLatestFrom.js");var p=r("../../node_modules/@cardano-sdk/util-rxjs/dist/esm/TrackerSubject.js");var v=r("../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs");class WalletConflictError extends v.CustomError{}var _=r("../../node_modules/@cardano-sdk/util/dist/esm/logging.js");var w=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var y,g,b,P,S;const cloneSplice=(e,t,r,...s)=>[...e.slice(0,t),...s,...e.slice(t+r)];const findAccount=(e,t,r,a)=>{const o=e.findIndex(e=>e.walletId===t);const n=e[o];if(!n||n.type===s.WalletType.Script)return;const d=n.accounts.findIndex(e=>{const t=e.purpose||i.KeyPurpose.STANDARD;return e.accountIndex===r&&t===a});if(d<0)return;return{account:n.accounts[d],accountIdx:d,purpose:a,wallet:n,walletIdx:o}};class WalletRepository{async addWallet(e){__classPrivateFieldGet(this,g,"f").debug("addWallet",e.type);const t=e.type===s.WalletType.Script?await (0,w.getWalletId)(e.paymentScript):await (()=>{var t;const r=null===(t=e.accounts[0])||void 0===t?void 0:t.extendedAccountPublicKey;if(!r){throw new WalletConflictError("New wallet must have at least one account")}return(0,w.getWalletId)(r)})();return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([r,i])=>{if(r.some(e=>e.walletId===t)){throw new WalletConflictError(`Wallet '${t}' already exists`)}if(e.type===s.WalletType.Script)__classPrivateFieldGet(this,y,"m",S).call(this,r,e.ownSigners);return i.setAll([...r,{...e,walletId:t}])}),(0,n.map)(()=>t)))}addAccount(e){const{walletId:t,accountIndex:r,metadata:d,extendedAccountPublicKey:c}=e;__classPrivateFieldGet(this,g,"f").debug("addAccount",t,r,d);const l=e.purpose||i.KeyPurpose.STANDARD;return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([a,o])=>{const u=a.findIndex(e=>e.walletId===t);if(u<0){throw new WalletConflictError(`Wallet '${t}' does not exist`)}const f=a[u];if(f.type===s.WalletType.Script){throw new WalletConflictError("addAccount for script wallets is not supported")}if(f.accounts.some(e=>{const t=e.purpose||i.KeyPurpose.STANDARD;return e.accountIndex===r&&t===l})){throw new WalletConflictError(`Account #${r} with purpose ${l} for wallet '${t}' already exists`)}return o.setAll(cloneSplice(a,u,1,{...f,accounts:[...f.accounts,{accountIndex:r,extendedAccountPublicKey:c,metadata:d,purpose:e.purpose}]})).pipe((0,n.map)(()=>e))})))}updateWalletMetadata(e){const{walletId:t,metadata:r}=e;__classPrivateFieldGet(this,g,"f").debug("updateWalletMetadata",t,r);return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,s])=>{const i=e.findIndex(e=>e.walletId===t);if(i>=0){return s.setAll(cloneSplice(e,i,1,{...e[i],metadata:r}))}throw new WalletConflictError(`Wallet not found: ${t}`)}),(0,n.map)(()=>e)))}updateAccountMetadata(e){const{walletId:t,accountIndex:r,metadata:s}=e;const d=e.purpose||i.KeyPurpose.STANDARD;__classPrivateFieldGet(this,g,"f").debug("updateAccountMetadata",t,r,s,d);return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,i])=>{const a=findAccount(e,t,r,d);if(!a){throw new WalletConflictError(`Account not found: ${t}/${d}/${r}`)}return i.setAll(cloneSplice(e,a.walletIdx,1,{...a.wallet,accounts:cloneSplice(a.wallet.accounts,a.accountIdx,1,{...a.account,metadata:s})}))}),(0,n.map)(()=>e)))}removeAccount(e){const{walletId:t,accountIndex:r,purpose:d}=e;const c=d||i.KeyPurpose.STANDARD;__classPrivateFieldGet(this,g,"f").debug("removeAccount",t,r,c);return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([e,i])=>{const a=findAccount(e,t,r,c);if(!a){throw new WalletConflictError(`Account '${t}/${c}/${r}' does not exist`)}const o=e.find(e=>e.type===s.WalletType.Script&&e.ownSigners.some(e=>e.walletId===t&&e.accountIndex===r&&e.purpose===c));if(o){throw new WalletConflictError(`Wallet '${o.walletId}' depends on account '${t}/${c}/${r}'`)}return i.setAll(cloneSplice(e,a.walletIdx,1,{...a.wallet,accounts:cloneSplice(a.wallet.accounts,a.accountIdx,1)}))}),(0,n.map)(()=>e)))}removeWallet(e){__classPrivateFieldGet(this,g,"f").debug("removeWallet",e);return(0,a.firstValueFrom)(__classPrivateFieldGet(this,y,"m",P).call(this).pipe((0,d.take)(1),(0,m.blockingWithLatestFrom)(__classPrivateFieldGet(this,b,"f")),(0,o.switchMap)(([t,r])=>{const i=t.findIndex(t=>t.walletId===e);if(i<0){throw new WalletConflictError(`Wallet '${e}' does not exist`)}const a=t.find(t=>t.type===s.WalletType.Script&&t.ownSigners.some(t=>t.walletId===e));if(a){throw new WalletConflictError(`Wallet '${a.walletId}' depends on wallet '${e}'`)}return r.setAll(cloneSplice(t,i,1))}),(0,n.map)(()=>e)))}constructor({logger:e,store$:t}){y.add(this);g.set(this,void 0);b.set(this,void 0);__classPrivateFieldSet(this,b,new p.TrackerSubject((0,c.concat)(t,l.NEVER)),"f");__classPrivateFieldSet(this,g,(0,_.contextLogger)(e,"WalletRepository"),"f");this.wallets$=(0,u.defer)(()=>__classPrivateFieldGet(this,b,"f").pipe((0,f.mergeMap)(e=>e.observeAll()))).pipe((0,h.shareReplay)(1))}}g=new WeakMap,b=new WeakMap,y=new WeakSet,P=function _WalletRepository_getWallets(){return this.wallets$.pipe((0,d.take)(1))},S=function _WalletRepository_validateOwnSigners(e,t){for(const r of t)if(!e.some(e=>e.walletId===r.walletId&&e.type!==s.WalletType.Script&&e.accounts.some(e=>e.accountIndex===r.accountIndex))){throw new WalletConflictError(`Wallet or account does not exist: ${r.walletId}/${r.accountIndex}`)}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js":(e,t,r)=>{"use strict";r.d(t,{WalletType:()=>s});var s;(function(e){e["InMemory"]="InMemory";e["Ledger"]="Ledger";e["Trezor"]="Trezor";e["Script"]="Script"})(s||(s={}))},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js":(e,t,r)=>{"use strict";r.d(t,{buildBip32Witnesser:()=>buildBip32Witnesser,buildNativeScriptWitnesser:()=>buildNativeScriptWitnesser,getWalletId:()=>getWalletId,repositoryChannel:()=>repositoryChannel,walletChannel:()=>walletChannel,walletManagerChannel:()=>walletManagerChannel,walletManagerProperties:()=>S});var s=r("../../node_modules/@cardano-sdk/crypto/dist/esm/hexTypes.js");var i=r("../../node_modules/@cardano-sdk/crypto/dist/esm/blake2b-hash.js");var a=r("../../node_modules/@cardano-sdk/key-management/dist/esm/types.js");var o=r("../../node_modules/@cardano-sdk/key-management/dist/esm/util/stubSignTransaction.js");var n=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var d=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/Redeemer/Redeemer.js");var c=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/Script.js");var l=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/BootstrapWitness.js");var u=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/PlutusData/PlutusData.js");var f=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Script.js");var h=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Scripts/NativeScript/NativeScript.js");var m=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/RewardAccount.js");var p=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/Address/Address.js");var v=r("../../node_modules/@cardano-sdk/core/dist/esm/Cardano/types/Certificate.js");var _=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/Transaction.js");var w=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionBody/TransactionBody.js");var y=r("../../node_modules/@cardano-sdk/core/dist/esm/Serialization/TransactionWitnessSet/TransactionWitnessSet.js");var g=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/messaging/types.js");var b=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");const P="Only native scripts of types: RequireAllOf, RequireAnyOf and RequireNOf are supported by this script witnesser";const randomHexChar=()=>Math.floor(16*Math.random()).toString(16);const randomPublicKey=()=>s.Ed25519PublicKeyHex(Array.from({length:64}).map(randomHexChar).join(""));const isBip32Wallet=e=>e.type===n.WalletType.InMemory||e.type===n.WalletType.Ledger||e.type===n.WalletType.Trezor;const mergeArrays=(e,t,r)=>{const s=new Set(e.map(r));const i=[...e];for(const a of t){const o=r(a);if(!s.has(o)){i.push(a);s.add(o)}}return i};const mergeWitnesses=(e,t)=>{if(!t){if(!e.signatures)e.signatures=new Map;return e}var r,s;const i=new Map([...null!==(r=e.signatures)&&void 0!==r?r:[],...null!==(s=t.signatures)&&void 0!==s?s:[]]);const a=mergeArrays(e.redeemers||[],t.redeemers||[],e=>d.Redeemer.fromCore(e).toCbor());const o=mergeArrays(e.scripts||[],t.scripts||[],e=>c.Script.fromCore(e).toCbor());const n=mergeArrays(e.bootstrap||[],t.bootstrap||[],e=>l.BootstrapWitness.fromCore(e).toCbor());const f=mergeArrays(e.datums||[],t.datums||[],e=>u.PlutusData.fromCore(e).toCbor());return{bootstrap:n,datums:f,redeemers:a,scripts:o,signatures:i}};const isScriptSupported=e=>{if(!f.isNativeScript(e))return false;switch(e.kind){case f.NativeScriptKind.RequireAllOf:case f.NativeScriptKind.RequireAnyOf:case f.NativeScriptKind.RequireNOf:return true;default:return false}};const getTxWithStubWitness=async(e,t,r,i,a)=>{const o=s.Ed25519SignatureHex("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const n=e.withdrawals&&e.withdrawals.length>0?r.scripts.length:0;const d=t.scripts.length;const c=n+d+((null==i?void 0:i.length)||0);const l=new Map;for(let u=0;u<c;++u)l.set(randomPublicKey(),o);const f=mergeWitnesses({scripts:[],signatures:new Map},a);f.signatures=new Map([...f.signatures?f.signatures.entries():[],...l.entries()]);var h;f.scripts=[...null!==(h=f.scripts)&&void 0!==h?h:[],t,r];return f};const requiresStakingWitness=(e,t,r)=>{var s;const i=h.NativeScript.fromCore(t).hash();const a=m.RewardAccount.fromCredential({hash:i,type:p.CredentialType.ScriptHash},r);var o;const n=null!==(o=e.withdrawals())&&void 0!==o?o:new Map;var d;const c=(null!==(d=null===(s=e.certs())||void 0===s?void 0:s.values())&&void 0!==d?d:[]).map(e=>e.toCore());if(n.size>0&&n.has(e=>e===a))return true;for(const l of c){switch(l.__typename){case v.CertificateType.VoteDelegation:case v.CertificateType.StakeVoteDelegation:case v.CertificateType.StakeRegistrationDelegation:case v.CertificateType.VoteRegistrationDelegation:case v.CertificateType.StakeVoteRegistrationDelegation:case v.CertificateType.Registration:case v.CertificateType.Unregistration:case v.CertificateType.StakeDeregistration:case v.CertificateType.StakeDelegation:if(l.stakeCredential.type===p.CredentialType.ScriptHash&&i===l.stakeCredential.hash)return true}}return false};const walletManagerChannel=e=>`${e}-wallet-manager`;const walletChannel=e=>`${walletManagerChannel(e)}-wallet`;const repositoryChannel=e=>`${e}-wallet-repository`;const S={activate:g.RemoteApiPropertyType.MethodReturningPromise,activeWalletId$:g.RemoteApiPropertyType.HotObservable,deactivate:g.RemoteApiPropertyType.MethodReturningPromise,destroyData:g.RemoteApiPropertyType.MethodReturningPromise,switchNetwork:g.RemoteApiPropertyType.MethodReturningPromise};const isScript=e=>{return(null==e?void 0:e.__type)===f.ScriptType.Plutus||(null==e?void 0:e.__type)===f.ScriptType.Native};const isBip32PublicKeyHex=e=>"string"==typeof e&&128===e.length&&/^[\da-f]+$/i.test(e);const getScriptWalletId=async e=>c.Script.fromCore(e).hash().slice(0,32);const getExtendedAccountPublicKeyWalletId=async e=>i.blake2b.hash(e,16);const getKeyAgentWalletId=async e=>getExtendedAccountPublicKeyWalletId(await e.getExtendedAccountPublicKey());const getWalletId=async e=>{if(isScript(e))return getScriptWalletId(e);if(isBip32PublicKeyHex(e))return getExtendedAccountPublicKeyWalletId(e);return getKeyAgentWalletId(e)};const createScriptWitness=async(e,t,r,s,i,a,o)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(P);const n=e.ownSigners.map(e=>e.paymentScriptKeyPath);const d=e.ownSigners.map(e=>e.stakingScriptKeyPath);const c=requiresStakingWitness(i.body(),e.stakingScript,t.networkId);const l=[...n,...c?d:[]];const u=await (0,b.firstValueFrom)(s.wallets$);let f;for(const h of e.ownSigners){const m=u.find(e=>e.walletId===h.walletId);if(!m)throw new Error(`Wallet with id ${h.walletId} not found`);if(!isBip32Wallet(m))throw new Error("Only Bip32 wallets are supported");var p;const v=await r.signTransaction({options:{...o,additionalKeyPaths:[...null!==(p=null==o?void 0:o.additionalKeyPaths)&&void 0!==p?p:[],...l]},signContext:a,tx:i.toCbor()},{accountIndex:h.accountIndex,chainId:t,purpose:h.purpose,wallet:m});f=[...f?f.entries():[],...v.entries()]}return{scripts:[e.paymentScript,...c?[e.stakingScript]:[]],signatures:f?new Map(f):new Map}};const buildBip32Witnesser=(e,t,r,s,i)=>{return{signData:async t=>await s.signData(t,{accountIndex:i,chainId:r,purpose:a.KeyPurpose.STANDARD,wallet:e}),async witness(t,n,d){var c,l;const u=t.toCore();const f=t.getId();const h=(null==d?void 0:d.stubSign)!==void 0&&d.stubSign?await o.stubSignTransaction({context:n,signTransactionOptions:d,txBody:u.body}):await s.signTransaction({options:d,signContext:n,tx:t.toCbor()},{accountIndex:i,chainId:r,purpose:a.KeyPurpose.STANDARD,wallet:e});const m={auxiliaryData:u.auxiliaryData,body:u.body,id:f,isValid:t.isValid(),witness:{...u.witness,signatures:new Map([...h.entries(),...(null===(c=u.witness)||void 0===c?void 0:null===(l=c.signatures)||void 0===l?void 0:l.entries())||[]])}};var p;return{cbor:_.TxCBOR.serialize(m),context:{handleResolutions:null!==(p=n.handleResolutions)&&void 0!==p?p:[]},tx:m}}}};const buildNativeScriptWitnesser=(e,t,r,s,i)=>{if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(P);return{signData:async()=>{throw new Error("signData is not supported by this witnesser")},async witness(t,a,o){if(!isScriptSupported(e.paymentScript)||!isScriptSupported(e.stakingScript))throw new Error(P);let n;const d=t.toCore();const c=t.getId();if((null==o?void 0:o.stubSign)!==void 0&&o.stubSign)n=await getTxWithStubWitness(d.body,e.paymentScript,e.stakingScript,null==o?void 0:o.extraSigners);else{n=await createScriptWitness(e,r,s,i,new _.Transaction(w.TransactionBody.fromCore(d.body),new y.TransactionWitnessSet),a,o);const l=new Map;if(null==o?void 0:o.extraSigners){for(const u of null==o?void 0:o.extraSigners){const f=await u.sign(t.body());l.set(f.pubKey,f.signature)}}n.signatures=new Map([...n.signatures?n.signatures.entries():[],...l.entries()])}const h={auxiliaryData:d.auxiliaryData,body:d.body,id:c,isValid:t.isValid(),witness:mergeWitnesses(d.witness,n)};var m;return{cbor:_.TxCBOR.serialize(h),context:{handleResolutions:null!==(m=a.handleResolutions)&&void 0!==m?m:[]},tx:h}}}}},"../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/walletManager.js":(e,t,r)=>{"use strict";r.d(t,{WalletManager:()=>WalletManager,getWalletStoreId:()=>getWalletStoreId});var s=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/types.js");var i=r("../../node_modules/rxjs/dist/esm5/internal/firstValueFrom.js");var a=r("../../node_modules/rxjs/dist/esm5/internal/ReplaySubject.js");var o=r("../../node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");var n=r("../../node_modules/rxjs/dist/esm5/internal/lastValueFrom.js");var d=r("../../node_modules/@cardano-sdk/util/dist/esm/errors.js");var c=r("../../node_modules/@cardano-sdk/util/dist/esm/equals.js");var l=r("../../node_modules/@cardano-sdk/web-extension/dist/esm/walletManager/util.js");var u=r("../../node_modules/@cardano-sdk/crypto/dist/esm/index.js");var __classPrivateFieldSet=function(e,t,r,s,i){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?i.call(e,r):i?i.value=r:t.set(e,r),r};var __classPrivateFieldGet=function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};var f,h,m,p,v,_,w,y,g,b,P,S,C,k,j,x,T;const isAnyBip32Wallet=e=>e.type===s.WalletType.InMemory||e.type===s.WalletType.Ledger||e.type===s.WalletType.Trezor;const getWalletStoreId=(e,t,r)=>{if(void 0!==r&&0!==r){return`${t.networkId}-${t.networkMagic}-${e}-${r}`}return`${t.networkId}-${t.networkMagic}-${e}`};class WalletManager{switchNetwork(e){if(!__classPrivateFieldGet(this,f,"m",j).call(this))return Promise.resolve();const t={...__classPrivateFieldGet(this,h,"f"),chainId:e};return this.activate(t)}async initialize(){await (0,u.ready)();const{[__classPrivateFieldGet(this,g,"f")]:e}=await __classPrivateFieldGet(this,b,"f").get(__classPrivateFieldGet(this,g,"f"));if(!e){this.activeWalletId$.next(null);return}return this.activate(e)}async activate(e,t){if(!t&&__classPrivateFieldGet(this,f,"m",P).call(this,e)){return}const{walletId:r,chainId:s,accountIndex:a}=e;const o=await (0,i.firstValueFrom)(__classPrivateFieldGet(this,_,"f").wallets$);const n=o.find(e=>e.walletId===r);if(!n){throw new d.InvalidArgumentError("walletId",`Wallet ${r} not found`)}__classPrivateFieldGet(this,f,"m",k).call(this);__classPrivateFieldSet(this,h,e,"f");const c=getWalletStoreId(r,s,a);const l=await __classPrivateFieldGet(this,f,"m",S).call(this,c);const u=__classPrivateFieldGet(this,f,"m",T).call(this,n,r,s,a);const[m]=await Promise.all([__classPrivateFieldGet(this,p,"f").create(e,n,{stores:l,witnesser:u}),__classPrivateFieldGet(this,b,"f").set({[__classPrivateFieldGet(this,g,"f")]:e})]);this.activeWallet$.next({observableWallet:m,props:e});this.activeWalletId$.next(e)}async deactivate(){__classPrivateFieldGet(this,f,"m",k).call(this);await __classPrivateFieldGet(this,b,"f").remove(__classPrivateFieldGet(this,g,"f"));this.activeWalletId$.next(null)}shutdown(){__classPrivateFieldGet(this,f,"m",k).call(this)}async destroyData(e,t){await __classPrivateFieldGet(this,f,"m",C).call(this,e,t)}constructor({name:e},{walletFactory:t,storesFactory:r,logger:s,managerStorage:i,walletRepository:n,signingCoordinatorApi:d}){f.add(this);this.activeWalletId$=new a.ReplaySubject(1);this.activeWallet$=new o.BehaviorSubject(null);h.set(this,null);m.set(this,new Map);p.set(this,void 0);v.set(this,void 0);_.set(this,void 0);w.set(this,void 0);y.set(this,void 0);g.set(this,void 0);b.set(this,void 0);__classPrivateFieldSet(this,_,n,"f");__classPrivateFieldSet(this,p,t,"f");__classPrivateFieldSet(this,g,`${e}-active-wallet`,"f");__classPrivateFieldSet(this,b,i,"f");__classPrivateFieldSet(this,v,r,"f");__classPrivateFieldSet(this,y,s,"f");__classPrivateFieldSet(this,w,d,"f")}}h=new WeakMap,m=new WeakMap,p=new WeakMap,v=new WeakMap,_=new WeakMap,w=new WeakMap,y=new WeakMap,g=new WeakMap,b=new WeakMap,f=new WeakSet,P=function _WalletManager_isActive(e){var t,r,s;if(!__classPrivateFieldGet(this,h,"f"))return false;return(null===(t=__classPrivateFieldGet(this,h,"f"))||void 0===t?void 0:t.walletId)===e.walletId&&(null===(r=__classPrivateFieldGet(this,h,"f"))||void 0===r?void 0:r.accountIndex)===e.accountIndex&&(0,c.deepEquals)(null===(s=__classPrivateFieldGet(this,h,"f"))||void 0===s?void 0:s.chainId,e.chainId)},S=async function _WalletManager_getStores(e){let t=__classPrivateFieldGet(this,m,"f").get(e);if(!t){t=await __classPrivateFieldGet(this,v,"f").create({name:e});__classPrivateFieldGet(this,m,"f").set(e,t)}return t},C=async function _WalletManager_destroyWalletStores(e,t){var r;if((null===(r=__classPrivateFieldGet(this,h,"f"))||void 0===r?void 0:r.walletId)===e)throw new d.InvalidArgumentError("walletId","Cannot destroy active wallet");const s=await (0,i.firstValueFrom)(__classPrivateFieldGet(this,_,"f").wallets$);const a=s.flatMap(e=>{if(isAnyBip32Wallet(e)){return e.accounts.map(r=>getWalletStoreId(e.walletId,t,r.accountIndex))}return getWalletStoreId(e.walletId,t)}).filter(t=>t.includes(e));if(!a||0===a.length)return;for(const o of a){const c=await __classPrivateFieldGet(this,f,"m",S).call(this,o);__classPrivateFieldGet(this,y,"f").debug(`Destroying wallet store ${o}`);await (0,n.lastValueFrom)(c.destroy(),{defaultValue:null});__classPrivateFieldGet(this,m,"f").delete(o)}},k=function _WalletManager_deactivateWallet(){var e;const t=null===(e=this.activeWallet$)||void 0===e?void 0:e.getValue();__classPrivateFieldGet(this,f,"m",x).call(this);null==t?void 0:t.observableWallet.shutdown();__classPrivateFieldSet(this,h,null,"f")},j=function _WalletManager_hasActiveWallet(){return null!==__classPrivateFieldGet(this,h,"f")},x=function _WalletManager_stopEmittingFromActiveWallet(){__classPrivateFieldGet(this,f,"m",j).call(this)&&this.activeWallet$.next(null)},T=function _WalletManager_buildWitnesser(e,t,r,i){let a;switch(e.type){case s.WalletType.InMemory:case s.WalletType.Ledger:case s.WalletType.Trezor:a=(0,l.buildBip32Witnesser)(e,t,r,__classPrivateFieldGet(this,w,"f"),i);break;case s.WalletType.Script:default:a=(0,l.buildNativeScriptWitnesser)(e,t,r,__classPrivateFieldGet(this,w,"f"),__classPrivateFieldGet(this,_,"f"))}return a}},"../../node_modules/@cardano-sdk/web-extension/node_modules/ts-custom-error/dist/custom-error.mjs":(e,t,r)=>{"use strict";r.d(t,{CustomError:()=>i});function fixProto(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function fixStack(e,t){if(void 0===t)t=e.constructor;var r=Error.captureStackTrace;r&&r(e,t)}var s=function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return extendStatics(e,t)};return function(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();var i=function(e){s(CustomError,e);function CustomError(t){var r=this.constructor;var s=e.call(this,t)||this;Object.defineProperty(s,"name",{value:r.name,enumerable:false,configurable:true});fixProto(s,r.prototype);fixStack(s);return s}return CustomError}(Error);var __spreadArrays=function(){var e=arguments;for(var t=0,r=0,s=arguments.length;r<s;r++)t+=e[r].length;for(var i=Array(t),a=0,r=0;r<s;r++){for(var o=arguments[r],n=0,d=o.length;n<d;n++,a++)i[a]=o[n]}return i};function customErrorFactory(e,t){if(void 0===t)t=Error;function CustomError(){var r=arguments;var s=[];for(var i=0;i<arguments.length;i++)s[i]=r[i];if(!(this instanceof CustomError)){return new(CustomError.bind.apply(CustomError,__spreadArrays([void 0],s)))}t.apply(this,s);Object.defineProperty(this,"name",{value:e.name||t.name,enumerable:false,configurable:true});e.apply(this,s);fixStack(this,CustomError)}return Object.defineProperties(CustomError,{prototype:{value:Object.create(t.prototype,{constructor:{value:CustomError,writable:true,configurable:true}})}})}}}]);
//# sourceMappingURL=323.chunk.js.map